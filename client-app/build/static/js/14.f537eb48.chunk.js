(this.webpackJsonpemis=this.webpackJsonpemis||[]).push([[14],{538:function(e,t,n){"use strict";var a={formatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy",n=t,a=[{symbol:"dd",value:e.getDate()<10?"0".concat(e.getDate()):e.getDate()},{symbol:"MM",value:e.getMonth()+1<10?"0".concat(e.getMonth()+1):"".concat(e.getMonth()+1)},{symbol:"yyyy",value:e.getFullYear()},{symbol:"hh",value:e.getHours()<10?"0".concat(e.getHours()):e.getHours()},{symbol:"mm",value:e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes()}];return a.map((function(e){return n=n.replace(e.symbol,e.value),e.symbol})),n},formatMoney:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Intl.NumberFormat("vi-VN",{maximumFractionDigits:t,minimumFractionDigits:t});return n.format(e)}};t.a=a},600:function(e,t,n){"use strict";var a=n(9),c=n.n(a),i="/api/help-desk/modules";var r={getAll:function(){return c.a.get(i)},get:function(e){return c.a.get("".concat(i,"/").concat(e))},create:function(e){return c.a.post(i,e)},edit:function(e,t){return c.a.put("".concat(i,"/").concat(e),t)},remove:function(e){return c.a.delete("".concat(i,"/").concat(e))}};t.a=r},875:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ut}));var a=n(209),c=n(25),i=n(0),r=n.n(i),s=n(27),o=n(47),l=n(18),u=n(105),d=n(13),j=n(22),h=n.n(j),p=n(40),b=n(15),x=n(533),m=n(380),f=n(70),g=n(338),O=n(355),v=n(479),y=n(407),w=n(46),C=n(9),A=n.n(C),k="/api/help-desk/issues";var N={getAll:function(e){return A.a.get("".concat(k,"/filter/").concat(e))},getById:function(e){return A.a.get("".concat(k,"/").concat(e))},create:function(e){return A.a.post(k,e)},follow:function(e){return A.a.post("".concat(k,"/").concat(e,"/followers/follow"))},unFollow:function(e){return A.a.delete("".concat(k,"/").concat(e,"/followers/unFollow"))}},I=n(600),S=n(2),T=Object(x.a)((function(e){return{root:Object(b.a)({width:"100%"},e.breakpoints.down("sm"),{padding:e.spacing(1)}),formControl:{margin:0,marginBottom:e.spacing(1.5)},title:{fontWeight:"bold"},description:{fontStyle:"italic"},menuItem:{paddingTop:e.spacing(.5),paddingBottom:e.spacing(.5)}}})),M={moduleId:0,title:"",content:"",priority:1,severity:1};function D(){var e=T(),t=Object(s.f)(),n=Object(o.b)(),a=r.a.useState(M),i=Object(c.a)(a,2),u=i[0],j=i[1],b=r.a.useState([]),x=Object(c.a)(b,2),C=x[0],A=x[1],k=function(){var e=Object(p.a)(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(l.loadingActions.show()),e.prev=1,e.next=4,N.create(u);case 4:a=e.sent,n(l.alertActions.show(l.alertMessage.ACTION_SUCCESS,"success")),t.push("/help-desk/issues/".concat(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(l.alertActions.show(l.alertMessage.ACTION_FAILURE,"error"));case 12:return e.prev=12,n(l.loadingActions.hide()),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(l.loadingActions.show()),e.prev=1,e.t0=A,e.next=5,I.a.getAll();case 5:e.t1=e.sent,(0,e.t0)(e.t1),e.next=12;break;case 9:e.prev=9,e.t2=e.catch(1),n(l.alertActions.show(l.alertMessage.FETCH_FAILURE,"error"));case 12:return e.prev=12,n(l.loadingActions.hide()),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(){return e.apply(this,arguments)}}();return r.a.useEffect((function(){D()}),[]),Object(S.jsx)("div",{className:e.root,children:Object(S.jsxs)(m.a,{container:!0,children:[Object(S.jsxs)(m.a,{item:!0,xs:12,children:[Object(S.jsx)(f.a,{variant:"subtitle1",children:"Ch\u1ecdn module*"}),Object(S.jsx)(g.a,{fullWidth:!0,size:"small",variant:"outlined",className:e.formControl,children:Object(S.jsxs)(O.a,{labelId:"moduleId-label",margin:"dense",id:"moduleId",name:"moduleId",fullWidth:!0,value:u.moduleId,onChange:function(e){j(Object(d.a)(Object(d.a)({},u),{},{moduleId:e.target.value}))},children:[Object(S.jsx)(v.a,{value:0,className:e.menuItem,children:Object(S.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(S.jsx)(f.a,{variant:"body2",className:e.title,children:"[Nh\xf3m] - Ch\u1ecdn module"}),Object(S.jsx)(f.a,{variant:"caption",className:e.description,children:"Ch\u1ecdn module c\u1ea7n h\u1ed7 tr\u1ee3."})]})}),C.map((function(t,n){return Object(S.jsx)(v.a,{value:t.id,className:e.menuItem,children:Object(S.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(S.jsx)(f.a,{variant:"body2",className:e.title,children:"[".concat(t.category,"] - ").concat(t.name)}),Object(S.jsx)(f.a,{variant:"caption",className:e.description,children:t.description})]})},n)}))]})}),Object(S.jsx)(f.a,{variant:"subtitle1",children:"Ti\xeau \u0111\u1ec1*"}),Object(S.jsx)(y.a,{margin:"dense",className:e.formControl,variant:"outlined",fullWidth:!0,name:"title",value:u.title,onChange:function(e){j(Object(d.a)(Object(d.a)({},u),{},{title:e.target.value}))}}),Object(S.jsx)(f.a,{variant:"subtitle1",children:"M\u1ee9c \u0111\u1ed9 l\u1ed7i*"}),Object(S.jsx)(g.a,{fullWidth:!0,variant:"outlined",className:e.formControl,children:Object(S.jsxs)(O.a,{labelId:"severity-label",margin:"dense",id:"severity",name:"severity",value:u.severity,onChange:function(e){j(Object(d.a)(Object(d.a)({},u),{},{severity:e.target.value}))},children:[Object(S.jsx)(v.a,{value:1,children:"Nh\u1eb9"}),Object(S.jsx)(v.a,{value:2,children:"B\xecnh th\u01b0\u1eddng"}),Object(S.jsx)(v.a,{value:3,children:"Nghi\xeam tr\u1ecdng"}),Object(S.jsx)(v.a,{value:4,children:"R\u1ea5t nghi\xeam tr\u1ecdng"})]})}),Object(S.jsx)(f.a,{variant:"subtitle1",children:"\u0110\u1ed9 \u01b0u ti\xean*"}),Object(S.jsx)(g.a,{fullWidth:!0,variant:"outlined",className:e.formControl,children:Object(S.jsxs)(O.a,{labelId:"priority-label",margin:"dense",id:"priority",name:"priority",value:u.priority,onChange:function(e){j(Object(d.a)(Object(d.a)({},u),{},{priority:e.target.value}))},children:[Object(S.jsx)(v.a,{value:1,children:"Th\u1ea5p"}),Object(S.jsx)(v.a,{value:2,children:"B\xecnh th\u01b0\u1eddng"}),Object(S.jsx)(v.a,{value:3,children:"Cao"}),Object(S.jsx)(v.a,{value:4,children:"C\u1ea7n g\u1ea5p"})]})})]}),Object(S.jsxs)(m.a,{item:!0,xs:12,children:[Object(S.jsx)(f.a,{variant:"subtitle1",children:"M\xf4 t\u1ea3 chi ti\u1ebft*"}),Object(S.jsx)(g.a,{fullWidth:!0,variant:"outlined",className:e.formControl,children:Object(S.jsx)(w.j,{value:u.content,onChange:function(e){j(Object(d.a)(Object(d.a)({},u),{},{content:e}))}})})]}),Object(S.jsx)(g.a,{variant:"outlined",className:e.formControl,children:Object(S.jsx)(w.n,{icon:"plus",variant:"contained",color:"success",text:"T\u1ea1o m\u1edbi",onClick:k})})]})})}var F=n(23),U=n(112),E=n(406),R=n(417),B=n(418),_=n(419),L=n(415),W=n(416),z=n(466),H=n(420),q=n(535),P=[{text:"Kh\xf4ng \u0111\u1eb7t",variant:"secondary"},{text:"Nh\u1eb9",variant:"success"},{text:"B\xecnh th\u01b0\u1eddng",variant:"info"},{text:"Nghi\xeam tr\u1ecdng",variant:"warning"},{text:"R\u1ea5t nghi\xeam tr\u1ecdng",variant:"danger"}],G=[{text:"Kh\xf4ng \u0111\u1eb7t",variant:"secondary"},{text:"Th\u1ea5p",variant:"success"},{text:"B\xecnh th\u01b0\u1eddng",variant:"info"},{text:"Cao",variant:"warning"},{text:"C\u1ea7n g\u1ea5p",variant:"danger"}],K=[{text:"Issue m\u1edbi",icon:"exclamation-circle",color:"warning"},{text:"Issue m\u1edbi",icon:"exclamation-circle",color:"warning"},{text:"\u0110ang x\u1eed l\xfd",icon:"sync-alt",color:"info"},{text:"\u0110\xe3 x\u1eed l\xfd",icon:"question-circle",color:"primary"},{text:"\u0110\xe3 \u0111\xf3ng",icon:"check-circle",color:"success"},{text:"\u0110\xe3 h\u1ee7y",icon:"times-circle",color:"danger"},{text:"Ch\u1edd ph\xea duy\u1ec7t",icon:"hourglass-half",color:"warning"}],V=[{name:"T\u1ea1o m\u1edbi",apiUrl:"create",text:"\u0111\xe3 t\u1ea1o issue",needContent:!1,color:"danger",icon:"exclamation-circle"},{name:"Ti\u1ebfp nh\u1eadn",apiUrl:"assign",text:"\u0111\xe3 ti\u1ebfp nh\u1eadn",needContent:!1,color:"info",icon:"sync-alt"},{name:"\u0110\xe3 x\u1eed l\xfd",apiUrl:"resolve",text:"\u0111\xe3 x\u1eed l\xfd",needContent:!1,color:"primary",icon:"info-circle"},{name:"\u0110\xf3ng issue",apiUrl:"close",text:"\u0111\xe3 \u0111\xf3ng issue",needContent:!1,color:"success",icon:"check-circle"},{name:"B\xe1o l\u1ed7i",apiUrl:"reject",text:"\u0111\xe3 b\xe1o l\u1ed7i",needContent:!0,color:"warning",icon:"exclamation-triangle"},{name:"Tr\u1ea3 l\u1ea1i",apiUrl:"giveBack",text:"\u0111\xe3 tr\u1ea3 l\u1ea1i",needContent:!0,color:"warning",icon:"undo-alt"},{name:"Comment",apiUrl:"comment",text:"\u0111\xe3 comment",needContent:!0,color:"secondary",icon:"comments"},{name:"H\u1ee7y issue",apiUrl:"cancel",text:"\u0111\xe3 h\u1ee7y",needContent:!1,color:"danger",icon:"times-circle"},{name:"G\u1eedi ph\xea duy\u1ec7t",apiUrl:"createRequest",text:"\u0111\xe3 g\u1eedi ph\xea duy\u1ec7t",needContent:!0,color:"primary",icon:"paper-plane"},{name:"Ph\xea duy\u1ec7t",apiUrl:"approve",text:"\u0111\xe3 ph\xea duy\u1ec7t",needContent:!1,color:"success",icon:"signature"},{name:"T\u1eeb ch\u1ed1i",apiUrl:"deny",text:"\u0111\xe3 t\u1eeb ch\u1ed1i ph\xea duy\u1ec7t",needContent:!0,color:"danger",icon:"times"},{name:"\u0110\xednh k\xe8m",apiUrl:"attach",text:"\u0111\xe3 \u0111\xednh k\xe8m t\u1eadp tin",needContent:!1,color:"dark",icon:"paperclip"}],J=n(94),Y=n(97),Q=n(318),X=n(303),Z=n(96),$=n(26),ee=n(402),te=Object(x.a)((function(){return{secondary:{color:J.a[500]},success:{color:Y.a[500]},info:{color:Q.a[500]},warning:{color:X.a[500]},danger:{color:J.a[500]},primary:{color:Z.a[500]},dark:{color:Z.a[500]},inherit:{color:"inherit"}}}));function ne(e){var t=e.text,n=e.icon,a=e.color,c=te();return Object(S.jsx)(ee.a,{title:t,children:Object(S.jsx)("div",{children:Object(S.jsx)($.a,{icon:n,className:c[a],style:{fontSize:"1.25rem"}})})})}var ae=n(3),ce=n(91),ie=Object(x.a)((function(e){return{badge:{marginRight:e.spacing(.5),padding:e.spacing(.2),paddingLeft:e.spacing(.5),paddingRight:e.spacing(.5),borderRadius:"4px",fontWeight:"bold",fontSize:e.spacing(1.4)},secondary:{color:"white",backgroundColor:ce.a[500]},success:{color:"white",backgroundColor:Y.a[500]},info:{color:"white",backgroundColor:Q.a[500]},warning:{color:"black",backgroundColor:X.a[500]},danger:{color:"white",backgroundColor:J.a[500]},primary:{color:"white",backgroundColor:Z.a[500]},dark:{color:"white",backgroundColor:"black"},inherit:{color:"inherit",backgroundColor:"inherit"}}}));function re(e){var t=e.text,n=e.variant,a=ie();return Object(S.jsx)("span",{className:Object(ae.a)(a.badge,a[n]),children:t})}var se=n(405),oe=n(204),le=n(412),ue=n(327),de=n(383),je=n(385),he=n(386),pe=n(480),be=n(404),xe=n(465),me=n(387),fe=Object(x.a)((function(e){var t;return{counter:(t={display:"flex",marginRight:e.spacing(3)},Object(b.a)(t,e.breakpoints.down("sm"),{marginRight:e.spacing(2)}),Object(b.a)(t,"alignItems","center"),Object(b.a)(t,"fontSize",e.spacing(2)),Object(b.a)(t,"opacity","0.8"),t)}}));function ge(e){var t=e.icon,n=e.value,a=e.text,c=e.color,i=fe();return Object(S.jsxs)("div",{className:i.counter,children:[Object(S.jsx)($.a,{icon:t,style:{fontSize:"inherit",color:c}})," ".concat(n," "),Object(S.jsx)(z.a,{smDown:!0,children:a})]})}var Oe=Object(x.a)((function(e){return{toolbar:{display:"flex",flexDirection:"column",height:"auto"},title:{flexGrow:1},row:{display:"flex",flexDirection:"row",width:"100%",paddingTop:e.spacing(1)},rowRes:Object(b.a)({display:"flex",flexDirection:"row",width:"100%",paddingTop:e.spacing(1)},e.breakpoints.down("xs"),{flexDirection:"column"}),actions:{display:"flex",alignItems:"flex-end",color:e.palette.text.primary,paddingRight:e.spacing(2)},search:Object(b.a)({color:e.palette.text.secondary},e.breakpoints.down("xs"),{flexGrow:1}),input:Object(b.a)({width:200},e.breakpoints.down("xs"),{width:"100%"})}}));function ve(e){var t=e.title,n=e.keyWord,a=e.counter,i=e.filterModules,s=e.onChangeKeyWord,o=e.onChangeFilterModules,l=Oe(),u=r.a.useState(!1),d=Object(c.a)(u,2),j=d[0],h=d[1],p=r.a.useState(!1),b=Object(c.a)(p,2),x=b[0],m=b[1],g=function(){h(!1)};r.a.useEffect((function(){0===i.filter((function(e){return!e.checked})).length?m(!0):m(!1)}),[i]);var O=function(e){o(i.map((function(t){return t.name===e.target.name&&(t.checked=e.target.checked),t})))};return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(se.a,{className:l.toolbar,children:[Object(S.jsxs)("div",{className:l.rowRes,children:[Object(S.jsx)(f.a,{noWrap:!0,className:l.title,variant:"h6",id:"tableTitle",component:"div",children:t}),Object(S.jsxs)("div",{className:l.actions,children:[Object(S.jsx)("div",{className:l.actions,children:Object(S.jsx)(w.n,{tooltip:"L\u1ecdc theo module",text:"Module",icon:"filter",color:"primary",onClick:function(){h(!0)}})}),Object(S.jsx)("div",{className:l.search,children:Object(S.jsx)(oe.a,{className:l.input,id:"input-with-icon-adornment",onChange:function(e){var t;t=e.target.value,s(t)},value:n,startAdornment:Object(S.jsx)(le.a,{position:"start",children:Object(S.jsx)($.a,{icon:"search",style:{fontSize:"0.9rem",fontWeight:200}})}),endAdornment:""!==n&&Object(S.jsx)(le.a,{position:"end",children:Object(S.jsx)(ue.a,{edge:"end","aria-label":"toggle password visibility",onClick:function(){s("")},children:Object(S.jsx)($.a,{icon:"times",style:{fontSize:"0.9rem",fontWeight:200}})})})})})]})]}),Object(S.jsxs)("div",{className:l.row,children:[Object(S.jsx)(ge,{icon:"bug",color:"black",value:a.total,text:"issue"}),Object(S.jsx)(ge,{icon:"exclamation-circle",color:X.a[500],value:a.new,text:"issue m\u1edbi"}),Object(S.jsx)(ge,{icon:"sync-alt",color:Q.a[500],value:a.process,text:"issue \u0111ang x\u1eed l\xfd"}),Object(S.jsx)(ge,{icon:"question-circle",color:Z.a[500],value:a.resolved,text:"issue \u0111\xe3 x\u1eed l\xfd"}),Object(S.jsx)(ge,{icon:"check-circle",color:Y.a[500],value:a.closed,text:"issue \u0111\xe3 \u0111\xf3ng"})]})]}),Object(S.jsxs)(de.a,{fullWidth:!0,open:j,onClose:g,"aria-labelledby":"form-dialog-title",children:[Object(S.jsx)(je.a,{id:"form-dialog-title",children:"L\u1ecdc theo module"}),Object(S.jsx)(E.a,{}),Object(S.jsx)(he.a,{children:Object(S.jsxs)(pe.a,{children:[Object(S.jsx)(be.a,{control:Object(S.jsx)(xe.a,{checked:x,onChange:function(e){var t=i.map((function(t){return t.checked=e.target.checked,t}));o(t)}}),label:"Ch\u1ecdn t\u1ea5t c\u1ea3",color:"primary"}),i.map((function(e,t){return Object(S.jsx)(be.a,{control:Object(S.jsx)(xe.a,{checked:e.checked,onChange:O,name:e.name}),label:e.name,color:"primary"},t)}))]})}),Object(S.jsx)(E.a,{}),Object(S.jsx)(me.a,{children:Object(S.jsx)(w.n,{tooltip:"\u0110\xf3ng l\u1ea1i",text:"\u0110\xf3ng l\u1ea1i",icon:"times",color:"danger",onClick:g})})]})]})}var ye=Object(x.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{width:"100%",tableLayout:"fixed"},footer:{display:"flex",justifyContent:"flex-end",flexDirection:"row",paddingBottom:e.spacing(2),paddingRight:e.spacing(2)},pagination:{"& > *":{marginTop:e.spacing(2)}},textMute:{opacity:"0.8",fontSize:e.spacing(1.5)},title:Object(b.a)({flexGrow:1},e.breakpoints.down("sm"),{fontSize:"1rem",lineHeight:1.5}),cell:{display:"flex",flexDirection:"row"},cellContainer:Object(b.a)({width:"100%"},e.breakpoints.down("sm"),{padding:e.spacing(.75),"&:last-child":{padding:e.spacing(.75)}}),status:{marginRight:e.spacing(1),alignItems:"center",verticalAlign:"middle",display:"flex"}}}));function we(e){var t=e.data,n=e.title,i=e.onFollow,s=e.onUnFollow,o=ye(),l=P,u=G,d=K,j=r.a.useState(0),h=Object(c.a)(j,2),p=h[0],b=h[1],x=r.a.useState(""),m=Object(c.a)(x,2),g=m[0],O=m[1],v=r.a.useState({total:0,closed:0,new:0,process:0,resolved:0}),y=Object(c.a)(v,2),C=y[0],A=y[1],k=r.a.useState([]),N=Object(c.a)(k,2),I=N[0],T=N[1],M=r.a.useState([]),D=Object(c.a)(M,2),V=D[0],J=D[1],Y=function(e){b(e-1)};return r.a.useEffect((function(){var e=Object(a.a)(Array.from(new Set(t.map((function(e){return e.moduleName})))));J(e.map((function(e){return{name:e,checked:!0}})))}),[t]),r.a.useEffect((function(){var e=[];t.map((function(t){return(t.title.toUpperCase().includes(g.toUpperCase())||t.id.toString()===g)&&V.filter((function(e){return e.checked})).map((function(e){return e.name})).includes(t.moduleName)&&e.push(t),!0})),T(e)}),[t,V,g]),r.a.useEffect((function(){var e=0,t=0,n=0,a=0,c=0;I.map((function(i){switch(e++,i.status){case 1:t++;break;case 2:n++;break;case 3:a++;break;case 4:c++}return i})),A({total:e,new:t,process:n,resolved:a,closed:c}),b(0)}),[I]),Object(S.jsx)("div",{className:o.root,children:Object(S.jsxs)(U.a,{className:o.paper,children:[Object(S.jsx)(ve,{title:n,keyWord:g,onChangeKeyWord:function(e){O(e)},counter:C,filterModules:V,onChangeFilterModules:function(e){J(e)}}),Object(S.jsx)(E.a,{}),Object(S.jsx)(R.a,{children:Object(S.jsx)(B.a,{className:o.table,"aria-labelledby":"tableTitle",size:"small","aria-label":"enhanced table",children:Object(S.jsx)(_.a,{children:I.slice(10*p,10*p+10).map((function(e){return Object(S.jsx)(L.a,{hover:!0,children:Object(S.jsx)(W.a,{className:o.cellContainer,children:Object(S.jsxs)("div",{className:o.cell,children:[Object(S.jsx)("div",{className:o.status,children:Object(S.jsx)(ne,{text:d[e.status].text,icon:d[e.status].icon,color:d[e.status].color})}),Object(S.jsxs)("div",{style:{flexGrow:1,width:"70%"},children:[Object(S.jsx)("div",{style:{display:"flex",width:"100%"},children:Object(S.jsx)(f.a,{display:"block",noWrap:!0,component:"h6",className:o.title,children:Object(S.jsx)(F.a,{style:{textDecoration:"none"},to:"".concat("/help-desk/issues","/").concat(e.id),children:"[#".concat(e.id,"] ").concat(e.title)})})}),Object(S.jsxs)(f.a,{className:o.textMute,children:[Object(S.jsx)(z.a,{xsDown:!0,children:Object(S.jsx)(re,{text:l[e.severity].text,variant:l[e.severity].variant})}),Object(S.jsx)(z.a,{xsDown:!0,children:Object(S.jsx)(re,{text:u[e.priority].text,variant:u[e.priority].variant})}),Object(S.jsx)(re,{text:e.moduleName,variant:"primary"}),Object(S.jsx)(z.a,{smDown:!0,children:"T\u1ea1o b\u1edfi ".concat(e.createdBy," l\xfac ").concat(e.createdTime)})]})]}),Object(S.jsx)("div",{children:e.followed?Object(S.jsx)(w.n,{tooltip:"H\u1ee7y theo d\xf5i issue n\xe0y",text:"H\u1ee7y theo d\xf5i",icon:"eye-slash",color:"danger",hideTitleOnMobile:!0,onClick:function(){s(e.id)}}):Object(S.jsx)(w.n,{tooltip:"Theo d\xf5i issue n\xe0y",text:"Theo d\xf5i",icon:"eye",color:"primary",hideTitleOnMobile:!0,onClick:function(){i(e.id)}})})]})})},e.id)}))})})}),Object(S.jsx)(H.a,{className:o.footer,component:"div",children:Object(S.jsxs)("div",{className:o.pagination,children:[Object(S.jsx)(z.a,{xsDown:!0,children:Object(S.jsx)(q.a,{count:Math.ceil(I.length/10),page:p+1,onChange:function(e,t){Y(t)},shape:"rounded"})}),Object(S.jsx)(z.a,{smUp:!0,children:Object(S.jsx)(q.a,{count:Math.ceil(I.length/10),page:p+1,onChange:function(e,t){Y(t)},shape:"rounded",size:"small"})})]})})]})})}function Ce(){var e=Object(s.h)().filter,t=Object(o.b)(),n=r.a.useState([]),a=Object(c.a)(n,2),i=a[0],u=a[1],d=r.a.useState(""),j=Object(c.a)(d,2),b=j[0],x=j[1],m=function(){var n=Object(p.a)(h.a.mark((function n(){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(l.loadingActions.show()),n.prev=1,n.t0=u,n.next=5,N.getAll(e);case 5:n.t1=n.sent,(0,n.t0)(n.t1),n.next=12;break;case 9:n.prev=9,n.t2=n.catch(1),t(l.alertActions.show(l.alertMessage.FETCH_FAILURE,"error"));case 12:return n.prev=12,t(l.loadingActions.hide()),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[1,9,12,15]])})));return function(){return n.apply(this,arguments)}}(),f=function(){var e=Object(p.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(l.loadingActions.show()),e.prev=1,e.next=4,N.follow(n);case 4:t(l.alertActions.show(l.alertMessage.ACTION_SUCCESS,"success")),m(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),t(l.loadingActions.hide()),t(l.alertActions.show(l.alertMessage.ACTION_FAILURE,"error"));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(l.loadingActions.show()),e.prev=1,e.next=4,N.unFollow(n);case 4:t(l.alertActions.show(l.alertMessage.ACTION_SUCCESS,"success")),m(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),t(l.loadingActions.hide()),t(l.alertActions.show(l.alertMessage.ACTION_FAILURE,"error"));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.useEffect((function(){switch(m(),e){case"my-supported":x("Issue b\u1ea1n \u0111\xe3 nh\u1eadn h\u1ed7 tr\u1ee3");break;case"all":x("T\u1ea5t c\u1ea3 issue");break;case"waiting":x("Issue \u0111ang ch\u1edd ph\u1ea3n h\u1ed3i");break;default:x("Issue c\u1ee7a b\u1ea1n")}}),[e]),Object(S.jsx)(we,{title:b,data:i,onFollow:f,onUnFollow:g})}var Ae="GET_ISSUE_DETAIL_SUCCESS",ke="GET_ISSUE_DETAIL_FAILURE",Ne={issue:{category:"",content:"",createdBy:"",createdTime:new Date,followed:!1,id:0,moduleName:"",createdByFullName:"",moduleId:0,supportedBy:"",supportedByFullName:"",priority:0,severity:0,status:0,title:"",attachments:[]},activities:[],validActions:[]},Ie={state:Ne,getIssueDetail:function(e){},createActivity:function(e,t,n){},createRequest:function(e,t){},attach:function(e,t){}};function Se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ae:return{issue:t.payload.issue,activities:t.payload.activities,validActions:t.payload.validActions};case ke:return Ne;default:return e}}var Te=function(e){return"/api/help-desk/issues/".concat(e,"/activities")};var Me={getAll:function(e){return A.a.get(Te(e))},getValidActions:function(e){return A.a.get("".concat(Te(e),"/validAction"))},create:function(e,t,n){return A.a.post("".concat(Te(e),"/").concat(t),n)},createRequest:function(e,t){return A.a.post("".concat(Te(e),"/createRequest"),t)},attach:function(e,t){var n=new FormData;return n.append("files",t,t.name),A.a.post("".concat(Te(e),"/attach"),n,{headers:{"Content-Type":"multipart/form-data"}})}},De=function(){var e=Object(p.a)(h.a.mark((function e(t,n){var a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=function(){return{type:ke}},a=function(e,t,n){return{type:Ae,payload:{issue:e,activities:t,validActions:n}}},l.store.dispatch(l.loadingActions.show()),Promise.all([N.getById(t),Me.getAll(t),Me.getValidActions(t)]).then((function(e){n(a(e[0],e[1],e[2]))})).catch((function(){n(c()),l.store.dispatch(l.alertActions.show(l.alertMessage.FETCH_FAILURE,"error"))})).finally((function(){l.store.dispatch(l.loadingActions.hide())}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(p.a)(h.a.mark((function e(t,n,a,c){var i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=V)[n].needContent||""!==a.content){e.next=5;break}l.store.dispatch(l.alertActions.show("N\u1ed9i dung kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!","error")),e.next=17;break;case 5:return l.store.dispatch(l.loadingActions.show()),e.prev=6,e.next=9,Me.create(t,i[n].apiUrl,a);case 9:l.store.dispatch(l.alertActions.show(l.alertMessage.ACTION_SUCCESS,"success")),De(t,c),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),l.store.dispatch(l.alertActions.show(l.alertMessage.ACTION_FAILURE,"error")),l.store.dispatch(l.loadingActions.hide());case 17:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t,n,a,c){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(p.a)(h.a.mark((function e(t,n,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.store.dispatch(l.loadingActions.show()),e.prev=1,e.next=4,Me.createRequest(t,n);case 4:l.store.dispatch(l.alertActions.show(l.alertMessage.ACTION_SUCCESS,"success")),De(t,a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),l.store.dispatch(l.alertActions.show(l.alertMessage.ACTION_FAILURE,"error")),l.store.dispatch(l.loadingActions.hide());case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,a){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(p.a)(h.a.mark((function e(t,n,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.store.dispatch(l.loadingActions.show()),e.prev=1,e.next=4,Me.attach(t,n);case 4:l.store.dispatch(l.alertActions.show(l.alertMessage.ACTION_SUCCESS,"success")),De(t,a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),l.store.dispatch(l.alertActions.show(l.alertMessage.ACTION_FAILURE,"error")),l.store.dispatch(l.loadingActions.hide());case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,a){return e.apply(this,arguments)}}(),Re={getIssueDetail:De,createActivity:Fe,createRequest:Ue,attach:Ee},Be=Object(i.createContext)(Ie);function _e(e){var t=e.children,n=r.a.useReducer(Se,Ne),a=Object(c.a)(n,2),i=a[0],s=a[1],o={state:i,getIssueDetail:function(e){Re.getIssueDetail(e,s)},createActivity:function(e,t,n){Re.createActivity(e,t,n,s)},createRequest:function(e,t){Re.createRequest(e,t,s)},attach:function(e,t){Re.attach(e,t,s)}};return Object(S.jsx)(Be.Provider,{value:o,children:t})}var Le=n(481),We=n(482),ze=n(483),He=Object(x.a)((function(e){return{cardContent:Object(b.a)({padding:e.spacing(2)},e.breakpoints.down("xs"),{fontSize:"12px",padding:e.spacing(1)}),cardHeader:Object(b.a)({padding:e.spacing(1),paddingLeft:e.spacing(2)},e.breakpoints.down("xs"),{paddingLeft:e.spacing(1)}),title:Object(b.a)({fontWeight:"bold",alignItems:"center"},e.breakpoints.down("xs"),{fontSize:"14px"}),cell:{display:"flex",flexDirection:"row",width:"100%"},status:{marginRight:e.spacing(1),alignItems:"center",verticalAlign:"middle",display:"flex"}}}));function qe(){var e=He(),t=K,n=P,a=G,c=r.a.useContext(Be).state.issue;return Object(S.jsxs)(Le.a,{children:[Object(S.jsx)(We.a,{title:Object(S.jsxs)("div",{className:e.cell,children:[Object(S.jsx)("div",{className:e.status,children:Object(S.jsx)(ne,{text:t[c.status].text,icon:t[c.status].icon,color:t[c.status].color})}),Object(S.jsxs)("div",{style:{flexGrow:1},children:[Object(S.jsx)(f.a,{variant:"h6",className:e.title,children:"[#".concat(c.id,"] ").concat(c.title)}),Object(S.jsx)(z.a,{xsDown:!0,children:Object(S.jsxs)(f.a,{children:[Object(S.jsx)(re,{text:n[c.severity].text,variant:n[c.severity].variant}),Object(S.jsx)(re,{text:a[c.priority].text,variant:a[c.priority].variant}),Object(S.jsx)(re,{text:c.moduleName,variant:"primary"})]})})]})]}),className:e.cardHeader}),Object(S.jsx)(E.a,{}),Object(S.jsx)(ze.a,{className:e.cardContent,children:Object(S.jsx)("div",{dangerouslySetInnerHTML:{__html:c.content}})})]})}var Pe=n(484),Ge=n(486),Ke=n(487),Ve=n(488),Je=n(538),Ye=Object(x.a)((function(e){return{stepper:Object(b.a)({padding:e.spacing(1)},e.breakpoints.down("xs"),{fontSize:"12px"})}}));function Qe(){var e=Ye(),t=r.a.useContext(Be).state.activities,n=V;return Object(S.jsx)(w.l,{title:"L\u1ecbch s\u1eed",noPadding:!0,children:Object(S.jsx)(Pe.a,{orientation:"vertical",className:e.stepper,children:t.map((function(e,t){return Object(S.jsxs)(Ge.a,{active:!0,children:[Object(S.jsx)(Ke.a,{children:"".concat(e.createdByFullName," ").concat(n[e.activityCode].text," l\xfac ").concat(Je.a.formatDate(new Date(e.createdTime),"hh:mm dd/MM/yyyy"))}),""!==e.content&&null!==e.content&&void 0!==e.content&&Object(S.jsx)(Ve.a,{children:Object(S.jsx)("div",{children:Object(S.jsx)("div",{dangerouslySetInnerHTML:{__html:e.content}})})})]},t)}))})})}function Xe(e){var t=e.activityCode,n=r.a.useContext(Be),a=n.state,i=n.createActivity,s=a.validActions,o=V,l=r.a.useState(""),u=Object(c.a)(l,2),d=u[0],j=u[1],b=r.a.useState(!1),x=Object(c.a)(b,2),f=x[0],g=x[1],O=function(){var e=Object(p.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(!1),n={activityCode:t,createdBy:"",createdByFullName:"",createdTime:new Date,issueId:a.issue.id,content:d},i(a.issue.id,t,n);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.includes(t)?Object(S.jsxs)(m.a,{item:!0,children:[Object(S.jsx)(w.k,{title:o[t].name,onClose:function(){g(!1)},open:f,onSubmit:O,children:Object(S.jsx)(m.a,{container:!0,spacing:1,alignItems:"flex-end",children:Object(S.jsx)(m.a,{item:!0,xs:12,children:Object(S.jsx)(w.j,{value:d,onChange:function(e){j(e)}})})})}),Object(S.jsx)(w.n,{variant:"contained",color:o[t].color,tooltip:o[t].name,icon:o[t].icon,text:o[t].name,onClick:function(){j(""),g(!0)}})]}):Object(S.jsx)(S.Fragment,{})}var Ze=n(468),$e=n(195);function et(){var e=Object(o.b)(),t=r.a.useContext(Be),n=t.state,i=t.createRequest,s=n.validActions,u=V,d=r.a.useState(""),j=Object(c.a)(d,2),b=j[0],x=j[1],g=r.a.useState(""),O=Object(c.a)(g,2),v=O[0],y=O[1],C=r.a.useState(!1),A=Object(c.a)(C,2),k=A[0],N=A[1],I=r.a.useState([]),T=Object(c.a)(I,2),M=T[0],D=T[1],F=function(){var t=Object(p.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(l.loadingActions.show()),t.prev=1,t.next=4,$e.a.getApproverByKeyWord(v);case 4:n=t.sent,M.map((function(e){return e.userNumber})).includes(n.userNumber)||D([].concat(Object(a.a)(M),[{fullName:n.fullName,userNumber:n.userNumber}])),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(l.alertActions.show("Kh\xf4ng t\xecm th\u1ea5y ng\u01b0\u1eddi n\xe0y trong danh s\xe1ch ph\xea duy\u1ec7t!","error"));case 11:return t.prev=11,e(l.loadingActions.hide()),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(){return t.apply(this,arguments)}}(),U=function(){var t=Object(p.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:0===M.length?e(l.alertActions.show("Ph\u1ea3i c\xf3 t\u1ed1i thi\u1ec3u 01 ng\u01b0\u1eddi ph\xea duy\u1ec7t!","error")):(N(!1),i(n.issue.id,{activity:{activityCode:8,createdBy:"",createdByFullName:"",createdTime:new Date,issueId:n.issue.id,content:b},approvers:M.map((function(e){return e.userNumber}))}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return s.includes(8)?Object(S.jsxs)(m.a,{item:!0,children:[Object(S.jsx)(w.k,{title:u[8].name,onClose:function(){N(!1)},open:k,onSubmit:U,children:Object(S.jsxs)(m.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(S.jsx)(m.a,{item:!0,xs:12,md:6,children:Object(S.jsx)(w.p,{label:"M\xe3 s\u1ed1/H\u1ecd t\xean ng\u01b0\u1eddi ph\xea duy\u1ec7t",type:"text",value:v,onChange:function(e){y(e.target.value)}})}),Object(S.jsx)(m.a,{item:!0,xs:12,md:6,container:!0,spacing:1,children:Object(S.jsx)(m.a,{item:!0,children:Object(S.jsx)(w.n,{text:"Ph\xea duy\u1ec7t",color:"success",icon:"signature",variant:"contained",onClick:F})})}),Object(S.jsx)(m.a,{item:!0,xs:12,container:!0,spacing:1,alignItems:"stretch",children:Object(S.jsxs)(m.a,{item:!0,xs:12,md:6,children:[Object(S.jsx)(f.a,{variant:"caption",children:"Ng\u01b0\u1eddi ph\xea duy\u1ec7t:"}),Object(S.jsx)("div",{children:M.map((function(e){return Object(S.jsx)(Ze.a,{style:{margin:"4px"},label:"".concat(e.userNumber,"-").concat(e.fullName),onDelete:function(){var t;t=e.userNumber,D(M.filter((function(e){return e.userNumber!==t})))},color:"primary",variant:"outlined",size:"small"},e.userNumber)}))})]})}),Object(S.jsx)(m.a,{item:!0,xs:12,children:Object(S.jsx)(w.j,{value:b,onChange:function(e){x(e)}})})]})}),Object(S.jsx)(w.n,{variant:"contained",color:u[8].color,tooltip:u[8].name,icon:u[8].icon,text:u[8].name,onClick:function(){x(""),D([]),N(!0)}})]}):Object(S.jsx)(S.Fragment,{})}function tt(){var e=r.a.useContext(Be),t=e.state,n=e.attach,a=t.validActions,c=V,i=function(){var e=Object(p.a)(h.a.mark((function e(a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Array.isArray(a)&&n(t.issue.id,a[0]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.includes(11)?Object(S.jsx)(m.a,{item:!0,children:Object(S.jsx)(w.q,{title:"Ch\u1ecdn t\u1eadp tin t\u1ea3i l\xean",variant:"contained",color:c[11].color,text:c[11].name,tooltip:c[11].name,filesLimit:1,acceptedFiles:[".doc",".docx",".xls",".xlsx",".pdf",".rar",".zip"],onSubmit:i})}):Object(S.jsx)(S.Fragment,{})}var nt=Object(x.a)((function(e){return{actions:{padding:e.spacing(1)}}}));function at(){var e=nt(),t=r.a.useContext(Be).state.validActions;return Object(S.jsx)(w.l,{title:"Thao t\xe1c",noPadding:!0,children:Object(S.jsxs)(m.a,{container:!0,spacing:1,className:e.actions,children:[t.filter((function(e){return 8!==e&&11!==e})).map((function(e){return Object(S.jsx)(Xe,{activityCode:e},e)})),Object(S.jsx)(et,{}),Object(S.jsx)(tt,{})]})})}var ct=Object(x.a)((function(e){return{actions:{padding:e.spacing(1)}}}));function it(){var e=ct(),t=r.a.useContext(Be).state.issue,n=r.a.useContext(Be).state.issue.attachments;return Object(S.jsx)(w.l,{title:"T\xe0i li\u1ec7u \u0111\xednh k\xe8m",noPadding:!0,children:Object(S.jsx)(m.a,{container:!0,spacing:1,className:e.actions,direction:"row",children:n.map((function(e){return Object(S.jsxs)(m.a,{item:!0,xs:12,md:4,container:!0,direction:"column",children:[Object(S.jsx)(m.a,{item:!0,children:Object(S.jsx)(w.i,{filename:e.fileName,label:e.fileName,url:"/api/help-desk/issues/downloadAttachment/".concat(t.id,"?fileName=").concat(e.fileName)})}),Object(S.jsx)(m.a,{item:!0,children:Object(S.jsx)(f.a,{variant:"caption",children:"".concat(e.createdBy,"-").concat(e.createdByFullName," t\u1ea1o l\xfac ").concat(Je.a.formatDate(new Date(e.createdTime),"dd/MM/yyyy"))})})]},e.fileName)}))})})}function rt(){var e=Object(s.h)().issueId,t=r.a.useContext(Be).getIssueDetail;return r.a.useEffect((function(){t(e)}),[e]),Object(S.jsxs)(m.a,{container:!0,alignContent:"stretch",spacing:2,children:[Object(S.jsx)(m.a,{item:!0,xs:12,children:Object(S.jsx)(qe,{})}),Object(S.jsx)(m.a,{item:!0,xs:12,children:Object(S.jsx)(Qe,{})}),Object(S.jsx)(m.a,{item:!0,xs:12,children:Object(S.jsx)(at,{})}),Object(S.jsx)(m.a,{item:!0,xs:12,children:Object(S.jsx)(it,{})})]})}function st(){return Object(S.jsx)(_e,{children:Object(S.jsx)(rt,{})})}function ot(){var e=Object(s.i)().path;return Object(S.jsxs)(s.c,{children:[Object(S.jsx)(s.a,{path:"".concat(e,"/create-issue"),component:D}),Object(S.jsx)(s.a,{path:"".concat(e,"/list/:filter"),component:Ce}),Object(S.jsx)(s.a,{path:"".concat(e,"/issues/:issueId"),component:st})]})}var lt=r.a.lazy((function(){return n.e(19).then(n.bind(null,881))}));function ut(){var e=Object(s.i)().path,t=Object(o.b)(),n=r.a.useState(!1),i=Object(c.a)(n,2),d=i[0],j=i[1];return r.a.useEffect((function(){t(l.layoutActions.setActivePluginId(u.e.id)),Object(u.b)().then((function(e){j(e)})).catch((function(){j(!1)}))}),[]),r.a.useEffect((function(){var e=d?Object(a.a)(u.a):[];t(l.layoutActions.setMenuList([].concat(Object(a.a)(u.d),Object(a.a)(e))))}),[d]),Object(S.jsxs)(s.c,{children:[d&&Object(S.jsx)(s.a,{path:"".concat(e,"/admin"),component:lt}),Object(S.jsx)(s.a,{path:"".concat(e),component:ot})]})}}}]);