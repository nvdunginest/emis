(this.webpackJsonpemis=this.webpackJsonpemis||[]).push([[10],{537:function(e,t,n){"use strict";var a={formatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy",n=t,a=[{symbol:"dd",value:e.getDate()<10?"0".concat(e.getDate()):e.getDate()},{symbol:"MM",value:e.getMonth()+1<10?"0".concat(e.getMonth()+1):"".concat(e.getMonth()+1)},{symbol:"yyyy",value:e.getFullYear()},{symbol:"hh",value:e.getHours()<10?"0".concat(e.getHours()):e.getHours()},{symbol:"mm",value:e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes()}];return a.map((function(e){return n=n.replace(e.symbol,e.value),e.symbol})),n},formatMoney:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Intl.NumberFormat("vi-VN",{maximumFractionDigits:t});return n.format(e)}};t.a=a},570:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(22),r=n.n(a),c=n(40),i=n(25),o=n(13),l=n(0),s=n.n(l),u=n(46),d=n(571),j=n(2),h=function(e){return e.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{label:"[".concat(e.code,"]-").concat(e.name)})}))};function p(e){var t=e.selectedProject,n=e.onChange,a=s.a.useState([]),o=Object(i.a)(a,2),l=o[0],p=o[1],m=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=p,e.next=4,d.a.getAll();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),p([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return s.a.useEffect((function(){var e=function(){var e=localStorage.getItem("projectCode"),t=localStorage.getItem("projectName");return null===e||null===t?null:{code:e,name:t,label:"[".concat(e,"]-").concat(t)}}();null!==e&&n({code:e.code,name:e.name}),m()}),[]),Object(j.jsx)(u.d,{required:!0,label:"D\u1ef1 \xe1n",options:h(l),optionLabel:"label",value:null!==t?{code:t.code,name:t.name,label:"[".concat(t.code,"]-").concat(t.name)}:null,getOptionSelected:function(e,t){return e.code===t.code},onChange:function(e){var t;null!==e&&(n({code:e.code,name:e.name}),t=e,localStorage.setItem("projectCode",t.code),localStorage.setItem("projectName",t.name))}})}},571:function(e,t,n){"use strict";var a=n(9),r=n.n(a),c="/api/project-system/projects";var i={getAll:function(){return r.a.get(c)},get:function(e){return r.a.get("".concat(c,"/").concat(e))}};t.a=i},625:function(e,t,n){"use strict";var a=n(9),r=n.n(a),c="/api/project-system/serviceMasters";var i={getAll:function(){return r.a.get(c)},get:function(e){return r.a.get("".concat(c,"/").concat(e))}};t.a=i},626:function(e,t,n){"use strict";var a=n(9),r=n.n(a),c="/api/project-system/items";var i={getAll:function(e){return r.a.get("".concat(c,"?clusterCode=").concat(e))},report:function(e){return r.a.get("".concat(c,"/report?projectCode=").concat(e))},create:function(e){return r.a.post(c,e)},edit:function(e){return r.a.put(c,e)},remove:function(e,t){return r.a.delete("".concat(c,"?clusterCode=").concat(e,"&serviceMasterCode=").concat(t))},addFromExcel:function(e,t){var n=new FormData;return n.append("files",t,t.name),r.a.post("".concat(c,"/addFromExcel?clusterCode=").concat(e),n,{headers:{"Content-Type":"multipart/form-data"}})}};t.a=i},871:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return je}));var a=n(0),r=n.n(a),c=n(27),i=n(22),o=n.n(i),l=n(40),s=n(25),u=n(47),d=n(23);function j(e){return"[object Array]"===Object.prototype.toString.call(e)}function h(e,t){if(!e)throw new Error(t)}function p(e){return Object.keys(e)}function m(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}function f(e,t,n){var a="."+t,r=new RegExp("(\\"+t+")?$");return n(e).replace(r,a)}function b(e,t,n){void 0===n&&(n="download");var a=function(e,t){switch(t){case"txt":return"data:text/plain;charset=utf-8,"+encodeURIComponent(e);case"json":return"data:application/json;charset=utf-8,"+encodeURIComponent(e);case"csv":return"data:text/csv;charset=utf-8,\ufeff"+encodeURIComponent(e);case"xls":return"data:application/vnd.ms-excel;charset=utf-8,"+encodeURIComponent(e);case"xml":return"data:application/xml;charset=utf-8,"+encodeURIComponent(e);default:return""}}(e,t),r=document.createElement("a");r.href=a,r.download=n,r.setAttribute("style","visibility:hidden"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}var x,g=function(){return(g=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},O=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,c=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(a=c.next()).done;)i.push(a.value)}catch(o){r={error:o}}finally{try{a&&!a.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return i};function v(e){return e.map(m).reduce((function(t,n,a){return n.reduce((function(t,n){var r=O(n,2),c=r[0],i=r[1],o=t[c]||Array.from({length:e.length}).map((function(e){return""}));return o[a]=("string"!==typeof i?JSON.stringify(i):i)||"",t[c]=o,t}),t)}),Object.create(null))}function y(e,t){return void 0===t&&(t=function(e){return e}),t(m(e).map((function(e){var t=O(e,2);return{fieldName:t[0],fieldValues:t[1]}})))}function C(e,t){return void 0===t&&(t=function(e){return e}),e.length?'<html>\n  <head>\n    <meta charset="UTF-8">\n  </head >\n  <body>\n    '+function(e,t){h(e.length>0);var n=y(v(e),t);return"\n    <table>\n      <thead>\n        <tr><th><b>"+n.map((function(e){return e.fieldName})).join("</b></th><th><b>")+"</b></th></tr>\n      </thead>\n      <tbody>\n        <tr>"+n.map((function(e){return e.fieldValues})).map((function(e){return e.map((function(e){return"<td>"+e+"</td>"}))})).reduce((function(e,t){return e.map((function(e,n){return""+e+t[n]}))})).join("</tr>\n        <tr>")+"</tr>\n      </tbody>\n    </table>\n  "}(e,t)+"\n  </body>\n</html >\n":""}function w(e){return'<?xml version="1.0" encoding="utf-8"?><!DOCTYPE base>\n'+S(e,"base")+"\n"}function S(e,t,n,a){void 0===n&&(n="element"),void 0===a&&(a=0);var r,c=(r=t,"555xmlHello .  world!".trim().replace(/^([0-9,;]|(xml))+/,""),r.replace(/[^_a-zA-Z 0-9:\-\.]/g,"").replace(/^([ 0-9-:\-\.]|(xml))+/i,"").replace(/ +/g,"-")),i=function(e){return Array(e+1).join(" ")}(a);return null===e||void 0===e?i+"<"+c+" />":i+"<"+c+">\n"+(j(e)?e.map((function(e){return S(e,n,n,a+2)})).join("\n"):"object"===typeof e?m(e).map((function(e){var t=O(e,2),r=t[0];return S(t[1],r,n,a+2)})).join("\n"):i+"  "+String(e).replace(/([<>&])/g,(function(e,t){switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return""}})))+"\n"+i+"</"+c+">"}function M(e){var t=e.data,n=e.fileName,a=void 0===n?"download":n,r=e.fileNameFormatter,c=void 0===r?function(e){return e.replace(/\s+/,"_")}:r,i=e.fields,o=e.exportType,l=void 0===o?"txt":o,s=e.replacer,u=void 0===s?null:s,d=e.space,x=void 0===d?4:d,S=e.processor,M=void 0===S?b:S,W=e.withBOM,A=void 0!==W&&W,k=e.delimiter,E=void 0===k?",":k,F=e.beforeTableEncode,T=void 0===F?function(e){return e}:F,q="Invalid export data. Please provide an array of object",I="Can't export unknown data type "+l+".",N=function(e){if(!e||j(e)&&!e.length||!j(e)&&!p(e).length)return function(e){return e};var t=j(e)?e.reduce((function(e,t){var n;return g(g({},e),((n={})[t]=t,n))}),Object.create(null)):e;return function(e){return j(e)?e.map((function(e){return m(e).reduce((function(e,n){var a=O(n,2),r=a[0],c=a[1];return r in t&&(e[t[r]]=c),e}),Object.create(null))})).filter((function(e){return p(e).length})):m(e).reduce((function(e,n){var a=O(n,2),r=a[0],c=a[1];return r in t&&(e[t[r]]=c),e}),Object.create(null))}}(i)(function(t){try{return"string"===typeof t?JSON.parse(t):t}catch(e){throw new Error("Invalid export data. Please provide a valid JSON")}}(t)),D=function(t,n,a){void 0===n&&(n=null);try{return JSON.stringify(t,n,a)}catch(e){throw new Error("Invalid export data. Please provide valid JSON object")}}(N,u,x);switch(l){case"txt":return M(D,l,f(a,"txt",c));case"json":return M(D,l,f(a,"json",c));case"csv":h(j(N),q);var L=function(e,t,n){if(void 0===t&&(t=","),void 0===n&&(n=function(e){return e}),!e.length)return"";var a=y(v(e),n);return a.map((function(e){return e.fieldName})).join(t)+"\r\n"+a.map((function(e){return e.fieldValues})).map((function(e){return e.map((function(e){return'"'+e.replace(/\"/g,'""')+'"'}))})).reduce((function(e,n){return e.map((function(e,a){return""+e+t+n[a]}))})).join("\r\n")}(N,E,T);return M(A?"\ufeff"+L:L,l,f(a,"csv",c));case"xls":return h(j(N),q),M(C(N,T),l,f(a,"xls",c));case"xml":return M(w(N),l,f(a,"xml",c));default:throw new Error(I)}}(x=M||(M={})).types={txt:"txt",json:"json",csv:"csv",xls:"xls",xml:"xml"},x.processors={downloadFile:b};var W=M,A=n(532),k=n(417),E=n(418),F=n(414),T=n(415),q=n(416),I=n(419),N=n(112),D=n(380),L=n(46),U=n(537),R=n(18),H=n(570),V=n(626),P=n(9),B=n.n(P),_="/api/project-system/resources";var G={getAll:function(e,t){return B.a.get("".concat(_,"?projectCode=").concat(e,"&serviceMasterCode=").concat(t))},report:function(e){return B.a.get("".concat(_,"/report?projectCode=").concat(e))},create:function(e){return B.a.post(_,e)},edit:function(e){return B.a.put(_,e)},remove:function(e,t){return B.a.delete("".concat(_,"?clusterCode=").concat(e,"&elementCode=").concat(t))},addFromExcel:function(e,t){var n=new FormData;return n.append("files",t,t.name),B.a.post("".concat(_,"/addFromExcel?projectCode=").concat(e),n,{headers:{"Content-Type":"multipart/form-data"}})}},J=n(2),K=Object(A.a)({root:{width:"100%",height:"100%"},container:{maxHeight:"calc(100% - 85px)",overflowY:"scroll"}});function z(){var e=K(),t=Object(u.b)(),n=r.a.useState(null),a=Object(s.a)(n,2),c=a[0],i=a[1],j=r.a.useState([]),h=Object(s.a)(j,2),p=h[0],m=h[1],f=r.a.useState(!1),b=Object(s.a)(f,2),x=b[0],g=b[1],O=r.a.useState([]),v=Object(s.a)(O,2),y=v[0],C=v[1],w=function(){var e=Object(l.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>=1&&null!==c)){e.next=17;break}return C([]),t(R.loadingActions.show()),e.prev=3,e.t0=C,e.next=7,G.addFromExcel(c.code,n[0]);case 7:e.t1=e.sent,(0,e.t0)(e.t1),S(),g(!0),e.next=17;break;case 13:e.prev=13,e.t2=e.catch(3),t(R.loadingActions.hide()),t(R.alertActions.show(R.alertMessage.ACTION_FAILURE,"error"));case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(R.loadingActions.show()),null===c){e.next=16;break}return e.prev=2,e.t0=m,e.next=6,V.a.report(c.code);case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 10:e.prev=10,e.t2=e.catch(2),m([]),t(R.alertActions.show(R.alertMessage.FETCH_FAILURE,"error"));case 14:e.next=17;break;case 16:m([]);case 17:t(R.loadingActions.hide());case 18:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return r.a.useEffect((function(){S()}),[c]),Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(L.k,{open:x,onClose:function(){g(!1)},title:"K\u1ebft qu\u1ea3 t\u1ea1o t\u1eeb file excel",children:Object(J.jsx)(k.a,{style:{height:"70vh"},children:Object(J.jsxs)(E.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(J.jsx)(F.a,{children:Object(J.jsxs)(T.a,{children:[Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%"},children:"M\xe3 BOS"}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%"},children:"M\xe3 v\u1eadt t\u01b0"}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%"},children:"Kh\u1ed1i l\u01b0\u1ee3ng"}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%"},children:"Tr\u1ea1ng th\xe1i"}),Object(J.jsx)(q.a,{align:"right",style:{minWidth:"40%"},children:"Message"})]})}),Object(J.jsx)(I.a,{children:y.map((function(e){return Object(J.jsxs)(T.a,{children:[Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%"},children:e.serviceMasterCode}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%"},children:e.materialCode}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"40%"},children:e.quantity}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%"},children:e.isAdded?"Th\xe0nh c\xf4ng":"L\u1ed7i!"}),Object(J.jsx)(q.a,{align:"right",style:{minWidth:"20%"},children:e.message})]},e.serviceMasterCode)}))})]})})}),Object(J.jsxs)(N.a,{className:e.root,children:[Object(J.jsx)(D.a,{container:!0,children:Object(J.jsxs)(D.a,{container:!0,item:!0,xs:12,style:{padding:"8px"},direction:"row",spacing:1,alignItems:"flex-end",children:[Object(J.jsx)(D.a,{item:!0,xs:6,children:Object(J.jsx)(H.a,{selectedProject:c,onChange:function(e){i(e)}})}),null!==c&&Object(J.jsxs)(D.a,{container:!0,spacing:1,item:!0,xs:6,children:[Object(J.jsx)(D.a,{item:!0,children:Object(J.jsx)(L.q,{filesLimit:1,title:"T\u1ea3i t\u1ec7p excel",acceptedFiles:[".xls",".xlsx"],onSubmit:w,tooltip:"T\u1ea1o t\u1eeb file excel",variant:"contained",text:"Excel",color:"primary"})}),Object(J.jsx)(D.a,{item:!0,children:Object(J.jsx)(L.n,{tooltip:"T\u1ea3i file excel",variant:"contained",text:"T\u1ea3i file excel",color:"info",icon:"file-download",onClick:function(){if(null!==c){var e=p.map((function(e){return{projectCode:c.code,projectName:c.name,serviceMasterCode:e.serviceMasterCode,smDescription:e.description,smUnit:e.unit,materialCode:"",materialDescription:"",materialUnit:"",quantity:0}}));W({data:e,fileName:"download",exportType:"xls",fields:{projectCode:"M\xe3 d\u1ef1 \xe1n",projectName:"T\xean d\u1ef1 \xe1n",serviceMasterCode:"M\xe3 BOS",smDescription:"Di\u1ec5n gi\u1ea3i BOS",smUnit:"\u0110\u01a1n v\u1ecb BOS",materialCode:"M\xe3 v\u1eadt t\u01b0",materialDescription:"Di\u1ec5n gi\u1ea3i v\u1eadt t\u01b0",materialUnit:"\u0110\u01a1n v\u1ecb VT",quantity:"Kh\u1ed1i l\u01b0\u1ee3ng"}})}}})}),Object(J.jsx)(D.a,{item:!0,children:Object(J.jsx)(L.n,{tooltip:"L\xe0m m\u1edbi",variant:"contained",text:"L\xe0m m\u1edbi",color:"success",icon:"sync-alt",onClick:S})})]})]})}),Object(J.jsx)(k.a,{className:e.container,children:Object(J.jsxs)(E.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(J.jsx)(F.a,{children:Object(J.jsxs)(T.a,{children:[Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%"},children:"M\xe3 BOS"}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"40%"},children:"Di\u1ec5n gi\u1ea3i"}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%"},children:"\u0110\u01a1n v\u1ecb"}),Object(J.jsx)(q.a,{align:"right",style:{minWidth:"20%"},children:"Kh\u1ed1i l\u01b0\u1ee3ng"}),Object(J.jsx)(q.a,{align:"right",style:{minWidth:"20%"},children:"Ngu\u1ed3n l\u1ef1c"}),Object(J.jsx)(q.a,{align:"right",style:{minWidth:"20%"}})]})}),Object(J.jsx)(I.a,{children:p.map((function(e){return Object(J.jsxs)(T.a,{children:[Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%"},children:e.serviceMasterCode}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"40%"},children:e.description}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%"},children:e.unit}),Object(J.jsx)(q.a,{align:"right",style:{minWidth:"20%"},children:U.a.formatMoney(e.quantity,3)}),Object(J.jsx)(q.a,{align:"right",style:{minWidth:"20%"},children:e.resourceCount}),Object(J.jsx)(q.a,{align:"right",style:{minWidth:"20%"},children:null!==c&&Object(J.jsx)(d.a,{to:"/project-system/estimator/resources/".concat(c.code,"/").concat(e.serviceMasterCode),style:{textDecoration:"none"},children:Object(J.jsx)(L.n,{tooltip:"\u0110\u1ecbnh m\u1ee9c",text:"\u0110\u1ecbnh m\u1ee9c",icon:"boxes",color:"info"})})})]},e.serviceMasterCode)}))})]})})]})]})}var Y=n(15),X=n(13);var Z={getAll:function(){return B.a.get("/api/project-system/materials")}},$=n(625);function Q(e){var t=e.serviceMasterCode,n=r.a.useState(null),a=Object(s.a)(n,2),c=a[0],i=a[1];return r.a.useEffect((function(){$.a.get(t).then((function(e){i(e)})).catch((function(){i(null)}))}),[t]),Object(J.jsx)(L.p,{label:"M\xe3 BOS",value:null!==c?"[".concat(c.code,"]-").concat(c.description):"\u0110ang t\u1ea3i d\u1eef li\u1ec7u",disabled:!0})}var ee=n(571);function te(e){var t=e.projectCode,n=r.a.useState(null),a=Object(s.a)(n,2),c=a[0],i=a[1];return r.a.useEffect((function(){ee.a.get(t).then((function(e){i(e)})).catch((function(){i(null)}))}),[t]),Object(J.jsx)(L.p,{label:"D\u1ef1 \xe1n",value:null!==c?"[".concat(c.code,"]-").concat(c.name):"\u0110ang t\u1ea3i d\u1eef li\u1ec7u",disabled:!0})}var ne=Object(A.a)({root:{width:"100%",height:"100%"},container:{maxHeight:"calc(100% - 85px)",overflowY:"scroll"}}),ae={projectCode:"",serviceMasterCode:"",materialCode:"",description:"",unit:"",quantity:""};function re(){var e,t=ne(),n=Object(c.h)(),a=n.projectCode,i=n.serviceMasterCode,d=Object(u.b)(),j=r.a.useState(!1),h=Object(s.a)(j,2),p=h[0],m=h[1],f=r.a.useState(!1),b=Object(s.a)(f,2),x=b[0],g=b[1],O=r.a.useState([]),v=Object(s.a)(O,2),y=v[0],C=v[1],w=r.a.useState(null),S=Object(s.a)(w,2),M=S[0],W=S[1],A=r.a.useState([]),U=Object(s.a)(A,2),H=U[0],V=U[1],P=r.a.useState(ae),B=Object(s.a)(P,2),_=B[0],K=B[1],z=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(R.loadingActions.show()),e.prev=1,e.t0=C,e.next=5,Z.getAll();case 5:return e.t1=e.sent,(0,e.t0)(e.t1),e.next=9,$(a,i);case 9:d(R.loadingActions.hide()),e.next=16;break;case 12:e.prev=12,e.t2=e.catch(1),d(R.loadingActions.hide()),d(R.alertActions.show(R.alertMessage.FETCH_FAILURE,"error"));case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=V,e.next=4,G.getAll(t,n);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=12;break;case 8:e.prev=8,e.t2=e.catch(0),V([]),d(R.alertActions.show(R.alertMessage.FETCH_FAILURE,"error"));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),ee=function(e){K(Object(X.a)(Object(X.a)({},_),{},Object(Y.a)({},e.target.name,e.target.value)))},re=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(!1),d(R.loadingActions.show()),e.prev=2,!x){e.next=8;break}return e.next=6,G.edit({projectCode:_.projectCode,materialCode:_.materialCode,quantity:parseFloat(_.quantity),serviceMasterCode:_.serviceMasterCode});case 6:e.next=10;break;case 8:return e.next=10,G.create({projectCode:_.projectCode,materialCode:_.materialCode,quantity:parseFloat(_.quantity),serviceMasterCode:_.serviceMasterCode});case 10:return d(R.alertActions.show(R.alertMessage.ACTION_SUCCESS,"success")),d(R.loadingActions.show()),e.next=14,$(a,i);case 14:d(R.loadingActions.hide()),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),d(R.alertActions.show(R.alertMessage.ACTION_FAILURE,"error")),d(R.loadingActions.hide());case 21:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}();return r.a.useEffect((function(){z()}),[]),console.log(H),Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(L.k,{title:"Th\xeam/Ch\u1ec9nh s\u1eeda",open:p,onClose:function(){m(!1)},onSubmit:re,children:Object(J.jsxs)(D.a,{container:!0,spacing:1,children:[Object(J.jsx)(D.a,{item:!0,xs:12,children:Object(J.jsx)(L.p,{name:"projectCode",label:"D\u1ef1 \xe1n",type:"text",required:!0,disabled:!0,value:_.projectCode,onChange:ee})}),Object(J.jsx)(D.a,{item:!0,xs:12,children:Object(J.jsx)(L.p,{name:"serviceMasterCode",label:"M\xe3 BOS",type:"text",required:!0,disabled:!0,value:_.serviceMasterCode,onChange:ee})}),Object(J.jsx)(D.a,{item:!0,xs:12,children:Object(J.jsx)(L.d,{required:!0,label:"M\xe3 v\u1eadt t\u01b0",options:(e=y,e.map((function(e){return Object(X.a)(Object(X.a)({},e),{},{label:"[".concat(e.code,"]-").concat(e.description)})}))),optionLabel:"label",value:M,getOptionSelected:function(e,t){return e.code===t.code},onChange:function(e){W(e),null!==e&&K(Object(X.a)(Object(X.a)({},_),{},{materialCode:e.code,description:e.description,unit:e.unit}))}})}),Object(J.jsx)(D.a,{item:!0,xs:12,children:Object(J.jsx)(L.p,{name:"description",label:"Di\u1ec5n gi\u1ea3i",type:"text",required:!0,disabled:!0,value:_.description,onChange:ee})}),Object(J.jsx)(D.a,{item:!0,xs:12,children:Object(J.jsx)(L.p,{name:"unit",label:"\u0110\u01a1n v\u1ecb",type:"text",required:!0,disabled:!0,value:_.unit,onChange:ee})}),Object(J.jsx)(D.a,{item:!0,xs:12,children:Object(J.jsx)(L.p,{name:"quantity",label:"Kh\u1ed1i l\u01b0\u1ee3ng",type:"number",required:!0,value:_.quantity,onChange:ee})})]})}),Object(J.jsxs)(N.a,{className:t.root,children:[Object(J.jsx)(D.a,{container:!0,children:Object(J.jsxs)(D.a,{container:!0,item:!0,xs:12,style:{padding:"8px"},direction:"row",spacing:1,alignItems:"flex-end",children:[Object(J.jsx)(D.a,{item:!0,xs:2,children:Object(J.jsx)(te,{projectCode:a})}),Object(J.jsx)(D.a,{item:!0,xs:8,children:Object(J.jsx)(Q,{serviceMasterCode:i})}),Object(J.jsx)(D.a,{item:!0,children:Object(J.jsx)(L.n,{tooltip:"Th\xeam m\u1edbi",variant:"contained",text:"Th\xeam",icon:"plus",color:"primary",onClick:function(){K({projectCode:a,serviceMasterCode:i,materialCode:"",description:"",quantity:"0",unit:""}),g(!1),m(!0)}})})]})}),Object(J.jsx)(k.a,{className:t.container,children:Object(J.jsxs)(E.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(J.jsx)(F.a,{children:Object(J.jsxs)(T.a,{children:[Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%"},children:"M\xe3 v\u1eadt t\u01b0"}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"40%"},children:"Di\u1ec5n gi\u1ea3i"}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%"},children:"\u0110\u01a1n v\u1ecb"}),Object(J.jsx)(q.a,{align:"right",style:{minWidth:"20%"},children:"Kh\u1ed1i l\u01b0\u1ee3ng"}),Object(J.jsx)(q.a,{align:"right",style:{minWidth:"20%"}})]})}),Object(J.jsx)(I.a,{children:H.map((function(e){return Object(J.jsxs)(T.a,{children:[Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%"},children:e.materialCode}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"40%"},children:e.description}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%"},children:e.unit}),Object(J.jsx)(q.a,{align:"right",style:{minWidth:"20%"},children:e.quantity}),Object(J.jsx)(q.a,{align:"right",style:{minWidth:"20%"},children:Object(J.jsx)(L.n,{tooltip:"Ch\u1ec9nh s\u1eeda",text:"S\u1eeda",icon:"edit",color:"success",onClick:function(){!function(e){K({projectCode:e.projectCode,materialCode:e.materialCode,description:e.description,quantity:e.quantity.toString(),serviceMasterCode:e.serviceMasterCode,unit:e.unit}),g(!0),m(!0)}(e)}})})]},e.materialCode)}))})]})})]})]})}var ce=n(208),ie=function(e){switch(e){case"DC":return"G\xf3i Th\u1ea7u ph\u1ee5 nh\xe2n c\xf4ng";case"V3":return"G\xf3i Th\xe9p";case"V6":return"G\xf3i B\xea t\xf4ng";case"V7":return"G\xf3i V\xe1n khu\xf4n";default:return e}},oe=function(e){var t=parseInt(e.toString().substr(0,4));return parseInt(e.toString().substr(4,2))<12?e+1:100*(t+1)+1},le={getRbsViewReport:function(e){var t=e.map((function(e){return e.period})),n=Math.min.apply(Math,Object(ce.a)(t)),a=Math.max.apply(Math,Object(ce.a)(t)),r=[];return function(e){return Array.from(new Set(e.map((function(e){return e.elementCode})))).map((function(t){var n=e.find((function(e){return e.elementCode===t}));return{code:t,description:void 0!==n?n.elementDescription:"",unit:""}}))}(e).map((function(t){var c={item:t,data:[]};return function(e){return Array.from(new Set(e.map((function(e){return e.materialGroup})))).map((function(t){var n=e.find((function(e){return e.materialCode===t}));return{code:t,description:void 0!==n?"".concat(ie(t)):"",unit:""}}))}(e.filter((function(e){return e.elementCode===t.code}))).map((function(r){var i={item:r,data:[]};return function(e){return Array.from(new Set(e.map((function(e){return e.materialCode})))).map((function(t){var n=e.find((function(e){return e.materialCode===t}));return{code:t,description:void 0!==n?n.description:"",unit:void 0!==n?n.unit:""}}))}(e.filter((function(e){return e.elementCode===t.code&&e.materialGroup===r.code}))).map((function(c){for(var o={item:c,total:0,data:[]},l=e.filter((function(e){return e.elementCode===t.code&&e.materialGroup===r.code&&e.materialCode===c.code})),s=n;s<=a;){var u=l.find((function(e){return e.period===s}));void 0!==u?o.data.push(u.quantity):o.data.push(0),s=oe(s)}return i.data.push(o),!0})),c.data.push(i),!0})),r.push(c),!0})),r},addPeriod:oe},se=Object(A.a)({root:{width:"100%",height:"100%"},container:{maxHeight:"calc(100% - 85px)",overflowY:"scroll",maxWidth:"100%",overflowX:"auto"}}),ue=function(e){for(var t=e.map((function(e){return e.period})),n=Math.min.apply(Math,Object(ce.a)(t)),a=Math.max.apply(Math,Object(ce.a)(t)),r=[],c=n;c<=a;)r.push("".concat(c.toString().substr(4,2),"/").concat(c.toString().substr(0,4))),c=le.addPeriod(c);return r};function de(){var e=se(),t=Object(u.b)(),n=r.a.useState(null),a=Object(s.a)(n,2),c=a[0],i=a[1],d=r.a.useState([]),j=Object(s.a)(d,2),h=j[0],p=j[1],m=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(R.loadingActions.show()),null===c){e.next=16;break}return e.prev=2,e.t0=p,e.next=6,G.report(c.code);case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 10:e.prev=10,e.t2=e.catch(2),p([]),t(R.alertActions.show(R.alertMessage.FETCH_FAILURE,"error"));case 14:e.next=17;break;case 16:p([]);case 17:t(R.loadingActions.hide());case 18:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return r.a.useEffect((function(){m()}),[c]),Object(J.jsxs)(N.a,{className:e.root,children:[Object(J.jsx)(D.a,{container:!0,children:Object(J.jsxs)(D.a,{container:!0,item:!0,xs:12,style:{padding:"8px"},direction:"row",spacing:1,alignItems:"flex-end",children:[Object(J.jsx)(D.a,{item:!0,xs:6,children:Object(J.jsx)(H.a,{selectedProject:c,onChange:function(e){i(e)}})}),null!==c&&Object(J.jsx)(D.a,{container:!0,spacing:1,item:!0,xs:6,children:Object(J.jsx)(D.a,{item:!0,children:Object(J.jsx)(L.n,{tooltip:"L\xe0m m\u1edbi",variant:"contained",text:"L\xe0m m\u1edbi",color:"success",icon:"sync-alt",onClick:m})})})]})}),Object(J.jsx)(k.a,{className:e.container,children:Object(J.jsxs)(E.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(J.jsx)(F.a,{children:Object(J.jsxs)(T.a,{children:[Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%",whiteSpace:"nowrap"},children:"M\xe3 v\u1eadt t\u01b0"}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"40%",whiteSpace:"nowrap"},children:"Di\u1ec5n gi\u1ea3i"}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%",whiteSpace:"nowrap"},children:"\u0110\u01a1n v\u1ecb"}),Object(J.jsx)(q.a,{align:"right",style:{minWidth:"20%",whiteSpace:"nowrap"},children:"T\u1ed5ng c\u1ed9ng"}),ue(h).map((function(e){return Object(J.jsx)(q.a,{align:"right",style:{minWidth:"20%",whiteSpace:"nowrap"},children:e},e)}))]})}),Object(J.jsx)(I.a,{children:le.getRbsViewReport(h).map((function(e){return Object(J.jsxs)(r.a.Fragment,{children:[Object(J.jsxs)(T.a,{style:{backgroundColor:"aqua"},children:[Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%",fontWeight:"bold",whiteSpace:"nowrap"},children:e.item.code}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"40%",fontWeight:"bold",whiteSpace:"nowrap"},children:e.item.description}),Object(J.jsx)(q.a,{}),Object(J.jsx)(q.a,{}),ue(h).map((function(t){return Object(J.jsx)(q.a,{align:"right",style:{minWidth:"20%",whiteSpace:"nowrap"}},"".concat(t,"-").concat(e.item.code))}))]}),e.data.map((function(t){return Object(J.jsxs)(r.a.Fragment,{children:[Object(J.jsxs)(T.a,{style:{backgroundColor:"aquamarine"},children:[Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%",fontWeight:"bold",fontStyle:"italic",paddingLeft:"32px",whiteSpace:"nowrap"},children:"".concat(e.item.code,".").concat(t.item.code)}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"40%",fontWeight:"bold",fontStyle:"italic",paddingLeft:"32px",whiteSpace:"nowrap"},children:t.item.description}),Object(J.jsx)(q.a,{}),Object(J.jsx)(q.a,{}),ue(h).map((function(n){return Object(J.jsx)(q.a,{align:"right",style:{minWidth:"20%",whiteSpace:"nowrap"}},"".concat(n,"-").concat(e.item.code,"-").concat(t.item.code))}))]}),t.data.map((function(n){return Object(J.jsx)(r.a.Fragment,{children:Object(J.jsxs)(T.a,{children:[Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%",fontStyle:"italic",paddingLeft:"48px",whiteSpace:"nowrap"},children:n.item.code}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"40%",fontStyle:"italic",paddingLeft:"48px",whiteSpace:"nowrap"},children:n.item.description}),Object(J.jsx)(q.a,{align:"left",style:{minWidth:"20%",fontStyle:"italic",whiteSpace:"nowrap"},children:n.item.unit}),Object(J.jsx)(q.a,{align:"right",style:{minWidth:"20%",whiteSpace:"nowrap"},children:U.a.formatMoney(n.data.reduce((function(e,t){return e+t}),0),3)}),n.data.map((function(a,r){return Object(J.jsx)(q.a,{align:"right",style:{minWidth:"20%",whiteSpace:"nowrap"},children:U.a.formatMoney(a,3)},"".concat(e.item.code,".").concat(t.item.code,".").concat(n.item.code,".").concat(r))}))]})},"".concat(e.item.code,".").concat(t.item.code,".").concat(n.item.code))}))]},"".concat(e.item.code,".").concat(t.item.code))}))]},e.item.code)}))})]})})]})}function je(){var e=Object(c.i)().path;return Object(J.jsxs)(c.c,{children:[Object(J.jsx)(c.a,{path:"".concat(e,"/item-report"),component:z}),Object(J.jsx)(c.a,{path:"".concat(e,"/resources/:projectCode/:serviceMasterCode"),component:re}),Object(J.jsx)(c.a,{path:"".concat(e,"/rbs"),component:de})]})}}}]);