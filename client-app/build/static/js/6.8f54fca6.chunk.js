(this.webpackJsonpemis=this.webpackJsonpemis||[]).push([[6],{484:function(e,t,n){"use strict";var a={formatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy",n=t,a=[{symbol:"dd",value:e.getDate()<10?"0".concat(e.getDate()):e.getDate()},{symbol:"MM",value:e.getMonth()+1<10?"0".concat(e.getMonth()+1):"".concat(e.getMonth()+1)},{symbol:"yyyy",value:e.getFullYear()},{symbol:"hh",value:e.getHours()<10?"0".concat(e.getHours()):e.getHours()},{symbol:"mm",value:e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes()}];return a.map((function(e){return n=n.replace(e.symbol,e.value),e.symbol})),n},formatMoney:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Intl.NumberFormat("vi-VN",{maximumFractionDigits:t});return n.format(e)}};t.a=a},496:function(e,t,n){"use strict";var a=n(10),c=n.n(a),i="/api/bidding/packages";var o={getAll:function(e){return c.a.get("".concat(i,"/getPackages/").concat(e))},getAuditorPackages:function(e){return c.a.get("".concat(i,"/getAuditorPackages/").concat(e))},get:function(e){return c.a.get("".concat(i,"/").concat(e))},createPackage:function(e){var t=new FormData;return t.append("Code",e.code),t.append("Name",e.name),t.append("Begin",e.begin.toUTCString()),t.append("End",e.end.toUTCString()),t.append("Description",e.description),t.append("IsInternal",e.isInternal?"true":"false"),e.vendors.map((function(e,n){return t.append("Vendors[".concat(n,"]"),e.code),!0})),e.files.map((function(e){return t.append("Files",e,e.name),!0})),e.items.map((function(e,n){return t.append("Items[".concat(n,"][No]"),e.no),t.append("Items[".concat(n,"][Quantity]"),e.quantity),t.append("Items[".concat(n,"][OptionQuantity]"),e.optionQuantity),t.append("Items[".concat(n,"][Spec]"),e.spec),t.append("Items[".concat(n,"][Note]"),e.note),t.append("Items[".concat(n,"][Begin]"),e.begin.toUTCString()),t.append("Items[".concat(n,"][End]"),e.end.toUTCString()),t.append("Items[".concat(n,"][MaterialCode]"),e.materialCode),!0})),c.a.post(i,t,{headers:{"Content-Type":"multipart/form-data"}})},getQuotation:function(e,t){return c.a.get("".concat(i,"/getQuotation/").concat(e,"/").concat(t))}};t.a=o},506:function(e,t,n){"use strict";var a=n(10),c=n.n(a),i="/api/bidding/vendors";var o={getVendors:function(){return c.a.get("".concat(i,"/getVendors"))},getRegisterList:function(){return c.a.get("".concat(i,"/getRegisterList"))},getDetail:function(e){return c.a.get("".concat(i,"/getDetail/").concat(e))},approve:function(e){return c.a.post("".concat(i,"/approve/").concat(e))},reject:function(e){return c.a.post("".concat(i,"/reject/").concat(e))}};t.a=o},520:function(e,t,n){"use strict";var a=n(10),c=n.n(a),i="/api/bidding/materials";var o={getAll:function(){return c.a.get(i)},create:function(e){return c.a.post(i,e)},edit:function(e,t){return c.a.put("".concat(i,"/").concat(e),t)},remove:function(e){return c.a.delete("".concat(i,"/").concat(e))},addFromExcel:function(e){var t=new FormData;return t.append("files",e,e.name),c.a.post("".concat(i,"/addFromExcel"),t,{headers:{"Content-Type":"multipart/form-data"}})}};t.a=o},538:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var a=n(1),c=n(19),i=n(28),o=n.n(i),r=n(42),s=n(15),l=n(0),d=n.n(l),u=n(29),j=n(50),b=n(449),m=n(148),p=n(141),h=n(399),x=n(142),O=n(36),f=n(484),g=n(496),v=n(120),y=n(21),C=n(115),D=n(151),k=n(143),T=n(6),I=n(583),w=n(545),S=n(546),M=[{id:"no",label:"STT",numeric:!1,sortable:!1},{id:"infoCol",label:"H\u1ea1ng m\u1ee5c",numeric:!1,sortable:!1},{id:"quantityCol",label:"S\u1ed1 l\u01b0\u1ee3ng",numeric:!1,sortable:!1},{id:"noteCol",label:"Ghi ch\xfa",numeric:!1,sortable:!1},{id:"deliveryCol",label:"Th\u1eddi gian giao h\xe0ng",numeric:!1,sortable:!1},{id:"priceCol",label:"\u0110\u01a1n gi\xe1",numeric:!1,sortable:!1}],A={submitted:!1,items:[],attachments:[]};function F(e){var t,n=e.packageCode,i=e.vendorCode,l=e.packageItems,u=d.a.useContext(C.a).showAlert,m=d.a.useState(A),p=Object(s.a)(m,2),h=p[0],x=p[1],v=d.a.useState([]),D=Object(s.a)(v,2),k=D[0],T=D[1],I=function(){var e=Object(r.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.getQuotation(n,i);case 3:t=e.sent,x(t),T(l.map((function(e){var n=t.items.find((function(t){return t.itemId===e.id}));return void 0!==n?Object(c.a)(Object(c.a)({},e),{},{price:n.price}):Object(c.a)(Object(c.a)({},e),{},{price:0})}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),u(C.b.FETCH_FAILURE,"error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return d.a.useEffect((function(){I()}),[n,i]),Object(a.jsxs)(b.a,{container:!0,spacing:1,children:[Object(a.jsx)(b.a,{item:!0,xs:12,children:Object(a.jsx)(y.g,{title:"B\u1ea3ng ch\xe0o gi\xe1",columns:M,data:(t=k,t.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{infoCol:Object(a.jsxs)("div",{children:[Object(a.jsx)(j.a,{variant:"subtitle2",children:e.description}),Object(a.jsx)(j.a,{variant:"caption",children:e.code})]}),quantityCol:Object(a.jsxs)("div",{children:[Object(a.jsx)(j.a,{variant:"subtitle2",children:"".concat(f.a.formatMoney(e.quantity,3)," ").concat(e.unit)}),Object(a.jsx)(j.a,{variant:"caption",children:"".concat(f.a.formatMoney(e.optionQuantity,3)," ").concat(e.optionUnit)})]}),noteCol:Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[null!==e.spec&&Object(a.jsx)(j.a,{variant:"caption",children:"Spec: ".concat(e.spec)}),null!==e.spec&&Object(a.jsx)(j.a,{variant:"caption",children:"Ghi ch\xfa: ".concat(e.note)})]}),deliveryCol:Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(j.a,{variant:"caption",children:"T\u1eeb: ".concat(f.a.formatDate(new Date(e.begin),"dd/MM/yyyy"))}),Object(a.jsx)(j.a,{variant:"caption",children:"\u0110\u1ebfn: ".concat(f.a.formatDate(new Date(e.end),"dd/MM/yyyy"))})]}),priceCol:Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(j.a,{variant:"subtitle2",children:f.a.formatMoney(e.price,3)}),Object(a.jsx)(j.a,{variant:"caption",children:"VND/1 ".concat(e.unit)})]})})}))),actions:[],initialOrderBy:"no"})}),Object(a.jsx)(b.a,{item:!0,xs:12,children:Object(a.jsx)(y.m,{title:"T\xe0i li\u1ec7u \u0111\xednh k\xe8m ch\xe0o gi\xe1",children:h.attachments.map((function(e,t){return Object(a.jsxs)(b.a,{container:!0,spacing:1,children:[Object(a.jsx)(b.a,{item:!0,children:Object(a.jsx)(O.a,{icon:{iconName:"check-square",prefix:"far"}})}),Object(a.jsx)(b.a,{item:!0,children:Object(a.jsx)(j.a,{variant:"subtitle2",children:e.fileName})}),Object(a.jsx)(b.a,{item:!0,children:Object(a.jsx)(y.j,{filename:e.fileName,url:"/api/bidding/packages/".concat(n,"/attachments/getQuotationFile/").concat(i,"/").concat(e.id)})})]},t)}))})})]})}var E=Object(T.a)({root:{border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(I.a),N=Object(T.a)({root:{color:"#fff",fontStyle:"uppercase",borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:40,"&$expanded":{minHeight:40}},content:{margin:0,"& .MuiTypography-body1":{fontSize:"0.9rem"},"&$expanded":{margin:"0"}},expanded:{}})(w.a),q=Object(T.a)((function(){return{root:{padding:0}}}))(S.a);function U(e){var t=e.packageCode,n=e.canViewData,c=e.isClosedPackage,i=e.vendors,o=e.packageItems,r=d.a.useState([]),l=Object(s.a)(r,2),u=l[0],b=l[1];return Object(a.jsx)(y.m,{title:"Danh s\xe1ch nh\xe0 cung c\u1ea5p",noPadding:!0,children:i.map((function(e){return Object(a.jsxs)(E,{square:!0,expanded:u.includes(e.code),onChange:function(t,n){!function(e,t){t?u.includes(e)||b([].concat(Object(D.a)(u),[e])):b(u.filter((function(t){return t!==e})))}(e.code,n)},disabled:!(c&&e.submitted&&n),children:[Object(a.jsx)(N,{style:{backgroundColor:e.submitted?k.a[700]:p.a[700]},children:Object(a.jsxs)(j.a,{children:["".concat(e.code," - ").concat(e.longTextName," "),Object(a.jsx)(O.a,{icon:e.submitted?"check-circle":"times-circle"})," ".concat(e.submitted?"\u0110\xe3 n\u1ed9p ch\xe0o gi\xe1":"Ch\u01b0a n\u1ed9p ch\xe0o gi\xe1")]})}),Object(a.jsx)(q,{children:u.includes(e.code)&&Object(a.jsx)(F,{packageCode:t,packageItems:o,vendorCode:e.code})})]},e.code)}))})}var _=[{id:"no",label:"STT",numeric:!1,sortable:!1},{id:"infoCol",label:"H\u1ea1ng m\u1ee5c",numeric:!1,sortable:!1},{id:"quantityCol",label:"S\u1ed1 l\u01b0\u1ee3ng",numeric:!1,sortable:!1},{id:"noteCol",label:"Ghi ch\xfa",numeric:!1,sortable:!1},{id:"deliveryCol",label:"Th\u1eddi gian giao h\xe0ng",numeric:!1,sortable:!1}],H={attachments:[],begin:new Date,code:"",status:0,description:"",end:new Date,isInternal:!1,items:[],name:"",vendors:[]};function P(){var e,t=Object(u.i)().packageCode,n=d.a.useContext(C.a),i=n.showAlert,l=n.showBackdrop,D=n.hideBackdrop,k=d.a.useState(H),T=Object(s.a)(k,2),I=T[0],w=T[1],S=d.a.useState(!1),M=Object(s.a)(S,2),A=M[0],F=M[1],E=function(){var e=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(),e.prev=1,e.t0=w,e.next=5,g.a.get(t);case 5:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=F,e.next=10,v.c.checkAuditorPermission();case 10:e.t3=e.sent,(0,e.t2)(e.t3),D(),e.next=21;break;case 15:e.prev=15,e.t4=e.catch(1),D(),w(H),F(!1),i(C.b.FETCH_FAILURE,"error");case 21:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),N=function(e){switch(e){case 0:return{text:"M\u1edbi",icon:"star",color:p.a[700]};case 1:return{text:"\u0110ang m\u1edf",icon:"spinner",color:h.a[700]};case 2:return{text:"\u0110\xe3 \u0111\xf3ng",icon:"check-circle",color:x.a[700]};default:return{text:"Kh\xf4ng x\xe1c \u0111\u1ecbnh",icon:"exclamation-circle",color:""}}};return d.a.useEffect((function(){E()}),[t]),Object(a.jsxs)(b.a,{container:!0,spacing:1,children:[Object(a.jsx)(b.a,{item:!0,xs:12,children:Object(a.jsx)(y.m,{title:I.isInternal?"\u0110\u1ea5u th\u1ea7u n\u1ed9i b\u1ed9":"\u0110\u1ea5u th\u1ea7u b\xecnh th\u01b0\u1eddng",children:Object(a.jsxs)(b.a,{container:!0,spacing:1,children:[Object(a.jsxs)(b.a,{item:!0,xs:12,md:6,children:[Object(a.jsx)(j.a,{variant:"caption",children:"M\xe3 s\u1ed1 g\xf3i th\u1ea7u"}),Object(a.jsxs)(j.a,{variant:"subtitle2",children:["".concat(I.code," - Tr\u1ea1ng th\xe1i: "),Object(a.jsx)(O.a,{icon:N(I.status).icon,color:N(I.status).color})," ".concat(N(I.status).text," "),2===I.status&&(A||!I.isInternal)&&Object(a.jsx)(y.j,{label:"T\u1ea3i t\u1ed5ng h\u1ee3p ch\xe0o gi\xe1",filename:"".concat(I.code," - Quotations Report.xlsx"),url:"/api/bidding/packages/getExcelReport/".concat(I.code)})]})]}),Object(a.jsx)(y.q,{title:"T\xean g\xf3i th\u1ea7u",content:I.name}),Object(a.jsx)(y.q,{title:"Th\u1eddi gian m\u1edf th\u1ea7u",content:f.a.formatDate(new Date(I.begin),"hh:mm dd/MM/yyyy")}),Object(a.jsx)(y.q,{title:"Th\u1eddi gian \u0111\xf3ng th\u1ea7u",content:f.a.formatDate(new Date(I.end),"hh:mm dd/MM/yyyy")}),Object(a.jsxs)(b.a,{item:!0,xs:12,children:[Object(a.jsx)(j.a,{variant:"caption",children:"M\xf4 t\u1ea3"}),Object(a.jsx)(m.a,{style:{padding:"8px"},variant:"outlined",children:Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:I.description}})})]}),Object(a.jsxs)(b.a,{xs:12,item:!0,children:[Object(a.jsx)(j.a,{variant:"caption",children:"T\xe0i li\u1ec7u \u0111\xednh k\xe8m"}),I.attachments.map((function(e,t){return Object(a.jsxs)(b.a,{container:!0,spacing:1,children:[Object(a.jsx)(b.a,{item:!0,children:Object(a.jsx)(O.a,{icon:{iconName:"check-square",prefix:"far"}})}),Object(a.jsx)(b.a,{item:!0,children:Object(a.jsx)(j.a,{variant:"subtitle2",children:e.fileName})}),Object(a.jsx)(b.a,{item:!0,children:Object(a.jsx)(y.j,{filename:e.fileName,url:"/api/bidding/packages/".concat(I.code,"/attachments/").concat(e.id)})})]},t)}))]})]})})}),Object(a.jsx)(b.a,{item:!0,xs:12,children:Object(a.jsx)(U,{packageCode:I.code,canViewData:A||!I.isInternal,packageItems:I.items,isClosedPackage:2===I.status,vendors:I.vendors})}),Object(a.jsx)(b.a,{item:!0,xs:12,children:Object(a.jsx)(y.g,{title:"Danh s\xe1ch v\u1eadt t\u01b0, d\u1ecbch v\u1ee5",columns:_,data:(e=I.items,e.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{infoCol:Object(a.jsxs)("div",{children:[Object(a.jsx)(j.a,{variant:"subtitle2",children:e.description}),Object(a.jsx)(j.a,{variant:"caption",children:e.code})]}),quantityCol:Object(a.jsxs)("div",{children:[Object(a.jsx)(j.a,{variant:"subtitle2",children:"".concat(f.a.formatMoney(e.quantity,3)," ").concat(e.unit)}),Object(a.jsx)(j.a,{variant:"caption",children:"".concat(f.a.formatMoney(e.optionQuantity,3)," ").concat(e.optionUnit)})]}),noteCol:Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[null!==e.spec&&Object(a.jsx)(j.a,{variant:"caption",children:"Spec: ".concat(e.spec)}),null!==e.spec&&Object(a.jsx)(j.a,{variant:"caption",children:"Ghi ch\xfa: ".concat(e.note)})]}),deliveryCol:Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(j.a,{variant:"caption",children:"T\u1eeb: ".concat(f.a.formatDate(new Date(e.begin),"dd/MM/yyyy"))}),Object(a.jsx)(j.a,{variant:"caption",children:"\u0110\u1ebfn: ".concat(f.a.formatDate(new Date(e.end),"dd/MM/yyyy"))})]})})}))),actions:[],initialOrderBy:"no"})})]})}},549:function(e,t){},619:function(e,t){},620:function(e,t){},715:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return W}));var a=n(1),c=n(0),i=n.n(c),o=n(29),r=n(449),s=n(15),l=n(115),d=n(151),u=n(16),j=n(19),b="GET_INPUT_DATA_SUCCESS",m="GET_INPUT_DATA_FAILURE",p="CHANGE_HEADER_DATA",h="CHANGE_VENDORS_DATA",x="ADD_ITEM",O="EDIT_ITEM",f="REMOVE_ITEM",g="CHANGE_FILES",v={model:{begin:new Date,code:"",description:"",isInternal:!1,end:new Date,files:[],items:[],name:"",vendors:[]},materials:[],vendors:[]},y={state:v,getInputData:function(){},changeHeader:function(e,t){},changeVendors:function(e,t){},addItem:function(e){},editItem:function(e){},removeItem:function(e){},changeFiles:function(e){}};function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(j.a)(Object(j.a)({},e),{},{materials:t.payload.materials,vendors:t.payload.vendors});case m:return Object(j.a)(Object(j.a)({},e),{},{materials:[],vendors:[]});case p:return Object(j.a)(Object(j.a)({},e),{},{model:Object(j.a)(Object(j.a)({},e.model),{},Object(u.a)({},t.payload.name,t.payload.value))});case h:if(t.payload.checked){var n=e.model.vendors.find((function(e){return e.code===t.payload.vendorCode}));if(void 0===n){var a=e.vendors.find((function(e){return e.code===t.payload.vendorCode}));return void 0!==a?Object(j.a)(Object(j.a)({},e),{},{model:Object(j.a)(Object(j.a)({},e.model),{},{vendors:[].concat(Object(d.a)(e.model.vendors),[{code:a.code,longTextName:a.longTextName}])})}):e}return e}return Object(j.a)(Object(j.a)({},e),{},{model:Object(j.a)(Object(j.a)({},e.model),{},{vendors:e.model.vendors.filter((function(e){return e.code!==t.payload.vendorCode}))})});case x:return Object(j.a)(Object(j.a)({},e),{},{model:Object(j.a)(Object(j.a)({},e.model),{},{items:[].concat(Object(d.a)(e.model.items),[t.payload.item])})});case O:return Object(j.a)(Object(j.a)({},e),{},{model:Object(j.a)(Object(j.a)({},e.model),{},{items:[].concat(Object(d.a)(e.model.items.filter((function(e){return e.id!==t.payload.item.id}))),[t.payload.item])})});case f:return Object(j.a)(Object(j.a)({},e),{},{model:Object(j.a)(Object(j.a)({},e.model),{},{items:e.model.items.filter((function(e){return e.id!==t.payload.id}))})});case g:return Object(j.a)(Object(j.a)({},e),{},{model:Object(j.a)(Object(j.a)({},e.model),{},{files:t.payload.files})});default:return e}}var D=n(28),k=n.n(D),T=n(42),I=n(520),w=n(506),S={getInputData:function(){var e=Object(T.a)(k.a.mark((function e(t,n){var a,c,i,o,r,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){return{type:m}},o=function(e,t){return{type:b,payload:{materials:e,vendors:t}}},a=n.showBackdrop,c=n.showAlert,i=n.hideBackdrop,a(),e.prev=4,e.next=7,Promise.all([I.a.getAll(),w.a.getVendors()]);case 7:s=e.sent,t(o(s[0],s[1])),i(),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),t(r()),i(),c(l.b.FETCH_FAILURE,"error");case 17:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n){return e.apply(this,arguments)}}(),changeHeader:function(e,t,n){n({type:p,payload:{name:e,value:t}})},changeVendors:function(e,t,n){n({type:h,payload:{vendorCode:e,checked:t}})},addItem:function(e,t){t({type:x,payload:{item:e}})},editItem:function(e,t){t({type:O,payload:{item:e}})},removeItem:function(e,t){t({type:f,payload:{id:e}})},changeFiles:function(e,t){t({type:g,payload:{files:e}})}},M=Object(c.createContext)(y);function A(e){var t=e.children,n=i.a.useReducer(C,v),o=Object(s.a)(n,2),r=o[0],d=o[1],u=Object(c.useContext)(l.a),j={state:r,getInputData:function(){S.getInputData(d,u)},changeHeader:function(e,t){S.changeHeader(e,t,d)},changeVendors:function(e,t){S.changeVendors(e,t,d)},addItem:function(e){S.addItem(e,d)},editItem:function(e){S.editItem(e,d)},removeItem:function(e){S.removeItem(e,d)},changeFiles:function(e){S.changeFiles(e,d)}};return Object(a.jsx)(M.Provider,{value:j,children:t})}var F=n(50),E=n(516),N=n(21),q=n(496);function U(){var e=Object(o.g)(),t=i.a.useContext(l.a),n=t.showAlert,c=t.showBackdrop,d=t.hideBackdrop,u=i.a.useContext(M),b=u.state,m=u.changeHeader,p=u.changeVendors,h=u.changeFiles,x=b.model,O=b.vendors,f=i.a.useState(null),g=Object(s.a)(f,2),v=g[0],y=g[1],C=function(e){m(e.target.name,e.target.value)},D=function(e,t){m(e,t)},I=function(){var t=Object(T.a)(k.a.mark((function t(){var a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(),t.prev=1,t.next=4,q.a.createPackage(b.model);case 4:a=t.sent,d(),n("".concat(l.b.ACTION_SUCCESS," ").concat(a),"success"),e.push("/e-bidding/expert/document/".concat(a)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),d(),n("".concat(l.b.ACTION_FAILURE),"error");case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(N.m,{title:"Th\xf4ng tin chung",children:Object(a.jsxs)(r.a,{container:!0,spacing:1,children:[Object(a.jsx)(r.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(N.r,{required:!0,label:"M\xe3 s\u1ed1",name:"code",type:"text",value:b.model.code,onChange:C})}),Object(a.jsx)(r.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(N.r,{required:!0,label:"T\xean g\xf3i th\u1ea7u",name:"name",type:"text",value:b.model.name,onChange:C})}),Object(a.jsxs)(r.a,{item:!0,xs:12,children:[Object(a.jsx)(F.a,{variant:"caption",children:"Lo\u1ea1i h\xecnh g\xf3i th\u1ea7u"}),Object(a.jsx)("div",{children:Object(a.jsx)(N.d,{checked:x.isInternal,name:"isInternal",label:"\u0110\u1ea5u th\u1ea7u n\u1ed9i b\u1ed9",onChange:function(e,t){m("isInternal",t)}})})]}),Object(a.jsx)(r.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(N.i,{label:"Th\u1eddi gian m\u1edf th\u1ea7u",name:"begin",value:b.model.begin,onChange:function(e){D("begin",e)},disablePast:!0,required:!0})}),Object(a.jsx)(r.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(N.i,{label:"Th\u1eddi gian \u0111\xf3ng th\u1ea7u",name:"end",value:b.model.end,onChange:function(e){D("end",e)},disablePast:!0,required:!0})}),Object(a.jsxs)(r.a,{item:!0,xs:12,children:[Object(a.jsx)(F.a,{variant:"caption",children:"N\u1ed9i dung"}),Object(a.jsx)(N.k,{value:b.model.description,onChange:function(e){m("description",e)}})]}),Object(a.jsxs)(r.a,{container:!0,item:!0,xs:12,spacing:1,children:[Object(a.jsxs)(r.a,{container:!0,item:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(a.jsx)(r.a,{item:!0,xs:10,children:Object(a.jsx)(N.e,{label:"Ch\u1ecdn nh\xe0 cung c\u1ea5p",optionLabel:"label",value:v,options:function(e){return e.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{label:"[".concat(e.code,"]-").concat(e.longTextName)})}))}(O),getOptionSelected:function(e,t){return e.code===t.code},onChange:function(e){y(e)}})}),Object(a.jsx)(r.a,{item:!0,children:Object(a.jsx)(N.o,{icon:"plus",color:"primary",text:"Th\xeam",variant:"contained",onClick:function(){null!==v&&(x.vendors.map((function(e){return e.code})).includes(v.code)||p(v.code,!0))}})})]}),Object(a.jsx)(r.a,{container:!0,item:!0,xs:12,spacing:1,children:x.vendors.map((function(e,t){return Object(a.jsxs)(r.a,{item:!0,container:!0,spacing:1,xs:12,children:[Object(a.jsx)(r.a,{item:!0,children:Object(a.jsx)(F.a,{variant:"subtitle2",children:"".concat(t+1,". [").concat(e.code,"] - ").concat(e.longTextName)})}),Object(a.jsx)(r.a,{item:!0,children:Object(a.jsx)(N.o,{icon:"trash-alt",color:"danger",text:"X\xf3a",onClick:function(){var t;t=e.code,p(t,!1)}})})]},e.code)}))})]}),Object(a.jsxs)(r.a,{item:!0,xs:12,children:[Object(a.jsx)(F.a,{variant:"caption",children:"T\xe0i li\u1ec7u \u0111\xednh k\xe8m"}),Object(a.jsx)("div",{children:Object(a.jsx)(r.a,{container:!0,spacing:1,children:Object(a.jsx)(E.a,{showPreviews:!1,acceptedFiles:[".doc",".docx",".xls",".xlsx",".pdf",".rar",".zip"],showFileNames:!0,filesLimit:10,maxFileSize:25e6,useChipsForPreview:!0,dropzoneText:"K\xe9o th\u1ea3 file v\xe0o \u0111\xe2y \u0111\u1ec3 t\u1ea3i l\xean",onChange:function(e){Array.isArray(e)&&h(e)},showAlerts:!1})})})]}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(N.o,{icon:"plus",color:"success",text:"T\u1ea1o g\xf3i th\u1ea7u",variant:"contained",onClick:function(){I()}})})]})})}var _=n(484),H=n(617),P=n.n(H);var B={excelDateToJSDate:function(e){var t=Math.floor(e-25569),n=new Date(1e3*(86400*t)),a=e-Math.floor(e)+1e-7,c=Math.floor(86400*a)-Math.floor(86400*a)%60,i=Math.floor(86400*a)%60,o=Math.floor(c/3600),r=Math.floor(c/60)%60;return new Date(n.getFullYear(),n.getMonth(),n.getDate(),o,r,i)},readToArray:function(e,t,n,a){return new Promise((function(c,i){var o=new FileReader;o.readAsArrayBuffer(e);var r=[];o.onload=function(){for(var e=new Uint8Array(o.result),s=P.a.read(e,{type:"array"}),l=s.Sheets[s.SheetNames[0]],d=0,u=function(){var e=Object(j.a)({},a),c=n+d;t.map((function(t){var n=l[P.a.utils.encode_cell({c:t.col,r:c})];if("string"===typeof e[t.name]||void 0!==n)switch(typeof e[t.name]){case"string":void 0!==n&&"s"===n.t&&(e[t.name]=n.v);break;case"number":"n"===n.t&&(e[t.name]=n.v)}else console.log(c),console.log(t.col),i();return!0})),r.push(e),d++};l[P.a.utils.encode_cell({c:t[0].col,r:n+d})];)u();c(r)}}))}},L=[{name:"no",col:0},{name:"code",col:1},{name:"spec",col:3},{name:"note",col:4},{name:"quantity",col:6},{name:"optionQuantity",col:8},{name:"begin",col:9},{name:"end",col:10}],Q=[{id:"noNumber",label:"STT",numeric:!1,sortable:!1},{id:"infoCol",label:"H\u1ea1ng m\u1ee5c",numeric:!1,sortable:!1},{id:"quantityCol",label:"S\u1ed1 l\u01b0\u1ee3ng",numeric:!1,sortable:!1},{id:"noteCol",label:"Ghi ch\xfa",numeric:!1,sortable:!1},{id:"deliveryCol",label:"Th\u1eddi gian giao h\xe0ng",numeric:!1,sortable:!1},{id:"action",label:"",numeric:!1,sortable:!1}],V={id:0,no:"0",materialCode:"",materialDescription:"",begin:new Date,end:new Date,note:"",optionQuantity:"0",optionUnit:"",quantity:"0",spec:"",unit:""};function R(){var e,t,n=i.a.useContext(l.a),c=n.showAlert,o=n.showBackdrop,d=n.hideBackdrop,b=i.a.useContext(M),m=b.state,p=b.addItem,h=b.editItem,x=b.removeItem,O=i.a.useState(V),f=Object(s.a)(O,2),g=f[0],v=f[1],y=i.a.useState(0),C=Object(s.a)(y,2),D=C[0],I=C[1],w=i.a.useState(!1),S=Object(s.a)(w,2),A=S[0],q=S[1],U=i.a.useState(!1),H=Object(s.a)(U,2),P=H[0],R=H[1],G=i.a.useState(!1),z=Object(s.a)(G,2),J=z[0],X=z[1],K=i.a.useState(),$=Object(s.a)(K,2),Y=$[0],W=$[1],Z=function(){var e=Object(T.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===Y){e.next=16;break}return X(!1),o(),e.prev=3,e.next=6,B.readToArray(Y,L,1,{no:0,code:"",spec:"",note:"",quantity:0,optionQuantity:0,begin:0,end:0});case 6:e.sent.filter((function(e){return e.no>0})).map((function(e){var t=m.materials.find((function(t){return t.code===e.code}));if(void 0!==t){var n={no:e.no.toString(),materialCode:e.code,spec:e.spec,begin:B.excelDateToJSDate(e.begin),end:B.excelDateToJSDate(e.end),materialDescription:t.description,note:e.note,unit:t.unit,id:D+1,optionUnit:t.optionUnit,quantity:e.quantity.toString(),optionQuantity:e.optionQuantity.toString()};I(D+1),p(n)}return!0})),c(l.b.ACTION_SUCCESS,"success"),d(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),d(),c("File sai m\u1eabu! Vui l\xf2ng ki\u1ec3m tra l\u1ea1i!","error");case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}(),ee=function(e){v(Object(j.a)(Object(j.a)({},g),{},Object(u.a)({},e.target.name,e.target.value)))},te=[Object(a.jsx)(N.o,{tooltip:"Th\xeam m\u1edbi",text:"Th\xeam",icon:"plus",color:"primary",onClick:function(){v(Object(j.a)(Object(j.a)({},V),{},{id:D,no:D.toString()})),I(D+1),R(!1),q(!0)}},1),Object(a.jsx)(N.o,{tooltip:"T\u1ea1o t\u1eeb file excel",text:"Excel",icon:"file-excel",color:"primary",onClick:function(){X(!0)}},2)];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(N.l,{open:J,onClose:function(){X(!1)},title:"T\u1ea3i t\u1ec7p excel",onSubmit:Z,children:Object(a.jsx)(E.a,{acceptedFiles:[".xls",".xlsx"],showPreviews:!1,showFileNames:!0,filesLimit:1,maxFileSize:25e6,useChipsForPreview:!0,dropzoneText:"K\xe9o th\u1ea3 file v\xe0o \u0111\xe2y \u0111\u1ec3 t\u1ea3i l\xean",onChange:function(e){Array.isArray(e)&&W(e[0])},showAlerts:!1})}),Object(a.jsx)(N.l,{title:"Th\xeam/Ch\u1ec9nh s\u1eeda",open:A,onClose:function(){q(!1)},onSubmit:function(){q(!1),P?h(g):p(g)},children:Object(a.jsxs)(r.a,{container:!0,spacing:1,children:[Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(N.r,{name:"no",label:"Th\u1ee9 t\u1ef1",type:"text",required:!0,value:g.no,onChange:ee})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(N.e,{required:!0,label:"M\xe3 v\u1eadt t\u01b0",options:(t=m.materials,t.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{label:"[".concat(e.code,"]-").concat(e.description)})}))),optionLabel:"label",getOptionSelected:function(e,t){return e.code===t.code},onChange:function(e){null!==e&&v(Object(j.a)(Object(j.a)({},g),{},{materialCode:e.code,materialDescription:e.description,unit:e.unit,optionUnit:e.optionUnit}))}})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(N.r,{name:"materialDescription",label:"Di\u1ec5n gi\u1ea3i",type:"text",disabled:!0,required:!0,value:g.materialDescription})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(N.r,{name:"spec",label:"Spec",type:"text",value:g.spec,onChange:ee})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(N.r,{name:"note",label:"Ghi ch\xfa",type:"text",value:g.note,onChange:ee})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(N.r,{name:"quantity",label:"S\u1ed1 l\u01b0\u1ee3ng 1",type:"number",value:g.quantity,onChange:ee})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(N.r,{name:"unit",label:"\u0110\u01a1n v\u1ecb 1",type:"text",disabled:!0,required:!0,value:g.unit})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(N.r,{name:"optionQuantity",label:"S\u1ed1 l\u01b0\u1ee3ng 2",type:"number",value:g.optionQuantity,onChange:ee})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(N.r,{name:"optionUnit",label:"\u0110\u01a1n v\u1ecb 2",type:"text",disabled:!0,required:!0,value:g.optionUnit})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(N.h,{label:"Ng\xe0y b\u1eaft \u0111\u1ea7u giao h\xe0ng",name:"begin",value:g.begin,onChange:function(e){v(Object(j.a)(Object(j.a)({},g),{},{begin:e}))},disablePast:!0,required:!0})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(N.h,{label:"Ng\xe0y k\u1ebft th\xfac giao h\xe0ng",name:"end",value:g.end,onChange:function(e){v(Object(j.a)(Object(j.a)({},g),{},{end:e}))},disablePast:!0,required:!0})})]})}),Object(a.jsx)(N.g,{title:"Danh s\xe1ch v\u1eadt t\u01b0, d\u1ecbch v\u1ee5",columns:Q,data:(e=m.model.items,e.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{noNumber:parseInt(e.no,10),infoCol:Object(a.jsxs)("div",{children:[Object(a.jsx)(F.a,{variant:"subtitle2",children:e.materialDescription}),Object(a.jsx)(F.a,{variant:"caption",children:e.materialCode})]}),quantityCol:Object(a.jsxs)("div",{children:[Object(a.jsx)(F.a,{variant:"subtitle2",children:"".concat(_.a.formatMoney(parseFloat(e.quantity),3)," ").concat(e.unit)}),Object(a.jsx)(F.a,{variant:"caption",children:"".concat(_.a.formatMoney(parseFloat(e.optionQuantity),3)," ").concat(e.optionUnit)})]}),noteCol:Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(F.a,{variant:"caption",children:"Spec: ".concat(e.spec)}),Object(a.jsx)(F.a,{variant:"caption",children:"Ghi ch\xfa: ".concat(e.note)})]}),deliveryCol:Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(F.a,{variant:"caption",children:"T\u1eeb: ".concat(_.a.formatDate(e.begin,"dd/MM/yyyy"))}),Object(a.jsx)(F.a,{variant:"caption",children:"\u0110\u1ebfn: ".concat(_.a.formatDate(e.end,"dd/MM/yyyy"))})]}),action:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(N.o,{tooltip:"Ch\u1ec9nh s\u1eeda",text:"S\u1eeda",icon:"edit",color:"success",onClick:function(){!function(e){v(e),R(!0),q(!0)}(e)}}),Object(a.jsx)(N.o,{tooltip:"X\xf3a",text:"X\xf3a",icon:"trash-alt",color:"danger",onClick:function(){var t;t=e.id,x(t)}})]})})}))),actions:te,initialOrderBy:"noNumber"})]})}function G(){var e=i.a.useContext(M).getInputData;return i.a.useEffect((function(){e()}),[]),Object(a.jsxs)(r.a,{container:!0,spacing:2,children:[Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(U,{})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(R,{})})]})}function z(){return Object(a.jsx)(A,{children:Object(a.jsx)(G,{})})}var J=n(36),X=n(141),K=[{id:"code",label:"M\xe3",numeric:!1,sortable:!0},{id:"name",label:"T\xean g\xf3i th\u1ea7u",numeric:!1,sortable:!1},{id:"isInternal",label:"Lo\u1ea1i",numeric:!1,sortable:!0,format:function(e){return e.isInternal?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(J.a,{icon:"shield-alt",color:X.a[700]}),"N\u1ed9i b\u1ed9"]}):""}},{id:"begin",label:"M\u1edf th\u1ea7u",numeric:!1,sortable:!0,format:function(e){return _.a.formatDate(new Date(e.begin),"dd/MM/yyyy - hh:mm")}},{id:"end",label:"\u0110\xf3ng th\u1ea7u",numeric:!1,sortable:!0,format:function(e){return _.a.formatDate(new Date(e.end),"dd/MM/yyyy - hh:mm")}},{id:"action",label:"",numeric:!1,sortable:!1}];function $(){var e,t=Object(o.i)().status,n=Object(o.g)(),c=i.a.useContext(l.a),r=c.showAlert,d=c.showBackdrop,u=c.hideBackdrop,b=i.a.useState([]),m=Object(s.a)(b,2),p=m[0],h=m[1],x=i.a.useState("Danh s\xe1ch g\xf3i th\u1ea7u"),O=Object(s.a)(x,2),f=O[0],g=O[1],v=[Object(a.jsx)(N.o,{tooltip:"L\xe0m m\u1edbi danh s\xe1ch",text:"L\xe0m m\u1edbi",icon:"sync-alt",color:"primary",onClick:function(){y()}},1)],y=function(){var e=Object(T.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(),e.prev=1,e.t0=h,e.next=5,q.a.getAll(t);case 5:e.t1=e.sent,(0,e.t0)(e.t1),u(),e.next=14;break;case 10:e.prev=10,e.t2=e.catch(1),u(),r(l.b.FETCH_FAILURE,"error");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return i.a.useEffect((function(){switch(y(),t){case"new":g("Danh s\xe1ch g\xf3i th\u1ea7u m\u1edbi");break;case"opening":g("Danh s\xe1ch g\xf3i th\u1ea7u \u0111ang m\u1edf");break;case"closed":g("Danh s\xe1ch g\xf3i th\u1ea7u \u0111\xe3 \u0111\xf3ng")}}),[t]),Object(a.jsx)(N.g,{title:f,columns:K,data:(e=p,e.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{action:Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(N.o,{tooltip:"Xem chi ti\u1ebft g\xf3i th\u1ea7u",text:"Xem",icon:"info-circle",color:"success",onClick:function(){n.push("/e-bidding/expert/document/".concat(e.code))}})})})}))),actions:v,initialOrderBy:"begin"})}var Y=n(538);function W(){var e=Object(o.j)().path;return Object(a.jsxs)(o.d,{children:[Object(a.jsx)(o.b,{path:"".concat(e,"/create-package"),component:z}),Object(a.jsx)(o.b,{path:"".concat(e,"/document-list/:status"),component:$}),Object(a.jsx)(o.b,{path:"".concat(e,"/document/:packageCode"),component:Y.a})]})}}}]);