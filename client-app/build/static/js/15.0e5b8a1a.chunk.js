(this.webpackJsonpemis=this.webpackJsonpemis||[]).push([[15],{1107:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return rt}));var a=n(142),c=n(15),i=n(0),r=n.n(i),o=n(26),s=n(55),l=n(93),u=n(16),d=n(23),j=n.n(d),b=n(41),h=n(18),p=n(308),x=n(345),m=n(81),f=n(357),O=n(375),g=n(664),v=n(381),y=n(48),w=n(111),C=n(9),k=n.n(C),N="/api/help-desk/issues";var I={getAll:function(e){return k.a.get("".concat(N,"/filter/").concat(e))},getById:function(e){return k.a.get("".concat(N,"/").concat(e))},create:function(e){return k.a.post(N,e)},follow:function(e){return k.a.post("".concat(N,"/").concat(e,"/followers/follow"))},unFollow:function(e){return k.a.delete("".concat(N,"/").concat(e,"/followers/unFollow"))}},S=n(494),A=n(1),T=Object(p.a)((function(e){return{root:Object(h.a)({width:"100%"},e.breakpoints.down("sm"),{padding:e.spacing(1)}),formControl:{margin:0,marginBottom:e.spacing(1.5)},title:{fontWeight:"bold"},description:{fontStyle:"italic"},menuItem:{paddingTop:e.spacing(.5),paddingBottom:e.spacing(.5)}}})),B={moduleId:0,title:"",content:"",priority:1,severity:1};function D(){var e=T(),t=Object(o.g)(),n=r.a.useContext(w.a),a=n.showAlert,i=n.showBackdrop,s=n.hideBackdrop,l=r.a.useState(B),d=Object(c.a)(l,2),h=d[0],p=d[1],C=r.a.useState([]),k=Object(c.a)(C,2),N=k[0],D=k[1],U=function(){var e=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(),e.prev=1,e.next=4,I.create(h);case 4:n=e.sent,a(w.b.ACTION_SUCCESS,"success"),s(),t.push("/help-desk/issues/".concat(n)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),a(w.b.ACTION_FAILURE,"error"),s();case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(),e.prev=1,e.t0=D,e.next=5,S.a.getAll();case 5:e.t1=e.sent,(0,e.t0)(e.t1),s(),e.next=14;break;case 10:e.prev=10,e.t2=e.catch(1),s(),a(w.b.FETCH_FAILURE,"error");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return r.a.useEffect((function(){E()}),[]),Object(A.jsx)("div",{className:e.root,children:Object(A.jsxs)(x.a,{container:!0,children:[Object(A.jsxs)(x.a,{item:!0,xs:12,children:[Object(A.jsx)(m.a,{variant:"subtitle1",children:"Ch\u1ecdn module*"}),Object(A.jsx)(f.a,{fullWidth:!0,size:"small",variant:"outlined",className:e.formControl,children:Object(A.jsxs)(O.a,{labelId:"moduleId-label",margin:"dense",id:"moduleId",name:"moduleId",fullWidth:!0,value:h.moduleId,onChange:function(e){p(Object(u.a)(Object(u.a)({},h),{},{moduleId:e.target.value}))},children:[Object(A.jsx)(g.a,{value:0,className:e.menuItem,children:Object(A.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(A.jsx)(m.a,{variant:"body2",className:e.title,children:"[Nh\xf3m] - Ch\u1ecdn module"}),Object(A.jsx)(m.a,{variant:"caption",className:e.description,children:"Ch\u1ecdn module c\u1ea7n h\u1ed7 tr\u1ee3."})]})}),N.map((function(t,n){return Object(A.jsx)(g.a,{value:t.id,className:e.menuItem,children:Object(A.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(A.jsx)(m.a,{variant:"body2",className:e.title,children:"[".concat(t.category,"] - ").concat(t.name)}),Object(A.jsx)(m.a,{variant:"caption",className:e.description,children:t.description})]})},n)}))]})}),Object(A.jsx)(m.a,{variant:"subtitle1",children:"Ti\xeau \u0111\u1ec1*"}),Object(A.jsx)(v.a,{margin:"dense",className:e.formControl,variant:"outlined",fullWidth:!0,name:"title",value:h.title,onChange:function(e){p(Object(u.a)(Object(u.a)({},h),{},{title:e.target.value}))}}),Object(A.jsx)(m.a,{variant:"subtitle1",children:"M\u1ee9c \u0111\u1ed9 l\u1ed7i*"}),Object(A.jsx)(f.a,{fullWidth:!0,variant:"outlined",className:e.formControl,children:Object(A.jsxs)(O.a,{labelId:"severity-label",margin:"dense",id:"severity",name:"severity",value:h.severity,onChange:function(e){p(Object(u.a)(Object(u.a)({},h),{},{severity:e.target.value}))},children:[Object(A.jsx)(g.a,{value:1,children:"Nh\u1eb9"}),Object(A.jsx)(g.a,{value:2,children:"B\xecnh th\u01b0\u1eddng"}),Object(A.jsx)(g.a,{value:3,children:"Nghi\xeam tr\u1ecdng"}),Object(A.jsx)(g.a,{value:4,children:"R\u1ea5t nghi\xeam tr\u1ecdng"})]})}),Object(A.jsx)(m.a,{variant:"subtitle1",children:"\u0110\u1ed9 \u01b0u ti\xean*"}),Object(A.jsx)(f.a,{fullWidth:!0,variant:"outlined",className:e.formControl,children:Object(A.jsxs)(O.a,{labelId:"priority-label",margin:"dense",id:"priority",name:"priority",value:h.priority,onChange:function(e){p(Object(u.a)(Object(u.a)({},h),{},{priority:e.target.value}))},children:[Object(A.jsx)(g.a,{value:1,children:"Th\u1ea5p"}),Object(A.jsx)(g.a,{value:2,children:"B\xecnh th\u01b0\u1eddng"}),Object(A.jsx)(g.a,{value:3,children:"Cao"}),Object(A.jsx)(g.a,{value:4,children:"C\u1ea7n g\u1ea5p"})]})})]}),Object(A.jsxs)(x.a,{item:!0,xs:12,children:[Object(A.jsx)(m.a,{variant:"subtitle1",children:"M\xf4 t\u1ea3 chi ti\u1ebft*"}),Object(A.jsx)(f.a,{fullWidth:!0,variant:"outlined",className:e.formControl,children:Object(A.jsx)(y.j,{value:h.content,onChange:function(e){p(Object(u.a)(Object(u.a)({},h),{},{content:e}))}})})]}),Object(A.jsx)(f.a,{variant:"outlined",className:e.formControl,children:Object(A.jsx)(y.n,{icon:"plus",variant:"contained",color:"success",text:"T\u1ea1o m\u1edbi",onClick:U})})]})})}var U=n(40),E=n(140),F=n(311),R=n(366),M=n(367),_=n(368),L=n(364),W=n(365),z=n(102),H=n(369),q=n(374),G=[{text:"Kh\xf4ng \u0111\u1eb7t",variant:"secondary"},{text:"Nh\u1eb9",variant:"success"},{text:"B\xecnh th\u01b0\u1eddng",variant:"info"},{text:"Nghi\xeam tr\u1ecdng",variant:"warning"},{text:"R\u1ea5t nghi\xeam tr\u1ecdng",variant:"danger"}],P=[{text:"Kh\xf4ng \u0111\u1eb7t",variant:"secondary"},{text:"Th\u1ea5p",variant:"success"},{text:"B\xecnh th\u01b0\u1eddng",variant:"info"},{text:"Cao",variant:"warning"},{text:"C\u1ea7n g\u1ea5p",variant:"danger"}],K=[{text:"Issue m\u1edbi",icon:"exclamation-circle",color:"warning"},{text:"Issue m\u1edbi",icon:"exclamation-circle",color:"warning"},{text:"\u0110ang x\u1eed l\xfd",icon:"sync-alt",color:"info"},{text:"\u0110\xe3 x\u1eed l\xfd",icon:"question-circle",color:"primary"},{text:"\u0110\xe3 \u0111\xf3ng",icon:"check-circle",color:"success"},{text:"\u0110\xe3 h\u1ee7y",icon:"times-circle",color:"danger"},{text:"Ch\u1edd ph\xea duy\u1ec7t",icon:"hourglass-half",color:"warning"}],V=[{name:"T\u1ea1o m\u1edbi",apiUrl:"create",text:"\u0111\xe3 t\u1ea1o issue",needContent:!1,color:"danger",icon:"exclamation-circle"},{name:"Ti\u1ebfp nh\u1eadn",apiUrl:"assign",text:"\u0111\xe3 ti\u1ebfp nh\u1eadn",needContent:!1,color:"info",icon:"sync-alt"},{name:"\u0110\xe3 x\u1eed l\xfd",apiUrl:"resolve",text:"\u0111\xe3 x\u1eed l\xfd",needContent:!1,color:"primary",icon:"info-circle"},{name:"\u0110\xf3ng issue",apiUrl:"close",text:"\u0111\xe3 \u0111\xf3ng issue",needContent:!1,color:"success",icon:"check-circle"},{name:"B\xe1o l\u1ed7i",apiUrl:"reject",text:"\u0111\xe3 b\xe1o l\u1ed7i",needContent:!0,color:"warning",icon:"exclamation-triangle"},{name:"Tr\u1ea3 l\u1ea1i",apiUrl:"giveBack",text:"\u0111\xe3 tr\u1ea3 l\u1ea1i",needContent:!0,color:"warning",icon:"undo-alt"},{name:"Comment",apiUrl:"comment",text:"\u0111\xe3 comment",needContent:!0,color:"secondary",icon:"comments"},{name:"H\u1ee7y issue",apiUrl:"cancel",text:"\u0111\xe3 h\u1ee7y",needContent:!1,color:"danger",icon:"times-circle"},{name:"G\u1eedi ph\xea duy\u1ec7t",apiUrl:"createRequest",text:"\u0111\xe3 g\u1eedi ph\xea duy\u1ec7t",needContent:!0,color:"primary",icon:"paper-plane"},{name:"Ph\xea duy\u1ec7t",apiUrl:"approve",text:"\u0111\xe3 ph\xea duy\u1ec7t",needContent:!1,color:"success",icon:"signature"},{name:"T\u1eeb ch\u1ed1i",apiUrl:"deny",text:"\u0111\xe3 t\u1eeb ch\u1ed1i ph\xea duy\u1ec7t",needContent:!0,color:"danger",icon:"times"}],J=n(133),Y=n(135),Q=n(312),X=n(309),Z=n(134),$=n(25),ee=n(353),te=Object(p.a)((function(){return{secondary:{color:J.a[500]},success:{color:Y.a[500]},info:{color:Q.a[500]},warning:{color:X.a[500]},danger:{color:J.a[500]},primary:{color:Z.a[500]},dark:{color:Z.a[500]},inherit:{color:"inherit"}}}));function ne(e){var t=e.text,n=e.icon,a=e.color,c=te();return Object(A.jsx)(ee.a,{title:t,children:Object(A.jsx)("div",{children:Object(A.jsx)($.a,{icon:n,className:c[a],style:{fontSize:"1.25rem"}})})})}var ae=n(3),ce=n(132),ie=Object(p.a)((function(e){return{badge:{marginRight:e.spacing(.5),padding:e.spacing(.2),paddingLeft:e.spacing(.5),paddingRight:e.spacing(.5),borderRadius:"4px",fontWeight:"bold",fontSize:e.spacing(1.4)},secondary:{color:"white",backgroundColor:ce.a[500]},success:{color:"white",backgroundColor:Y.a[500]},info:{color:"white",backgroundColor:Q.a[500]},warning:{color:"black",backgroundColor:X.a[500]},danger:{color:"white",backgroundColor:J.a[500]},primary:{color:"white",backgroundColor:Z.a[500]},dark:{color:"white",backgroundColor:"black"},inherit:{color:"inherit",backgroundColor:"inherit"}}}));function re(e){var t=e.text,n=e.variant,a=ie();return Object(A.jsx)("span",{className:Object(ae.a)(a.badge,a[n]),children:t})}var oe=n(356),se=n(358),le=n(362),ue=n(305),de=n(347),je=n(348),be=n(349),he=n(1086),pe=n(355),xe=n(376),me=n(350),fe=Object(p.a)((function(e){var t;return{counter:(t={display:"flex",marginRight:e.spacing(3)},Object(h.a)(t,e.breakpoints.down("sm"),{marginRight:e.spacing(2)}),Object(h.a)(t,"alignItems","center"),Object(h.a)(t,"fontSize",e.spacing(2)),Object(h.a)(t,"opacity","0.8"),t)}}));function Oe(e){var t=e.icon,n=e.value,a=e.text,c=e.color,i=fe();return Object(A.jsxs)("div",{className:i.counter,children:[Object(A.jsx)($.a,{icon:t,style:{fontSize:"inherit",color:c}})," ".concat(n," "),Object(A.jsx)(z.a,{smDown:!0,children:a})]})}var ge=Object(p.a)((function(e){return{toolbar:{display:"flex",flexDirection:"column",height:"auto"},title:{flexGrow:1},row:{display:"flex",flexDirection:"row",width:"100%",paddingTop:e.spacing(1)},rowRes:Object(h.a)({display:"flex",flexDirection:"row",width:"100%",paddingTop:e.spacing(1)},e.breakpoints.down("xs"),{flexDirection:"column"}),actions:{display:"flex",alignItems:"flex-end",color:e.palette.text.primary,paddingRight:e.spacing(2)},search:Object(h.a)({color:e.palette.text.secondary},e.breakpoints.down("xs"),{flexGrow:1}),input:Object(h.a)({width:200},e.breakpoints.down("xs"),{width:"100%"})}}));function ve(e){var t=e.title,n=e.keyWord,a=e.counter,i=e.filterModules,o=e.onChangeKeyWord,s=e.onChangeFilterModules,l=ge(),u=r.a.useState(!1),d=Object(c.a)(u,2),j=d[0],b=d[1],h=r.a.useState(!1),p=Object(c.a)(h,2),x=p[0],f=p[1],O=function(){b(!1)};r.a.useEffect((function(){0===i.filter((function(e){return!e.checked})).length?f(!0):f(!1)}),[i]);var g=function(e){s(i.map((function(t){return t.name===e.target.name&&(t.checked=e.target.checked),t})))};return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)(oe.a,{className:l.toolbar,children:[Object(A.jsxs)("div",{className:l.rowRes,children:[Object(A.jsx)(m.a,{noWrap:!0,className:l.title,variant:"h6",id:"tableTitle",component:"div",children:t}),Object(A.jsxs)("div",{className:l.actions,children:[Object(A.jsx)("div",{className:l.actions,children:Object(A.jsx)(y.n,{tooltip:"L\u1ecdc theo module",text:"Module",icon:"filter",color:"primary",onClick:function(){b(!0)}})}),Object(A.jsx)("div",{className:l.search,children:Object(A.jsx)(se.a,{className:l.input,id:"input-with-icon-adornment",onChange:function(e){var t;t=e.target.value,o(t)},value:n,startAdornment:Object(A.jsx)(le.a,{position:"start",children:Object(A.jsx)($.a,{icon:"search",style:{fontSize:"0.9rem",fontWeight:200}})}),endAdornment:""!==n&&Object(A.jsx)(le.a,{position:"end",children:Object(A.jsx)(ue.a,{edge:"end","aria-label":"toggle password visibility",onClick:function(){o("")},children:Object(A.jsx)($.a,{icon:"times",style:{fontSize:"0.9rem",fontWeight:200}})})})})})]})]}),Object(A.jsxs)("div",{className:l.row,children:[Object(A.jsx)(Oe,{icon:"bug",color:"black",value:a.total,text:"issue"}),Object(A.jsx)(Oe,{icon:"exclamation-circle",color:X.a[500],value:a.new,text:"issue m\u1edbi"}),Object(A.jsx)(Oe,{icon:"sync-alt",color:Q.a[500],value:a.process,text:"issue \u0111ang x\u1eed l\xfd"}),Object(A.jsx)(Oe,{icon:"question-circle",color:Z.a[500],value:a.resolved,text:"issue \u0111\xe3 x\u1eed l\xfd"}),Object(A.jsx)(Oe,{icon:"check-circle",color:Y.a[500],value:a.closed,text:"issue \u0111\xe3 \u0111\xf3ng"})]})]}),Object(A.jsxs)(de.a,{fullWidth:!0,open:j,onClose:O,"aria-labelledby":"form-dialog-title",children:[Object(A.jsx)(je.a,{id:"form-dialog-title",children:"L\u1ecdc theo module"}),Object(A.jsx)(F.a,{}),Object(A.jsx)(be.a,{children:Object(A.jsxs)(he.a,{children:[Object(A.jsx)(pe.a,{control:Object(A.jsx)(xe.a,{checked:x,onChange:function(e){var t=i.map((function(t){return t.checked=e.target.checked,t}));s(t)}}),label:"Ch\u1ecdn t\u1ea5t c\u1ea3",color:"primary"}),i.map((function(e,t){return Object(A.jsx)(pe.a,{control:Object(A.jsx)(xe.a,{checked:e.checked,onChange:g,name:e.name}),label:e.name,color:"primary"},t)}))]})}),Object(A.jsx)(F.a,{}),Object(A.jsx)(me.a,{children:Object(A.jsx)(y.n,{tooltip:"\u0110\xf3ng l\u1ea1i",text:"\u0110\xf3ng l\u1ea1i",icon:"times",color:"danger",onClick:O})})]})]})}var ye=Object(p.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{width:"100%",tableLayout:"fixed"},footer:{display:"flex",justifyContent:"flex-end",flexDirection:"row",paddingBottom:e.spacing(2),paddingRight:e.spacing(2)},pagination:{"& > *":{marginTop:e.spacing(2)}},textMute:{opacity:"0.8",fontSize:e.spacing(1.5)},title:Object(h.a)({flexGrow:1},e.breakpoints.down("sm"),{fontSize:"1rem",lineHeight:1.5}),cell:{display:"flex",flexDirection:"row"},cellContainer:Object(h.a)({width:"100%"},e.breakpoints.down("sm"),{padding:e.spacing(.75),"&:last-child":{padding:e.spacing(.75)}}),status:{marginRight:e.spacing(1),alignItems:"center",verticalAlign:"middle",display:"flex"}}}));function we(e){var t=e.data,n=e.title,i=e.onFollow,o=e.onUnFollow,s=ye(),l=G,u=P,d=K,j=r.a.useState(0),b=Object(c.a)(j,2),h=b[0],p=b[1],x=r.a.useState(""),f=Object(c.a)(x,2),O=f[0],g=f[1],v=r.a.useState({total:0,closed:0,new:0,process:0,resolved:0}),w=Object(c.a)(v,2),C=w[0],k=w[1],N=r.a.useState([]),I=Object(c.a)(N,2),S=I[0],T=I[1],B=r.a.useState([]),D=Object(c.a)(B,2),V=D[0],J=D[1],Y=function(e){p(e-1)};return r.a.useEffect((function(){var e=Object(a.a)(Array.from(new Set(t.map((function(e){return e.moduleName})))));J(e.map((function(e){return{name:e,checked:!0}})))}),[t]),r.a.useEffect((function(){var e=[];t.map((function(t){return(t.title.toUpperCase().includes(O.toUpperCase())||t.id.toString()===O)&&V.filter((function(e){return e.checked})).map((function(e){return e.name})).includes(t.moduleName)&&e.push(t),!0})),T(e)}),[t,V,O]),r.a.useEffect((function(){var e=0,t=0,n=0,a=0,c=0;S.map((function(i){switch(e++,i.status){case 1:t++;break;case 2:n++;break;case 3:a++;break;case 4:c++}return i})),k({total:e,new:t,process:n,resolved:a,closed:c}),p(0)}),[S]),Object(A.jsx)("div",{className:s.root,children:Object(A.jsxs)(E.a,{className:s.paper,children:[Object(A.jsx)(ve,{title:n,keyWord:O,onChangeKeyWord:function(e){g(e)},counter:C,filterModules:V,onChangeFilterModules:function(e){J(e)}}),Object(A.jsx)(F.a,{}),Object(A.jsx)(R.a,{children:Object(A.jsx)(M.a,{className:s.table,"aria-labelledby":"tableTitle",size:"small","aria-label":"enhanced table",children:Object(A.jsx)(_.a,{children:S.slice(10*h,10*h+10).map((function(e){return Object(A.jsx)(L.a,{hover:!0,children:Object(A.jsx)(W.a,{className:s.cellContainer,children:Object(A.jsxs)("div",{className:s.cell,children:[Object(A.jsx)("div",{className:s.status,children:Object(A.jsx)(ne,{text:d[e.status].text,icon:d[e.status].icon,color:d[e.status].color})}),Object(A.jsxs)("div",{style:{flexGrow:1,width:"70%"},children:[Object(A.jsx)("div",{style:{display:"flex",width:"100%"},children:Object(A.jsx)(m.a,{display:"block",noWrap:!0,component:"h6",className:s.title,children:Object(A.jsx)(U.a,{style:{textDecoration:"none"},to:"".concat("/help-desk/issues","/").concat(e.id),children:"[#".concat(e.id,"] ").concat(e.title)})})}),Object(A.jsxs)(m.a,{className:s.textMute,children:[Object(A.jsx)(z.a,{xsDown:!0,children:Object(A.jsx)(re,{text:l[e.severity].text,variant:l[e.severity].variant})}),Object(A.jsx)(z.a,{xsDown:!0,children:Object(A.jsx)(re,{text:u[e.priority].text,variant:u[e.priority].variant})}),Object(A.jsx)(re,{text:e.moduleName,variant:"primary"}),Object(A.jsx)(z.a,{smDown:!0,children:"T\u1ea1o b\u1edfi ".concat(e.createdBy," l\xfac ").concat(e.createdTime)})]})]}),Object(A.jsx)("div",{children:e.followed?Object(A.jsx)(y.n,{tooltip:"H\u1ee7y theo d\xf5i issue n\xe0y",text:"H\u1ee7y theo d\xf5i",icon:"eye-slash",color:"danger",hideTitleOnMobile:!0,onClick:function(){o(e.id)}}):Object(A.jsx)(y.n,{tooltip:"Theo d\xf5i issue n\xe0y",text:"Theo d\xf5i",icon:"eye",color:"primary",hideTitleOnMobile:!0,onClick:function(){i(e.id)}})})]})})},e.id)}))})})}),Object(A.jsx)(H.a,{className:s.footer,component:"div",children:Object(A.jsxs)("div",{className:s.pagination,children:[Object(A.jsx)(z.a,{xsDown:!0,children:Object(A.jsx)(q.a,{count:Math.ceil(S.length/10),page:h+1,onChange:function(e,t){Y(t)},shape:"rounded"})}),Object(A.jsx)(z.a,{smUp:!0,children:Object(A.jsx)(q.a,{count:Math.ceil(S.length/10),page:h+1,onChange:function(e,t){Y(t)},shape:"rounded",size:"small"})})]})})]})})}function Ce(){var e=Object(o.i)().filter,t=r.a.useContext(w.a),n=t.showAlert,a=t.showBackdrop,i=t.hideBackdrop,s=r.a.useState([]),l=Object(c.a)(s,2),u=l[0],d=l[1],h=r.a.useState(""),p=Object(c.a)(h,2),x=p[0],m=p[1],f=function(){var t=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(),t.prev=1,t.t0=d,t.next=5,I.getAll(e);case 5:t.t1=t.sent,(0,t.t0)(t.t1),i(),t.next=14;break;case 10:t.prev=10,t.t2=t.catch(1),n(w.b.FETCH_FAILURE,"error"),i();case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(),e.prev=1,e.next=4,I.follow(t);case 4:n(w.b.ACTION_SUCCESS,"success"),f(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),i(),n(w.b.ACTION_FAILURE,"error");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(),e.prev=1,e.next=4,I.unFollow(t);case 4:n(w.b.ACTION_SUCCESS,"success"),f(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),i(),n(w.b.ACTION_FAILURE,"error");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.useEffect((function(){switch(f(),e){case"my-supported":m("Issue b\u1ea1n \u0111\xe3 nh\u1eadn h\u1ed7 tr\u1ee3");break;case"all":m("T\u1ea5t c\u1ea3 issue");break;case"waiting":m("Issue \u0111ang ch\u1edd ph\u1ea3n h\u1ed3i");break;default:m("Issue c\u1ee7a b\u1ea1n")}}),[e]),Object(A.jsx)(we,{title:x,data:u,onFollow:O,onUnFollow:g})}var ke="GET_ISSUE_DETAIL_SUCCESS",Ne="GET_ISSUE_DETAIL_FAILURE",Ie={issue:{category:"",content:"",createdBy:"",createdTime:new Date,followed:!1,id:0,moduleName:"",createdByFullName:"",moduleId:0,supportedBy:"",supportedByFullName:"",priority:0,severity:0,status:0,title:""},activities:[],validActions:[]},Se={state:Ie,getIssueDetail:function(e){},createActivity:function(e,t,n){},createRequest:function(e,t){}};function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ke:return{issue:t.payload.issue,activities:t.payload.activities,validActions:t.payload.validActions};case Ne:return Ie;default:return e}}var Te=function(e){return"/api/help-desk/issues/".concat(e,"/activities")};var Be={getAll:function(e){return k.a.get(Te(e))},getValidActions:function(e){return k.a.get("".concat(Te(e),"/validAction"))},create:function(e,t,n){return k.a.post("".concat(Te(e),"/").concat(t),n)},createRequest:function(e,t){return k.a.post("".concat(Te(e),"/createRequest"),t)}},De=function(){var e=Object(b.a)(j.a.mark((function e(t,n,a){var c,i,r,o,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=function(){return{type:Ne}},o=function(e,t,n){return{type:ke,payload:{issue:e,activities:t,validActions:n}}},c=a.showBackdrop,i=a.showAlert,r=a.hideBackdrop,c(),Promise.all([I.getById(t),Be.getAll(t),Be.getValidActions(t)]).then((function(e){n(o(e[0],e[1],e[2])),r()})).catch((function(){n(s()),r(),i(w.b.FETCH_FAILURE,"error")}));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(b.a)(j.a.mark((function e(t,n,a,c,i){var r,o,s,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.showBackdrop,o=i.showAlert,s=i.hideBackdrop,!(l=V)[n].needContent||""!==a.content){e.next=6;break}o("N\u1ed9i dung kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!","error"),e.next=18;break;case 6:return r(),e.prev=7,e.next=10,Be.create(t,l[n].apiUrl,a);case 10:o(w.b.ACTION_SUCCESS,"success"),De(t,c,i),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(7),o(w.b.ACTION_FAILURE,"error"),s();case 18:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t,n,a,c,i){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(b.a)(j.a.mark((function e(t,n,a,c){var i,r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.showBackdrop,r=c.showAlert,o=c.hideBackdrop,i(),e.prev=2,e.next=5,Be.createRequest(t,n);case 5:r(w.b.ACTION_SUCCESS,"success"),De(t,a,c),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),r(w.b.ACTION_FAILURE,"error"),o();case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n,a,c){return e.apply(this,arguments)}}(),Fe={getIssueDetail:De,createActivity:Ue,createRequest:Ee},Re=Object(i.createContext)(Se);function Me(e){var t=e.children,n=r.a.useReducer(Ae,Ie),a=Object(c.a)(n,2),o=a[0],s=a[1],l=Object(i.useContext)(w.a),u={state:o,getIssueDetail:function(e){Fe.getIssueDetail(e,s,l)},createActivity:function(e,t,n){Fe.createActivity(e,t,n,s,l)},createRequest:function(e,t){Fe.createRequest(e,t,s,l)}};return Object(A.jsx)(Re.Provider,{value:u,children:t})}var _e=n(1087),Le=n(1088),We=n(1089),ze=Object(p.a)((function(e){return{cardContent:Object(h.a)({padding:e.spacing(2)},e.breakpoints.down("xs"),{fontSize:"12px",padding:e.spacing(1)}),cardHeader:Object(h.a)({padding:e.spacing(1),paddingLeft:e.spacing(2)},e.breakpoints.down("xs"),{paddingLeft:e.spacing(1)}),title:Object(h.a)({fontWeight:"bold",alignItems:"center"},e.breakpoints.down("xs"),{fontSize:"14px"}),cell:{display:"flex",flexDirection:"row",width:"100%"},status:{marginRight:e.spacing(1),alignItems:"center",verticalAlign:"middle",display:"flex"}}}));function He(){var e=ze(),t=K,n=G,a=P,c=r.a.useContext(Re).state.issue;return Object(A.jsxs)(_e.a,{children:[Object(A.jsx)(Le.a,{title:Object(A.jsxs)("div",{className:e.cell,children:[Object(A.jsx)("div",{className:e.status,children:Object(A.jsx)(ne,{text:t[c.status].text,icon:t[c.status].icon,color:t[c.status].color})}),Object(A.jsxs)("div",{style:{flexGrow:1},children:[Object(A.jsx)(m.a,{variant:"h6",className:e.title,children:"[#".concat(c.id,"] ").concat(c.title)}),Object(A.jsx)(z.a,{xsDown:!0,children:Object(A.jsxs)(m.a,{children:[Object(A.jsx)(re,{text:n[c.severity].text,variant:n[c.severity].variant}),Object(A.jsx)(re,{text:a[c.priority].text,variant:a[c.priority].variant}),Object(A.jsx)(re,{text:c.moduleName,variant:"primary"})]})})]})]}),className:e.cardHeader}),Object(A.jsx)(F.a,{}),Object(A.jsx)(We.a,{className:e.cardContent,children:Object(A.jsx)("div",{dangerouslySetInnerHTML:{__html:c.content}})})]})}var qe=n(1130),Ge=n(1090),Pe=n(1118),Ke=n(1091),Ve=n(387),Je=Object(p.a)((function(e){return{stepper:Object(h.a)({padding:e.spacing(1)},e.breakpoints.down("xs"),{fontSize:"12px"})}}));function Ye(){var e=Je(),t=r.a.useContext(Re).state.activities,n=V;return Object(A.jsx)(y.l,{title:"L\u1ecbch s\u1eed",noPadding:!0,children:Object(A.jsx)(qe.a,{orientation:"vertical",className:e.stepper,children:t.map((function(e,t){return Object(A.jsxs)(Ge.a,{active:!0,children:[Object(A.jsx)(Pe.a,{children:"".concat(e.createdByFullName," ").concat(n[e.activityCode].text," l\xfac ").concat(Ve.a.formatDate(new Date(e.createdTime),"hh:mm dd/MM/yyyy"))}),""!==e.content&&null!==e.content&&void 0!==e.content&&Object(A.jsx)(Ke.a,{children:Object(A.jsx)("div",{children:Object(A.jsx)("div",{dangerouslySetInnerHTML:{__html:e.content}})})})]},t)}))})})}function Qe(e){var t=e.activityCode,n=r.a.useContext(Re),a=n.state,i=n.createActivity,o=a.validActions,s=V,l=r.a.useState(""),u=Object(c.a)(l,2),d=u[0],h=u[1],p=r.a.useState(!1),m=Object(c.a)(p,2),f=m[0],O=m[1],g=function(){var e=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!1),n={activityCode:t,createdBy:"",createdByFullName:"",createdTime:new Date,issueId:a.issue.id,content:d},i(a.issue.id,t,n);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.includes(t)?Object(A.jsxs)(x.a,{item:!0,children:[Object(A.jsx)(y.k,{title:s[t].name,onClose:function(){O(!1)},open:f,onSubmit:g,children:Object(A.jsx)(x.a,{container:!0,spacing:1,alignItems:"flex-end",children:Object(A.jsx)(x.a,{item:!0,xs:12,children:Object(A.jsx)(y.j,{value:d,onChange:function(e){h(e)}})})})}),Object(A.jsx)(y.n,{variant:"contained",color:s[t].color,tooltip:s[t].name,icon:s[t].icon,text:s[t].name,onClick:function(){h(""),O(!0)}})]}):Object(A.jsx)(A.Fragment,{})}var Xe=n(378),Ze=n(154);function $e(){var e=r.a.useContext(w.a),t=e.showAlert,n=e.showBackdrop,i=e.hideBackdrop,o=r.a.useContext(Re),s=o.state,l=o.createRequest,u=s.validActions,d=V,h=r.a.useState(""),p=Object(c.a)(h,2),f=p[0],O=p[1],g=r.a.useState(""),v=Object(c.a)(g,2),C=v[0],k=v[1],N=r.a.useState(!1),I=Object(c.a)(N,2),S=I[0],T=I[1],B=r.a.useState([]),D=Object(c.a)(B,2),U=D[0],E=D[1],F=function(){var e=Object(b.a)(j.a.mark((function e(){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(),e.prev=1,e.next=4,Ze.a.getApproverByKeyWord(C);case 4:c=e.sent,U.map((function(e){return e.userNumber})).includes(c.userNumber)||E([].concat(Object(a.a)(U),[{fullName:c.fullName,userNumber:c.userNumber}])),i(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t("Kh\xf4ng t\xecm th\u1ea5y ng\u01b0\u1eddi n\xe0y trong danh s\xe1ch ph\xea duy\u1ec7t!","error"),i();case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===U.length?t("Ph\u1ea3i c\xf3 t\u1ed1i thi\u1ec3u 01 ng\u01b0\u1eddi ph\xea duy\u1ec7t!","error"):(T(!1),l(s.issue.id,{activity:{activityCode:8,createdBy:"",createdByFullName:"",createdTime:new Date,issueId:s.issue.id,content:f},approvers:U.map((function(e){return e.userNumber}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.includes(8)?Object(A.jsxs)(x.a,{item:!0,children:[Object(A.jsx)(y.k,{title:d[8].name,onClose:function(){T(!1)},open:S,onSubmit:R,children:Object(A.jsxs)(x.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(A.jsx)(x.a,{item:!0,xs:12,md:6,children:Object(A.jsx)(y.p,{label:"M\xe3 s\u1ed1/H\u1ecd t\xean ng\u01b0\u1eddi ph\xea duy\u1ec7t",type:"text",value:C,onChange:function(e){k(e.target.value)}})}),Object(A.jsx)(x.a,{item:!0,xs:12,md:6,container:!0,spacing:1,children:Object(A.jsx)(x.a,{item:!0,children:Object(A.jsx)(y.n,{text:"Ph\xea duy\u1ec7t",color:"success",icon:"signature",variant:"contained",onClick:F})})}),Object(A.jsx)(x.a,{item:!0,xs:12,container:!0,spacing:1,alignItems:"stretch",children:Object(A.jsxs)(x.a,{item:!0,xs:12,md:6,children:[Object(A.jsx)(m.a,{variant:"caption",children:"Ng\u01b0\u1eddi ph\xea duy\u1ec7t:"}),Object(A.jsx)("div",{children:U.map((function(e){return Object(A.jsx)(Xe.a,{style:{margin:"4px"},label:"".concat(e.userNumber,"-").concat(e.fullName),onDelete:function(){var t;t=e.userNumber,E(U.filter((function(e){return e.userNumber!==t})))},color:"primary",variant:"outlined",size:"small"},e.userNumber)}))})]})}),Object(A.jsx)(x.a,{item:!0,xs:12,children:Object(A.jsx)(y.j,{value:f,onChange:function(e){O(e)}})})]})}),Object(A.jsx)(y.n,{variant:"contained",color:d[8].color,tooltip:d[8].name,icon:d[8].icon,text:d[8].name,onClick:function(){O(""),E([]),T(!0)}})]}):Object(A.jsx)(A.Fragment,{})}var et=Object(p.a)((function(e){return{actions:{padding:e.spacing(1)}}}));function tt(){var e=et(),t=r.a.useContext(Re).state.validActions;return Object(A.jsx)(y.l,{title:"Thao t\xe1c",noPadding:!0,children:Object(A.jsxs)(x.a,{container:!0,spacing:1,className:e.actions,children:[t.filter((function(e){return 8!==e})).map((function(e){return Object(A.jsx)(Qe,{activityCode:e},e)})),Object(A.jsx)($e,{})]})})}function nt(){var e=Object(o.i)().issueId,t=r.a.useContext(Re).getIssueDetail;return r.a.useEffect((function(){t(e)}),[e]),Object(A.jsxs)(x.a,{container:!0,alignContent:"stretch",spacing:2,children:[Object(A.jsx)(x.a,{item:!0,xs:12,children:Object(A.jsx)(He,{})}),Object(A.jsx)(x.a,{item:!0,xs:12,children:Object(A.jsx)(Ye,{})}),Object(A.jsx)(x.a,{item:!0,xs:12,children:Object(A.jsx)(tt,{})})]})}function at(){return Object(A.jsx)(Me,{children:Object(A.jsx)(nt,{})})}function ct(){var e=Object(o.j)().path;return Object(A.jsxs)(o.d,{children:[Object(A.jsx)(o.b,{path:"".concat(e,"/create-issue"),component:D}),Object(A.jsx)(o.b,{path:"".concat(e,"/list/:filter"),component:Ce}),Object(A.jsx)(o.b,{path:"".concat(e,"/issues/:issueId"),component:at})]})}var it=r.a.lazy((function(){return n.e(22).then(n.bind(null,1115))}));function rt(){var e=Object(o.j)().path,t=r.a.useContext(s.a),n=t.changeSideMenuList,i=t.changeActivePluginId,u=r.a.useState(!1),d=Object(c.a)(u,2),j=d[0],b=d[1];return r.a.useEffect((function(){i(l.e.id),Object(l.b)().then((function(e){b(e)})).catch((function(){b(!1)}))}),[]),r.a.useEffect((function(){var e=j?Object(a.a)(l.a):[];n([].concat(Object(a.a)(l.d),Object(a.a)(e)))}),[j]),Object(A.jsxs)(o.d,{children:[j&&Object(A.jsx)(o.b,{path:"".concat(e,"/admin"),component:it}),Object(A.jsx)(o.b,{path:"".concat(e),component:ct})]})}},387:function(e,t,n){"use strict";var a={formatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy",n=t,a=[{symbol:"dd",value:e.getDate()<10?"0".concat(e.getDate()):e.getDate()},{symbol:"MM",value:e.getMonth()+1<10?"0".concat(e.getMonth()+1):"".concat(e.getMonth()+1)},{symbol:"yyyy",value:e.getFullYear()},{symbol:"hh",value:e.getHours()<10?"0".concat(e.getHours()):e.getHours()},{symbol:"mm",value:e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes()}];return a.map((function(e){return n=n.replace(e.symbol,e.value),e.symbol})),n},formatMoney:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Intl.NumberFormat("vi-VN",{maximumFractionDigits:t});return n.format(e)}};t.a=a},494:function(e,t,n){"use strict";var a=n(9),c=n.n(a),i="/api/help-desk/modules";var r={getAll:function(){return c.a.get(i)},get:function(e){return c.a.get("".concat(i,"/").concat(e))},create:function(e){return c.a.post(i,e)},edit:function(e,t){return c.a.put("".concat(i,"/").concat(e),t)},remove:function(e){return c.a.delete("".concat(i,"/").concat(e))}};t.a=r}}]);