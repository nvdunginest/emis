(this.webpackJsonpemis=this.webpackJsonpemis||[]).push([[13],{1237:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return Et}));var a=n(208),c=n(25),r=n(0),i=n.n(r),s=n(27),o=n(47),u=n(18),l=n(106),j=n(23),h=n.n(j),d=n(40),p=n(317),b=n(302),m=n(97),x=n(94),O=n(26),f=n(380),g=n(70),v=n(46),y=n(168),N=n(613),w=n(2);function S(t){var e=t.icon,n=t.title,a=t.value,c=t.color,r=t.path,i=Object(s.f)();return Object(w.jsxs)(f.a,{container:!0,spacing:1,alignItems:"center",style:{cursor:"pointer"},onClick:function(){i.push(r)},children:[Object(w.jsx)(f.a,{item:!0,children:Object(w.jsx)(O.a,{style:{fontSize:"1.5rem",color:c},icon:e})}),Object(w.jsxs)(f.a,{item:!0,children:[Object(w.jsx)(g.a,{variant:"caption",children:n}),Object(w.jsx)(g.a,{variant:"subtitle2",children:"".concat(a," h\u1ee3p \u0111\u1ed3ng")})]})]})}function A(){var t=Object(o.b)(),e=i.a.useState(!1),n=Object(c.a)(e,2),a=n[0],r=n[1],s=i.a.useState(!1),l=Object(c.a)(s,2),j=l[0],O=l[1],g=i.a.useState({processing:0,submitted:0,approved:0,waiting:0}),A=Object(c.a)(g,2),C=A[0],k=A[1],T=i.a.useState({submitted:0,approved:0,waiting:0}),P=Object(c.a)(T,2),I=P[0],M=P[1],D=function(t,e){var n=t.find((function(t){return t.contractStatus===e}));return void 0===n?0:n.total},F=function(){var e=Object(d.a)(h.a.mark((function e(){var n,a,c,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(u.loadingActions.show()),e.prev=1,e.next=4,y.a.checkRolePermission("CREATOR_ROLE");case 4:if(n=e.sent,r(n),!n){e.next=11;break}return e.next=9,N.a.countByCreator();case 9:a=e.sent,k({processing:D(a,0),approved:D(a,2),submitted:D(a,1),waiting:D(a,3)});case 11:return e.next=13,y.a.checkRolePermission("APPROVER_ROLE");case 13:if(c=e.sent,O(c),!c){e.next=20;break}return e.next=18,N.a.countByApprover();case 18:i=e.sent,M({approved:D(i,2),submitted:D(i,1),waiting:D(i,3)});case 20:e.next=29;break;case 22:e.prev=22,e.t0=e.catch(1),t(u.alertActions.show(u.alertMessage.ACTION_FAILURE,"error")),r(!1),O(!1),k({waiting:0,submitted:0,approved:0,processing:0}),M({waiting:0,approved:0,submitted:0});case 29:return e.prev=29,t(u.loadingActions.hide()),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[1,22,29,32]])})));return function(){return e.apply(this,arguments)}}();return i.a.useEffect((function(){F()}),[]),Object(w.jsxs)(f.a,{container:!0,spacing:2,children:[a&&Object(w.jsx)(f.a,{item:!0,xs:12,children:Object(w.jsx)(v.l,{title:"Qu\u1ea3n l\xfd h\u1ee3p \u0111\u1ed3ng B",children:Object(w.jsxs)(f.a,{container:!0,spacing:2,children:[Object(w.jsx)(f.a,{item:!0,xs:12,md:6,children:Object(w.jsx)(S,{icon:"sync-alt",title:"H\u1ee3p \u0111\u1ed3ng \u0111ang x\u1eed l\xfd",value:C.processing,color:p.a[700],path:"/b-contract/creator/list/processing"})}),Object(w.jsx)(f.a,{item:!0,xs:12,md:6,children:Object(w.jsx)(S,{icon:"hourglass-half",title:"H\u1ee3p \u0111\u1ed3ng ch\u1edd ph\xea duy\u1ec7t",value:C.submitted,color:b.a[700],path:"/b-contract/creator/list/submitted"})}),Object(w.jsx)(f.a,{item:!0,xs:12,md:6,children:Object(w.jsx)(S,{icon:"check-circle",title:"H\u1ee3p \u0111\u1ed3ng \u0111\xe3 ph\xea duy\u1ec7t",value:C.approved,color:m.a[700],path:"/b-contract/creator/list/approved"})}),Object(w.jsx)(f.a,{item:!0,xs:12,md:6,children:Object(w.jsx)(S,{icon:"history",title:"H\u1ee3p \u0111\u1ed3ng ch\u1edd m\u1edf l\u1ea1i",value:C.waiting,color:x.a[700],path:"/b-contract/creator/list/waiting"})})]})})}),j&&Object(w.jsx)(f.a,{item:!0,xs:12,children:Object(w.jsx)(v.l,{title:"Ph\xea duy\u1ec7t h\u1ee3p \u0111\u1ed3ng B",children:Object(w.jsxs)(f.a,{container:!0,spacing:2,children:[Object(w.jsx)(f.a,{item:!0,xs:12,md:6,children:Object(w.jsx)(S,{icon:"hourglass-half",title:"H\u1ee3p \u0111\u1ed3ng ch\u1edd ph\xea duy\u1ec7t",value:I.submitted,color:b.a[700],path:"/b-contract/approver/list/submitted"})}),Object(w.jsx)(f.a,{item:!0,xs:12,md:6,children:Object(w.jsx)(S,{icon:"check-circle",title:"H\u1ee3p \u0111\u1ed3ng \u0111\xe3 ph\xea duy\u1ec7t",value:I.approved,color:m.a[700],path:"/b-contract/approver/list/approved"})}),Object(w.jsx)(f.a,{item:!0,xs:12,md:6,children:Object(w.jsx)(S,{icon:"history",title:"H\u1ee3p \u0111\u1ed3ng ch\u1edd m\u1edf l\u1ea1i",value:I.waiting,color:x.a[700],path:"/b-contract/approver/list/waiting"})}),Object(w.jsx)(f.a,{item:!0,xs:12,md:6,children:Object(w.jsx)(v.i,{filename:"ContractReport.xlsx",url:"/api/contract/contracts/getExcelReport"})})]})})})]})}var C=n(703),k=n.n(C),T=n(805),P="GET_CONTRACT_DETAIL_SUCCESS",I="GET_CONTRACT_DETAIL_FAILURE",M={contract:{contractNumber:"",createdBy:"",createdByFullName:"",createdDate:new Date,projectCode:"",projectName:"",status:"",vendorCode:"",vendorName:"",contractType:"D",contractValue:0,paymentTerm:"",items:[],requests:[],attachments:[]}},D={state:M,getContractDetail:function(t){},create:function(t,e){},cancel:function(t,e){},check:function(t,e){},reject:function(t,e){},approve:function(t,e){},updateNetPrice:function(t,e){},createAttachment:function(t,e,n){},removeAttachment:function(t,e){}};function F(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case P:return{contract:e.payload.contract};case I:return M;default:return t}}var R=n(9),E=n.n(R),L=function(t){return"/api/contract/contracts/".concat(t,"/requests")};var H={create:function(t,e){return E.a.post("".concat(L(t),"/create"),e)},cancel:function(t,e){return E.a.post("".concat(L(t),"/cancel"),e)},check:function(t,e){return E.a.post("".concat(L(t),"/check"),e)},reject:function(t,e){return E.a.post("".concat(L(t),"/reject"),e)},approve:function(t,e){return E.a.post("".concat(L(t),"/approve"),e)}},_=function(t){return"/api/contract/contracts/".concat(t,"/attachments")};var B={create:function(t,e,n){var a=new FormData;return e.map((function(t){return a.append("files",t,t.name),!0})),n.map((function(t){return a.append("privateFiles",t,t.name),!0})),E.a.post("".concat(_(t)),a,{headers:{"Content-Type":"multipart/form-data"}})},remove:function(t,e){return E.a.delete("".concat(_(t),"/").concat(e))}},V=function(){var t=Object(d.a)(h.a.mark((function t(e,n){var a,c,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=function(){return{type:I}},a=function(t){return{type:P,payload:{contract:t}}},u.store.dispatch(u.loadingActions.show()),t.prev=3,t.next=6,N.a.getContract(e);case 6:r=t.sent,n(a(r)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),n(c()),u.store.dispatch(u.alertActions.show(u.alertMessage.FETCH_FAILURE,"error"));case 14:return t.prev=14,u.store.dispatch(u.loadingActions.hide()),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[3,10,14,17]])})));return function(e,n){return t.apply(this,arguments)}}(),U=function(){var t=Object(d.a)(h.a.mark((function t(e,n,a){var c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==n.content){t.next=3;break}return u.store.dispatch(u.alertActions.show("N\u1ed9i dung ph\xea duy\u1ec7t kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!","error")),t.abrupt("return");case 3:if(void 0!==n.steps.find((function(t){return!t.isFinish}))){t.next=6;break}return u.store.dispatch(u.alertActions.show("Ph\u1ea3i c\xf3 \xedt nh\u1ea5t m\u1ed9t ng\u01b0\u1eddi ki\u1ec3m tra!","error")),t.abrupt("return");case 6:if(void 0!==(c=n.steps.find((function(t){return t.isFinish})))&&""!==c.userNumber){t.next=10;break}return u.store.dispatch(u.alertActions.show("Ch\u01b0a c\xf3 ng\u01b0\u1eddi ph\xea duy\u1ec7t!","error")),t.abrupt("return");case 10:return u.store.dispatch(u.loadingActions.show()),t.prev=11,t.next=14,H.create(e,n);case 14:u.store.dispatch(u.alertActions.show(u.alertMessage.ACTION_SUCCESS,"success")),V(e,a),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(11),u.store.dispatch(u.loadingActions.hide()),u.store.dispatch(u.alertActions.show(u.alertMessage.ACTION_FAILURE,"error"));case 22:case"end":return t.stop()}}),t,null,[[11,18]])})));return function(e,n,a){return t.apply(this,arguments)}}(),q=function(){var t=Object(d.a)(h.a.mark((function t(e,n,a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u.store.dispatch(u.loadingActions.show()),t.prev=1,t.next=4,H.cancel(e,n);case 4:u.store.dispatch(u.alertActions.show(u.alertMessage.ACTION_SUCCESS,"success")),V(e,a),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),u.store.dispatch(u.loadingActions.hide()),u.store.dispatch(u.alertActions.show(u.alertMessage.ACTION_FAILURE,"error"));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n,a){return t.apply(this,arguments)}}(),z=function(){var t=Object(d.a)(h.a.mark((function t(e,n,a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u.store.dispatch(u.loadingActions.show()),t.prev=1,t.next=4,H.check(e,n);case 4:u.store.dispatch(u.alertActions.show(u.alertMessage.ACTION_SUCCESS,"success")),V(e,a),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),u.store.dispatch(u.loadingActions.hide()),u.store.dispatch(u.alertActions.show(u.alertMessage.ACTION_FAILURE,"error"));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n,a){return t.apply(this,arguments)}}(),K=function(){var t=Object(d.a)(h.a.mark((function t(e,n,a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==n.content){t.next=3;break}return u.store.dispatch(u.alertActions.show("N\u1ed9i dung t\u1eeb ch\u1ed1i kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!","error")),t.abrupt("return");case 3:return u.store.dispatch(u.loadingActions.show()),t.prev=4,t.next=7,H.reject(e,n);case 7:u.store.dispatch(u.alertActions.show(u.alertMessage.ACTION_SUCCESS,"success")),V(e,a),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(4),u.store.dispatch(u.loadingActions.hide()),u.store.dispatch(u.alertActions.show(u.alertMessage.ACTION_FAILURE,"error"));case 15:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e,n,a){return t.apply(this,arguments)}}(),W=function(){var t=Object(d.a)(h.a.mark((function t(e,n,a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u.store.dispatch(u.loadingActions.show()),t.prev=1,t.next=4,H.approve(e,n);case 4:u.store.dispatch(u.alertActions.show(u.alertMessage.ACTION_SUCCESS,"success")),V(e,a),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),u.store.dispatch(u.loadingActions.hide()),u.store.dispatch(u.alertActions.show(u.alertMessage.ACTION_FAILURE,"error"));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n,a){return t.apply(this,arguments)}}(),X=function(){var t=Object(d.a)(h.a.mark((function t(e,n,a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u.store.dispatch(u.loadingActions.show()),t.prev=1,t.next=4,N.a.updateNetPrice(e,n);case 4:u.store.dispatch(u.alertActions.show(u.alertMessage.ACTION_SUCCESS,"success")),V(e,a),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),u.store.dispatch(u.loadingActions.hide()),u.store.dispatch(u.alertActions.show(u.alertMessage.ACTION_FAILURE,"error"));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n,a){return t.apply(this,arguments)}}(),G=function(){var t=Object(d.a)(h.a.mark((function t(e,n,c,r){var i,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=[].concat(Object(a.a)(n),Object(a.a)(c)).map((function(t){return t.name})),s=Array.from(new Set(i)),i.length===s.length){t.next=5;break}return u.store.dispatch(u.alertActions.show("Lo\u1ea1i b\u1ecf c\xe1c file tr\xf9ng l\u1eb7p tr\u01b0\u1edbc khi upload!","error")),t.abrupt("return");case 5:return u.store.dispatch(u.loadingActions.show()),t.prev=6,t.next=9,B.create(e,n,c);case 9:u.store.dispatch(u.alertActions.show(u.alertMessage.ACTION_SUCCESS,"success")),V(e,r),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(6),u.store.dispatch(u.loadingActions.hide()),u.store.dispatch(u.alertActions.show(u.alertMessage.ACTION_FAILURE,"error"));case 17:case"end":return t.stop()}}),t,null,[[6,13]])})));return function(e,n,a,c){return t.apply(this,arguments)}}(),Y=function(){var t=Object(d.a)(h.a.mark((function t(e,n,a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u.store.dispatch(u.loadingActions.show()),t.prev=1,t.next=4,B.remove(e,n);case 4:u.store.dispatch(u.alertActions.show(u.alertMessage.ACTION_SUCCESS,"success")),V(e,a),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),u.store.dispatch(u.loadingActions.hide()),u.store.dispatch(u.alertActions.show(u.alertMessage.ACTION_FAILURE,"error"));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n,a){return t.apply(this,arguments)}}(),$={getContractDetail:V,create:U,cancel:q,check:z,reject:K,approve:W,updateNetPrice:X,createAttachment:G,removeAttachment:Y},J=Object(r.createContext)(D);function Q(t){var e=t.children,n=i.a.useReducer(F,M),a=Object(c.a)(n,2),r=a[0],s=a[1],o={state:r,getContractDetail:function(t){$.getContractDetail(t,s)},create:function(t,e){$.create(t,e,s)},cancel:function(t,e){$.cancel(t,e,s)},check:function(t,e){$.check(t,e,s)},reject:function(t,e){$.reject(t,e,s)},approve:function(t,e){$.approve(t,e,s)},updateNetPrice:function(t,e){$.updateNetPrice(t,e,s)},createAttachment:function(t,e,n){$.createAttachment(t,e,n,s)},removeAttachment:function(t,e){$.removeAttachment(t,e,s)}};return Object(w.jsx)(J.Provider,{value:o,children:e})}var Z=n(538),tt=n(467);function et(){var t=Object(o.b)(),e=i.a.useContext(J),n=e.state,r=e.create,s=Object(u.useTypedSelector)((function(t){return t.auth.user})),l=n.contract,j=i.a.useState(""),p=Object(c.a)(j,2),b=p[0],m=p[1],x=i.a.useState(""),O=Object(c.a)(x,2),N=O[0],S=O[1],A=i.a.useState(!1),C=Object(c.a)(A,2),k=C[0],T=C[1],P=i.a.useState([]),I=Object(c.a)(P,2),M=I[0],D=I[1],F=i.a.useState({fullName:"",userNumber:""}),R=Object(c.a)(F,2),E=R[0],L=R[1],H=function(){var e=Object(d.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(u.loadingActions.show()),e.prev=1,e.next=4,y.a.getApproverByKeyWord(N);case 4:n=e.sent,L({fullName:n.fullName,userNumber:n.userNumber}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(u.alertActions.show("Kh\xf4ng t\xecm th\u1ea5y ng\u01b0\u1eddi n\xe0y trong danh s\xe1ch ph\xea duy\u1ec7t!","error"));case 11:return e.prev=11,t(u.loadingActions.hide()),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(d.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(u.loadingActions.show()),e.prev=1,e.next=4,y.a.getApproverByKeyWord(N);case 4:n=e.sent,M.map((function(t){return t.userNumber})).includes(n.userNumber)||D([].concat(Object(a.a)(M),[{fullName:n.fullName,userNumber:n.userNumber}])),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(u.alertActions.show("Kh\xf4ng t\xecm th\u1ea5y ng\u01b0\u1eddi n\xe0y trong danh s\xe1ch ph\xea duy\u1ec7t!","error"));case 11:return e.prev=11,t(u.loadingActions.hide()),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(d.a)(h.a.mark((function e(){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==M.find((function(t){return t.userNumber===E.userNumber}))?t(u.alertActions.show("Ng\u01b0\u1eddi ph\xea duy\u1ec7t kh\xf4ng th\u1ec3 \u0111\u1ed3ng th\u1eddi l\xe0 ng\u01b0\u1eddi ki\u1ec3m tra!","error")):(T(!1),n=[].concat(Object(a.a)(M.map((function(t){return{userNumber:t.userNumber,isFinish:!1}}))),[{userNumber:E.userNumber,isFinish:!0}]),c={isReopen:"A"===l.status,content:b,steps:n},r(l.contractNumber,c));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return null===s||l.createdBy!==s.number||"P"!==l.status&&"A"!==l.status?Object(w.jsx)(w.Fragment,{}):Object(w.jsxs)(f.a,{item:!0,children:[Object(w.jsx)(v.k,{title:"P"===l.status?"T\u1ea1o y\xeau c\u1ea7u ph\xea duy\u1ec7t":"M\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",onClose:function(){T(!1)},open:k,onSubmit:B,children:Object(w.jsxs)(f.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(w.jsx)(f.a,{item:!0,xs:12,md:6,children:Object(w.jsx)(v.p,{label:"M\xe3 s\u1ed1/H\u1ecd t\xean ng\u01b0\u1eddi ph\xea duy\u1ec7t",type:"text",value:N,onChange:function(t){S(t.target.value)}})}),Object(w.jsxs)(f.a,{item:!0,xs:12,md:6,container:!0,spacing:1,children:[Object(w.jsx)(f.a,{item:!0,children:Object(w.jsx)(v.n,{text:"Ki\u1ec3m tra",color:"primary",icon:"check-circle",variant:"contained",onClick:_})}),Object(w.jsx)(f.a,{item:!0,children:Object(w.jsx)(v.n,{text:"Ph\xea duy\u1ec7t",color:"success",icon:"signature",variant:"contained",onClick:H})})]}),Object(w.jsxs)(f.a,{item:!0,xs:12,container:!0,spacing:1,alignItems:"stretch",children:[Object(w.jsxs)(f.a,{item:!0,xs:12,md:6,children:[Object(w.jsx)(g.a,{variant:"caption",children:"Ng\u01b0\u1eddi ki\u1ec3m tra:"}),Object(w.jsx)("div",{children:M.map((function(t){return Object(w.jsx)(tt.a,{style:{margin:"4px"},label:"".concat(t.userNumber,"-").concat(t.fullName),onDelete:function(){var e;e=t.userNumber,D(M.filter((function(t){return t.userNumber!==e})))},color:"primary",variant:"outlined",size:"small"},t.userNumber)}))})]}),Object(w.jsxs)(f.a,{item:!0,xs:12,md:6,children:[Object(w.jsx)(g.a,{variant:"caption",children:"Ng\u01b0\u1eddi ph\xea duy\u1ec7t:"}),Object(w.jsx)("div",{children:""!==E.userNumber&&Object(w.jsx)(tt.a,{style:{margin:"4px"},label:"".concat(E.userNumber,"-").concat(E.fullName),color:"primary",variant:"outlined",size:"small"})})]})]}),Object(w.jsx)(f.a,{item:!0,xs:12,children:Object(w.jsx)(v.j,{value:b,onChange:function(t){m(t)}})})]})}),Object(w.jsx)(v.n,{variant:"contained",color:"P"===l.status?"primary":"info",tooltip:"P"===l.status?"T\u1ea1o y\xeau c\u1ea7u ph\xea duy\u1ec7t":"M\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",icon:"P"===l.status?"play-circle":"sync-alt",text:"P"===l.status?"T\u1ea1o y\xeau c\u1ea7u":"M\u1edf l\u1ea1i",onClick:function(){m(""),D([]),L({fullName:"",userNumber:""}),T(!0)}})]})}function nt(){var t=i.a.useContext(J),e=t.state,n=t.cancel,a=Object(u.useTypedSelector)((function(t){return t.auth.user})),r=e.contract,s=i.a.useState(""),o=Object(c.a)(s,2),l=o[0],j=o[1],p=i.a.useState(!1),b=Object(c.a)(p,2),m=b[0],x=b[1],O=function(){var t=Object(d.a)(h.a.mark((function t(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:x(!1),e={content:l},n(r.contractNumber,e);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return null===a||r.createdBy!==a.number||"S"!==r.status&&"W"!==r.status?Object(w.jsx)(w.Fragment,{}):Object(w.jsxs)(f.a,{item:!0,children:[Object(w.jsx)(v.k,{title:"S"===r.status?"H\u1ee7y y\xeau c\u1ea7u ph\xea duy\u1ec7t":"H\u1ee7y m\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",onClose:function(){x(!1)},open:m,onSubmit:O,children:Object(w.jsx)(f.a,{container:!0,spacing:1,alignItems:"flex-end",children:Object(w.jsx)(f.a,{item:!0,xs:12,children:Object(w.jsx)(v.j,{value:l,onChange:function(t){j(t)}})})})}),Object(w.jsx)(v.n,{variant:"contained",color:"S"===r.status?"danger":"warning",tooltip:"S"===r.status?"H\u1ee7y y\xeau c\u1ea7u ph\xea duy\u1ec7t":"H\u1ee7y m\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",icon:"S"===r.status?"stop-circle":"minus-circle",text:"S"===r.status?"H\u1ee7y y\xeau c\u1ea7u":"H\u1ee7y m\u1edf l\u1ea1i",onClick:function(){j(""),x(!0)}})]})}function at(){var t=i.a.useContext(J),e=t.state,n=t.check,a=Object(u.useTypedSelector)((function(t){return t.auth.user})),r=e.contract,s=i.a.useState(""),o=Object(c.a)(s,2),l=o[0],j=o[1],p=i.a.useState(!1),b=Object(c.a)(p,2),m=b[0],x=b[1],O=function(){var t=Object(d.a)(h.a.mark((function t(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:x(!1),e={content:l},n(r.contractNumber,e);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return function(){if("S"!==r.status&&"W"!==r.status)return!1;var t=r.requests.find((function(t){return t.isActive}));if(void 0===t)return!1;if(null===a)return!1;var e=t.steps.find((function(t){return t.userNumber===a.number}));return void 0!==e&&!(e.isApproved||e.isRejected||e.isFinish)}()?Object(w.jsxs)(f.a,{item:!0,children:[Object(w.jsx)(v.k,{title:"S"===r.status?"X\xe1c nh\u1eadn h\u1ee3p \u0111\u1ed3ng":"\u0110\u1ed3ng \xfd m\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",onClose:function(){x(!1)},open:m,onSubmit:O,children:Object(w.jsx)(f.a,{container:!0,spacing:1,alignItems:"flex-end",children:Object(w.jsx)(f.a,{item:!0,xs:12,children:Object(w.jsx)(v.j,{value:l,onChange:function(t){j(t)}})})})}),Object(w.jsx)(v.n,{variant:"contained",color:"success",tooltip:"S"===r.status?"X\xe1c nh\u1eadn h\u1ee3p \u0111\u1ed3ng":"\u0110\u1ed3ng \xfd m\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",icon:"check-circle",text:"S"===r.status?"X\xe1c nh\u1eadn":"\u0110\u1ed3ng \xfd",onClick:function(){j(""),x(!0)}})]}):Object(w.jsx)(w.Fragment,{})}function ct(){var t=i.a.useContext(J),e=t.state,n=t.reject,a=Object(u.useTypedSelector)((function(t){return t.auth.user})),r=e.contract,s=i.a.useState(""),o=Object(c.a)(s,2),l=o[0],j=o[1],p=i.a.useState(!1),b=Object(c.a)(p,2),m=b[0],x=b[1],O=function(){var t=Object(d.a)(h.a.mark((function t(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:x(!1),e={content:l},n(r.contractNumber,e);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return function(){if("S"!==r.status&&"W"!==r.status)return!1;var t=r.requests.find((function(t){return t.isActive}));if(void 0===t)return!1;if(null===a)return!1;var e=t.steps.find((function(t){return t.userNumber===a.number}));return void 0!==e&&(!e.isApproved&&!e.isRejected&&!(e.isFinish&&t.steps.filter((function(t){return!t.isApproved&&!t.isRejected&&!t.isFinish})).length>0))}()?Object(w.jsxs)(f.a,{item:!0,children:[Object(w.jsx)(v.k,{title:"S"===r.status?"T\u1eeb ch\u1ed1i ph\xea duy\u1ec7t h\u1ee3p \u0111\u1ed3ng":"T\u1eeb ch\u1ed1i m\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",onClose:function(){x(!1)},open:m,onSubmit:O,children:Object(w.jsx)(f.a,{container:!0,spacing:1,alignItems:"flex-end",children:Object(w.jsx)(f.a,{item:!0,xs:12,children:Object(w.jsx)(v.j,{value:l,onChange:function(t){j(t)}})})})}),Object(w.jsx)(v.n,{variant:"contained",color:"S"===r.status?"danger":"warning",tooltip:"S"===r.status?"T\u1eeb ch\u1ed1i ph\xea duy\u1ec7t h\u1ee3p \u0111\u1ed3ng":"T\u1eeb ch\u1ed1i m\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",icon:"S"===r.status?"times-circle":"minus-circle",text:"T\u1eeb ch\u1ed1i",onClick:function(){j(""),x(!0)}})]}):Object(w.jsx)(w.Fragment,{})}function rt(){var t=i.a.useContext(J),e=t.state,n=t.approve,a=Object(u.useTypedSelector)((function(t){return t.auth.user})),r=e.contract,s=i.a.useState(""),o=Object(c.a)(s,2),l=o[0],j=o[1],p=i.a.useState(!1),b=Object(c.a)(p,2),m=b[0],x=b[1],O=function(){var t=Object(d.a)(h.a.mark((function t(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:x(!1),e={content:l},n(r.contractNumber,e);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return function(){if("S"!==r.status&&"W"!==r.status)return!1;var t=r.requests.find((function(t){return t.isActive}));if(void 0===t)return!1;if(t.steps.filter((function(t){return!t.isApproved&&!t.isRejected&&!t.isFinish})).length>0)return!1;if(null===a)return!1;var e=t.steps.find((function(t){return t.userNumber===a.number&&t.isFinish}));return void 0!==e&&(!e.isApproved&&!e.isRejected)}()?Object(w.jsxs)(f.a,{item:!0,children:[Object(w.jsx)(v.k,{title:"S"===r.status?"Ph\xea duy\u1ec7t h\u1ee3p \u0111\u1ed3ng":"Ph\xea duy\u1ec7t m\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",onClose:function(){x(!1)},open:m,onSubmit:O,children:Object(w.jsx)(f.a,{container:!0,spacing:1,alignItems:"flex-end",children:Object(w.jsx)(f.a,{item:!0,xs:12,children:Object(w.jsx)(v.j,{value:l,onChange:function(t){j(t)}})})})}),Object(w.jsx)(v.n,{variant:"contained",color:"success",tooltip:"S"===r.status?"Ph\xea duy\u1ec7t h\u1ee3p \u0111\u1ed3ng":"Ph\xea duy\u1ec7t m\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",icon:"signature",text:"Ph\xea duy\u1ec7t",onClick:function(){j(""),x(!0)}})]}):Object(w.jsx)(w.Fragment,{})}var it=n(532),st=Object(it.a)((function(){return{main:{lineHeight:1},sub:{lineHeight:1.4,fontSize:"0.7rem",fontStyle:"italic"},head:{color:"#fff",backgroundColor:"#444",textTransform:"uppercase",fontSize:"0.8rem"}}}));function ot(){var t=st(),e=i.a.useContext(J),n=e.state,a=e.updateNetPrice,r=Object(u.useTypedSelector)((function(t){return t.auth.user})),s=n.contract,o=i.a.useState([]),l=Object(c.a)(o,2),j=l[0],p=l[1],b=i.a.useState(!1),m=Object(c.a)(b,2),x=m[0],O=m[1],y=function(){var t=Object(d.a)(h.a.mark((function t(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:O(!1),e={items:[]},j.map((function(t){var n=parseInt(t.newNetpr,10);return t.netpr!==n&&e.items.push({ebeln:t.ebeln,ebelp:t.ebelp,introw:t.introw,isService:t.isService,netpr:n,packno:t.packno}),!0})),a(s.contractNumber,e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return i.a.useEffect((function(){var t=[];s.items.map((function(e){return e.isService?e.subItems.map((function(e){t.push({code:e.code,text:e.text,packno:e.packno,introw:e.introw,isService:!0,netpr:e.netPrice,newNetpr:e.netPrice.toString(),ebeln:"",ebelp:""})})):t.push({code:e.code,text:e.text,ebeln:e.ebeln,ebelp:e.ebelp,isService:!1,netpr:e.netPrice,newNetpr:e.netPrice.toString(),packno:"",introw:""}),!0})),p(t)}),[s]),"P"===s.status&&null!==r&&s.createdBy===r.number?Object(w.jsxs)(f.a,{item:!0,children:[Object(w.jsx)(v.k,{title:"C\u1eadp nh\u1eadt \u0111\u01a1n gi\xe1 net",onClose:function(){O(!1)},open:x,onSubmit:y,children:Object(w.jsx)(f.a,{container:!0,spacing:1,children:j.map((function(e,n){return Object(w.jsxs)(f.a,{container:!0,item:!0,spacing:1,children:[Object(w.jsxs)(f.a,{item:!0,xs:6,children:[Object(w.jsx)(g.a,{className:t.main,variant:"subtitle2",children:e.text}),Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:""===e.code?"-":e.code})]}),Object(w.jsx)(f.a,{item:!0,xs:6,children:Object(w.jsx)(v.p,{label:"\u0110\u01a1n gi\xe1 Net",value:e.newNetpr,type:"text",onChange:function(t){var n,a,c,r,i;n=e.ebeln,a=e.ebelp,c=e.packno,r=e.introw,i=t.target.value,p(j.map((function(t){return n===t.ebeln&&a===t.ebelp&&c===t.packno&&r===t.introw?(t.newNetpr=i,t):t})))}})})]},n)}))})}),Object(w.jsx)(v.n,{variant:"contained",color:"dark",tooltip:"C\u1eadp nh\u1eadt gi\xe1 net",icon:"pen-square",text:"\u0110\u01a1n gi\xe1 Net",onClick:function(){O(!0)}})]}):Object(w.jsx)(w.Fragment,{})}var ut=n(210);function lt(){var t=i.a.useContext(J),e=t.state,n=t.createAttachment,a=Object(u.useTypedSelector)((function(t){return t.auth.user})),r=e.contract,s=i.a.useState([]),o=Object(c.a)(s,2),l=o[0],j=o[1],p=i.a.useState([]),b=Object(c.a)(p,2),m=b[0],x=b[1],O=i.a.useState(!1),g=Object(c.a)(O,2),y=g[0],N=g[1],S=function(){var t=Object(d.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:N(!1),n(r.contractNumber,l,m);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return"P"===r.status&&null!==a&&r.createdBy===a.number?Object(w.jsxs)(f.a,{item:!0,children:[Object(w.jsx)(v.k,{title:"T\u1ea3i l\xean t\xe0i li\u1ec7u \u0111\xednh k\xe8m",onClose:function(){N(!1)},open:y,onSubmit:S,children:Object(w.jsxs)(f.a,{container:!0,spacing:1,alignItems:"stretch",children:[Object(w.jsx)(f.a,{item:!0,xs:12,md:6,children:Object(w.jsx)(ut.a,{showPreviews:!1,showFileNames:!0,filesLimit:10,maxFileSize:25e6,useChipsForPreview:!0,dropzoneText:"T\u1ea3i l\xean t\xe0i li\u1ec7u public",onChange:function(t){j(t)}})}),Object(w.jsx)(f.a,{item:!0,xs:12,md:6,children:Object(w.jsx)(ut.a,{showPreviews:!1,showFileNames:!0,filesLimit:10,maxFileSize:25e6,useChipsForPreview:!0,dropzoneText:"T\u1ea3i l\xean t\xe0i li\u1ec7u private",onChange:function(t){x(t)}})})]})}),Object(w.jsx)(v.n,{variant:"contained",color:"dark",tooltip:"\u0110\xednh k\xe8m t\xe0i li\u1ec7u",icon:"paperclip",text:"\u0110\xednh k\xe8m",onClick:function(){N(!0)}})]}):Object(w.jsx)(w.Fragment,{})}function jt(){var t=i.a.useContext(J).state.contract;return Object(w.jsx)(v.l,{title:"Th\xf4ng tin h\u1ee3p \u0111\u1ed3ng",children:Object(w.jsxs)(f.a,{container:!0,alignItems:"stretch",spacing:1,children:[Object(w.jsx)(v.o,{title:"S\u1ed1 h\u1ee3p \u0111\u1ed3ng",content:t.contractNumber}),Object(w.jsx)(v.o,{title:"Lo\u1ea1i h\u1ee3p \u0111\u1ed3ng",content:"D"===t.contractType?"D\u1ef1 \xe1n":"Nguy\xean t\u1eafc"}),Object(w.jsx)(v.o,{title:"D\u1ef1 \xe1n",content:"".concat(t.projectCode,"-").concat(t.projectName)}),Object(w.jsx)(v.o,{title:"Nh\xe0 cung c\u1ea5p",content:"".concat(t.vendorCode,"-").concat(t.vendorName)}),Object(w.jsx)(v.o,{title:"Gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng",content:"".concat(Z.a.formatMoney(t.contractValue)," VND")}),Object(w.jsx)(v.o,{title:"\u0110i\u1ec1u kho\u1ea3n thanh to\xe1n",content:t.paymentTerm}),Object(w.jsx)(v.o,{title:"Ng\xe0y t\u1ea1o h\u1ee3p \u0111\u1ed3ng",content:Z.a.formatDate(new Date(t.createdDate),"dd/MM/yyyy")}),Object(w.jsx)(v.o,{title:"Ng\u01b0\u1eddi t\u1ea1o h\u1ee3p \u0111\u1ed3ng",content:"".concat(t.createdBy,"-").concat(t.createdByFullName)}),Object(w.jsxs)(f.a,{item:!0,xs:12,md:6,container:!0,spacing:1,children:[Object(w.jsx)(et,{}),Object(w.jsx)(nt,{}),Object(w.jsx)(at,{}),Object(w.jsx)(ct,{}),Object(w.jsx)(rt,{}),Object(w.jsx)(ot,{}),Object(w.jsx)(lt,{})]})]})})}var ht=n(465),dt=n(418),pt=n(414),bt=n(415),mt=n(416),xt=n(419),Ot=Object(it.a)((function(){return{main:{lineHeight:1},sub:{lineHeight:1.4,fontSize:"0.7rem",fontStyle:"italic"},head:{color:"#fff",backgroundColor:"#444",textTransform:"uppercase",fontSize:"0.8rem"},warning:{backgroundColor:"#f59542"},danger:{backgroundColor:"#f54242"}}}));function ft(){var t=Ot(),e=Z.a.formatMoney,n=i.a.useContext(J).state.contract,a=function(e){return e.isService?"":e.planPrice<=0?t.warning:e.planPrice<e.price?t.danger:""},c=function(e){return e.planPrice<=0?t.warning:e.planPrice<e.price?t.danger:""};return Object(w.jsxs)(v.l,{title:"Th\xf4ng tin chi ti\u1ebft h\u1ee3p \u0111\u1ed3ng",noPadding:!0,children:[Object(w.jsx)(ht.a,{smDown:!0,implementation:"css",children:Object(w.jsxs)(dt.a,{size:"small",style:{padding:"8px"},children:[Object(w.jsx)(pt.a,{children:Object(w.jsxs)(bt.a,{children:[Object(w.jsx)(mt.a,{className:t.head,rowSpan:2,colSpan:2,children:"H\u1ea1ng m\u1ee5c"}),Object(w.jsx)(mt.a,{className:t.head,align:"right",children:"Kh\u1ed1i l\u01b0\u1ee3ng"}),Object(w.jsx)(mt.a,{className:t.head,align:"right",children:"\u0110\u01a1n gi\xe1 H\u0110"}),Object(w.jsx)(mt.a,{className:t.head,align:"right",children:"\u0110\u01a1n gi\xe1 KH"}),("P"===n.status||"S"===n.status)&&Object(w.jsx)(mt.a,{className:t.head,align:"right",children:"\u0110\u01a1n gi\xe1 Net"}),Object(w.jsx)(mt.a,{className:t.head,align:"right",children:"Th\xe0nh ti\u1ec1n"})]})}),Object(w.jsx)(xt.a,{children:n.items.map((function(r,s){return Object(w.jsxs)(i.a.Fragment,{children:[Object(w.jsxs)(bt.a,{hover:!0,children:[Object(w.jsxs)(mt.a,{colSpan:2,children:[Object(w.jsx)(g.a,{className:t.main,variant:"subtitle2",children:r.text}),Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:""===r.code?"-":r.code})]}),Object(w.jsxs)(mt.a,{align:"right",children:[Object(w.jsx)(g.a,{className:t.main,variant:"subtitle2",children:e(r.quantity)}),Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:r.unit})]}),Object(w.jsxs)(mt.a,{className:a(r),align:"right",children:[Object(w.jsx)(g.a,{className:t.main,variant:"subtitle2",children:e(r.price)}),Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"VND/".concat(r.per," ").concat(r.unit)})]}),Object(w.jsxs)(mt.a,{className:a(r),align:"right",children:[Object(w.jsx)(g.a,{className:t.main,variant:"subtitle2",children:r.planPrice>0?e(r.planPrice):"-"}),Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"VND/".concat(r.per," ").concat(r.unit)})]}),("P"===n.status||"S"===n.status)&&Object(w.jsxs)(mt.a,{className:a(r),align:"right",children:[Object(w.jsx)(g.a,{className:t.main,variant:"subtitle2",children:r.netPrice>0?e(r.netPrice):"-"}),Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"VND/".concat(r.per," ").concat(r.unit)})]}),Object(w.jsxs)(mt.a,{align:"right",children:[Object(w.jsx)(g.a,{className:t.main,variant:"subtitle2",children:e(r.price*r.quantity/r.per)}),Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"VND"})]})]}),r.isService&&r.subItems.map((function(a,r){return Object(w.jsxs)(bt.a,{hover:!0,children:[Object(w.jsx)(mt.a,{style:{width:"8px",padding:0,backgroundColor:"red"}}),Object(w.jsxs)(mt.a,{children:[Object(w.jsx)(g.a,{className:t.main,variant:"subtitle2",children:a.text}),Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:""===a.code?"-":a.code})]}),Object(w.jsxs)(mt.a,{align:"right",children:[Object(w.jsx)(g.a,{className:t.main,variant:"subtitle2",children:e(a.quantity)}),Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:a.unit})]}),Object(w.jsxs)(mt.a,{className:c(a),align:"right",children:[Object(w.jsx)(g.a,{className:t.main,variant:"subtitle2",children:e(a.price)}),Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"VND/".concat(a.per," ").concat(a.unit)})]}),Object(w.jsxs)(mt.a,{className:c(a),align:"right",children:[Object(w.jsx)(g.a,{className:t.main,variant:"subtitle2",children:a.planPrice>0?e(a.planPrice):"-"}),Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"VND/".concat(a.per," ").concat(a.unit)})]}),("P"===n.status||"S"===n.status)&&Object(w.jsxs)(mt.a,{className:c(a),align:"right",children:[Object(w.jsx)(g.a,{className:t.main,variant:"subtitle2",children:a.netPrice>0?e(a.netPrice):"-"}),Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"VND/".concat(a.per," ").concat(a.unit)})]}),Object(w.jsxs)(mt.a,{align:"right",children:[Object(w.jsx)(g.a,{className:t.main,variant:"subtitle2",children:e(a.price*a.quantity/a.per)}),Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"VND"})]})]},r)}))]},s)}))})]})}),Object(w.jsx)(ht.a,{mdUp:!0,implementation:"css",children:Object(w.jsx)(f.a,{container:!0,spacing:2,style:{padding:"8px"},children:n.items.map((function(r,s){return Object(w.jsxs)(i.a.Fragment,{children:[Object(w.jsxs)(f.a,{container:!0,item:!0,spacing:1,children:[Object(w.jsxs)(f.a,{item:!0,xs:12,children:[Object(w.jsx)(g.a,{className:t.main,variant:"subtitle2",children:r.text}),Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:""===r.code?"-":r.code})]}),Object(w.jsxs)(f.a,{item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(w.jsx)(f.a,{item:!0,xs:3,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"Kh\u1ed1i l\u01b0\u1ee3ng"})}),Object(w.jsx)(f.a,{item:!0,xs:5,children:Object(w.jsx)(g.a,{align:"right",className:t.main,variant:"subtitle2",children:e(r.quantity)})}),Object(w.jsx)(f.a,{item:!0,xs:4,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:r.unit})})]}),Object(w.jsxs)(f.a,{className:a(r),item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(w.jsx)(f.a,{item:!0,xs:3,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"\u0110\u01a1n gi\xe1 H\u0110"})}),Object(w.jsx)(f.a,{item:!0,xs:5,children:Object(w.jsx)(g.a,{align:"right",className:t.main,variant:"subtitle2",children:e(r.price)})}),Object(w.jsx)(f.a,{item:!0,xs:4,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"VND/".concat(r.per," ").concat(r.unit)})})]}),Object(w.jsxs)(f.a,{className:a(r),item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(w.jsx)(f.a,{item:!0,xs:3,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"\u0110\u01a1n gi\xe1 KH"})}),Object(w.jsx)(f.a,{item:!0,xs:5,children:Object(w.jsx)(g.a,{align:"right",className:t.main,variant:"subtitle2",children:r.planPrice>0?e(r.planPrice):"-"})}),Object(w.jsx)(f.a,{item:!0,xs:4,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"VND/".concat(r.per," ").concat(r.unit)})})]}),("P"===n.status||"S"===n.status)&&Object(w.jsxs)(f.a,{className:a(r),item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(w.jsx)(f.a,{item:!0,xs:3,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"\u0110\u01a1n gi\xe1 Net"})}),Object(w.jsx)(f.a,{item:!0,xs:5,children:Object(w.jsx)(g.a,{align:"right",className:t.main,variant:"subtitle2",children:r.netPrice>0?e(r.netPrice):"-"})}),Object(w.jsx)(f.a,{item:!0,xs:4,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"VND/".concat(r.per," ").concat(r.unit)})})]}),Object(w.jsxs)(f.a,{item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(w.jsx)(f.a,{item:!0,xs:3,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"Th\xe0nh ti\u1ec1n"})}),Object(w.jsx)(f.a,{item:!0,xs:5,children:Object(w.jsx)(g.a,{align:"right",className:t.main,variant:"subtitle2",children:e(r.price*r.quantity/r.per)})}),Object(w.jsx)(f.a,{item:!0,xs:4,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"VND"})})]})]}),r.isService&&r.subItems.map((function(a,r){return Object(w.jsxs)(f.a,{container:!0,item:!0,spacing:1,style:{paddingLeft:"16px",borderLeft:"12px solid red"},children:[Object(w.jsxs)(f.a,{item:!0,xs:12,children:[Object(w.jsx)(g.a,{className:t.main,variant:"subtitle2",children:a.text}),Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:""===a.code?"-":a.code})]}),Object(w.jsxs)(f.a,{item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(w.jsx)(f.a,{item:!0,xs:3,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"Kh\u1ed1i l\u01b0\u1ee3ng"})}),Object(w.jsx)(f.a,{item:!0,xs:5,children:Object(w.jsx)(g.a,{align:"right",className:t.main,variant:"subtitle2",children:e(a.quantity)})}),Object(w.jsx)(f.a,{item:!0,xs:4,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:a.unit})})]}),Object(w.jsxs)(f.a,{className:c(a),item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(w.jsx)(f.a,{item:!0,xs:3,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"\u0110\u01a1n gi\xe1 H\u0110"})}),Object(w.jsx)(f.a,{item:!0,xs:5,children:Object(w.jsx)(g.a,{align:"right",className:t.main,variant:"subtitle2",children:e(a.price)})}),Object(w.jsx)(f.a,{item:!0,xs:4,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"VND/".concat(a.per," ").concat(a.unit)})})]}),Object(w.jsxs)(f.a,{className:c(a),item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(w.jsx)(f.a,{item:!0,xs:3,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"\u0110\u01a1n gi\xe1 KH"})}),Object(w.jsx)(f.a,{item:!0,xs:5,children:Object(w.jsx)(g.a,{align:"right",className:t.main,variant:"subtitle2",children:a.planPrice>0?e(a.planPrice):"-"})}),Object(w.jsx)(f.a,{item:!0,xs:4,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"VND/".concat(a.per," ").concat(a.unit)})})]}),("P"===n.status||"S"===n.status)&&Object(w.jsxs)(f.a,{className:c(a),item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(w.jsx)(f.a,{item:!0,xs:3,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"\u0110\u01a1n gi\xe1 Net"})}),Object(w.jsx)(f.a,{item:!0,xs:5,children:Object(w.jsx)(g.a,{align:"right",className:t.main,variant:"subtitle2",children:a.netPrice>0?e(a.netPrice):"-"})}),Object(w.jsx)(f.a,{item:!0,xs:4,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"VND/".concat(a.per," ").concat(a.unit)})})]}),Object(w.jsxs)(f.a,{item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(w.jsx)(f.a,{item:!0,xs:3,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"Th\xe0nh ti\u1ec1n"})}),Object(w.jsx)(f.a,{item:!0,xs:5,children:Object(w.jsx)(g.a,{align:"right",className:t.main,variant:"subtitle2",children:e(a.price*a.quantity/a.per)})}),Object(w.jsx)(f.a,{item:!0,xs:4,children:Object(w.jsx)(g.a,{className:t.sub,variant:"caption",children:"VND"})})]})]},r)}))]},s)}))})})]})}var gt=n(301),vt=n(6),yt=n(475),Nt=n(473),wt=n(474),St=Object(vt.a)({root:{border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(yt.a),At=Object(vt.a)({root:{color:"#fff",fontStyle:"uppercase",borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:40,"&$expanded":{minHeight:40}},content:{margin:0,"& .MuiTypography-body1":{fontSize:"0.9rem"},"&$expanded":{margin:"0"}},expanded:{}})(Nt.a),Ct=Object(vt.a)((function(){return{root:{padding:0}}}))(wt.a);function kt(){var t=Z.a.formatDate,e=i.a.useContext(J).state.contract,n=i.a.useState([]),r=Object(c.a)(n,2),s=r[0],o=r[1];return i.a.useEffect((function(){o(e.requests.filter((function(t){return t.isActive})).map((function(t){return t.id})))}),[e]),Object(w.jsx)(v.l,{title:"L\u1ecbch s\u1eed ph\xea duy\u1ec7t",noPadding:!0,children:e.requests.map((function(e,n){return Object(w.jsxs)(St,{square:!0,expanded:s.includes(e.id),onChange:function(t,n){!function(t,e){e?s.includes(t)||o([].concat(Object(a.a)(s),[t])):o(s.filter((function(e){return e!==t})))}(e.id,n)},children:[Object(w.jsx)(At,{style:{backgroundColor:e.isReopen?gt.a[700]:m.a[600]},children:Object(w.jsx)(g.a,{children:e.isReopen?"Y\xeau c\u1ea7u m\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng - ".concat(t(new Date(e.createdTime),"hh:mm dd/MM/yyyy")):"Y\xeau c\u1ea7u ph\xea duy\u1ec7t h\u1ee3p \u0111\u1ed3ng - ".concat(t(new Date(e.createdTime),"hh:mm dd/MM/yyyy"))})}),Object(w.jsx)(Ct,{children:Object(w.jsxs)(f.a,{container:!0,children:[Object(w.jsx)(f.a,{item:!0,xs:12,children:Object(w.jsx)("div",{style:{padding:"8px",borderLeft:"4px solid green"},dangerouslySetInnerHTML:{__html:e.content}})}),Object(w.jsx)(f.a,{item:!0,xs:12,children:Object(w.jsx)(dt.a,{size:"small",style:{padding:"8px",borderLeft:"4px solid yellow"},children:Object(w.jsx)(xt.a,{children:e.steps.map((function(e,n){return Object(w.jsx)(bt.a,{children:Object(w.jsx)(mt.a,{children:Object(w.jsxs)(f.a,{container:!0,spacing:1,children:[Object(w.jsx)(f.a,{item:!0,xs:12,md:4,children:"".concat(e.userNumber,"-").concat(e.fullName)}),Object(w.jsxs)(f.a,{item:!0,xs:12,md:2,children:[Object(w.jsx)(O.a,{style:{opacity:.6},icon:"share"}),e.isReceived&&t(new Date(e.receivedTime),"hh:mm dd/MM/yyyy")]}),Object(w.jsxs)(f.a,{item:!0,xs:12,md:2,children:[Object(w.jsx)(O.a,{style:{opacity:.6},icon:"eye"}),e.isSeen&&t(new Date(e.seenTime),"hh:mm dd/MM/yyyy")]}),Object(w.jsxs)(f.a,{item:!0,xs:12,md:2,children:[Object(w.jsx)(O.a,{style:{opacity:.6},icon:"signature"}),e.isApproved&&t(new Date(e.approvedTime),"hh:mm dd/MM/yyyy")]}),Object(w.jsxs)(f.a,{item:!0,xs:12,md:2,children:[Object(w.jsx)(O.a,{style:{opacity:.6},icon:"ban"}),e.isRejected&&t(new Date(e.rejectedTime),"hh:mm dd/MM/yyyy")]}),""!==e.content&&null!==e.content&&Object(w.jsx)(f.a,{item:!0,xs:12,children:Object(w.jsx)("div",{style:{padding:"4px"},dangerouslySetInnerHTML:{__html:e.content}})})]})})},n)}))})})}),""!==e.cancelReason&&null!==e.cancelReason&&Object(w.jsx)(f.a,{item:!0,xs:12,children:Object(w.jsx)("div",{style:{padding:"8px",borderLeft:"4px solid red"},dangerouslySetInnerHTML:{__html:e.cancelReason}})})]})})]},n)}))})}function Tt(){var t=Z.a.formatDate,e=i.a.useContext(J),n=e.state,a=e.removeAttachment,c=n.contract,r=Object(u.useTypedSelector)((function(t){return t.auth.user}));return Object(w.jsx)(v.l,{title:"T\xe0i li\u1ec7u \u0111\xednh k\xe8m",children:Object(w.jsx)(f.a,{container:!0,spacing:1,children:c.attachments.map((function(e){return Object(w.jsxs)(f.a,{container:!0,item:!0,xs:12,md:6,children:[Object(w.jsx)(f.a,{item:!0,xs:12,children:Object(w.jsxs)(g.a,{variant:"subtitle2",children:[Object(w.jsx)(O.a,{icon:"paperclip"}),e.fileName]})}),Object(w.jsx)(f.a,{item:!0,xs:12,children:Object(w.jsxs)(g.a,{variant:"caption",children:[t(new Date(e.createdTime),"hh:mm dd/MM/yyyy"),e.isPrivate&&Object(w.jsx)(O.a,{icon:"shield-alt"}),Object(w.jsx)(v.i,{filename:e.fileName,url:"/api/contract/contracts/".concat(c.contractNumber,"/attachments/").concat(e.id),label:"T\u1ea3i"}),"P"===c.status&&null!==r&&c.createdBy===r.number&&Object(w.jsx)(v.n,{icon:"trash-alt",text:"X\xf3a",color:"danger",onClick:function(){var t;t=e.id,a(c.contractNumber,t)}})]})})]},e.id)}))})})}function Pt(){var t=Object(s.h)().contractNumber,e=i.a.useContext(J).getContractDetail;i.a.useEffect((function(){e(t)}),[t]);return Object(w.jsxs)(f.a,{id:"contractDetail-".concat(t),container:!0,alignContent:"stretch",spacing:2,children:[Object(w.jsx)(f.a,{item:!0,xs:12,children:Object(w.jsx)(jt,{})}),Object(w.jsx)(f.a,{item:!0,xs:12,children:Object(w.jsx)(ft,{})}),Object(w.jsx)(f.a,{item:!0,xs:12,children:Object(w.jsx)(kt,{})}),Object(w.jsx)(f.a,{item:!0,xs:12,children:Object(w.jsx)(Tt,{})}),Object(w.jsx)(f.a,{item:!0,xs:12,children:Object(w.jsx)(v.n,{variant:"contained",text:"T\u1ea3i PDF",icon:"file-pdf",onClick:function(){var e=document.getElementById("contractDetail-".concat(t));null!=e&&k()(e).then((function(t){document.body.appendChild(t);var e=208*t.height/t.width,n=new T.a("p","pt","a4");n.addImage(t,"",0,0,208,e),n.save("download.pdf")}))}})})]})}function It(){return Object(w.jsx)(Q,{children:Object(w.jsx)(Pt,{})})}function Mt(){var t=Object(s.i)().path;return Object(w.jsxs)(s.c,{children:[Object(w.jsx)(s.a,{path:"".concat(t,"/dashboard"),component:A}),Object(w.jsx)(s.a,{path:"".concat(t,"/contracts/:contractNumber"),component:It})]})}var Dt=i.a.lazy((function(){return n.e(28).then(n.bind(null,1255))})),Ft=i.a.lazy((function(){return n.e(27).then(n.bind(null,1258))})),Rt=i.a.lazy((function(){return n.e(26).then(n.bind(null,1259))}));function Et(){var t=Object(s.i)().path,e=Object(o.b)(),n=i.a.useState(!1),r=Object(c.a)(n,2),j=r[0],h=r[1],d=i.a.useState(!1),p=Object(c.a)(d,2),b=p[0],m=p[1],x=i.a.useState(!1),O=Object(c.a)(x,2),f=O[0],g=O[1];return i.a.useEffect((function(){e(u.layoutActions.setActivePluginId(l.h.id)),Object(l.c)().then((function(t){h(t)})).catch((function(){h(!1)})),Object(l.e)("CREATOR_ROLE").then((function(t){m(t)})).catch((function(){m(!1)})),Object(l.e)("APPROVER_ROLE").then((function(t){g(t)})).catch((function(){g(!1)}))}),[]),i.a.useEffect((function(){var t=j?Object(a.a)(l.a):[],n=b?Object(a.a)(l.f):[],c=f?Object(a.a)(l.b):[];e(u.layoutActions.setMenuList([].concat(Object(a.a)(l.g),Object(a.a)(n),Object(a.a)(c),Object(a.a)(t))))}),[j,b,f]),Object(w.jsxs)(s.c,{children:[b&&Object(w.jsx)(s.a,{path:"".concat(t,"/creator"),component:Ft}),f&&Object(w.jsx)(s.a,{path:"".concat(t,"/approver"),component:Rt}),j&&Object(w.jsx)(s.a,{path:"".concat(t,"/admin"),component:Dt}),Object(w.jsx)(s.a,{path:"".concat(t),component:Mt})]})}},538:function(t,e,n){"use strict";var a={formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy",n=e,a=[{symbol:"dd",value:t.getDate()<10?"0".concat(t.getDate()):t.getDate()},{symbol:"MM",value:t.getMonth()+1<10?"0".concat(t.getMonth()+1):"".concat(t.getMonth()+1)},{symbol:"yyyy",value:t.getFullYear()},{symbol:"hh",value:t.getHours()<10?"0".concat(t.getHours()):t.getHours()},{symbol:"mm",value:t.getMinutes()<10?"0".concat(t.getMinutes()):t.getMinutes()}];return a.map((function(t){return n=n.replace(t.symbol,t.value),t.symbol})),n},formatMoney:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Intl.NumberFormat("vi-VN",{maximumFractionDigits:e});return n.format(t)}};e.a=a},613:function(t,e,n){"use strict";var a=n(9),c=n.n(a),r="/api/contract/contracts";var i={getMyContractList:function(t){return c.a.get("".concat(r,"/getMyContractList/").concat(t))},getContractList:function(t){return c.a.get("".concat(r,"/getContractList/").concat(t))},getContract:function(t){return c.a.get("".concat(r,"/").concat(t))},updateNetPrice:function(t,e){return c.a.put("".concat(r,"/updateNetPrice/").concat(t),e)},countByCreator:function(){return c.a.get("".concat(r,"/countByCreator"))},countByApprover:function(){return c.a.get("".concat(r,"/countByApprover"))}};e.a=i}}]);