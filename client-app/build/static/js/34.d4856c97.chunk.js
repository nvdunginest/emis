(this.webpackJsonpemis=this.webpackJsonpemis||[]).push([[34],{1119:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return E}));var c=n(142),a=n(15),r=n(0),o=n.n(r),i=n(26),s=n(55),u=n(95),l=n(18),b=n(16),p=n(23),f=n.n(p),j=n(41),h=n(160),m=n(345),d=n(81),x=n(48),O=n(9),v=n.n(O),k="/api/hcm/employees";var C={getAll:function(){return v.a.get(k)},create:function(e){return v.a.post("".concat(k,"/addUser"),e)},lock:function(e){return v.a.put("".concat(k,"/lockUser/").concat(e))},unLock:function(e){return v.a.put("".concat(k,"/unLockUser/").concat(e))},reset:function(e){return v.a.put("".concat(k,"/resetUser/").concat(e))},addUserFromExcel:function(e){var t=new FormData;return t.append("files",e,e.name),v.a.post("".concat(k,"/addFromExcel"),t,{headers:{"Content-Type":"multipart/form-data"}})}},A=n(111),S=n(1),g=[{id:"sortNumber",label:"M\xe3 s\u1ed1",numeric:!1,sortable:!0},{id:"fullName",label:"H\u1ecd t\xean",numeric:!1,sortable:!0},{id:"email",label:"Email",numeric:!1,sortable:!1},{id:"action",label:"",numeric:!1,sortable:!1}],w={number:"",fullName:"",email:""};function y(){var e,t=o.a.useContext(A.a),n=t.showAlert,c=t.showBackdrop,r=t.hideBackdrop,i=o.a.useState(!1),s=Object(a.a)(i,2),u=s[0],p=s[1],O=o.a.useState(!1),v=Object(a.a)(O,2),k=v[0],y=v[1],N=o.a.useState([]),T=Object(a.a)(N,2),E=T[0],F=T[1],I=o.a.useState(w),U=Object(a.a)(I,2),L=U[0],_=U[1],M=o.a.useState(!1),R=Object(a.a)(M,2),q=R[0],z=R[1],B=o.a.useState(),H=Object(a.a)(B,2),P=H[0],J=H[1],K=o.a.useState(!1),D=Object(a.a)(K,2),G=D[0],Q=D[1],V=o.a.useState([]),W=Object(a.a)(V,2),X=W[0],Y=W[1],Z=function(){Q(!1)},$=function(){var e=Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===P){e.next=18;break}return z(!1),Y([]),c(),e.prev=4,e.t0=Y,e.next=8,C.addUserFromExcel(P);case 8:e.t1=e.sent,(0,e.t0)(e.t1),oe(),Q(!0),e.next=18;break;case 14:e.prev=14,e.t2=e.catch(4),r(),n(A.b.ACTION_FAILURE,"error");case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(){return e.apply(this,arguments)}}(),ee=function(e){_(Object(b.a)(Object(b.a)({},L),{},Object(l.a)({},e.target.name,e.target.value)))},te=function(){var e=Object(j.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(),e.prev=1,e.next=4,C.lock(t);case 4:n(A.b.ACTION_SUCCESS,"success"),oe(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n(A.b.ACTION_FAILURE,"error"),r();case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(j.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(),e.prev=1,e.next=4,C.unLock(t);case 4:n(A.b.ACTION_SUCCESS,"success"),oe(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n(A.b.ACTION_FAILURE,"error"),r();case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(j.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(),e.prev=1,e.next=4,C.reset(t);case 4:n(A.b.ACTION_SUCCESS,"success"),oe(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n(A.b.ACTION_FAILURE,"error"),r();case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p(!1),c(),e.prev=2,!k){e.next=6;break}e.next=8;break;case 6:return e.next=8,C.create(L);case 8:n(A.b.ACTION_SUCCESS,"success"),oe(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),n(A.b.ACTION_FAILURE,"error"),r();case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),re=[Object(S.jsx)(x.n,{tooltip:"Th\xeam nh\xe2n vi\xean m\u1edbi",text:"Th\xeam",icon:"plus",color:"primary",hideTitleOnMobile:!0,onClick:function(){_(w),y(!1),p(!0)}},1),Object(S.jsx)(x.n,{tooltip:"T\u1ea1o t\u1eeb file excel",text:"Excel",icon:"file-excel",color:"primary",onClick:function(){z(!0)}},2)],oe=function(){var e=Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(),e.prev=1,e.t0=F,e.next=5,C.getAll();case 5:e.t1=e.sent,(0,e.t0)(e.t1),r(),e.next=14;break;case 10:e.prev=10,e.t2=e.catch(1),r(),n(A.b.FETCH_FAILURE,"error");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return o.a.useEffect((function(){oe()}),[]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(x.k,{open:G,onClose:Z,title:"K\u1ebft qu\u1ea3 t\u1ea1o t\u1eeb file excel",onSubmit:Z,children:Object(S.jsx)(m.a,{container:!0,spacing:1,children:X.map((function(e,t){return Object(S.jsxs)(m.a,{item:!0,container:!0,spacing:1,xs:12,children:[Object(S.jsx)(m.a,{item:!0,xs:12,md:3,style:{color:e.isAdded?"green":"red"},children:Object(S.jsx)(d.a,{variant:"subtitle2",children:"".concat(e.number,"-").concat(e.fullName)})}),!e.isAdded&&Object(S.jsx)(m.a,{item:!0,xs:12,md:9,style:{color:e.isAdded?"green":"red"},children:Object(S.jsx)(d.a,{variant:"caption",children:e.message})})]},t)}))})}),Object(S.jsx)(x.k,{open:q,onClose:function(){z(!1)},title:"T\u1ea3i t\u1ec7p excel",onSubmit:$,children:Object(S.jsx)(h.a,{acceptedFiles:[".xls",".xlsx"],showPreviews:!1,showFileNames:!0,filesLimit:1,maxFileSize:25e6,useChipsForPreview:!0,dropzoneText:"K\xe9o th\u1ea3 file v\xe0o \u0111\xe2y \u0111\u1ec3 t\u1ea3i l\xean",onChange:function(e){Array.isArray(e)&&J(e[0])},showAlerts:!1})}),Object(S.jsxs)(x.k,{title:"Th\xeam/Ch\u1ec9nh s\u1eeda nh\xe2n vi\xean",open:u,onClose:function(){p(!1)},onSubmit:ae,children:[Object(S.jsx)(x.p,{name:"number",label:"M\xe3 s\u1ed1 nh\xe2n vi\xean",type:"text",required:!0,value:L.number,onChange:ee}),Object(S.jsx)(x.p,{name:"fullName",label:"H\u1ecd v\xe0 t\xean",type:"text",required:!0,value:L.fullName,onChange:ee}),Object(S.jsx)(x.p,{name:"email",label:"Email",type:"text",value:L.email,required:!0,onChange:ee})]}),Object(S.jsx)(x.f,{title:"Nh\xe2n vi\xean",columns:g,data:(e=E,e.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{sortNumber:parseInt(e.number,10),action:Object(S.jsxs)(S.Fragment,{children:[e.isActive?Object(S.jsx)(x.n,{tooltip:"Nh\u1ea5n v\xe0o \u0111\u1ec3 kh\xf3a",text:"\u0110ang m\u1edf",icon:"lock-open",color:"success",hideTitleOnMobile:!0,onClick:function(){te(e.number)}}):Object(S.jsx)(x.n,{tooltip:"Nh\u1ea5n v\xe0o \u0111\u1ec3 m\u1edf kh\xf3a",text:"\u0110ang kh\xf3a",icon:"lock",color:"danger",hideTitleOnMobile:!0,onClick:function(){ne(e.number)}}),Object(S.jsx)(x.n,{tooltip:"\u0110\u1eb7t l\u1ea1i t\xe0i kho\u1ea3n v\u1ec1 m\u1eb7c \u0111\u1ecbnh",text:"\u0110\u1eb7t l\u1ea1i",icon:"sync-alt",color:"primary",hideTitleOnMobile:!0,onClick:function(){ce(e.number)}})]})})}))),actions:re,initialOrderBy:"sortNumber"})]})}function N(){var e=Object(i.j)().path;return Object(S.jsx)(i.d,{children:Object(S.jsx)(i.b,{path:"".concat(e,"/users"),component:y})})}var T=o.a.lazy((function(){return n.e(35).then(n.bind(null,1096))}));function E(){var e=Object(i.j)().path,t=o.a.useContext(s.a),n=t.changeSideMenuList,r=t.changeActivePluginId,l=o.a.useState(!1),b=Object(a.a)(l,2),p=b[0],f=b[1];return o.a.useEffect((function(){r(u.e.id),Object(u.b)().then((function(e){f(e)})).catch((function(){f(!1)}))}),[]),o.a.useEffect((function(){n(p?[].concat(Object(c.a)(u.d),Object(c.a)(u.a)):u.d)}),[p]),Object(S.jsxs)(i.d,{children:[p&&Object(S.jsx)(i.b,{path:"".concat(e,"/admin"),component:T}),Object(S.jsx)(i.b,{path:"".concat(e),component:N})]})}}}]);