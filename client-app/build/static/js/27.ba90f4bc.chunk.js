(this.webpackJsonpemis=this.webpackJsonpemis||[]).push([[27],{722:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return E}));var c=n(1),a=n(151),r=n(15),o=n(0),i=n.n(o),s=n(29),u=n(58),l=n(101),b=n(16),p=n(19),f=n(28),j=n.n(f),h=n(42),m=n(504),d=n(449),x=n(50),O=n(10),v=n.n(O),k="/api/hcm/employees";var C={getAll:function(){return v.a.get(k)},create:function(e){return v.a.post("".concat(k,"/addUser"),e)},lock:function(e){return v.a.put("".concat(k,"/lockUser/").concat(e))},unLock:function(e){return v.a.put("".concat(k,"/unLockUser/").concat(e))},reset:function(e){return v.a.put("".concat(k,"/resetUser/").concat(e))},addUserFromExcel:function(e){var t=new FormData;return t.append("files",e,e.name),v.a.post("".concat(k,"/addFromExcel"),t,{headers:{"Content-Type":"multipart/form-data"}})}},A=n(21),S=n(115),g=[{id:"sortNumber",label:"M\xe3 s\u1ed1",numeric:!1,sortable:!0},{id:"fullName",label:"H\u1ecd t\xean",numeric:!1,sortable:!0},{id:"email",label:"Email",numeric:!1,sortable:!1},{id:"action",label:"",numeric:!1,sortable:!1}],w={number:"",fullName:"",email:""};function y(){var e,t=i.a.useContext(S.a),n=t.showAlert,a=t.showBackdrop,o=t.hideBackdrop,s=i.a.useState(!1),u=Object(r.a)(s,2),l=u[0],f=u[1],O=i.a.useState(!1),v=Object(r.a)(O,2),k=v[0],y=v[1],N=i.a.useState([]),T=Object(r.a)(N,2),E=T[0],F=T[1],I=i.a.useState(w),U=Object(r.a)(I,2),L=U[0],_=U[1],M=i.a.useState(!1),R=Object(r.a)(M,2),q=R[0],z=R[1],B=i.a.useState(),H=Object(r.a)(B,2),P=H[0],J=H[1],K=i.a.useState(!1),D=Object(r.a)(K,2),G=D[0],Q=D[1],V=i.a.useState([]),W=Object(r.a)(V,2),X=W[0],Y=W[1],Z=function(){Q(!1)},$=function(){var e=Object(h.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===P){e.next=18;break}return z(!1),Y([]),a(),e.prev=4,e.t0=Y,e.next=8,C.addUserFromExcel(P);case 8:e.t1=e.sent,(0,e.t0)(e.t1),oe(),Q(!0),e.next=18;break;case 14:e.prev=14,e.t2=e.catch(4),o(),n(S.b.ACTION_FAILURE,"error");case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(){return e.apply(this,arguments)}}(),ee=function(e){_(Object(p.a)(Object(p.a)({},L),{},Object(b.a)({},e.target.name,e.target.value)))},te=function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(),e.prev=1,e.next=4,C.lock(t);case 4:n(S.b.ACTION_SUCCESS,"success"),oe(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n(S.b.ACTION_FAILURE,"error"),o();case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(),e.prev=1,e.next=4,C.unLock(t);case 4:n(S.b.ACTION_SUCCESS,"success"),oe(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n(S.b.ACTION_FAILURE,"error"),o();case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(),e.prev=1,e.next=4,C.reset(t);case 4:n(S.b.ACTION_SUCCESS,"success"),oe(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n(S.b.ACTION_FAILURE,"error"),o();case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(h.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f(!1),a(),e.prev=2,!k){e.next=6;break}e.next=8;break;case 6:return e.next=8,C.create(L);case 8:n(S.b.ACTION_SUCCESS,"success"),oe(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),n(S.b.ACTION_FAILURE,"error"),o();case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),re=[Object(c.jsx)(A.o,{tooltip:"Th\xeam nh\xe2n vi\xean m\u1edbi",text:"Th\xeam",icon:"plus",color:"primary",hideTitleOnMobile:!0,onClick:function(){_(w),y(!1),f(!0)}},1),Object(c.jsx)(A.o,{tooltip:"T\u1ea1o t\u1eeb file excel",text:"Excel",icon:"file-excel",color:"primary",onClick:function(){z(!0)}},2)],oe=function(){var e=Object(h.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(),e.prev=1,e.t0=F,e.next=5,C.getAll();case 5:e.t1=e.sent,(0,e.t0)(e.t1),o(),e.next=14;break;case 10:e.prev=10,e.t2=e.catch(1),o(),n(S.b.FETCH_FAILURE,"error");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return i.a.useEffect((function(){oe()}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(A.l,{open:G,onClose:Z,title:"K\u1ebft qu\u1ea3 t\u1ea1o t\u1eeb file excel",onSubmit:Z,children:Object(c.jsx)(d.a,{container:!0,spacing:1,children:X.map((function(e,t){return Object(c.jsxs)(d.a,{item:!0,container:!0,spacing:1,xs:12,children:[Object(c.jsx)(d.a,{item:!0,xs:12,md:3,style:{color:e.isAdded?"green":"red"},children:Object(c.jsx)(x.a,{variant:"subtitle2",children:"".concat(e.number,"-").concat(e.fullName)})}),!e.isAdded&&Object(c.jsx)(d.a,{item:!0,xs:12,md:9,style:{color:e.isAdded?"green":"red"},children:Object(c.jsx)(x.a,{variant:"caption",children:e.message})})]},t)}))})}),Object(c.jsx)(A.l,{open:q,onClose:function(){z(!1)},title:"T\u1ea3i t\u1ec7p excel",onSubmit:$,children:Object(c.jsx)(m.a,{acceptedFiles:[".xls",".xlsx"],showPreviews:!1,showFileNames:!0,filesLimit:1,maxFileSize:25e6,useChipsForPreview:!0,dropzoneText:"K\xe9o th\u1ea3 file v\xe0o \u0111\xe2y \u0111\u1ec3 t\u1ea3i l\xean",onChange:function(e){Array.isArray(e)&&J(e[0])},showAlerts:!1})}),Object(c.jsxs)(A.l,{title:"Th\xeam/Ch\u1ec9nh s\u1eeda nh\xe2n vi\xean",open:l,onClose:function(){f(!1)},onSubmit:ae,children:[Object(c.jsx)(A.r,{name:"number",label:"M\xe3 s\u1ed1 nh\xe2n vi\xean",type:"text",required:!0,value:L.number,onChange:ee}),Object(c.jsx)(A.r,{name:"fullName",label:"H\u1ecd v\xe0 t\xean",type:"text",required:!0,value:L.fullName,onChange:ee}),Object(c.jsx)(A.r,{name:"email",label:"Email",type:"text",value:L.email,required:!0,onChange:ee})]}),Object(c.jsx)(A.g,{title:"Nh\xe2n vi\xean",columns:g,data:(e=E,e.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{sortNumber:parseInt(e.number,10),action:Object(c.jsxs)(c.Fragment,{children:[e.isActive?Object(c.jsx)(A.o,{tooltip:"Nh\u1ea5n v\xe0o \u0111\u1ec3 kh\xf3a",text:"\u0110ang m\u1edf",icon:"lock-open",color:"success",hideTitleOnMobile:!0,onClick:function(){te(e.number)}}):Object(c.jsx)(A.o,{tooltip:"Nh\u1ea5n v\xe0o \u0111\u1ec3 m\u1edf kh\xf3a",text:"\u0110ang kh\xf3a",icon:"lock",color:"danger",hideTitleOnMobile:!0,onClick:function(){ne(e.number)}}),Object(c.jsx)(A.o,{tooltip:"\u0110\u1eb7t l\u1ea1i t\xe0i kho\u1ea3n v\u1ec1 m\u1eb7c \u0111\u1ecbnh",text:"\u0110\u1eb7t l\u1ea1i",icon:"sync-alt",color:"primary",hideTitleOnMobile:!0,onClick:function(){ce(e.number)}})]})})}))),actions:re,initialOrderBy:"sortNumber"})]})}function N(){var e=Object(s.j)().path;return Object(c.jsx)(s.d,{children:Object(c.jsx)(s.b,{path:"".concat(e,"/users"),component:y})})}var T=i.a.lazy((function(){return n.e(28).then(n.bind(null,702))}));function E(){var e=Object(s.j)().path,t=i.a.useContext(u.a),n=t.changeSideMenuList,o=t.changeActivePluginId,b=i.a.useState(!1),p=Object(r.a)(b,2),f=p[0],j=p[1];return i.a.useEffect((function(){o(l.e.id),Object(l.b)().then((function(e){j(e)})).catch((function(){j(!1)}))}),[]),i.a.useEffect((function(){n(f?[].concat(Object(a.a)(l.d),Object(a.a)(l.a)):l.d)}),[f]),Object(c.jsxs)(s.d,{children:[f&&Object(c.jsx)(s.b,{path:"".concat(e,"/admin"),component:T}),Object(c.jsx)(s.b,{path:"".concat(e),component:N})]})}}}]);