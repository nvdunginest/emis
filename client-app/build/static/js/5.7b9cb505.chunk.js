(this.webpackJsonpemis=this.webpackJsonpemis||[]).push([[5],{485:function(e,t,n){"use strict";var a={formatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy",n=t,a=[{symbol:"dd",value:e.getDate()<10?"0".concat(e.getDate()):e.getDate()},{symbol:"MM",value:e.getMonth()+1<10?"0".concat(e.getMonth()+1):"".concat(e.getMonth()+1)},{symbol:"yyyy",value:e.getFullYear()},{symbol:"hh",value:e.getHours()<10?"0".concat(e.getHours()):e.getHours()},{symbol:"mm",value:e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes()}];return a.map((function(e){return n=n.replace(e.symbol,e.value),e.symbol})),n},formatMoney:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Intl.NumberFormat("vi-VN",{maximumFractionDigits:t});return n.format(e)}};t.a=a},509:function(e,t,n){"use strict";var a=n(11),c=n.n(a),i="/api/bidding/vendors";var o={getVendors:function(){return c.a.get("".concat(i,"/getVendors"))},getRegisterList:function(){return c.a.get("".concat(i,"/getRegisterList"))},getDetail:function(e){return c.a.get("".concat(i,"/getDetail/").concat(e))},approve:function(e){return c.a.post("".concat(i,"/approve/").concat(e))},reject:function(e){return c.a.post("".concat(i,"/reject/").concat(e))}};t.a=o},517:function(e,t,n){"use strict";var a=n(11),c=n.n(a),i="/api/bidding/materials";var o={getAll:function(){return c.a.get(i)},create:function(e){return c.a.post(i,e)},edit:function(e,t){return c.a.put("".concat(i,"/").concat(e),t)},remove:function(e){return c.a.delete("".concat(i,"/").concat(e))},addFromExcel:function(e){var t=new FormData;return t.append("files",e,e.name),c.a.post("".concat(i,"/addFromExcel"),t,{headers:{"Content-Type":"multipart/form-data"}})}};t.a=o},518:function(e,t,n){"use strict";var a=n(11),c=n.n(a),i="/api/bidding/categories";var o={getAll:function(){return c.a.get(i)},create:function(e){return c.a.post(i,e)},edit:function(e,t){return c.a.put("".concat(i,"/").concat(e),t)}};t.a=o},543:function(e,t){},615:function(e,t){},616:function(e,t){},712:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ve}));var a=n(1),c=n(0),i=n.n(c),o=n(29),r=n(447),s=n(15),l=n(115),d=n(150),u=n(16),b=n(19),j="GET_INPUT_DATA_SUCCESS",m="GET_INPUT_DATA_FAILURE",p="CHANGE_HEADER_DATA",h="CHANGE_CATEGORIES_DATA",x="CHANGE_VENDORS_DATA",g="ADD_ITEM",O="EDIT_ITEM",f="REMOVE_ITEM",v="CHANGE_FILES",y={model:{begin:new Date,categories:[],code:"",description:"",end:new Date,files:[],items:[],name:"",vendors:[]},categories:[],materials:[],vendors:[]},C={state:y,getInputData:function(){},changeHeader:function(e,t){},changeCategories:function(e,t){},changeVendors:function(e,t){},addItem:function(e){},editItem:function(e){},removeItem:function(e){},changeFiles:function(e){}};function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(b.a)(Object(b.a)({},e),{},{categories:t.payload.categories,materials:t.payload.materials,vendors:t.payload.vendors});case m:return Object(b.a)(Object(b.a)({},e),{},{categories:[],materials:[],vendors:[]});case p:return Object(b.a)(Object(b.a)({},e),{},{model:Object(b.a)(Object(b.a)({},e.model),{},Object(u.a)({},t.payload.name,t.payload.value))});case h:if(t.payload.checked){var n=e.model.categories.find((function(e){return e===t.payload.categoryId}));return void 0===n?Object(b.a)(Object(b.a)({},e),{},{model:Object(b.a)(Object(b.a)({},e.model),{},{categories:[].concat(Object(d.a)(e.model.categories),[t.payload.categoryId])})}):e}return Object(b.a)(Object(b.a)({},e),{},{model:Object(b.a)(Object(b.a)({},e.model),{},{categories:e.model.categories.filter((function(e){return e!==t.payload.categoryId}))})});case x:if(t.payload.checked){var a=e.model.vendors.find((function(e){return e===t.payload.vendorCode}));return void 0===a?Object(b.a)(Object(b.a)({},e),{},{model:Object(b.a)(Object(b.a)({},e.model),{},{vendors:[].concat(Object(d.a)(e.model.vendors),[t.payload.vendorCode])})}):e}return Object(b.a)(Object(b.a)({},e),{},{model:Object(b.a)(Object(b.a)({},e.model),{},{vendors:e.model.vendors.filter((function(e){return e!==t.payload.vendorCode}))})});case g:return Object(b.a)(Object(b.a)({},e),{},{model:Object(b.a)(Object(b.a)({},e.model),{},{items:[].concat(Object(d.a)(e.model.items),[t.payload.item])})});case O:return Object(b.a)(Object(b.a)({},e),{},{model:Object(b.a)(Object(b.a)({},e.model),{},{items:[].concat(Object(d.a)(e.model.items.filter((function(e){return e.id!==t.payload.item.id}))),[t.payload.item])})});case f:return Object(b.a)(Object(b.a)({},e),{},{model:Object(b.a)(Object(b.a)({},e.model),{},{items:e.model.items.filter((function(e){return e.id!==t.payload.id}))})});case v:return Object(b.a)(Object(b.a)({},e),{},{model:Object(b.a)(Object(b.a)({},e.model),{},{files:t.payload.files})});default:return e}}var T=n(28),k=n.n(T),w=n(42),M=n(518),S=n(517),I=n(509),A={getInputData:function(){var e=Object(w.a)(k.a.mark((function e(t,n){var a,c,i,o,r,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){return{type:m}},o=function(e,t,n){return{type:j,payload:{categories:e,materials:t,vendors:n}}},a=n.showBackdrop,c=n.showAlert,i=n.hideBackdrop,a(),e.prev=4,e.next=7,Promise.all([M.a.getAll(),S.a.getAll(),I.a.getVendors()]);case 7:s=e.sent,t(o(s[0],s[1],s[2])),i(),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),t(r()),i(),c(l.b.FETCH_FAILURE,"error");case 17:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n){return e.apply(this,arguments)}}(),changeHeader:function(e,t,n){n({type:p,payload:{name:e,value:t}})},changeCategories:function(e,t,n){n({type:h,payload:{categoryId:e,checked:t}})},changeVendors:function(e,t,n){n({type:x,payload:{vendorCode:e,checked:t}})},addItem:function(e,t){t({type:g,payload:{item:e}})},editItem:function(e,t){t({type:O,payload:{item:e}})},removeItem:function(e,t){t({type:f,payload:{id:e}})},changeFiles:function(e,t){t({type:v,payload:{files:e}})}},E=Object(c.createContext)(C);function F(e){var t=e.children,n=i.a.useReducer(D,y),o=Object(s.a)(n,2),r=o[0],d=o[1],u=Object(c.useContext)(l.a),b={state:r,getInputData:function(){A.getInputData(d,u)},changeHeader:function(e,t){A.changeHeader(e,t,d)},changeCategories:function(e,t){A.changeCategories(e,t,d)},changeVendors:function(e,t){A.changeVendors(e,t,d)},addItem:function(e){A.addItem(e,d)},editItem:function(e){A.editItem(e,d)},removeItem:function(e){A.removeItem(e,d)},changeFiles:function(e){A.changeFiles(e,d)}};return Object(a.jsx)(E.Provider,{value:b,children:t})}var N=n(50),q=n(516),H=n(21),_=n(44),U=n(11),B=n.n(U),P="/api/bidding/packages";var Q={getAll:function(e){return B.a.get("".concat(P,"/getPackages/").concat(e))},get:function(e){return B.a.get("".concat(P,"/").concat(e))},createPackage:function(e){var t=new FormData;return t.append("Code",e.code),t.append("Name",e.name),t.append("Begin",e.begin.toUTCString()),t.append("End",e.end.toUTCString()),t.append("Description",e.description),e.categories.map((function(e,n){return t.append("Categories[".concat(n,"]"),e.toString()),!0})),e.vendors.map((function(e,n){return t.append("Vendors[".concat(n,"]"),e),!0})),e.files.map((function(e){return t.append("Files",e,e.name),!0})),e.items.map((function(e,n){return t.append("Items[".concat(n,"][No]"),e.no),t.append("Items[".concat(n,"][Quantity]"),e.quantity),t.append("Items[".concat(n,"][OptionQuantity]"),e.optionQuantity),t.append("Items[".concat(n,"][Spec]"),e.spec),t.append("Items[".concat(n,"][Note]"),e.note),t.append("Items[".concat(n,"][Begin]"),e.begin.toUTCString()),t.append("Items[".concat(n,"][End]"),e.end.toUTCString()),t.append("Items[".concat(n,"][MaterialCode]"),e.materialCode),!0})),B.a.post(P,t,{headers:{"Content-Type":"multipart/form-data"}})},getQuotation:function(e,t){return B.a.get("".concat(P,"/getQuotation/").concat(e,"/").concat(t))}};function L(){var e=Object(o.g)(),t=i.a.useContext(l.a),n=t.showAlert,c=t.showBackdrop,s=t.hideBackdrop,u=i.a.useContext(E),b=u.state,j=u.changeHeader,m=u.changeCategories,p=u.changeVendors,h=u.changeFiles,x=i.a.useContext(_.a).state.user,g=b.categories,O=b.model,f=b.vendors,v=function(e){j(e.target.name,e.target.value)},y=function(e,t){j(e,t)},C=function(){var t=Object(w.a)(k.a.mark((function t(){var a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(),t.prev=1,t.next=4,Q.createPackage(b.model);case 4:a=t.sent,s(),n("".concat(l.b.ACTION_SUCCESS," ").concat(a),"success"),e.push("/e-bidding/expert/document/".concat(a)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),s(),n("".concat(l.b.ACTION_FAILURE),"error");case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(H.m,{title:"Th\xf4ng tin chung",children:Object(a.jsxs)(r.a,{container:!0,spacing:1,children:[Object(a.jsx)(r.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(H.r,{required:!0,label:"M\xe3 s\u1ed1",name:"code",type:"text",value:b.model.code,onChange:v})}),Object(a.jsx)(r.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(H.r,{required:!0,label:"T\xean g\xf3i th\u1ea7u",name:"name",type:"text",value:b.model.name,onChange:v})}),Object(a.jsx)(r.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(H.i,{label:"Th\u1eddi gian m\u1edf th\u1ea7u",name:"begin",value:b.model.begin,onChange:function(e){y("begin",e)},disablePast:!0,required:!0})}),Object(a.jsx)(r.a,{item:!0,xs:12,md:6,children:Object(a.jsx)(H.i,{label:"Th\u1eddi gian \u0111\xf3ng th\u1ea7u",name:"end",value:b.model.end,onChange:function(e){y("end",e)},disablePast:!0,required:!0})}),Object(a.jsxs)(r.a,{item:!0,xs:12,children:[Object(a.jsx)(N.a,{variant:"caption",children:"Lo\u1ea1i h\xecnh g\xf3i th\u1ea7u"}),Object(a.jsx)("div",{children:g.filter((function(e){return e.userNumber===x.number})).map((function(e){return Object(a.jsx)(H.d,{checked:O.categories.includes(e.id),name:e.name,label:e.name,onChange:function(t,n){m(e.id,n)}},e.id)}))})]}),Object(a.jsxs)(r.a,{item:!0,xs:12,children:[Object(a.jsx)(N.a,{variant:"caption",children:"N\u1ed9i dung"}),Object(a.jsx)(H.k,{value:b.model.description,onChange:function(e){j("description",e)}})]}),Object(a.jsxs)(r.a,{item:!0,xs:12,children:[Object(a.jsx)(N.a,{variant:"caption",children:"Danh s\xe1ch nh\xe0 cung c\u1ea5p"}),Object(a.jsx)("div",{children:f.filter((function(e){return function(){var e=[];return b.categories.filter((function(e){return b.model.categories.includes(e.id)})).map((function(t){return e=[].concat(Object(d.a)(e),Object(d.a)(t.vendors)),!0})),Array.from(new Set(e))}().includes(e.code)})).map((function(e){return Object(a.jsx)(H.d,{checked:O.vendors.includes(e.code),name:e.code,label:"[".concat(e.code,"]-").concat(e.longTextName),onChange:function(t,n){p(e.code,n)}},e.code)}))})]}),Object(a.jsxs)(r.a,{item:!0,xs:12,children:[Object(a.jsx)(N.a,{variant:"caption",children:"T\xe0i li\u1ec7u \u0111\xednh k\xe8m"}),Object(a.jsx)("div",{children:Object(a.jsx)(r.a,{container:!0,spacing:1,children:Object(a.jsx)(q.a,{showPreviews:!1,acceptedFiles:[".doc",".docx",".xls",".xlsx",".pdf",".rar",".zip"],showFileNames:!0,filesLimit:10,maxFileSize:25e6,useChipsForPreview:!0,dropzoneText:"K\xe9o th\u1ea3 file v\xe0o \u0111\xe2y \u0111\u1ec3 t\u1ea3i l\xean",onChange:function(e){Array.isArray(e)&&h(e)},showAlerts:!1})})})]}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(H.o,{icon:"plus",color:"success",text:"T\u1ea1o g\xf3i th\u1ea7u",variant:"contained",onClick:function(){C()}})})]})})}var G=n(485),R=n(613),V=n.n(R);var z={excelDateToJSDate:function(e){var t=Math.floor(e-25569),n=new Date(1e3*(86400*t)),a=e-Math.floor(e)+1e-7,c=Math.floor(86400*a)-Math.floor(86400*a)%60,i=Math.floor(86400*a)%60,o=Math.floor(c/3600),r=Math.floor(c/60)%60;return new Date(n.getFullYear(),n.getMonth(),n.getDate(),o,r,i)},readToArray:function(e,t,n,a){return new Promise((function(c,i){var o=new FileReader;o.readAsArrayBuffer(e);var r=[];o.onload=function(){for(var e=new Uint8Array(o.result),s=V.a.read(e,{type:"array"}),l=s.Sheets[s.SheetNames[0]],d=0,u=function(){var e=Object(b.a)({},a),c=n+d;t.map((function(t){var n=l[V.a.utils.encode_cell({c:t.col,r:c})];if("string"===typeof e[t.name]||void 0!==n)switch(typeof e[t.name]){case"string":void 0!==n&&"s"===n.t&&(e[t.name]=n.v);break;case"number":"n"===n.t&&(e[t.name]=n.v)}else console.log(c),console.log(t.col),i();return!0})),r.push(e),d++};l[V.a.utils.encode_cell({c:t[0].col,r:n+d})];)u();c(r)}}))}},J=[{name:"no",col:0},{name:"code",col:1},{name:"spec",col:3},{name:"note",col:4},{name:"quantity",col:6},{name:"optionQuantity",col:8},{name:"begin",col:9},{name:"end",col:10}],X=[{id:"noNumber",label:"STT",numeric:!1,sortable:!1},{id:"infoCol",label:"H\u1ea1ng m\u1ee5c",numeric:!1,sortable:!1},{id:"quantityCol",label:"S\u1ed1 l\u01b0\u1ee3ng",numeric:!1,sortable:!1},{id:"noteCol",label:"Ghi ch\xfa",numeric:!1,sortable:!1},{id:"deliveryCol",label:"Th\u1eddi gian giao h\xe0ng",numeric:!1,sortable:!1},{id:"action",label:"",numeric:!1,sortable:!1}],K={id:0,no:"0",materialCode:"",materialDescription:"",begin:new Date,end:new Date,note:"",optionQuantity:"0",optionUnit:"",quantity:"0",spec:"",unit:""};function $(){var e,t,n=i.a.useContext(l.a),c=n.showAlert,o=n.showBackdrop,d=n.hideBackdrop,j=i.a.useContext(E),m=j.state,p=j.addItem,h=j.editItem,x=j.removeItem,g=i.a.useState(K),O=Object(s.a)(g,2),f=O[0],v=O[1],y=i.a.useState(0),C=Object(s.a)(y,2),D=C[0],T=C[1],M=i.a.useState(!1),S=Object(s.a)(M,2),I=S[0],A=S[1],F=i.a.useState(!1),_=Object(s.a)(F,2),U=_[0],B=_[1],P=i.a.useState(!1),Q=Object(s.a)(P,2),L=Q[0],R=Q[1],V=i.a.useState(),$=Object(s.a)(V,2),Y=$[0],W=$[1],Z=function(){var e=Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===Y){e.next=16;break}return R(!1),o(),e.prev=3,e.next=6,z.readToArray(Y,J,1,{no:0,code:"",spec:"",note:"",quantity:0,optionQuantity:0,begin:0,end:0});case 6:e.sent.filter((function(e){return e.no>0})).map((function(e){var t=m.materials.find((function(t){return t.code===e.code}));if(void 0!==t){var n={no:e.no.toString(),materialCode:e.code,spec:e.spec,begin:z.excelDateToJSDate(e.begin),end:z.excelDateToJSDate(e.end),materialDescription:t.description,note:e.note,unit:t.unit,id:D+1,optionUnit:t.optionUnit,quantity:e.quantity.toString(),optionQuantity:e.optionQuantity.toString()};T(D+1),p(n)}return!0})),c(l.b.ACTION_SUCCESS,"success"),d(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),d(),c("File sai m\u1eabu! Vui l\xf2ng ki\u1ec3m tra l\u1ea1i!","error");case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}(),ee=function(e){v(Object(b.a)(Object(b.a)({},f),{},Object(u.a)({},e.target.name,e.target.value)))},te=[Object(a.jsx)(H.o,{tooltip:"Th\xeam m\u1edbi",text:"Th\xeam",icon:"plus",color:"primary",onClick:function(){v(Object(b.a)(Object(b.a)({},K),{},{id:D,no:D.toString()})),T(D+1),B(!1),A(!0)}},1),Object(a.jsx)(H.o,{tooltip:"T\u1ea1o t\u1eeb file excel",text:"Excel",icon:"file-excel",color:"primary",onClick:function(){R(!0)}},2)];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(H.l,{open:L,onClose:function(){R(!1)},title:"T\u1ea3i t\u1ec7p excel",onSubmit:Z,children:Object(a.jsx)(q.a,{acceptedFiles:[".xls",".xlsx"],showPreviews:!1,showFileNames:!0,filesLimit:1,maxFileSize:25e6,useChipsForPreview:!0,dropzoneText:"K\xe9o th\u1ea3 file v\xe0o \u0111\xe2y \u0111\u1ec3 t\u1ea3i l\xean",onChange:function(e){Array.isArray(e)&&W(e[0])},showAlerts:!1})}),Object(a.jsx)(H.l,{title:"Th\xeam/Ch\u1ec9nh s\u1eeda",open:I,onClose:function(){A(!1)},onSubmit:function(){A(!1),U?h(f):p(f)},children:Object(a.jsxs)(r.a,{container:!0,spacing:1,children:[Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(H.r,{name:"no",label:"Th\u1ee9 t\u1ef1",type:"text",required:!0,value:f.no,onChange:ee})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(H.e,{required:!0,label:"M\xe3 v\u1eadt t\u01b0",options:(t=m.materials,t.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{label:"[".concat(e.code,"]-").concat(e.description)})}))),optionLabel:"label",onChange:function(e){null!==e&&v(Object(b.a)(Object(b.a)({},f),{},{materialCode:e.code,materialDescription:e.description,unit:e.unit,optionUnit:e.optionUnit}))}})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(H.r,{name:"materialDescription",label:"Di\u1ec5n gi\u1ea3i",type:"text",disabled:!0,required:!0,value:f.materialDescription})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(H.r,{name:"spec",label:"Spec",type:"text",value:f.spec,onChange:ee})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(H.r,{name:"note",label:"Ghi ch\xfa",type:"text",value:f.note,onChange:ee})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(H.r,{name:"quantity",label:"S\u1ed1 l\u01b0\u1ee3ng 1",type:"number",value:f.quantity,onChange:ee})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(H.r,{name:"unit",label:"\u0110\u01a1n v\u1ecb 1",type:"text",disabled:!0,required:!0,value:f.unit})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(H.r,{name:"optionQuantity",label:"S\u1ed1 l\u01b0\u1ee3ng 2",type:"number",value:f.optionQuantity,onChange:ee})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(H.r,{name:"optionUnit",label:"\u0110\u01a1n v\u1ecb 2",type:"text",disabled:!0,required:!0,value:f.optionUnit})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(H.h,{label:"Ng\xe0y b\u1eaft \u0111\u1ea7u giao h\xe0ng",name:"begin",value:f.begin,onChange:function(e){v(Object(b.a)(Object(b.a)({},f),{},{begin:e}))},disablePast:!0,required:!0})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(H.h,{label:"Ng\xe0y k\u1ebft th\xfac giao h\xe0ng",name:"end",value:f.end,onChange:function(e){v(Object(b.a)(Object(b.a)({},f),{},{end:e}))},disablePast:!0,required:!0})})]})}),Object(a.jsx)(H.g,{title:"Danh s\xe1ch v\u1eadt t\u01b0, d\u1ecbch v\u1ee5",columns:X,data:(e=m.model.items,e.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{noNumber:parseInt(e.no,10),infoCol:Object(a.jsxs)("div",{children:[Object(a.jsx)(N.a,{variant:"subtitle2",children:e.materialDescription}),Object(a.jsx)(N.a,{variant:"caption",children:e.materialCode})]}),quantityCol:Object(a.jsxs)("div",{children:[Object(a.jsx)(N.a,{variant:"subtitle2",children:"".concat(G.a.formatMoney(parseFloat(e.quantity),3)," ").concat(e.unit)}),Object(a.jsx)(N.a,{variant:"caption",children:"".concat(G.a.formatMoney(parseFloat(e.optionQuantity),3)," ").concat(e.optionUnit)})]}),noteCol:Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(N.a,{variant:"caption",children:"Spec: ".concat(e.spec)}),Object(a.jsx)(N.a,{variant:"caption",children:"Ghi ch\xfa: ".concat(e.note)})]}),deliveryCol:Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(N.a,{variant:"caption",children:"T\u1eeb: ".concat(G.a.formatDate(e.begin,"dd/MM/yyyy"))}),Object(a.jsx)(N.a,{variant:"caption",children:"\u0110\u1ebfn: ".concat(G.a.formatDate(e.end,"dd/MM/yyyy"))})]}),action:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(H.o,{tooltip:"Ch\u1ec9nh s\u1eeda",text:"S\u1eeda",icon:"edit",color:"success",onClick:function(){!function(e){v(e),B(!0),A(!0)}(e)}}),Object(a.jsx)(H.o,{tooltip:"X\xf3a",text:"X\xf3a",icon:"trash-alt",color:"danger",onClick:function(){var t;t=e.id,x(t)}})]})})}))),actions:te,initialOrderBy:"noNumber"})]})}function Y(){var e=i.a.useContext(E).getInputData;return i.a.useEffect((function(){e()}),[]),Object(a.jsxs)(r.a,{container:!0,spacing:2,children:[Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(L,{})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)($,{})})]})}function W(){return Object(a.jsx)(F,{children:Object(a.jsx)(Y,{})})}var Z=[{id:"code",label:"M\xe3",numeric:!1,sortable:!0},{id:"name",label:"T\xean g\xf3i th\u1ea7u",numeric:!1,sortable:!1},{id:"beginDateText",label:"Ng\xe0y MT",numeric:!1,sortable:!0},{id:"beginHourText",label:"Gi\u1edd MT",numeric:!1,sortable:!0},{id:"endDateText",label:"Ng\xe0y \u0110T",numeric:!1,sortable:!0},{id:"endHourText",label:"Gi\u1edd \u0110T",numeric:!1,sortable:!0},{id:"action",label:"",numeric:!1,sortable:!1}];function ee(){var e,t=Object(o.i)().status,n=Object(o.g)(),c=i.a.useContext(l.a),r=c.showAlert,d=c.showBackdrop,u=c.hideBackdrop,j=i.a.useState([]),m=Object(s.a)(j,2),p=m[0],h=m[1],x=i.a.useState("Danh s\xe1ch g\xf3i th\u1ea7u"),g=Object(s.a)(x,2),O=g[0],f=g[1],v=[Object(a.jsx)(H.o,{tooltip:"L\xe0m m\u1edbi danh s\xe1ch",text:"L\xe0m m\u1edbi",icon:"sync-alt",color:"primary",onClick:function(){y()}},1)],y=function(){var e=Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(),e.prev=1,e.t0=h,e.next=5,Q.getAll(t);case 5:e.t1=e.sent,(0,e.t0)(e.t1),u(),e.next=14;break;case 10:e.prev=10,e.t2=e.catch(1),u(),r(l.b.FETCH_FAILURE,"error");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return i.a.useEffect((function(){switch(y(),t){case"new":f("Danh s\xe1ch g\xf3i th\u1ea7u m\u1edbi");break;case"opening":f("Danh s\xe1ch g\xf3i th\u1ea7u \u0111ang m\u1edf");break;case"closed":f("Danh s\xe1ch g\xf3i th\u1ea7u \u0111\xe3 \u0111\xf3ng")}}),[t]),Object(a.jsx)(H.g,{title:O,columns:Z,data:(e=p,e.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{beginDateText:G.a.formatDate(new Date(e.begin),"dd/MM/yyyy"),beginHourText:G.a.formatDate(new Date(e.begin),"hh:mm"),endDateText:G.a.formatDate(new Date(e.end),"dd/MM/yyyy"),endHourText:G.a.formatDate(new Date(e.begin),"hh:mm"),action:Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(H.o,{tooltip:"Xem chi ti\u1ebft g\xf3i th\u1ea7u",text:"Xem",icon:"info-circle",color:"success",onClick:function(){n.push("/e-bidding/expert/document/".concat(e.code))}})})})}))),actions:v,initialOrderBy:"beginDateText"})}var te=n(147),ne=n(141),ae=n(400),ce=n(113),ie=n(36),oe=n(142),re=n(6),se=n(692),le=n(611),de=n(612),ue=[{id:"no",label:"STT",numeric:!1,sortable:!1},{id:"infoCol",label:"H\u1ea1ng m\u1ee5c",numeric:!1,sortable:!1},{id:"quantityCol",label:"S\u1ed1 l\u01b0\u1ee3ng",numeric:!1,sortable:!1},{id:"noteCol",label:"Ghi ch\xfa",numeric:!1,sortable:!1},{id:"deliveryCol",label:"Th\u1eddi gian giao h\xe0ng",numeric:!1,sortable:!1},{id:"priceCol",label:"\u0110\u01a1n gi\xe1",numeric:!1,sortable:!1}],be={submitted:!1,items:[],attachments:[]};function je(e){var t,n=e.packageCode,c=e.vendorCode,o=e.packageItems,d=i.a.useContext(l.a).showAlert,u=i.a.useState(be),j=Object(s.a)(u,2),m=j[0],p=j[1],h=i.a.useState([]),x=Object(s.a)(h,2),g=x[0],O=x[1],f=function(){var e=Object(w.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.getQuotation(n,c);case 3:t=e.sent,p(t),O(o.map((function(e){var n=t.items.find((function(t){return t.itemId===e.id}));return void 0!==n?Object(b.a)(Object(b.a)({},e),{},{price:n.price}):Object(b.a)(Object(b.a)({},e),{},{price:0})}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),d(l.b.FETCH_FAILURE,"error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return i.a.useEffect((function(){f()}),[n,c]),Object(a.jsxs)(r.a,{container:!0,spacing:1,children:[Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(H.g,{title:"B\u1ea3ng ch\xe0o gi\xe1",columns:ue,data:(t=g,t.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{infoCol:Object(a.jsxs)("div",{children:[Object(a.jsx)(N.a,{variant:"subtitle2",children:e.description}),Object(a.jsx)(N.a,{variant:"caption",children:e.code})]}),quantityCol:Object(a.jsxs)("div",{children:[Object(a.jsx)(N.a,{variant:"subtitle2",children:"".concat(G.a.formatMoney(e.quantity,3)," ").concat(e.unit)}),Object(a.jsx)(N.a,{variant:"caption",children:"".concat(G.a.formatMoney(e.optionQuantity,3)," ").concat(e.optionUnit)})]}),noteCol:Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[null!==e.spec&&Object(a.jsx)(N.a,{variant:"caption",children:"Spec: ".concat(e.spec)}),null!==e.spec&&Object(a.jsx)(N.a,{variant:"caption",children:"Ghi ch\xfa: ".concat(e.note)})]}),deliveryCol:Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(N.a,{variant:"caption",children:"T\u1eeb: ".concat(G.a.formatDate(new Date(e.begin),"dd/MM/yyyy"))}),Object(a.jsx)(N.a,{variant:"caption",children:"\u0110\u1ebfn: ".concat(G.a.formatDate(new Date(e.end),"dd/MM/yyyy"))})]}),priceCol:Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(N.a,{variant:"subtitle2",children:G.a.formatMoney(e.price,3)}),Object(a.jsx)(N.a,{variant:"caption",children:"VND/1 ".concat(e.unit)})]})})}))),actions:[],initialOrderBy:"no"})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(H.m,{title:"T\xe0i li\u1ec7u \u0111\xednh k\xe8m ch\xe0o gi\xe1",children:m.attachments.map((function(e,t){return Object(a.jsxs)(r.a,{container:!0,spacing:1,children:[Object(a.jsx)(r.a,{item:!0,children:Object(a.jsx)(ie.a,{icon:{iconName:"check-square",prefix:"far"}})}),Object(a.jsx)(r.a,{item:!0,children:Object(a.jsx)(N.a,{variant:"subtitle2",children:e.fileName})}),Object(a.jsx)(r.a,{item:!0,children:Object(a.jsx)(H.j,{filename:e.fileName,url:"/api/bidding/packages/".concat(n,"/attachments/getQuotationFile/").concat(c,"/").concat(e.id)})})]},t)}))})})]})}var me=Object(re.a)({root:{border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(se.a),pe=Object(re.a)({root:{color:"#fff",fontStyle:"uppercase",borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:40,"&$expanded":{minHeight:40}},content:{margin:0,"& .MuiTypography-body1":{fontSize:"0.9rem"},"&$expanded":{margin:"0"}},expanded:{}})(le.a),he=Object(re.a)((function(){return{root:{padding:0}}}))(de.a);function xe(e){var t=e.packageCode,n=e.isClosedPackage,c=e.vendors,o=e.packageItems,r=i.a.useState([]),l=Object(s.a)(r,2),u=l[0],b=l[1];return Object(a.jsx)(H.m,{title:"Danh s\xe1ch nh\xe0 cung c\u1ea5p",noPadding:!0,children:c.map((function(e){return Object(a.jsxs)(me,{square:!0,expanded:u.includes(e.code),onChange:function(t,n){!function(e,t){t?u.includes(e)||b([].concat(Object(d.a)(u),[e])):b(u.filter((function(t){return t!==e})))}(e.code,n)},disabled:!(n&&e.submitted),children:[Object(a.jsx)(pe,{style:{backgroundColor:e.submitted?oe.a[700]:ne.a[700]},children:Object(a.jsxs)(N.a,{children:["".concat(e.code," - ").concat(e.longTextName," "),Object(a.jsx)(ie.a,{icon:e.submitted?"check-circle":"times-circle"})," ".concat(e.submitted?"\u0110\xe3 n\u1ed9p ch\xe0o gi\xe1":"Ch\u01b0a n\u1ed9p ch\xe0o gi\xe1")]})}),Object(a.jsx)(he,{children:u.includes(e.code)&&Object(a.jsx)(je,{packageCode:t,packageItems:o,vendorCode:e.code})})]},e.code)}))})}var ge=[{id:"no",label:"STT",numeric:!1,sortable:!1},{id:"infoCol",label:"H\u1ea1ng m\u1ee5c",numeric:!1,sortable:!1},{id:"quantityCol",label:"S\u1ed1 l\u01b0\u1ee3ng",numeric:!1,sortable:!1},{id:"noteCol",label:"Ghi ch\xfa",numeric:!1,sortable:!1},{id:"deliveryCol",label:"Th\u1eddi gian giao h\xe0ng",numeric:!1,sortable:!1}],Oe={attachments:[],begin:new Date,categories:[],code:"",status:0,description:"",end:new Date,items:[],name:"",vendors:[]};function fe(){var e,t=Object(o.i)().packageCode,n=i.a.useContext(l.a),c=n.showAlert,d=n.showBackdrop,u=n.hideBackdrop,j=i.a.useState(Oe),m=Object(s.a)(j,2),p=m[0],h=m[1],x=function(){var e=Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(),e.prev=1,e.t0=h,e.next=5,Q.get(t);case 5:e.t1=e.sent,(0,e.t0)(e.t1),u(),e.next=15;break;case 10:e.prev=10,e.t2=e.catch(1),u(),h(Oe),c(l.b.FETCH_FAILURE,"error");case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),g=function(e){switch(e){case 0:return{text:"M\u1edbi",icon:"star",color:ne.a[700]};case 1:return{text:"\u0110ang m\u1edf",icon:"spinner",color:ae.a[700]};case 2:return{text:"\u0110\xe3 \u0111\xf3ng",icon:"check-circle",color:ce.a[700]};default:return{text:"Kh\xf4ng x\xe1c \u0111\u1ecbnh",icon:"exclamation-circle",color:""}}};return i.a.useEffect((function(){x()}),[t]),Object(a.jsxs)(r.a,{container:!0,spacing:1,children:[Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(H.m,{title:"Th\xf4ng tin chung",children:Object(a.jsxs)(r.a,{container:!0,spacing:1,children:[Object(a.jsxs)(r.a,{item:!0,xs:12,md:6,children:[Object(a.jsx)(N.a,{variant:"caption",children:"M\xe3 s\u1ed1 g\xf3i th\u1ea7u"}),Object(a.jsxs)(N.a,{variant:"subtitle2",children:["".concat(p.code," - Tr\u1ea1ng th\xe1i: "),Object(a.jsx)(ie.a,{icon:g(p.status).icon,color:g(p.status).color})," ".concat(g(p.status).text," "),2===p.status&&Object(a.jsx)(H.j,{label:"T\u1ea3i t\u1ed5ng h\u1ee3p ch\xe0o gi\xe1",filename:"".concat(p.code," - Quotations Report.xlsx"),url:"/api/bidding/packages/getExcelReport/".concat(p.code)})]})]}),Object(a.jsx)(H.q,{title:"T\xean g\xf3i th\u1ea7u",content:p.name}),Object(a.jsx)(H.q,{title:"Th\u1eddi gian m\u1edf th\u1ea7u",content:G.a.formatDate(new Date(p.begin),"hh:mm dd/MM/yyyy")}),Object(a.jsx)(H.q,{title:"Th\u1eddi gian \u0111\xf3ng th\u1ea7u",content:G.a.formatDate(new Date(p.end),"hh:mm dd/MM/yyyy")}),Object(a.jsxs)(r.a,{item:!0,xs:12,children:[Object(a.jsx)(N.a,{variant:"caption",children:"M\xf4 t\u1ea3"}),Object(a.jsx)(te.a,{style:{padding:"8px"},variant:"outlined",children:Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:p.description}})})]}),Object(a.jsxs)(r.a,{xs:12,item:!0,children:[Object(a.jsx)(N.a,{variant:"caption",children:"Lo\u1ea1i h\xecnh g\xf3i th\u1ea7u"}),p.categories.map((function(e,t){return Object(a.jsxs)(r.a,{container:!0,spacing:1,children:[Object(a.jsx)(r.a,{item:!0,children:Object(a.jsx)(ie.a,{icon:{iconName:"check-square",prefix:"far"}})}),Object(a.jsx)(r.a,{item:!0,children:Object(a.jsx)(N.a,{variant:"subtitle2",children:e.name})})]},t)}))]}),Object(a.jsxs)(r.a,{xs:12,item:!0,children:[Object(a.jsx)(N.a,{variant:"caption",children:"T\xe0i li\u1ec7u \u0111\xednh k\xe8m"}),p.attachments.map((function(e,t){return Object(a.jsxs)(r.a,{container:!0,spacing:1,children:[Object(a.jsx)(r.a,{item:!0,children:Object(a.jsx)(ie.a,{icon:{iconName:"check-square",prefix:"far"}})}),Object(a.jsx)(r.a,{item:!0,children:Object(a.jsx)(N.a,{variant:"subtitle2",children:e.fileName})}),Object(a.jsx)(r.a,{item:!0,children:Object(a.jsx)(H.j,{filename:e.fileName,url:"/api/bidding/packages/".concat(p.code,"/attachments/").concat(e.id)})})]},t)}))]})]})})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(xe,{packageCode:p.code,packageItems:p.items,isClosedPackage:2===p.status,vendors:p.vendors})}),Object(a.jsx)(r.a,{item:!0,xs:12,children:Object(a.jsx)(H.g,{title:"Danh s\xe1ch v\u1eadt t\u01b0, d\u1ecbch v\u1ee5",columns:ge,data:(e=p.items,e.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{infoCol:Object(a.jsxs)("div",{children:[Object(a.jsx)(N.a,{variant:"subtitle2",children:e.description}),Object(a.jsx)(N.a,{variant:"caption",children:e.code})]}),quantityCol:Object(a.jsxs)("div",{children:[Object(a.jsx)(N.a,{variant:"subtitle2",children:"".concat(G.a.formatMoney(e.quantity,3)," ").concat(e.unit)}),Object(a.jsx)(N.a,{variant:"caption",children:"".concat(G.a.formatMoney(e.optionQuantity,3)," ").concat(e.optionUnit)})]}),noteCol:Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[null!==e.spec&&Object(a.jsx)(N.a,{variant:"caption",children:"Spec: ".concat(e.spec)}),null!==e.spec&&Object(a.jsx)(N.a,{variant:"caption",children:"Ghi ch\xfa: ".concat(e.note)})]}),deliveryCol:Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(N.a,{variant:"caption",children:"T\u1eeb: ".concat(G.a.formatDate(new Date(e.begin),"dd/MM/yyyy"))}),Object(a.jsx)(N.a,{variant:"caption",children:"\u0110\u1ebfn: ".concat(G.a.formatDate(new Date(e.end),"dd/MM/yyyy"))})]})})}))),actions:[],initialOrderBy:"no"})})]})}function ve(){var e=Object(o.j)().path;return Object(a.jsxs)(o.d,{children:[Object(a.jsx)(o.b,{path:"".concat(e,"/create-package"),component:W}),Object(a.jsx)(o.b,{path:"".concat(e,"/document-list/:status"),component:ee}),Object(a.jsx)(o.b,{path:"".concat(e,"/document/:packageCode"),component:fe})]})}}}]);