(this.webpackJsonpemis=this.webpackJsonpemis||[]).push([[14],{532:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var c=n(29),a=n.n(c),i=n(45),r=n(14),s=n(20),o=n(0),l=n.n(o),d=n(22),j=n(10),u=n.n(j);var h={getAll:function(){return u.a.get("/api/project-system/projects")}},b=n(1),x=function(e){return e.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{label:"[".concat(e.code,"]-").concat(e.name)})}))};function p(e){var t=e.selectedProject,n=e.onChange,c=l.a.useState([]),s=Object(r.a)(c,2),o=s[0],j=s[1],u=function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=j,e.next=4,h.getAll();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),j([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return l.a.useEffect((function(){var e=function(){var e=localStorage.getItem("projectCode"),t=localStorage.getItem("projectName");return null===e||null===t?null:{code:e,name:t,label:"[".concat(e,"]-").concat(t)}}();null!==e&&n({code:e.code,name:e.name}),u()}),[]),Object(b.jsx)(d.e,{required:!0,label:"D\u1ef1 \xe1n",options:x(o),optionLabel:"label",value:null!==t?{code:t.code,name:t.name,label:"[".concat(t.code,"]-").concat(t.name)}:null,getOptionSelected:function(e,t){return e.code===t.code},onChange:function(e){null!==e&&(n({code:e.code,name:e.name}),function(e){localStorage.setItem("projectCode",e.code),localStorage.setItem("projectName",e.name)}(e))}})}},568:function(e,t,n){"use strict";var c=n(10),a=n.n(c),i="/api/project-system/items";var r={getAll:function(e){return a.a.get("".concat(i,"?clusterCode=").concat(e))},report:function(e){return a.a.get("".concat(i,"/report?projectCode=").concat(e))},create:function(e){return a.a.post(i,e)},edit:function(e){return a.a.put(i,e)},remove:function(e,t){return a.a.delete("".concat(i,"?clusterCode=").concat(e,"&serviceMasterCode=").concat(t))}};t.a=r},721:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return T}));var c=n(0),a=n.n(c),i=n(30),r=n(29),s=n.n(r),o=n(45),l=n(14),d=n(44),j=n(57),u=n(165),h=n(483),b=n(493),x=n(494),p=n(490),m=n(491),O=n(492),f=n(495),g=n(22),v=n(126),C=n(532),y=n(568),k=n(1),W=Object(j.a)({root:{width:"100%",height:"100%"},container:{maxHeight:"calc(100% - 85px)",overflowY:"scroll"}});function w(){var e=W(),t=a.a.useContext(v.a),n=t.showAlert,c=t.showBackdrop,i=t.hideBackdrop,r=a.a.useState(null),j=Object(l.a)(r,2),w=j[0],S=j[1],M=a.a.useState([]),q=Object(l.a)(M,2),A=q[0],E=q[1],I=function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c(),null===w){e.next=16;break}return e.prev=2,e.t0=E,e.next=6,y.a.report(w.code);case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 10:e.prev=10,e.t2=e.catch(2),E([]),n(v.b.FETCH_FAILURE,"error");case 14:e.next=17;break;case 16:E([]);case 17:i();case 18:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return a.a.useEffect((function(){I()}),[w]),Object(k.jsxs)(u.a,{className:e.root,children:[Object(k.jsx)(h.a,{container:!0,children:Object(k.jsxs)(h.a,{container:!0,item:!0,xs:12,style:{padding:"8px"},direction:"row",spacing:1,alignItems:"flex-end",children:[Object(k.jsx)(h.a,{item:!0,xs:6,children:Object(k.jsx)(C.a,{selectedProject:w,onChange:function(e){S(e)}})}),null!==w&&Object(k.jsx)(h.a,{container:!0,spacing:1,item:!0,xs:6,children:Object(k.jsx)(h.a,{item:!0,children:Object(k.jsx)(g.o,{tooltip:"L\xe0m m\u1edbi",variant:"contained",text:"L\xe0m m\u1edbi",color:"success",icon:"sync-alt",onClick:I})})})]})}),Object(k.jsx)(b.a,{className:e.container,children:Object(k.jsxs)(x.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(k.jsx)(p.a,{children:Object(k.jsxs)(m.a,{children:[Object(k.jsx)(O.a,{align:"left",style:{minWidth:"20%"},children:"M\xe3 BOS"}),Object(k.jsx)(O.a,{align:"left",style:{minWidth:"40%"},children:"Di\u1ec5n gi\u1ea3i"}),Object(k.jsx)(O.a,{align:"left",style:{minWidth:"20%"},children:"\u0110\u01a1n v\u1ecb"}),Object(k.jsx)(O.a,{align:"right",style:{minWidth:"20%"},children:"Kh\u1ed1i l\u01b0\u1ee3ng"}),Object(k.jsx)(O.a,{align:"right",style:{minWidth:"20%"}})]})}),Object(k.jsx)(f.a,{children:A.map((function(e){return Object(k.jsxs)(m.a,{children:[Object(k.jsx)(O.a,{align:"left",style:{minWidth:"20%"},children:e.serviceMasterCode}),Object(k.jsx)(O.a,{align:"left",style:{minWidth:"40%"},children:e.description}),Object(k.jsx)(O.a,{align:"left",style:{minWidth:"20%"},children:e.unit}),Object(k.jsx)(O.a,{align:"right",style:{minWidth:"20%"},children:e.quantity}),Object(k.jsx)(O.a,{align:"right",style:{minWidth:"20%"},children:null!==w&&Object(k.jsx)(d.a,{to:"/project-system/estimator/resources/".concat(w.code,"/").concat(e.serviceMasterCode),style:{textDecoration:"none"},children:Object(k.jsx)(g.o,{tooltip:"\u0110\u1ecbnh m\u1ee9c",text:"\u0110\u1ecbnh m\u1ee9c",icon:"boxes",color:"info"})})})]},e.serviceMasterCode)}))})]})})]})}var S=n(17),M=n(20),q=n(10),A=n.n(q);var E={getAll:function(){return A.a.get("/api/project-system/materials")}},I="/api/project-system/resources";var F={getAll:function(e,t){return A.a.get("".concat(I,"?projectCode=").concat(e,"&serviceMasterCode=").concat(t))},report:function(e){return A.a.get("".concat(I,"/report?projectCode=").concat(e))},create:function(e){return A.a.post(I,e)},edit:function(e){return A.a.put(I,e)},remove:function(e,t){return A.a.delete("".concat(I,"?clusterCode=").concat(e,"&elementCode=").concat(t))}},L=Object(j.a)({root:{width:"100%",height:"100%"},container:{maxHeight:440}}),B={projectCode:"",serviceMasterCode:"",materialCode:"",description:"",unit:"",quantity:""};function H(){var e,t=L(),n=Object(i.i)(),c=n.projectCode,r=n.serviceMasterCode,d=a.a.useContext(v.a),j=d.showAlert,C=d.showBackdrop,y=d.hideBackdrop,W=a.a.useState(!1),w=Object(l.a)(W,2),q=w[0],A=w[1],I=a.a.useState(!1),H=Object(l.a)(I,2),N=H[0],D=H[1],T=a.a.useState([]),U=Object(l.a)(T,2),_=U[0],K=U[1],R=a.a.useState(null),z=Object(l.a)(R,2),P=z[0],J=z[1],Y=a.a.useState([]),G=Object(l.a)(Y,2),Q=G[0],V=G[1],X=a.a.useState(B),Z=Object(l.a)(X,2),$=Z[0],ee=Z[1],te=function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(),e.prev=1,e.t0=K,e.next=5,E.getAll();case 5:return e.t1=e.sent,(0,e.t0)(e.t1),e.next=9,ne(c,r);case 9:y(),e.next=16;break;case 12:e.prev=12,e.t2=e.catch(1),y(),j(v.b.FETCH_FAILURE,"error");case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(o.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=V,e.next=4,F.getAll(t,n);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=12;break;case 8:e.prev=8,e.t2=e.catch(0),V([]),j(v.b.FETCH_FAILURE,"error");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),ce=function(e){ee(Object(M.a)(Object(M.a)({},$),{},Object(S.a)({},e.target.name,e.target.value)))},ae=function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A(!1),C(),e.prev=2,!N){e.next=8;break}return e.next=6,F.edit({projectCode:$.projectCode,materialCode:$.materialCode,quantity:parseFloat($.quantity),serviceMasterCode:$.serviceMasterCode});case 6:e.next=10;break;case 8:return e.next=10,F.create({projectCode:$.projectCode,materialCode:$.materialCode,quantity:parseFloat($.quantity),serviceMasterCode:$.serviceMasterCode});case 10:return j(v.b.ACTION_SUCCESS,"success"),C(),e.next=14,ne(c,r);case 14:y(),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),j(v.b.ACTION_FAILURE,"error"),y();case 21:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}();return a.a.useEffect((function(){te()}),[]),console.log(Q),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(g.l,{title:"Th\xeam/Ch\u1ec9nh s\u1eeda",open:q,onClose:function(){A(!1)},onSubmit:ae,children:Object(k.jsxs)(h.a,{container:!0,spacing:1,children:[Object(k.jsx)(h.a,{item:!0,xs:12,children:Object(k.jsx)(g.r,{name:"projectCode",label:"D\u1ef1 \xe1n",type:"text",required:!0,disabled:!0,value:$.projectCode,onChange:ce})}),Object(k.jsx)(h.a,{item:!0,xs:12,children:Object(k.jsx)(g.r,{name:"serviceMasterCode",label:"M\xe3 BOS",type:"text",required:!0,disabled:!0,value:$.serviceMasterCode,onChange:ce})}),Object(k.jsx)(h.a,{item:!0,xs:12,children:Object(k.jsx)(g.e,{required:!0,label:"M\xe3 v\u1eadt t\u01b0",options:(e=_,e.map((function(e){return Object(M.a)(Object(M.a)({},e),{},{label:"[".concat(e.code,"]-").concat(e.description)})}))),optionLabel:"label",value:P,getOptionSelected:function(e,t){return e.code===t.code},onChange:function(e){J(e),null!==e&&ee(Object(M.a)(Object(M.a)({},$),{},{materialCode:e.code,description:e.description,unit:e.unit}))}})}),Object(k.jsx)(h.a,{item:!0,xs:12,children:Object(k.jsx)(g.r,{name:"description",label:"Di\u1ec5n gi\u1ea3i",type:"text",required:!0,disabled:!0,value:$.description,onChange:ce})}),Object(k.jsx)(h.a,{item:!0,xs:12,children:Object(k.jsx)(g.r,{name:"unit",label:"\u0110\u01a1n v\u1ecb",type:"text",required:!0,disabled:!0,value:$.unit,onChange:ce})}),Object(k.jsx)(h.a,{item:!0,xs:12,children:Object(k.jsx)(g.r,{name:"quantity",label:"Kh\u1ed1i l\u01b0\u1ee3ng",type:"number",required:!0,value:$.quantity,onChange:ce})})]})}),Object(k.jsxs)(u.a,{className:t.root,children:[Object(k.jsx)(h.a,{container:!0,children:Object(k.jsx)(h.a,{container:!0,item:!0,xs:12,style:{padding:"8px"},direction:"row",spacing:1,alignItems:"flex-end",children:Object(k.jsx)(g.o,{tooltip:"Th\xeam m\u1edbi",variant:"contained",text:"Th\xeam",icon:"plus",color:"primary",onClick:function(){ee({projectCode:c,serviceMasterCode:r,materialCode:"",description:"",quantity:"0",unit:""}),D(!1),A(!0)}})})}),Object(k.jsx)(b.a,{className:t.container,children:Object(k.jsxs)(x.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(k.jsx)(p.a,{children:Object(k.jsxs)(m.a,{children:[Object(k.jsx)(O.a,{align:"left",style:{minWidth:"20%"},children:"M\xe3 v\u1eadt t\u01b0"}),Object(k.jsx)(O.a,{align:"left",style:{minWidth:"40%"},children:"Di\u1ec5n gi\u1ea3i"}),Object(k.jsx)(O.a,{align:"left",style:{minWidth:"20%"},children:"\u0110\u01a1n v\u1ecb"}),Object(k.jsx)(O.a,{align:"right",style:{minWidth:"20%"},children:"Kh\u1ed1i l\u01b0\u1ee3ng"}),Object(k.jsx)(O.a,{align:"right",style:{minWidth:"20%"}})]})}),Object(k.jsx)(f.a,{children:Q.map((function(e){return Object(k.jsxs)(m.a,{children:[Object(k.jsx)(O.a,{align:"left",style:{minWidth:"20%"},children:e.materialCode}),Object(k.jsx)(O.a,{align:"left",style:{minWidth:"40%"},children:e.description}),Object(k.jsx)(O.a,{align:"left",style:{minWidth:"20%"},children:e.unit}),Object(k.jsx)(O.a,{align:"right",style:{minWidth:"20%"},children:e.quantity}),Object(k.jsx)(O.a,{align:"right",style:{minWidth:"20%"},children:Object(k.jsx)(g.o,{tooltip:"Ch\u1ec9nh s\u1eeda",text:"S\u1eeda",icon:"edit",color:"success",onClick:function(){!function(e){ee({projectCode:e.projectCode,materialCode:e.materialCode,description:e.description,quantity:e.quantity.toString(),serviceMasterCode:e.serviceMasterCode,unit:e.unit}),D(!0),A(!0)}(e)}})})]},e.materialCode)}))})]})})]})]})}var N=Object(j.a)({root:{width:"100%",height:"100%"},container:{maxHeight:"calc(100% - 85px)",overflowY:"scroll"}});function D(){var e=N(),t=a.a.useContext(v.a),n=t.showAlert,c=t.showBackdrop,i=t.hideBackdrop,r=a.a.useState(null),d=Object(l.a)(r,2),j=d[0],y=d[1],W=a.a.useState([]),w=Object(l.a)(W,2),S=w[0],M=w[1],q=function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c(),null===j){e.next=16;break}return e.prev=2,e.t0=M,e.next=6,F.report(j.code);case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 10:e.prev=10,e.t2=e.catch(2),M([]),n(v.b.FETCH_FAILURE,"error");case 14:e.next=17;break;case 16:M([]);case 17:i();case 18:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return a.a.useEffect((function(){q()}),[j]),Object(k.jsxs)(u.a,{className:e.root,children:[Object(k.jsx)(h.a,{container:!0,children:Object(k.jsxs)(h.a,{container:!0,item:!0,xs:12,style:{padding:"8px"},direction:"row",spacing:1,alignItems:"flex-end",children:[Object(k.jsx)(h.a,{item:!0,xs:6,children:Object(k.jsx)(C.a,{selectedProject:j,onChange:function(e){y(e)}})}),null!==j&&Object(k.jsx)(h.a,{container:!0,spacing:1,item:!0,xs:6,children:Object(k.jsx)(h.a,{item:!0,children:Object(k.jsx)(g.o,{tooltip:"L\xe0m m\u1edbi",variant:"contained",text:"L\xe0m m\u1edbi",color:"success",icon:"sync-alt",onClick:q})})})]})}),Object(k.jsx)(b.a,{className:e.container,children:Object(k.jsxs)(x.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(k.jsx)(p.a,{children:Object(k.jsxs)(m.a,{children:[Object(k.jsx)(O.a,{align:"left",style:{minWidth:"20%"},children:"WBS level 3"}),Object(k.jsx)(O.a,{align:"left",style:{minWidth:"40%"},children:"Di\u1ec5n gi\u1ea3i WBS"}),Object(k.jsx)(O.a,{align:"left",style:{minWidth:"20%"},children:"M\xe3 v\u1eadt t\u01b0"}),Object(k.jsx)(O.a,{align:"left",style:{minWidth:"20%"},children:"Di\u1ec5n gi\u1ea3i"}),Object(k.jsx)(O.a,{align:"left",style:{minWidth:"20%"},children:"\u0110\u01a1n v\u1ecb"}),Object(k.jsx)(O.a,{align:"left",style:{minWidth:"20%"},children:"K\u1ef3"}),Object(k.jsx)(O.a,{align:"right",style:{minWidth:"20%"},children:"Kh\u1ed1i l\u01b0\u1ee3ng"})]})}),Object(k.jsx)(f.a,{children:S.map((function(e,t){return Object(k.jsxs)(m.a,{children:[Object(k.jsx)(O.a,{align:"left",style:{minWidth:"20%"},children:e.elementCode}),Object(k.jsx)(O.a,{align:"left",style:{minWidth:"20%"},children:e.elementDescription}),Object(k.jsx)(O.a,{align:"left",style:{minWidth:"20%"},children:e.materialCode}),Object(k.jsx)(O.a,{align:"left",style:{minWidth:"40%"},children:e.description}),Object(k.jsx)(O.a,{align:"left",style:{minWidth:"20%"},children:e.unit}),Object(k.jsx)(O.a,{align:"left",style:{minWidth:"20%"},children:e.period}),Object(k.jsx)(O.a,{align:"right",style:{minWidth:"20%"},children:e.quantity})]},t)}))})]})})]})}function T(){var e=Object(i.j)().path;return Object(k.jsxs)(i.d,{children:[Object(k.jsx)(i.b,{path:"".concat(e,"/item-report"),component:w}),Object(k.jsx)(i.b,{path:"".concat(e,"/resources/:projectCode/:serviceMasterCode"),component:H}),Object(k.jsx)(i.b,{path:"".concat(e,"/rbs"),component:D})]})}}}]);