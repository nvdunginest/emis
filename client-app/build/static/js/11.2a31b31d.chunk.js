(this.webpackJsonpemis=this.webpackJsonpemis||[]).push([[11],{545:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r}));var c={CREATE:1,UPDATE:2,DELETE:3},a={PACK:-1,POST:0},r={PLANNER:1,DESIGNER:2,ESTIMATOR:3}},546:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var c=n(22),a=n.n(c),r=n(40),i=n(25),o=n(13),s=n(0),l=n.n(s),d=n(46),u=n(9),j=n.n(u),p="/api/project-system/projects";var h={getAll:function(){return j.a.get(p)},get:function(e){return j.a.get("".concat(p,"/").concat(e))}},b=n(2),m="PROJECT_CODE_KEY",x="PROJECT_NAME_KEY",f=function(e){return e.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{label:"[".concat(e.code,"]-").concat(e.name)})}))};function O(e){var t=e.value,n=e.onChange,c=l.a.useState([]),o=Object(i.a)(c,2),s=o[0],u=o[1],j=function(){var e=Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=u,e.next=4,h.getAll();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),u([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return l.a.useEffect((function(){var e=function(){var e=localStorage.getItem(m),t=localStorage.getItem(x);return null===e||null===t?null:{code:e,name:t,label:"[".concat(e,"]-").concat(t)}}();null!==e&&n({code:e.code,name:e.name}),j()}),[]),Object(b.jsx)(d.d,{required:!0,label:"D\u1ef1 \xe1n",options:f(s),optionLabel:"label",value:null!==t?{code:t.code,name:t.name,label:"[".concat(t.code,"]-").concat(t.name)}:null,getOptionSelected:function(e,t){return e.code===t.code},onChange:function(e){null!==e&&(n({code:e.code,name:e.name}),function(e){localStorage.setItem(m,e.code),localStorage.setItem(x,e.name)}(e))}})}},577:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u}));var c=n(545),a=function(e){return e.map((function(e){return null===e.pack&&null!==e.post?{code:e.post.code,commitNumber:0,description:e.post.description,finish:e.post.finish,level:e.post.level,projectCode:e.post.projectCode,start:e.post.start,status:c.b.DELETE}:null!==e.pack&&null===e.post?{code:e.pack.code,commitNumber:0,description:e.pack.description,finish:e.pack.finish,level:e.pack.level,projectCode:e.pack.projectCode,start:e.pack.start,status:c.b.CREATE}:null!==e.pack&&null!==e.post?{code:e.pack.code,commitNumber:0,description:e.pack.description,finish:e.pack.finish,level:e.pack.level,projectCode:e.pack.projectCode,start:e.pack.start,status:c.b.UPDATE}:{code:"",commitNumber:0,description:"",finish:new Date,level:1,projectCode:"",start:new Date,status:c.b.UPDATE}}))},r=function(e){return e.map((function(e){return null===e.pack&&null!==e.post?{code:e.post.code,commitNumber:0,description:e.post.description,projectCode:e.post.projectCode,note:e.post.note,filePath:e.post.filePath,status:c.b.DELETE}:null!==e.pack&&null===e.post?{code:e.pack.code,commitNumber:0,description:e.pack.description,projectCode:e.pack.projectCode,note:e.pack.note,filePath:e.pack.filePath,status:c.b.CREATE}:null!==e.pack&&null!==e.post?{code:e.pack.code,commitNumber:0,description:e.pack.description,projectCode:e.pack.projectCode,note:e.pack.note,filePath:e.pack.filePath,status:c.b.UPDATE}:{code:"",commitNumber:0,description:"",projectCode:"",note:"",filePath:"",status:c.b.UPDATE}}))},i=function(e){return e.map((function(e){return null===e.pack&&null!==e.post?{elementCode:e.post.elementCode,clusterCode:e.post.clusterCode,quantity:e.post.quantity,commitNumber:0,projectCode:e.post.projectCode,status:c.b.DELETE}:null!==e.pack&&null===e.post?{elementCode:e.pack.elementCode,clusterCode:e.pack.clusterCode,quantity:e.pack.quantity,commitNumber:0,projectCode:e.pack.projectCode,status:c.b.CREATE}:null!==e.pack&&null!==e.post?{elementCode:e.pack.elementCode,clusterCode:e.pack.clusterCode,quantity:e.pack.quantity,commitNumber:0,projectCode:e.pack.projectCode,status:c.b.UPDATE}:{elementCode:"",clusterCode:"",quantity:1,commitNumber:0,projectCode:"",status:c.b.UPDATE}}))},o=function(e){return e.map((function(e){return null===e.pack&&null!==e.post?{serviceMasterCode:e.post.serviceMasterCode,clusterCode:e.post.clusterCode,quantity:e.post.quantity,commitNumber:0,projectCode:e.post.projectCode,status:c.b.DELETE}:null!==e.pack&&null===e.post?{serviceMasterCode:e.pack.serviceMasterCode,clusterCode:e.pack.clusterCode,quantity:e.pack.quantity,commitNumber:0,projectCode:e.pack.projectCode,status:c.b.CREATE}:null!==e.pack&&null!==e.post?{serviceMasterCode:e.pack.serviceMasterCode,clusterCode:e.pack.clusterCode,quantity:e.pack.quantity,commitNumber:0,projectCode:e.pack.projectCode,status:c.b.UPDATE}:{serviceMasterCode:"",clusterCode:"",quantity:1,commitNumber:0,projectCode:"",status:c.b.UPDATE}}))},s=function(e){return e.map((function(e){return null===e.pack&&null!==e.post?{serviceMasterCode:e.post.serviceMasterCode,materialCode:e.post.materialCode,quantity:e.post.quantity,commitNumber:0,projectCode:e.post.projectCode,status:c.b.DELETE}:null!==e.pack&&null===e.post?{serviceMasterCode:e.pack.serviceMasterCode,materialCode:e.pack.materialCode,quantity:e.pack.quantity,commitNumber:0,projectCode:e.pack.projectCode,status:c.b.CREATE}:null!==e.pack&&null!==e.post?{serviceMasterCode:e.pack.serviceMasterCode,materialCode:e.pack.materialCode,quantity:e.pack.quantity,commitNumber:0,projectCode:e.pack.projectCode,status:c.b.UPDATE}:{serviceMasterCode:"",materialCode:"",quantity:1,commitNumber:0,projectCode:"",status:c.b.UPDATE}}))},l=function(e){return{elements:a(e.elements)}},d=function(e){return{clusters:r(e.clusters),elementClusters:i(e.elementClusters),items:o(e.items)}},u=function(e){return{resources:s(e.resources)}}},578:function(e,t,n){"use strict";var c=n(9),a=n.n(c),r="/api/project-system/commits";var i={plannerTrackingChange:function(e){return a.a.get("".concat(r,"/planner-tracking-change?projectCode=").concat(e))},designerTrackingChange:function(e){return a.a.get("".concat(r,"/designer-tracking-change?projectCode=").concat(e))},estimatorTrackingChange:function(e){return a.a.get("".concat(r,"/estimator-tracking-change?projectCode=").concat(e))},plannerCommit:function(e,t){return a.a.post("".concat(r,"/planner-commit?projectCode=").concat(e),t)},designerCommit:function(e,t){return a.a.post("".concat(r,"/designer-commit?projectCode=").concat(e),t)},estimatorCommit:function(e,t){return a.a.post("".concat(r,"/estimator-commit?projectCode=").concat(e),t)}};t.a=i},626:function(e,t,n){"use strict";var c=n(9),a=n.n(c),r="/api/project-system/elements";var i={getAll:function(e,t){return a.a.get("".concat(r,"?projectCode=").concat(e,"&version=").concat(t))},getDetail:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return""===n?a.a.get("".concat(r,"/get-detail?projectCode=").concat(e,"&version=").concat(t)):a.a.get("".concat(r,"/get-detail?projectCode=").concat(e,"&version=").concat(t,"&elementCode=").concat(n))},getLeaf:function(e,t){return a.a.get("".concat(r,"/get-leaf?projectCode=").concat(e,"&version=").concat(t))},remove:function(e,t){return a.a.post("".concat(r,"/delete?projectCode=").concat(e),t)},addFromExcel:function(e,t){var n=new FormData;return n.append("files",t,t.name),a.a.post("".concat(r,"/addFromExcel?projectCode=").concat(e),n,{headers:{"Content-Type":"multipart/form-data"}})}};t.a=i},627:function(e,t,n){"use strict";var c=n(9),a=n.n(c),r="/api/project-system/items";var i={getAll:function(e,t){return a.a.get("".concat(r,"?projectCode=").concat(e,"&version=").concat(t))},getCollective:function(e,t){return a.a.get("".concat(r,"/get-collective?projectCode=").concat(e,"&version=").concat(t))},create:function(e,t){return a.a.post("".concat(r,"?projectCode=").concat(e),t)},edit:function(e,t,n,c){return a.a.put("".concat(r,"?projectCode=").concat(e,"&serviceMasterCode=").concat(t,"&clusterCode=").concat(n),c)},remove:function(e,t,n){return a.a.delete("".concat(r,"?projectCode=").concat(e,"&serviceMasterCode=").concat(t,"&clusterCode=").concat(n))},addFromExcel:function(e,t){var n=new FormData;return n.append("files",t,t.name),a.a.post("".concat(r,"/addFromExcel?projectCode=").concat(e),n,{headers:{"Content-Type":"multipart/form-data"}})}};t.a=i},875:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return se}));var c=n(0),a=n.n(c),r=n(27),i=n(15),o=n(13),s=n(22),l=n.n(s),d=n(40),u=n(25),j=n(47),p=n(531),h=n(379),b=n(70),m=n(112),x=n(416),f=n(417),O=n(413),C=n(414),g=n(415),v=n(418),k=n(46),y=n(18),A=n(546),E=n(545),w=n(9),S=n.n(w),M="/api/project-system/clusters";var T={getAll:function(e,t){return S.a.get("".concat(M,"?projectCode=").concat(e,"&version=").concat(t))},create:function(e,t){return S.a.post("".concat(M,"?projectCode=").concat(e),t)},edit:function(e,t,n){return S.a.put("".concat(M,"?projectCode=").concat(e,"&clusterCode=").concat(t),n)},remove:function(e,t){return S.a.delete("".concat(M,"?projectCode=").concat(e,"&clusterCode=").concat(t))},addFromExcel:function(e,t){var n=new FormData;return n.append("files",t,t.name),S.a.post("".concat(M,"/addFromExcel?projectCode=").concat(e),n,{headers:{"Content-Type":"multipart/form-data"}})}},q=n(2),W=Object(p.a)({root:{width:"100%",height:"100%"},container:{maxHeight:"calc(100% - 120px)",overflowY:"scroll"}}),N={code:"",description:"",note:"",projectCode:"",filePath:"",versionNumber:E.c.PACK};function I(){var e=W(),t=Object(j.b)(),n=a.a.useState(!1),c=Object(u.a)(n,2),r=c[0],s=c[1],p=a.a.useState(!1),w=Object(u.a)(p,2),S=w[0],M=w[1],I=a.a.useState(null),D=Object(u.a)(I,2),F=D[0],P=D[1],L=a.a.useState([]),U=Object(u.a)(L,2),R=U[0],_=U[1],K=a.a.useState(N),H=Object(u.a)(K,2),B=H[0],G=H[1],X=a.a.useState(!1),Y=Object(u.a)(X,2),z=Y[0],V=Y[1],J=a.a.useState([]),Q=Object(u.a)(J,2),Z=Q[0],$=Q[1],ee=a.a.useState(""),te=Object(u.a)(ee,2),ne=te[0],ce=te[1],ae=function(){var e=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>=1&&null!==F)){e.next=17;break}return $([]),t(y.loadingActions.show()),e.prev=3,e.t0=$,e.next=7,T.addFromExcel(F.code,n[0]);case 7:e.t1=e.sent,(0,e.t0)(e.t1),se(),V(!0),e.next=17;break;case 13:e.prev=13,e.t2=e.catch(3),t(y.loadingActions.hide()),t(y.alertActions.show(y.alertMessage.ACTION_FAILURE,"error"));case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),re=function(e){G(Object(o.a)(Object(o.a)({},B),{},Object(i.a)({},e.target.name,e.target.value)))},ie=function(){var e=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===F){e.next=15;break}if(window.prompt("Vui l\xf2ng nh\u1eadp M\xe3 \u0111i\u1ec3n h\xecnh \u0111\u1ec3 x\xe1c nh\u1eadn x\xf3a!")!==n){e.next=15;break}return t(y.loadingActions.show()),e.prev=4,e.next=7,T.remove(F.code,n);case 7:se(),t(y.alertActions.show(y.alertMessage.ACTION_SUCCESS,"success")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),t(y.alertActions.show(y.alertMessage.ACTION_FAILURE,"error")),t(y.loadingActions.hide());case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(!1),null===F){e.next=21;break}if(t(y.loadingActions.show()),e.prev=3,!S){e.next=9;break}return e.next=7,T.edit(F.code,B.code,B);case 7:e.next=13;break;case 9:if(null===F){e.next=13;break}return B.projectCode=F.code,e.next=13,T.create(F.code,B);case 13:t(y.alertActions.show(y.alertMessage.ACTION_SUCCESS,"success")),se(),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),t(y.alertActions.show(y.alertMessage.ACTION_FAILURE,"error")),t(y.loadingActions.hide());case 21:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(y.loadingActions.show()),null===F){e.next=16;break}return e.prev=2,e.t0=_,e.next=6,T.getAll(F.code,E.c.PACK);case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 10:e.prev=10,e.t2=e.catch(2),_([]),t(y.alertActions.show(y.alertMessage.FETCH_FAILURE,"error"));case 14:e.next=17;break;case 16:_([]);case 17:t(y.loadingActions.hide());case 18:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return a.a.useEffect((function(){se()}),[F]),Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(k.k,{open:z,onClose:function(){V(!1)},title:"K\u1ebft qu\u1ea3 t\u1ea1o t\u1eeb file excel",children:Object(q.jsx)(h.a,{container:!0,spacing:1,children:Z.map((function(e,t){return Object(q.jsxs)(h.a,{item:!0,container:!0,spacing:1,xs:12,children:[Object(q.jsx)(h.a,{item:!0,xs:12,md:3,style:{color:e.isAdded?"green":"red"},children:Object(q.jsx)(b.a,{variant:"subtitle2",children:"".concat(e.item.code,"-").concat(e.item.description)})}),!e.isAdded&&Object(q.jsx)(h.a,{item:!0,xs:12,md:9,style:{color:e.isAdded?"green":"red"},children:Object(q.jsx)(b.a,{variant:"caption",children:e.message})})]},t)}))})}),Object(q.jsx)(k.k,{title:"Th\xeam/Ch\u1ec9nh s\u1eeda",open:r,onClose:function(){s(!1)},onSubmit:oe,children:Object(q.jsxs)(h.a,{container:!0,spacing:1,children:[Object(q.jsx)(h.a,{item:!0,xs:12,children:Object(q.jsx)(k.p,{name:"code",label:"M\xe3",type:"text",required:!0,value:B.code,onChange:re})}),Object(q.jsx)(h.a,{item:!0,xs:12,children:Object(q.jsx)(k.p,{name:"description",label:"Di\u1ec5n gi\u1ea3i",type:"text",required:!0,value:B.description,onChange:re})}),Object(q.jsx)(h.a,{item:!0,xs:12,children:Object(q.jsx)(k.p,{name:"note",label:"Ghi ch\xfa",type:"text",required:!0,value:B.note,onChange:re})}),Object(q.jsx)(h.a,{item:!0,xs:12,children:Object(q.jsx)(k.p,{name:"filePath",label:"File chi\u1ebft t\xednh",type:"text",required:!0,value:B.filePath,onChange:re})})]})}),Object(q.jsxs)(m.a,{className:e.root,children:[Object(q.jsx)(h.a,{container:!0,children:Object(q.jsxs)(h.a,{container:!0,item:!0,xs:12,style:{padding:"8px"},direction:"row",spacing:1,alignItems:"flex-end",children:[Object(q.jsx)(h.a,{item:!0,xs:12,md:6,children:Object(q.jsx)(A.a,{value:F,onChange:function(e){P(e)}})}),Object(q.jsx)(h.a,{item:!0,xs:12,md:6,children:Object(q.jsx)(k.p,{name:"keyWord",label:"T\xecm ki\u1ebfm",type:"text",value:ne,onChange:function(e){ce(e.target.value)}})}),null!==F&&Object(q.jsxs)(h.a,{container:!0,spacing:1,item:!0,xs:12,alignItems:"flex-end",children:[Object(q.jsx)(h.a,{item:!0,children:Object(q.jsx)(k.n,{tooltip:"Th\xeam m\u1edbi",variant:"contained",text:"Th\xeam",icon:"plus",color:"primary",onClick:function(){G(N),M(!1),s(!0)}})}),Object(q.jsx)(h.a,{item:!0,children:Object(q.jsx)(k.q,{filesLimit:1,title:"T\u1ea3i t\u1ec7p excel",acceptedFiles:[".xls",".xlsx"],onSubmit:ae,tooltip:"T\u1ea1o t\u1eeb file excel",variant:"contained",text:"Excel",color:"primary"})}),Object(q.jsx)(h.a,{item:!0,children:Object(q.jsx)("a",{href:"https://ecobavn.sharepoint.com/:x:/s/bvkt/ESFkBGPfZXlAo2sXBvRmEhIBqy49ZiAAvvR_yuUA55owSg?e=30Xjj6",style:{textDecoration:"none"},target:"_blank",rel:"no noreferrer",children:Object(q.jsx)(k.n,{tooltip:"Xem template",variant:"contained",text:"Template",color:"info",icon:"file-excel"})})}),Object(q.jsx)(h.a,{item:!0,children:Object(q.jsx)(k.n,{tooltip:"L\xe0m m\u1edbi",variant:"contained",text:"L\xe0m m\u1edbi",color:"success",icon:"sync-alt",onClick:se})})]})]})}),Object(q.jsx)(x.a,{className:e.container,children:Object(q.jsxs)(f.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(q.jsx)(O.a,{children:Object(q.jsxs)(C.a,{children:[Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:"M\xe3 \u0111i\u1ec3n h\xecnh"}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"40%"},children:"Di\u1ec5n gi\u1ea3i"}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:"Ghi ch\xfa"}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:"Chi\u1ebft t\xednh"}),Object(q.jsx)(g.a,{align:"right",style:{minWidth:"20%"},children:"S\u1ed1 l\u01b0\u1ee3ng"}),Object(q.jsx)(g.a,{align:"right",children:"C\xf4ng t\xe1c"}),Object(q.jsx)(g.a,{align:"right"})]})}),Object(q.jsx)(v.a,{children:R.filter((function(e){return void 0!==ne.split("|").find((function(t){return e.code.includes(t)||e.description.includes(t)}))})).map((function(e){return Object(q.jsxs)(C.a,{children:[Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:e.code}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"40%"},children:e.description}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:e.note}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:Object(q.jsx)("a",{href:e.filePath,style:{textDecoration:"none"},target:"_blank",rel:"noreferrer",children:Object(q.jsx)(k.n,{tooltip:"Xem file chi\u1ebft t\xednh",text:"Chi\u1ebft t\xednh",icon:"file-excel",color:"info"})})}),Object(q.jsx)(g.a,{align:"right",children:e.elementCount}),Object(q.jsx)(g.a,{align:"right",children:e.itemCount}),Object(q.jsxs)(g.a,{align:"right",style:{minWidth:"20%"},children:[Object(q.jsx)(k.n,{tooltip:"Ch\u1ec9nh s\u1eeda",text:"S\u1eeda",icon:"edit",color:"success",onClick:function(){!function(e){G(e),M(!0),s(!0)}(e)}}),Object(q.jsx)(k.n,{tooltip:"X\xf3a \u0111i\u1ec3n h\xecnh",text:"X\xf3a",icon:"trash-alt",color:"danger",onClick:function(){ie(e.code)}})]})]},e.code)}))})]})})]})]})}var D=n(577),F=n(169),P=n(578),L=n(39),U=function(e){switch(e){case 1:return L.a.green[500];case 2:return L.a.amber[500];default:return L.a.red[500]}};function R(e){var t=e.data;return Object(q.jsxs)(f.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(q.jsx)(O.a,{children:Object(q.jsxs)(C.a,{children:[Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:"M\xe3 c\u1ea5u ki\u1ec7n"}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"40%"},children:"Di\u1ec5n gi\u1ea3i"}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:"Ghi ch\xfa"}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:"Chi\u1ebft t\xednh"})]})}),Object(q.jsx)(v.a,{children:t.map((function(e,t){return Object(q.jsxs)(C.a,{style:{backgroundColor:U(e.status)},children:[Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:Object(q.jsxs)(h.a,{container:!0,direction:"column",children:[Object(q.jsx)(h.a,{item:!0,children:null!==e.post?e.post.code:"-"}),Object(q.jsx)(h.a,{item:!0,children:null!==e.pack?e.pack.code:"-"})]})}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"40%"},children:Object(q.jsxs)(h.a,{container:!0,direction:"column",children:[Object(q.jsx)(h.a,{item:!0,children:null!==e.post?e.post.description:"-"}),Object(q.jsx)(h.a,{item:!0,children:null!==e.pack?e.pack.description:"-"})]})}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:Object(q.jsxs)(h.a,{container:!0,direction:"column",children:[Object(q.jsx)(h.a,{item:!0,children:null!==e.post?e.post.note:"-"}),Object(q.jsx)(h.a,{item:!0,children:null!==e.pack?e.pack.note:"-"})]})}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:Object(q.jsxs)(h.a,{container:!0,direction:"column",children:[Object(q.jsx)(h.a,{item:!0,children:null!==e.post?e.post.filePath:"-"}),Object(q.jsx)(h.a,{item:!0,children:null!==e.pack?e.pack.filePath:"-"})]})})]},t)}))})]})}var _=function(e){switch(e){case 1:return L.a.green[500];case 2:return L.a.amber[500];default:return L.a.red[500]}};function K(e){var t=e.data;return Object(q.jsxs)(f.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(q.jsx)(O.a,{children:Object(q.jsxs)(C.a,{children:[Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:"M\xe3 WBS"}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"40%"},children:"Di\u1ec5n gi\u1ea3i WBS"}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:"M\xe3 c\u1ea5u ki\u1ec7n"}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"40%"},children:"Di\u1ec5n gi\u1ea3i c\u1ea5u ki\u1ec7n"}),Object(q.jsx)(g.a,{align:"right",style:{minWidth:"20%"},children:"S\u1ed1 l\u01b0\u1ee3ng"})]})}),Object(q.jsx)(v.a,{children:t.map((function(e,t){return Object(q.jsxs)(C.a,{style:{backgroundColor:_(e.status)},children:[Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:Object(q.jsxs)(h.a,{container:!0,direction:"column",children:[Object(q.jsx)(h.a,{item:!0,children:null!==e.post?e.post.elementCode:"-"}),Object(q.jsx)(h.a,{item:!0,children:null!==e.pack?e.pack.elementCode:"-"})]})}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"40%"},children:Object(q.jsxs)(h.a,{container:!0,direction:"column",children:[Object(q.jsx)(h.a,{item:!0,children:null!==e.post?e.post.elementDescription:"-"}),Object(q.jsx)(h.a,{item:!0,children:null!==e.pack?e.pack.elementDescription:"-"})]})}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:Object(q.jsxs)(h.a,{container:!0,direction:"column",children:[Object(q.jsx)(h.a,{item:!0,children:null!==e.post?e.post.clusterCode:"-"}),Object(q.jsx)(h.a,{item:!0,children:null!==e.pack?e.pack.clusterCode:"-"})]})}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"40%"},children:Object(q.jsxs)(h.a,{container:!0,direction:"column",children:[Object(q.jsx)(h.a,{item:!0,children:null!==e.post?e.post.clusterDescription:"-"}),Object(q.jsx)(h.a,{item:!0,children:null!==e.pack?e.pack.clusterDescription:"-"})]})}),Object(q.jsx)(g.a,{align:"right",style:{minWidth:"20%"},children:Object(q.jsxs)(h.a,{container:!0,direction:"column",children:[Object(q.jsx)(h.a,{item:!0,children:null!==e.post?e.post.quantity:"-"}),Object(q.jsx)(h.a,{item:!0,children:null!==e.pack?e.pack.quantity:"-"})]})})]},t)}))})]})}var H=function(e){switch(e){case 1:return L.a.green[500];case 2:return L.a.amber[500];default:return L.a.red[500]}};function B(e){var t=e.data;return Object(q.jsxs)(f.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(q.jsx)(O.a,{children:Object(q.jsxs)(C.a,{children:[Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:"M\xe3 c\u1ea5u ki\u1ec7n"}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"40%"},children:"Di\u1ec5n gi\u1ea3i c\u1ea5u ki\u1ec7n"}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:"M\xe3 c\xf4ng t\xe1c"}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"40%"},children:"Di\u1ec5n gi\u1ea3i c\xf4ng t\xe1c"}),Object(q.jsx)(g.a,{align:"left",children:"\u0110\u01a1n v\u1ecb"}),Object(q.jsx)(g.a,{align:"right",style:{minWidth:"20%"},children:"S\u1ed1 l\u01b0\u1ee3ng"})]})}),Object(q.jsx)(v.a,{children:t.map((function(e,t){return Object(q.jsxs)(C.a,{style:{backgroundColor:H(e.status)},children:[Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:Object(q.jsxs)(h.a,{container:!0,direction:"column",children:[Object(q.jsx)(h.a,{item:!0,children:null!==e.post?e.post.clusterCode:"-"}),Object(q.jsx)(h.a,{item:!0,children:null!==e.pack?e.pack.clusterCode:"-"})]})}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"40%"},children:Object(q.jsxs)(h.a,{container:!0,direction:"column",children:[Object(q.jsx)(h.a,{item:!0,children:null!==e.post?e.post.clusterDescription:"-"}),Object(q.jsx)(h.a,{item:!0,children:null!==e.pack?e.pack.clusterDescription:"-"})]})}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:Object(q.jsxs)(h.a,{container:!0,direction:"column",children:[Object(q.jsx)(h.a,{item:!0,children:null!==e.post?e.post.serviceMasterCode:"-"}),Object(q.jsx)(h.a,{item:!0,children:null!==e.pack?e.pack.serviceMasterCode:"-"})]})}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"40%"},children:Object(q.jsxs)(h.a,{container:!0,direction:"column",children:[Object(q.jsx)(h.a,{item:!0,children:null!==e.post?e.post.serviceMasterDescription:"-"}),Object(q.jsx)(h.a,{item:!0,children:null!==e.pack?e.pack.serviceMasterDescription:"-"})]})}),Object(q.jsx)(g.a,{align:"left",children:Object(q.jsxs)(h.a,{container:!0,direction:"column",children:[Object(q.jsx)(h.a,{item:!0,children:null!==e.post?e.post.serviceMasterUnit:"-"}),Object(q.jsx)(h.a,{item:!0,children:null!==e.pack?e.pack.serviceMasterUnit:"-"})]})}),Object(q.jsx)(g.a,{align:"right",style:{minWidth:"20%"},children:Object(q.jsxs)(h.a,{container:!0,direction:"column",children:[Object(q.jsx)(h.a,{item:!0,children:null!==e.post?e.post.quantity:"-"}),Object(q.jsx)(h.a,{item:!0,children:null!==e.pack?e.pack.quantity:"-"})]})})]},t)}))})]})}var G=Object(p.a)({root:{width:"100%",height:"100%"},container:{maxHeight:"calc(100% - 85px)",overflowY:"scroll"}});function X(){var e=G(),t=Object(j.b)(),n=a.a.useState(null),c=Object(u.a)(n,2),r=c[0],i=c[1],o=a.a.useState({clusters:[],elementClusters:[],items:[]}),s=Object(u.a)(o,2),p=s[0],b=s[1],f=a.a.useState(!1),O=Object(u.a)(f,2),C=O[0],g=O[1],v=a.a.useState(""),w=Object(u.a)(v,2),S=w[0],M=w[1],T=a.a.useState(1),W=Object(u.a)(T,2),N=W[0],I=W[1],L=a.a.useState(!1),U=Object(u.a)(L,2),_=U[0],H=U[1],X=function(){var e=Object(d.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g(!1),t(y.loadingActions.show()),e.prev=2,n={header:{branch:E.a.DESIGNER,createdBy:"",createdByFullName:"",createdTime:new Date,description:S,number:0,projectCode:null!==r?r.code:""},detail:Object(D.a)(p)},null===r){e.next=7;break}return e.next=7,P.a.designerCommit(r.code,n);case 7:t(y.alertActions.show(y.alertMessage.ACTION_SUCCESS,"success")),Y(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),t(y.alertActions.show(y.alertMessage.ACTION_FAILURE,"error")),t(y.loadingActions.hide());case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===r){e.next=17;break}return t(y.loadingActions.show()),e.prev=2,e.t0=b,e.next=6,P.a.designerTrackingChange(r.code);case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 10:e.prev=10,e.t2=e.catch(2),b({clusters:[],elementClusters:[],items:[]}),t(y.alertActions.show(y.alertMessage.FETCH_FAILURE,"error"));case 14:t(y.loadingActions.hide()),e.next=18;break;case 17:b({clusters:[],elementClusters:[],items:[]});case 18:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=H,e.next=4,F.a.checkRolePermission("APPROVER_DESIGNER_ROLE");case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),H(!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return a.a.useEffect((function(){Y(),z()}),[r]),Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(k.k,{title:"C\u1eadp nh\u1eadt thay \u0111\u1ed5i l\xean server",open:C,onClose:function(){g(!1)},onSubmit:X,children:Object(q.jsx)(h.a,{container:!0,spacing:1,children:Object(q.jsx)(h.a,{item:!0,xs:12,children:Object(q.jsx)(k.p,{name:"commitDescription",label:"M\xf4 t\u1ea3 n\u1ed9i dung c\u1eadp nh\u1eadt",type:"text",required:!0,value:S,onChange:function(e){M(e.target.value)}})})})}),Object(q.jsxs)(m.a,{className:e.root,children:[Object(q.jsx)(h.a,{container:!0,children:Object(q.jsxs)(h.a,{container:!0,item:!0,xs:12,style:{padding:"8px"},direction:"row",spacing:1,alignItems:"flex-end",children:[Object(q.jsx)(h.a,{item:!0,xs:6,children:Object(q.jsx)(A.a,{value:r,onChange:function(e){i(e)}})}),Object(q.jsxs)(h.a,{container:!0,spacing:1,item:!0,xs:6,alignItems:"flex-end",children:[null!==r&&_&&(p.clusters.length>0||p.elementClusters.length>0||p.items.length>0)&&Object(q.jsx)(h.a,{item:!0,children:Object(q.jsx)(k.n,{tooltip:"C\u1eadp nh\u1eadt thay \u0111\u1ed5i",variant:"contained",text:"Commit",icon:"long-arrow-alt-up",color:"danger",onClick:function(){M(""),g(!0)}})}),Object(q.jsx)(h.a,{item:!0,children:Object(q.jsx)(k.n,{tooltip:"C\u1ea5u ki\u1ec7n \u0111i\u1ec3n h\xecnh",variant:"contained",text:"C\u1ea5u ki\u1ec7n",icon:"cubes",color:"primary",onClick:function(){I(1)}})}),Object(q.jsx)(h.a,{item:!0,children:Object(q.jsx)(k.n,{tooltip:"Mapping WBS - C\u1ea5u ki\u1ec7n",variant:"contained",text:"Mapping",icon:"link",color:"success",onClick:function(){I(2)}})}),Object(q.jsx)(h.a,{item:!0,children:Object(q.jsx)(k.n,{tooltip:"C\xf4ng t\xe1c",variant:"contained",text:"C\xf4ng t\xe1c",icon:"tasks",color:"info",onClick:function(){I(3)}})})]})]})}),Object(q.jsxs)(x.a,{className:e.container,children:[1===N&&Object(q.jsx)(R,{data:p.clusters}),2===N&&Object(q.jsx)(K,{data:p.elementClusters}),3===N&&Object(q.jsx)(B,{data:p.items})]})]})]})}var Y="CLUSTER_CODE_KEY",z="CLUSTER_DESCRIPTION_KEY",V=function(e){return e.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{label:"[".concat(e.code,"]-").concat(e.description)})}))};function J(e){var t=e.projectCode,n=e.value,c=e.onChange,r=a.a.useState([]),i=Object(u.a)(r,2),o=i[0],s=i[1],j=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=s,e.next=4,T.getAll(t,E.c.PACK);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),s([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return a.a.useEffect((function(){var e=function(){var e=localStorage.getItem(Y),t=localStorage.getItem(z);return null===e||null===t?null:{code:e,description:t,label:"[".concat(e,"]-").concat(t)}}();null!==e&&c({code:e.code,description:e.description,filePath:"",note:"",projectCode:"",versionNumber:E.c.PACK}),j()}),[]),Object(q.jsx)(k.d,{required:!0,label:"C\u1ea5u ki\u1ec7n \u0111i\u1ec3n h\xecnh",options:V(o),optionLabel:"label",value:null!==n?{code:n.code,label:"[".concat(n.code,"]-").concat(n.description),description:n.description}:null,getOptionSelected:function(e,t){return e.code===t.code},onChange:function(e){var t;null!==e&&(c({code:e.code,description:e.description,filePath:"",note:"",projectCode:"",versionNumber:E.c.PACK}),t=e,localStorage.setItem(Y,t.code),localStorage.setItem(z,t.description))}})}var Q=n(626),Z="/api/project-system/elementClusters";var $={getAll:function(e,t){return S.a.get("".concat(Z,"?projectCode=").concat(e,"&version=").concat(t))},create:function(e,t){return S.a.post("".concat(Z,"?projectCode=").concat(e),t)},edit:function(e,t,n,c){return S.a.put("".concat(Z,"?projectCode=").concat(e,"&elementCode=").concat(t,"&clusterCode=").concat(n),c)},remove:function(e,t,n){return S.a.delete("".concat(Z,"?projectCode=").concat(e,"&elementCode=").concat(t,"&clusterCode=").concat(n))},addFromExcel:function(e,t){var n=new FormData;return n.append("files",t,t.name),S.a.post("".concat(Z,"/addFromExcel?projectCode=").concat(e),n,{headers:{"Content-Type":"multipart/form-data"}})}},ee=Object(p.a)({root:{width:"100%",height:"100%"},container:{maxHeight:"calc(100% - 120px)",overflowY:"scroll"}}),te={elementCode:"",clusterCode:"",quantity:""};function ne(){var e=ee(),t=Object(j.b)(),n=a.a.useState(!1),c=Object(u.a)(n,2),r=c[0],s=c[1],p=a.a.useState(!1),w=Object(u.a)(p,2),S=w[0],M=w[1],T=a.a.useState(null),W=Object(u.a)(T,2),N=W[0],I=W[1],D=a.a.useState(null),F=Object(u.a)(D,2),P=F[0],L=F[1],U=a.a.useState([]),R=Object(u.a)(U,2),_=R[0],K=R[1],H=a.a.useState([]),B=Object(u.a)(H,2),G=B[0],X=B[1],Y=a.a.useState([]),z=Object(u.a)(Y,2),V=z[0],Z=z[1],ne=a.a.useState(te),ce=Object(u.a)(ne,2),ae=ce[0],re=ce[1],ie=a.a.useState(!1),oe=Object(u.a)(ie,2),se=oe[0],le=oe[1],de=a.a.useState([]),ue=Object(u.a)(de,2),je=ue[0],pe=ue[1],he=a.a.useState(""),be=Object(u.a)(he,2),me=be[0],xe=be[1],fe=function(){var e=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>=1&&null!==N)){e.next=17;break}return pe([]),t(y.loadingActions.show()),e.prev=3,e.t0=pe,e.next=7,$.addFromExcel(N.code,n[0]);case 7:e.t1=e.sent,(0,e.t0)(e.t1),Ce(),le(!0),e.next=17;break;case 13:e.prev=13,e.t2=e.catch(3),t(y.loadingActions.hide()),t(y.alertActions.show(y.alertMessage.ACTION_FAILURE,"error"));case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===N){e.next=16;break}return t(y.loadingActions.show()),e.prev=2,e.t0=Z,e.next=6,$.getAll(N.code,E.c.PACK);case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=13;break;case 10:e.prev=10,e.t2=e.catch(2),t(y.alertActions.show(y.alertMessage.FETCH_FAILURE,"error"));case 13:return e.prev=13,t(y.loadingActions.hide()),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(d.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===N){e.next=16;break}return t(y.loadingActions.show()),e.prev=2,e.next=5,Promise.all([Q.a.getLeaf(N.code,E.c.POST),$.getAll(N.code,E.c.PACK)]);case 5:n=e.sent,K(n[0]),Z(n[1]),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t(y.alertActions.show(y.alertMessage.FETCH_FAILURE,"error"));case 13:return e.prev=13,t(y.loadingActions.hide()),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),ge=function(e){re(Object(o.a)(Object(o.a)({},ae),{},Object(i.a)({},e.target.name,e.target.value)))},ve=function(){var e=Object(d.a)(l.a.mark((function e(n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===N){e.next=15;break}if(window.prompt("Vui l\xf2ng nh\u1eadp M\xe3 \u0111i\u1ec3n h\xecnh \u0111\u1ec3 x\xe1c nh\u1eadn x\xf3a!")!==c){e.next=15;break}return t(y.loadingActions.show()),e.prev=4,e.next=7,$.remove(N.code,n,c);case 7:Ce(),t(y.alertActions.show(y.alertMessage.ACTION_SUCCESS,"success")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),t(y.alertActions.show(y.alertMessage.ACTION_FAILURE,"error")),t(y.loadingActions.hide());case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,n){return e.apply(this,arguments)}}(),ke=function(){var e=Object(d.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(!1),null===N){e.next=24;break}if(t(y.loadingActions.show()),e.prev=3,!S){e.next=12;break}return n={elementCode:ae.elementCode,clusterCode:ae.clusterCode,quantity:parseFloat(ae.quantity),projectCode:N.code,versionNumber:E.c.PACK},e.next=8,$.edit(N.code,ae.elementCode,ae.clusterCode,n);case 8:t(y.alertActions.show(y.alertMessage.ACTION_SUCCESS,"success")),Oe(),e.next=18;break;case 12:if(null===P){e.next=18;break}return c={elementCode:ae.elementCode,clusterCode:P.code,quantity:parseFloat(ae.quantity),projectCode:N.code,versionNumber:E.c.PACK},e.next=16,$.create(N.code,c);case 16:t(y.alertActions.show(y.alertMessage.ACTION_SUCCESS,"success")),Oe();case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(3),t(y.alertActions.show(y.alertMessage.ACTION_FAILURE,"error")),t(y.loadingActions.hide());case 24:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(){return e.apply(this,arguments)}}();return a.a.useEffect((function(){Ce()}),[N]),a.a.useEffect((function(){X(_.filter((function(e){return me.split("|").every((function(t){return e.description.includes(t)}))})))}),[_,me]),Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(k.k,{open:se,onClose:function(){le(!1)},title:"K\u1ebft qu\u1ea3 t\u1ea1o t\u1eeb file excel",children:Object(q.jsx)(h.a,{container:!0,spacing:1,children:je.map((function(e,t){return Object(q.jsxs)(h.a,{item:!0,container:!0,spacing:1,xs:12,children:[Object(q.jsx)(h.a,{item:!0,xs:12,md:3,style:{color:e.isAdded?"green":"red"},children:Object(q.jsx)(b.a,{variant:"subtitle2",children:"".concat(e.item.elementCode,"-").concat(e.item.clusterCode)})}),!e.isAdded&&Object(q.jsx)(h.a,{item:!0,xs:12,md:9,style:{color:e.isAdded?"green":"red"},children:Object(q.jsx)(b.a,{variant:"caption",children:e.message})})]},t)}))})}),Object(q.jsx)(k.k,{title:"Th\xeam/Ch\u1ec9nh s\u1eeda",open:r,onClose:function(){s(!1)},onSubmit:ke,children:Object(q.jsxs)(h.a,{container:!0,spacing:1,children:[Object(q.jsx)(h.a,{item:!0,xs:12,children:Object(q.jsx)(k.p,{name:"elementCode",label:"M\xe3 WBS",type:"text",required:!0,disabled:!0,value:ae.elementCode,onChange:ge})}),Object(q.jsx)(h.a,{item:!0,xs:12,children:S?Object(q.jsx)(k.p,{name:"clusterCode",label:"M\xe3 \u0111i\u1ec3n h\xecnh",type:"text",required:!0,disabled:!0,value:ae.clusterCode,onChange:ge}):null!==N&&Object(q.jsx)(J,{projectCode:N.code,value:P,onChange:function(e){L(e)}})}),Object(q.jsx)(h.a,{item:!0,xs:12,children:Object(q.jsx)(k.p,{name:"quantity",label:"Ghi ch\xfa",type:"number",required:!0,value:ae.quantity,onChange:ge})})]})}),Object(q.jsxs)(m.a,{className:e.root,children:[Object(q.jsx)(h.a,{container:!0,children:Object(q.jsxs)(h.a,{container:!0,item:!0,xs:12,style:{padding:"8px"},direction:"row",spacing:1,alignItems:"flex-end",children:[Object(q.jsx)(h.a,{item:!0,xs:12,md:6,children:Object(q.jsx)(A.a,{value:N,onChange:function(e){I(e)}})}),Object(q.jsx)(h.a,{item:!0,xs:12,md:6,children:Object(q.jsx)(k.p,{name:"keyWord",label:"L\u1ecdc WBS",type:"text",value:me,onChange:function(e){xe(e.target.value)}})}),null!==N&&Object(q.jsxs)(h.a,{container:!0,spacing:1,item:!0,xs:12,alignItems:"flex-end",children:[Object(q.jsx)(h.a,{item:!0,children:Object(q.jsx)(k.q,{filesLimit:1,title:"T\u1ea3i t\u1ec7p excel",acceptedFiles:[".xls",".xlsx"],onSubmit:fe,tooltip:"T\u1ea1o t\u1eeb file excel",variant:"contained",text:"Excel",color:"primary"})}),Object(q.jsx)(h.a,{item:!0,children:Object(q.jsx)("a",{href:"https://ecobavn.sharepoint.com/:x:/s/bvkt/EUiS3_DwtG5NmqBpGqvV5SIBLFBGAXx7gPwwe1W-FrsnyQ?e=LRthRG",style:{textDecoration:"none"},target:"_blank",rel:"no noreferrer",children:Object(q.jsx)(k.n,{tooltip:"Xem template",variant:"contained",text:"Template",color:"info",icon:"file-excel"})})}),Object(q.jsx)(h.a,{item:!0,children:Object(q.jsx)(k.n,{tooltip:"L\xe0m m\u1edbi",variant:"contained",text:"L\xe0m m\u1edbi",color:"success",icon:"sync-alt",onClick:Ce})})]})]})}),Object(q.jsx)(x.a,{className:e.container,children:Object(q.jsxs)(f.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(q.jsx)(O.a,{children:Object(q.jsxs)(C.a,{children:[Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:"M\xe3 c\u1ea5u ki\u1ec7n"}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"40%"},children:"Di\u1ec5n gi\u1ea3i"}),Object(q.jsx)(g.a,{align:"right",style:{minWidth:"20%"},children:"S\u1ed1 l\u01b0\u1ee3ng"}),Object(q.jsx)(g.a,{})]})}),Object(q.jsx)(v.a,{children:G.map((function(e){return Object(q.jsxs)(a.a.Fragment,{children:[Object(q.jsxs)(C.a,{children:[Object(q.jsx)(g.a,{style:{fontWeight:"bold",borderLeft:"4px solid blue"},children:e.code}),Object(q.jsx)(g.a,{colSpan:2,style:{fontWeight:"bold"},children:e.description}),Object(q.jsx)(g.a,{children:Object(q.jsx)(k.n,{tooltip:"Th\xeam c\u1ea5u ki\u1ec7n",text:"Th\xeam",icon:"plus",color:"primary",onClick:function(){return t=e.code,re({clusterCode:"",elementCode:t,quantity:"0"}),M(!1),void s(!0);var t}})})]}),V.filter((function(t){return t.elementCode===e.code})).map((function(e){return Object(q.jsxs)(C.a,{children:[Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%",paddingLeft:"32px",borderLeft:"4px solid yellow"},children:e.clusterCode}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"40%",paddingLeft:"32px"},children:e.clusterDescription}),Object(q.jsx)(g.a,{align:"right",style:{minWidth:"20%"},children:e.quantity}),Object(q.jsxs)(g.a,{children:[Object(q.jsx)(k.n,{tooltip:"Ch\u1ec9nh s\u1eeda",text:"S\u1eeda",icon:"edit",color:"success",onClick:function(){!function(e){re({elementCode:e.elementCode,clusterCode:e.clusterCode,quantity:e.quantity.toString()}),M(!0),s(!0)}(e)}}),Object(q.jsx)(k.n,{tooltip:"X\xf3a Mapping",text:"X\xf3a",icon:"trash-alt",color:"danger",onClick:function(){ve(e.elementCode,e.clusterCode)}})]})]},e.clusterCode)}))]},e.code)}))})]})})]})]})}var ce=n(687),ae=n(627),re=Object(p.a)({root:{width:"100%",height:"100%"},container:{maxHeight:"calc(100% - 120px)",overflowY:"scroll"}}),ie={serviceMasterCode:"",clusterCode:"",quantity:""};function oe(){var e=re(),t=Object(j.b)(),n=a.a.useState(!1),c=Object(u.a)(n,2),r=c[0],s=c[1],p=a.a.useState(!1),w=Object(u.a)(p,2),S=w[0],M=w[1],W=a.a.useState(null),N=Object(u.a)(W,2),I=N[0],D=N[1],F=a.a.useState(null),P=Object(u.a)(F,2),L=P[0],U=P[1],R=a.a.useState([]),_=Object(u.a)(R,2),K=_[0],H=_[1],B=a.a.useState([]),G=Object(u.a)(B,2),X=G[0],Y=G[1],z=a.a.useState(ie),V=Object(u.a)(z,2),J=V[0],Q=V[1],Z=a.a.useState(!1),$=Object(u.a)(Z,2),ee=$[0],te=$[1],ne=a.a.useState([]),oe=Object(u.a)(ne,2),se=oe[0],le=oe[1],de=a.a.useState(""),ue=Object(u.a)(de,2),je=ue[0],pe=ue[1],he=function(){var e=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>=1&&null!==I)){e.next=17;break}return le([]),t(y.loadingActions.show()),e.prev=3,e.t0=le,e.next=7,ae.a.addFromExcel(I.code,n[0]);case 7:e.t1=e.sent,(0,e.t0)(e.t1),me(),te(!0),e.next=17;break;case 13:e.prev=13,e.t2=e.catch(3),t(y.loadingActions.hide()),t(y.alertActions.show(y.alertMessage.ACTION_FAILURE,"error"));case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===I){e.next=16;break}return t(y.loadingActions.show()),e.prev=2,e.t0=Y,e.next=6,ae.a.getAll(I.code,E.c.PACK);case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=13;break;case 10:e.prev=10,e.t2=e.catch(2),t(y.alertActions.show(y.alertMessage.FETCH_FAILURE,"error"));case 13:return e.prev=13,t(y.loadingActions.hide()),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(d.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===I){e.next=16;break}return t(y.loadingActions.show()),e.prev=2,e.next=5,Promise.all([T.getAll(I.code,E.c.PACK),ae.a.getAll(I.code,E.c.PACK)]);case 5:n=e.sent,H(n[0]),Y(n[1]),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t(y.alertActions.show(y.alertMessage.FETCH_FAILURE,"error"));case 13:return e.prev=13,t(y.loadingActions.hide()),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),xe=function(e){Q(Object(o.a)(Object(o.a)({},J),{},Object(i.a)({},e.target.name,e.target.value)))},fe=function(){var e=Object(d.a)(l.a.mark((function e(n,c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===I){e.next=15;break}if(window.prompt("Vui l\xf2ng nh\u1eadp M\xe3 c\xf4ng t\xe1c \u0111\u1ec3 x\xe1c nh\u1eadn x\xf3a!")!==c){e.next=15;break}return t(y.loadingActions.show()),e.prev=4,e.next=7,ae.a.remove(I.code,c,n);case 7:me(),t(y.alertActions.show(y.alertMessage.ACTION_SUCCESS,"success")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),t(y.alertActions.show(y.alertMessage.ACTION_FAILURE,"error")),t(y.loadingActions.hide());case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,n){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(d.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(!1),null===I){e.next=24;break}if(t(y.loadingActions.show()),e.prev=3,!S){e.next=12;break}return n={serviceMasterCode:J.serviceMasterCode,clusterCode:J.clusterCode,quantity:parseFloat(J.quantity),projectCode:I.code,versionNumber:E.c.PACK},e.next=8,ae.a.edit(I.code,J.serviceMasterCode,J.clusterCode,n);case 8:t(y.alertActions.show(y.alertMessage.ACTION_SUCCESS,"success")),be(),e.next=18;break;case 12:if(null===L){e.next=18;break}return c={serviceMasterCode:L.code,clusterCode:J.clusterCode,quantity:parseFloat(J.quantity),projectCode:I.code,versionNumber:E.c.PACK},e.next=16,ae.a.create(I.code,c);case 16:t(y.alertActions.show(y.alertMessage.ACTION_SUCCESS,"success")),be();case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(3),t(y.alertActions.show(y.alertMessage.ACTION_FAILURE,"error")),t(y.loadingActions.hide());case 24:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(){return e.apply(this,arguments)}}();return a.a.useEffect((function(){me()}),[I]),Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(k.k,{open:ee,onClose:function(){te(!1)},title:"K\u1ebft qu\u1ea3 t\u1ea1o t\u1eeb file excel",children:Object(q.jsx)(h.a,{container:!0,spacing:1,children:se.map((function(e,t){return Object(q.jsxs)(h.a,{item:!0,container:!0,spacing:1,xs:12,children:[Object(q.jsx)(h.a,{item:!0,xs:12,md:3,style:{color:e.isAdded?"green":"red"},children:Object(q.jsx)(b.a,{variant:"subtitle2",children:"".concat(e.item.serviceMasterCode,"-").concat(e.item.clusterCode)})}),!e.isAdded&&Object(q.jsx)(h.a,{item:!0,xs:12,md:9,style:{color:e.isAdded?"green":"red"},children:Object(q.jsx)(b.a,{variant:"caption",children:e.message})})]},t)}))})}),Object(q.jsx)(k.k,{title:"Th\xeam/Ch\u1ec9nh s\u1eeda",open:r,onClose:function(){s(!1)},onSubmit:Oe,children:Object(q.jsxs)(h.a,{container:!0,spacing:1,children:[Object(q.jsx)(h.a,{item:!0,xs:12,children:S?Object(q.jsx)(k.p,{name:"serviceMasterCode",label:"M\xe3 WBS",type:"text",required:!0,disabled:!0,value:J.serviceMasterCode,onChange:xe}):Object(q.jsx)(ce.a,{value:L,onChange:function(e){U(e)}})}),Object(q.jsx)(h.a,{item:!0,xs:12,children:Object(q.jsx)(k.p,{name:"clusterCode",label:"M\xe3 \u0111i\u1ec3n h\xecnh",type:"text",required:!0,disabled:!0,value:J.clusterCode,onChange:xe})}),Object(q.jsx)(h.a,{item:!0,xs:12,children:Object(q.jsx)(k.p,{name:"quantity",label:"Ghi ch\xfa",type:"number",required:!0,value:J.quantity,onChange:xe})})]})}),Object(q.jsxs)(m.a,{className:e.root,children:[Object(q.jsx)(h.a,{container:!0,children:Object(q.jsxs)(h.a,{container:!0,item:!0,xs:12,style:{padding:"8px"},direction:"row",spacing:1,alignItems:"flex-end",children:[Object(q.jsx)(h.a,{item:!0,xs:12,md:6,children:Object(q.jsx)(A.a,{value:I,onChange:function(e){D(e)}})}),Object(q.jsx)(h.a,{item:!0,xs:12,md:6,children:Object(q.jsx)(k.p,{name:"keyWord",label:"L\u1ecdc theo c\u1ea5u ki\u1ec7n",type:"text",value:je,onChange:function(e){pe(e.target.value)}})}),null!==I&&Object(q.jsxs)(h.a,{container:!0,spacing:1,item:!0,xs:12,alignItems:"flex-end",children:[Object(q.jsx)(h.a,{item:!0,children:Object(q.jsx)(k.q,{filesLimit:1,title:"T\u1ea3i t\u1ec7p excel",acceptedFiles:[".xls",".xlsx"],onSubmit:he,tooltip:"T\u1ea1o t\u1eeb file excel",variant:"contained",text:"Excel",color:"primary"})}),Object(q.jsx)(h.a,{item:!0,children:Object(q.jsx)("a",{href:"https://ecobavn.sharepoint.com/:x:/s/bvkt/EY8jHOvq4hRMmkxr7YI2ecMBgGCtGjdQxXLS0DQ5q1QZNg?e=qZW5Fr",style:{textDecoration:"none"},target:"_blank",rel:"no noreferrer",children:Object(q.jsx)(k.n,{tooltip:"Xem template",variant:"contained",text:"Template",color:"info",icon:"file-excel"})})}),Object(q.jsx)(h.a,{item:!0,children:Object(q.jsx)(k.n,{tooltip:"L\xe0m m\u1edbi",variant:"contained",text:"L\xe0m m\u1edbi",color:"success",icon:"sync-alt",onClick:me})})]})]})}),Object(q.jsx)(x.a,{className:e.container,children:Object(q.jsxs)(f.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(q.jsx)(O.a,{children:Object(q.jsxs)(C.a,{children:[Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%"},children:"M\xe3 c\xf4ng t\xe1c"}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"40%"},children:"Di\u1ec5n gi\u1ea3i"}),Object(q.jsx)(g.a,{align:"center",style:{minWidth:"20%"},children:"\u0110\u01a1n v\u1ecb"}),Object(q.jsx)(g.a,{align:"right",style:{minWidth:"20%"},children:"S\u1ed1 l\u01b0\u1ee3ng"}),Object(q.jsx)(g.a,{})]})}),Object(q.jsx)(v.a,{children:K.filter((function(e){return void 0!==je.split("|").find((function(t){return e.code.includes(t)||e.description.includes(t)}))})).map((function(e){return Object(q.jsxs)(a.a.Fragment,{children:[Object(q.jsxs)(C.a,{children:[Object(q.jsx)(g.a,{style:{fontWeight:"bold",borderLeft:"4px solid blue"},children:e.code}),Object(q.jsx)(g.a,{colSpan:3,style:{fontWeight:"bold"},children:e.description}),Object(q.jsx)(g.a,{children:Object(q.jsx)(k.n,{tooltip:"Th\xeam c\xf4ng t\xe1c",text:"Th\xeam",icon:"plus",color:"primary",onClick:function(){return t=e.code,Q({serviceMasterCode:"",clusterCode:t,quantity:"0"}),M(!1),void s(!0);var t}})})]}),X.filter((function(t){return t.clusterCode===e.code})).map((function(e){return Object(q.jsxs)(C.a,{children:[Object(q.jsx)(g.a,{align:"left",style:{minWidth:"20%",paddingLeft:"32px",borderLeft:"4px solid yellow"},children:e.serviceMasterCode}),Object(q.jsx)(g.a,{align:"left",style:{minWidth:"40%",paddingLeft:"32px"},children:e.serviceMasterDescription}),Object(q.jsx)(g.a,{align:"center",style:{minWidth:"20%"},children:e.serviceMasterUnit}),Object(q.jsx)(g.a,{align:"right",style:{minWidth:"20%"},children:e.quantity}),Object(q.jsxs)(g.a,{children:[Object(q.jsx)(k.n,{tooltip:"Ch\u1ec9nh s\u1eeda",text:"S\u1eeda",icon:"edit",color:"success",onClick:function(){!function(e){Q({serviceMasterCode:e.serviceMasterCode,clusterCode:e.clusterCode,quantity:e.quantity.toString()}),M(!0),s(!0)}(e)}}),Object(q.jsx)(k.n,{tooltip:"X\xf3a C\xf4ng t\xe1c",text:"X\xf3a",icon:"trash-alt",color:"danger",onClick:function(){fe(e.clusterCode,e.serviceMasterCode)}})]})]},e.serviceMasterCode)}))]},e.code)}))})]})})]})]})}function se(){var e=Object(r.i)().path;return Object(q.jsxs)(r.c,{children:[Object(q.jsx)(r.a,{path:"".concat(e,"/clusters"),component:I}),Object(q.jsx)(r.a,{path:"".concat(e,"/element-clusters"),component:ne}),Object(q.jsx)(r.a,{path:"".concat(e,"/items"),component:oe}),Object(q.jsx)(r.a,{path:"".concat(e,"/commits"),component:X})]})}}}]);