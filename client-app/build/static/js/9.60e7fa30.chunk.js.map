{"version":3,"sources":["configs/format.ts","plugins/ProjectSystem/services/common.ts","plugins/ProjectSystem/services/project.ts","plugins/ProjectSystem/components/ProjectsComboBox.tsx","plugins/ProjectSystem/common/commitHelper.ts","plugins/ProjectSystem/services/commit.ts","plugins/ProjectSystem/services/element.ts","plugins/ProjectSystem/services/version.ts","plugins/ProjectSystem/services/item.ts","plugins/ProjectSystem/services/cluster.ts","plugins/ProjectSystem/pages/Clusters.tsx","plugins/ProjectSystem/components/ClustersChangeTable.tsx","plugins/ProjectSystem/components/ElementClustersChangeTable.tsx","plugins/ProjectSystem/components/ItemsChangeTable.tsx","plugins/ProjectSystem/pages/DesignerCommits.tsx","plugins/ProjectSystem/pages/DesignerVersions.tsx","plugins/ProjectSystem/components/ClustersComboBox.tsx","plugins/ProjectSystem/services/elementCluster.ts","plugins/ProjectSystem/pages/ElementClusters.tsx","plugins/ProjectSystem/components/ServiceMastersComboBox.tsx","plugins/ProjectSystem/pages/Items.tsx","plugins/ProjectSystem/pages/VersionClusters.tsx","plugins/ProjectSystem/routes/DesignerRoutes.tsx"],"names":["format","formatDate","date","formatString","result","symbol","value","getDate","getMonth","getFullYear","getHours","getMinutes","map","f","replace","formatMoney","frac","numberFormat","Intl","NumberFormat","maximumFractionDigits","minimumFractionDigits","changeStatusEnum","CREATE","UPDATE","DELETE","versionNumberEnum","PACK","POST","branchEnum","PLANNER","DESIGNER","ESTIMATOR","SUPERVISOR","apiUrl","service","getAll","axios","get","projectCode","PROJECT_CODE_KEY","PROJECT_NAME_KEY","renderComboBoxOptions","projects","x","label","code","name","ProjectsComboBox","onChange","React","useState","setProjects","getProjects","a","projectService","useEffect","cacheProject","localStorage","getItem","getCache","required","options","optionLabel","getOptionSelected","o","v","project","setItem","setCache","getCommitterElements","data","e","pack","post","commitNumber","description","finish","level","start","status","Date","getCommitterClusters","note","filePath","getCommitterElementClusters","elementCode","clusterCode","quantity","getCommitterItems","serviceMasterCode","billCode","getCommitterResources","materialCode","getCommitterConfirmations","postingDate","getPlannerCommitData","elements","getDesignerCommitData","clusters","elementClusters","items","getEstimatorCommitData","resources","getSupervisorCommitData","confirmations","plannerTrackingChange","designerTrackingChange","estimatorTrackingChange","supervisorTrackingChange","plannerCommit","designerCommit","estimatorCommit","supervisorCommit","version","getDetail","getLeaf","remove","elementCodes","addFromExcel","file","formData","FormData","append","headers","branch","createPlannerVersion","createDesignerVersion","getCollective","getDistinct","create","model","edit","put","models","getSimple","clusterCodes","useStyles","makeStyles","root","width","height","container","maxHeight","overflowY","cell","fontSize","initialState","versionNumber","Clusters","classes","dispatch","useDispatch","showForm","setShowForm","isEdit","setIsEdit","selectedProject","setSelectedProject","setClusters","item","displayClusters","setDisplayClusters","selectedList","setSelectedList","showAddExcelResult","setShowAddExcelResult","addExcelResult","setAddExcelResult","keyWord","setKeyWord","showConfirmDelete","setShowConfirmDelete","handleSubmitDelete","loadingActions","show","clusterService","handleRefresh","alertActions","alertMessage","ACTION_SUCCESS","ACTION_FAILURE","hide","handleSubmitUploadForm","files","length","handleChange","event","target","handleSubmit","handleSelect","includes","filter","FETCH_FAILURE","split","every","k","open","onClose","onSubmit","title","Grid","spacing","xs","Typography","variant","s","index","md","style","color","isAdded","message","type","Paper","className","padding","direction","alignItems","tooltip","text","icon","onClick","filesLimit","acceptedFiles","filename","url","disabled","TableContainer","Table","stickyHeader","aria-label","size","TableHead","TableRow","TableCell","align","TableBody","cluster","backgroundColor","colors","red","teal","cursor","handleOpenEditForm","href","textDecoration","rel","elementCount","itemCount","getRowColor","green","amber","ClustersChangeTable","ElementClustersChangeTable","elementDescription","clusterDescription","ItemsChangeTable","serviceMasterDescription","serviceMasterUnit","DesignerCommits","setProject","setModel","commitDescription","setCommitDescription","tab","setTab","isApprover","setIsApprover","header","createdBy","createdByFullName","createdTime","number","detail","commitService","checkIsApprover","userService","checkRolePermission","DesignerVersions","versions","setVersions","setDescription","createdDate","versionService","CLUSTER_CODE_KEY","CLUSTER_DESCRIPTION_KEY","ServiceMastersComboBox","setData","getData","cache","isInclude","undefined","find","ElementClusters","setCluster","setElements","displayElements","setDisplayElements","setElementClusters","elementClusterService","fetchElementClusters","Promise","all","elementService","parseFloat","element","Fragment","fontWeight","colSpan","paddingLeft","toString","fontStyle","SERVICE_MASTER_CODE_KEY","SERVICE_MASTER_DESCRIPTION_KEY","SERVICE_MASTER_UNIT_KEY","serviceMasters","serviceMasterService","unit","serviceMaster","Items","setServiceMaster","setItems","itemService","fetchItems","useParams","DesignerRoutes","path","useRouteMatch","component","VersionClusters"],"mappings":"8FAuCA,IAAMA,EAAS,CACbC,WAxCF,SAAoBC,GAAkD,IAAtCC,EAAqC,uDAAtB,aACzCC,EAASD,EAEPH,EAAS,CACb,CACEK,OAAQ,KACRC,MAAOJ,EAAKK,UAAY,GAAjB,WAA0BL,EAAKK,WAAcL,EAAKK,WAE3D,CACEF,OAAQ,KACRC,MAAOJ,EAAKM,WAAa,EAAI,GAAtB,WAA+BN,EAAKM,WAAa,GAAjD,UAA0DN,EAAKM,WAAa,IAErF,CACEH,OAAQ,OACRC,MAAOJ,EAAKO,eAEd,CACEJ,OAAQ,KACRC,MAAOJ,EAAKQ,WAAa,GAAlB,WAA2BR,EAAKQ,YAAeR,EAAKQ,YAE7D,CACEL,OAAQ,KACRC,MAAOJ,EAAKS,aAAe,GAApB,WAA6BT,EAAKS,cAAiBT,EAAKS,eASnE,OALAX,EAAOY,KAAI,SAACC,GAEV,OADAT,EAASA,EAAOU,QAAQD,EAAER,OAAQQ,EAAEP,OAC7BO,EAAER,UAGJD,GAUPW,YAPF,SAAqBT,GAAkC,IAAnBU,EAAkB,uDAAX,EACnCC,EAAe,IAAIC,KAAKC,aAAa,QAAS,CAAEC,sBAAuBJ,EAAMK,sBAAuBL,IAC1G,OAAOC,EAAajB,OAAOM,KAQdN,O,iCC5Cf,sGAAO,IAAMsB,EAAmB,CAC9BC,OAAQ,EACRC,OAAQ,EACRC,OAAQ,GAGGC,EAAoB,CAC/BC,MAAO,EACPC,KAAM,GAGKC,EAAa,CACxBC,QAAS,EACTC,SAAU,EACVC,UAAW,EACXC,WAAY,I,wJCbRC,EAAS,+BAef,IAKeC,EALC,CACdC,OATF,WACE,OAAOC,IAAMC,IAAIJ,IASjBI,IANF,SAAaC,GACX,OAAOF,IAAMC,IAAN,UAAaJ,EAAb,YAAuBK,M,OCK1BC,EAAmB,mBACnBC,EAAmB,mBAEnBC,EAAwB,SAACC,GAC7B,OAAOA,EAAS/B,KAAI,SAAAgC,GAMlB,OAL0B,2BACrBA,GADqB,IAExBC,MAAM,IAAD,OAAMD,EAAEE,KAAR,aAAiBF,EAAEG,YA2Bf,SAASC,EAAT,GAGS,IAFtB1C,EAEqB,EAFrBA,MACA2C,EACqB,EADrBA,SAGA,EAAgCC,IAAMC,SAAyB,IAA/D,mBAAOR,EAAP,KAAiBS,EAAjB,KAEMC,EAAW,uCAAG,sBAAAC,EAAA,2EAEhBF,EAFgB,SAEEG,EAAenB,SAFjB,kFAKhBgB,EAAY,IALI,yDAAH,qDAgCjB,OAbAF,IAAMM,WAAU,WACd,IAAMC,EA/CO,WACf,IAAMX,EAAOY,aAAaC,QAAQnB,GAC5BO,EAAOW,aAAaC,QAAQlB,GAClC,OAAa,OAATK,GAA0B,OAATC,EACZ,KAGA,CACLD,KAAMA,EACNC,KAAMA,EACNF,MAAM,IAAD,OAAMC,EAAN,aAAeC,IAqCDa,GACA,OAAjBH,GACFR,EAAS,CACPH,KAAMW,EAAaX,KACnBC,KAAMU,EAAaV,OAGvBM,MAGC,IAGD,cAAC,IAAD,CACEQ,UAAQ,EACRhB,MAAM,gBACNiB,QAASpB,EAAsBC,GAC/BoB,YAAY,QACZzD,MAAiB,OAAVA,EAAiB,CAAEwC,KAAMxC,EAAMwC,KAAMC,KAAMzC,EAAMyC,KAAMF,MAAM,IAAD,OAAMvC,EAAMwC,KAAZ,aAAqBxC,EAAMyC,OAAY,KAC1GiB,kBAAmB,SAACC,EAAGC,GAAJ,OAAUD,EAAEnB,OAASoB,EAAEpB,MAC1CG,SA/BwB,SAAC3C,GACb,OAAVA,IACF2C,EAAS,CACPH,KAAMxC,EAAMwC,KACZC,KAAMzC,EAAMyC,OAzBH,SAACoB,GAChBT,aAAaU,QAAQ5B,EAAkB2B,EAAQrB,MAC/CY,aAAaU,QAAQ3B,EAAkB0B,EAAQpB,MAyB3CsB,CAAS/D,S,iCC3Ef,qJA8CMgE,EAAuB,SAACC,GAC5B,OAAOA,EAAK3D,KAAI,SAAA4D,GACd,OAAe,OAAXA,EAAEC,MAA4B,OAAXD,EAAEE,KAChB,CACL5B,KAAM0B,EAAEE,KAAK5B,KACb6B,aAAc,EACdC,YAAaJ,EAAEE,KAAKE,YACpBC,OAAQL,EAAEE,KAAKG,OACfC,MAAON,EAAEE,KAAKI,MACdvC,YAAaiC,EAAEE,KAAKnC,YACpBwC,MAAOP,EAAEE,KAAKK,MACdC,OAAQ1D,IAAiBG,QAGd,OAAX+C,EAAEC,MAA4B,OAAXD,EAAEE,KAChB,CACL5B,KAAM0B,EAAEC,KAAK3B,KACb6B,aAAc,EACdC,YAAaJ,EAAEC,KAAKG,YACpBC,OAAQL,EAAEC,KAAKI,OACfC,MAAON,EAAEC,KAAKK,MACdvC,YAAaiC,EAAEC,KAAKlC,YACpBwC,MAAOP,EAAEC,KAAKM,MACdC,OAAQ1D,IAAiBC,QAGd,OAAXiD,EAAEC,MAA4B,OAAXD,EAAEE,KAChB,CACL5B,KAAM0B,EAAEC,KAAK3B,KACb6B,aAAc,EACdC,YAAaJ,EAAEC,KAAKG,YACpBC,OAAQL,EAAEC,KAAKI,OACfC,MAAON,EAAEC,KAAKK,MACdvC,YAAaiC,EAAEC,KAAKlC,YACpBwC,MAAOP,EAAEC,KAAKM,MACdC,OAAQ1D,IAAiBE,QAGtB,CACLsB,KAAM,GACN6B,aAAc,EACdC,YAAa,GACbC,OAAQ,IAAII,KACZH,MAAO,EACPvC,YAAa,GACbwC,MAAO,IAAIE,KACXD,OAAQ1D,IAAiBE,YAKzB0D,EAAuB,SAACX,GAC5B,OAAOA,EAAK3D,KAAI,SAAA4D,GACd,OAAe,OAAXA,EAAEC,MAA4B,OAAXD,EAAEE,KAChB,CACL5B,KAAM0B,EAAEE,KAAK5B,KACb6B,aAAc,EACdC,YAAaJ,EAAEE,KAAKE,YACpBrC,YAAaiC,EAAEE,KAAKnC,YACpB4C,KAAMX,EAAEE,KAAKS,KACbC,SAAUZ,EAAEE,KAAKU,SACjBJ,OAAQ1D,IAAiBG,QAGd,OAAX+C,EAAEC,MAA4B,OAAXD,EAAEE,KAChB,CACL5B,KAAM0B,EAAEC,KAAK3B,KACb6B,aAAc,EACdC,YAAaJ,EAAEC,KAAKG,YACpBrC,YAAaiC,EAAEC,KAAKlC,YACpB4C,KAAMX,EAAEC,KAAKU,KACbC,SAAUZ,EAAEC,KAAKW,SACjBJ,OAAQ1D,IAAiBC,QAGd,OAAXiD,EAAEC,MAA4B,OAAXD,EAAEE,KAChB,CACL5B,KAAM0B,EAAEC,KAAK3B,KACb6B,aAAc,EACdC,YAAaJ,EAAEC,KAAKG,YACpBrC,YAAaiC,EAAEC,KAAKlC,YACpB4C,KAAMX,EAAEC,KAAKU,KACbC,SAAUZ,EAAEC,KAAKW,SACjBJ,OAAQ1D,IAAiBE,QAGtB,CACLsB,KAAM,GACN6B,aAAc,EACdC,YAAa,GACbrC,YAAa,GACb4C,KAAM,GACNC,SAAU,GACVJ,OAAQ1D,IAAiBE,YAKzB6D,EAA8B,SAACd,GACnC,OAAOA,EAAK3D,KAAI,SAAA4D,GACd,OAAe,OAAXA,EAAEC,MAA4B,OAAXD,EAAEE,KAChB,CACLY,YAAad,EAAEE,KAAKY,YACpBC,YAAaf,EAAEE,KAAKa,YACpBC,SAAUhB,EAAEE,KAAKc,SACjBb,aAAc,EACdpC,YAAaiC,EAAEE,KAAKnC,YACpByC,OAAQ1D,IAAiBG,QAGd,OAAX+C,EAAEC,MAA4B,OAAXD,EAAEE,KAChB,CACLY,YAAad,EAAEC,KAAKa,YACpBC,YAAaf,EAAEC,KAAKc,YACpBC,SAAUhB,EAAEC,KAAKe,SACjBb,aAAc,EACdpC,YAAaiC,EAAEC,KAAKlC,YACpByC,OAAQ1D,IAAiBC,QAGd,OAAXiD,EAAEC,MAA4B,OAAXD,EAAEE,KAChB,CACLY,YAAad,EAAEC,KAAKa,YACpBC,YAAaf,EAAEC,KAAKc,YACpBC,SAAUhB,EAAEC,KAAKe,SACjBb,aAAc,EACdpC,YAAaiC,EAAEC,KAAKlC,YACpByC,OAAQ1D,IAAiBE,QAGtB,CACL8D,YAAa,GACbC,YAAa,GACbC,SAAU,EACVb,aAAc,EACdpC,YAAa,GACbyC,OAAQ1D,IAAiBE,YAKzBiE,EAAoB,SAAClB,GACzB,OAAOA,EAAK3D,KAAI,SAAA4D,GACd,OAAe,OAAXA,EAAEC,MAA4B,OAAXD,EAAEE,KAChB,CACLgB,kBAAmBlB,EAAEE,KAAKgB,kBAC1BH,YAAaf,EAAEE,KAAKa,YACpBI,SAAUnB,EAAEE,KAAKiB,SACjBH,SAAUhB,EAAEE,KAAKc,SACjBb,aAAc,EACdpC,YAAaiC,EAAEE,KAAKnC,YACpByC,OAAQ1D,IAAiBG,QAGd,OAAX+C,EAAEC,MAA4B,OAAXD,EAAEE,KAChB,CACLgB,kBAAmBlB,EAAEC,KAAKiB,kBAC1BH,YAAaf,EAAEC,KAAKc,YACpBI,SAAUnB,EAAEC,KAAKkB,SACjBH,SAAUhB,EAAEC,KAAKe,SACjBb,aAAc,EACdpC,YAAaiC,EAAEC,KAAKlC,YACpByC,OAAQ1D,IAAiBC,QAGd,OAAXiD,EAAEC,MAA4B,OAAXD,EAAEE,KAChB,CACLgB,kBAAmBlB,EAAEC,KAAKiB,kBAC1BH,YAAaf,EAAEC,KAAKc,YACpBI,SAAUnB,EAAEC,KAAKkB,SACjBH,SAAUhB,EAAEC,KAAKe,SACjBb,aAAc,EACdpC,YAAaiC,EAAEC,KAAKlC,YACpByC,OAAQ1D,IAAiBE,QAGtB,CACLkE,kBAAmB,GACnBH,YAAa,GACbI,SAAU,GACVH,SAAU,EACVb,aAAc,EACdpC,YAAa,GACbyC,OAAQ1D,IAAiBE,YAKzBoE,EAAwB,SAACrB,GAC7B,OAAOA,EAAK3D,KAAI,SAAA4D,GACd,OAAe,OAAXA,EAAEC,MAA4B,OAAXD,EAAEE,KAChB,CACLgB,kBAAmBlB,EAAEE,KAAKgB,kBAC1BG,aAAcrB,EAAEE,KAAKmB,aACrBL,SAAUhB,EAAEE,KAAKc,SACjBb,aAAc,EACdpC,YAAaiC,EAAEE,KAAKnC,YACpByC,OAAQ1D,IAAiBG,QAGd,OAAX+C,EAAEC,MAA4B,OAAXD,EAAEE,KAChB,CACLgB,kBAAmBlB,EAAEC,KAAKiB,kBAC1BG,aAAcrB,EAAEC,KAAKoB,aACrBL,SAAUhB,EAAEC,KAAKe,SACjBb,aAAc,EACdpC,YAAaiC,EAAEC,KAAKlC,YACpByC,OAAQ1D,IAAiBC,QAGd,OAAXiD,EAAEC,MAA4B,OAAXD,EAAEE,KAChB,CACLgB,kBAAmBlB,EAAEC,KAAKiB,kBAC1BG,aAAcrB,EAAEC,KAAKoB,aACrBL,SAAUhB,EAAEC,KAAKe,SACjBb,aAAc,EACdpC,YAAaiC,EAAEC,KAAKlC,YACpByC,OAAQ1D,IAAiBE,QAGtB,CACLkE,kBAAmB,GACnBG,aAAc,GACdL,SAAU,EACVb,aAAc,EACdpC,YAAa,GACbyC,OAAQ1D,IAAiBE,YAKzBsE,EAA4B,SAACvB,GACjC,OAAOA,EAAK3D,KAAI,SAAA4D,GACd,OAAe,OAAXA,EAAEC,MAA4B,OAAXD,EAAEE,KAChB,CACLY,YAAad,EAAEE,KAAKY,YACpBS,YAAavB,EAAEE,KAAKqB,YACpBpB,aAAc,EACdpC,YAAaiC,EAAEE,KAAKnC,YACpByC,OAAQ1D,IAAiBG,QAGd,OAAX+C,EAAEC,MAA4B,OAAXD,EAAEE,KAChB,CACLY,YAAad,EAAEC,KAAKa,YACpBS,YAAavB,EAAEC,KAAKsB,YACpBpB,aAAc,EACdpC,YAAaiC,EAAEC,KAAKlC,YACpByC,OAAQ1D,IAAiBC,QAGd,OAAXiD,EAAEC,MAA4B,OAAXD,EAAEE,KAChB,CACLY,YAAad,EAAEC,KAAKa,YACpBS,YAAavB,EAAEC,KAAKsB,YACpBpB,aAAc,EACdpC,YAAaiC,EAAEC,KAAKlC,YACpByC,OAAQ1D,IAAiBE,QAGtB,CACL8D,YAAa,GACbS,YAAa,IAAId,KACjBN,aAAc,EACdpC,YAAa,GACbyC,OAAQ1D,IAAiBE,YAKlBwE,EAAuB,SAACzB,GACnC,MAAO,CACL0B,SAAU3B,EAAqBC,EAAK0B,YAI3BC,EAAwB,SAAC3B,GACpC,MAAO,CACL4B,SAAUjB,EAAqBX,EAAK4B,UACpCC,gBAAiBf,EAA4Bd,EAAK6B,iBAClDC,MAAOZ,EAAkBlB,EAAK8B,SAIrBC,EAAyB,SAAC/B,GACrC,MAAO,CACLgC,UAAWX,EAAsBrB,EAAKgC,aAI7BC,EAA0B,SAACjC,GACtC,MAAO,CACLkC,cAAeX,EAA0BvB,EAAKkC,kB,iCClVlD,oBAmCMvE,EAAS,8BAqFf,IAAMC,EAAU,CACduE,sBAjCF,SAA+BnE,GAC7B,OAAOF,IAAMC,IAAN,UAAaJ,EAAb,gDAA2DK,KAiClEoE,uBA9BF,SAAgCpE,GAC9B,OAAOF,IAAMC,IAAN,UAAaJ,EAAb,iDAA4DK,KA8BnEqE,wBA3BF,SAAiCrE,GAC/B,OAAOF,IAAMC,IAAN,UAAaJ,EAAb,kDAA6DK,KA2BpEsE,yBAxBF,SAAkCtE,GAChC,OAAOF,IAAMC,IAAN,UAAaJ,EAAb,mDAA8DK,KAwBrEuE,cArBF,SAAuBvE,EAAqBgC,GAC1C,OAAOlC,IAAMqC,KAAN,UAAcxC,EAAd,uCAAmDK,GAAegC,IAqBzEwC,eAlBF,SAAwBxE,EAAqBgC,GAC3C,OAAOlC,IAAMqC,KAAN,UAAcxC,EAAd,wCAAoDK,GAAegC,IAkB1EyC,gBAfF,SAAyBzE,EAAqBgC,GAC5C,OAAOlC,IAAMqC,KAAN,UAAcxC,EAAd,yCAAqDK,GAAegC,IAe3E0C,iBAZF,SAA0B1E,EAAqBgC,GAC7C,OAAOlC,IAAMqC,KAAN,UAAcxC,EAAd,0CAAsDK,GAAegC,KAc/DpC,O,iCCnIf,oBAMMD,EAAS,+BAmEf,IAAMC,EAAU,CACdC,OAjCF,SAAgBG,EAAqB2E,GACnC,OAAO7E,IAAMC,IAAN,UAAaJ,EAAb,wBAAmCK,EAAnC,oBAA0D2E,KAiCjEC,UA9BF,SAAmB5E,EAAqB2E,GAA+D,IAA9C5B,EAA6C,uDAA/B,GACrE,MAAuB,KAAhBA,EAAqBjD,IAAMC,IAAN,UAAaJ,EAAb,mCAA8CK,EAA9C,oBAAqE2E,IAC/F7E,IAAMC,IAAN,UAAaJ,EAAb,mCAA8CK,EAA9C,oBAAqE2E,EAArE,wBAA4F5B,KA6B9F8B,QA1BF,SAAiB7E,EAAqB2E,GACpC,OAAO7E,IAAMC,IAAN,UAAaJ,EAAb,iCAA4CK,EAA5C,oBAAmE2E,KA0B1EG,OAvBF,SAAgB9E,EAAqB+E,GACnC,OAAOjF,IAAMqC,KAAN,UAAcxC,EAAd,+BAA2CK,GAAe+E,IAuBjEC,aApBF,SAAsBhF,EAAqBiF,GACzC,IAAMC,EAAW,IAAIC,SAGrB,OAFAD,EAASE,OAAO,QAASH,EAAMA,EAAKzE,MAE7BV,IAAMqC,KAAN,UACFxC,EADE,qCACiCK,GACtCkF,EACA,CACEG,QAAS,CACP,eAAgB,2BAcTzF,O,iCCjFf,oBAEMD,EAAS,+BAwBf,IAAMC,EAAU,CACdC,OAbF,SAAgBG,EAAqBsF,GACnC,OAAOxF,IAAMC,IAAN,UAAaJ,EAAb,wBAAmCK,EAAnC,mBAAyDsF,KAahEC,qBAVF,SAA8BvF,EAAqBgC,GACjD,OAAOlC,IAAMqC,KAAN,UAAcxC,EAAd,+CAA2DK,GAAegC,IAUjFwD,sBAPF,SAA+BxF,EAAqBgC,GAClD,OAAOlC,IAAMqC,KAAN,UAAcxC,EAAd,gDAA4DK,GAAegC,KASrEpC,O,iCChCf,oBAMMD,EAAS,4BAqEf,IAAMC,EAAU,CACdC,OAxCF,SAAgBG,EAAqB2E,GACnC,OAAO7E,IAAMC,IAAN,UAAaJ,EAAb,wBAAmCK,EAAnC,oBAA0D2E,KAwCjEc,cAjCF,SAAuBzF,EAAqB2E,GAC1C,OAAO7E,IAAMC,IAAN,UAAaJ,EAAb,uCAAkDK,EAAlD,oBAAyE2E,KAiChFe,YAtCF,SAAqB1F,EAAqB2E,GACxC,OAAO7E,IAAMC,IAAN,UAAaJ,EAAb,qCAAgDK,EAAhD,oBAAuE2E,KAsC9EgB,OA/BF,SAAgB3F,EAAqB4F,GACnC,OAAO9F,IAAMqC,KAAN,UAAcxC,EAAd,wBAAoCK,GAAe4F,IA+B1DC,KA5BF,SAAc7F,EAAqBmD,EAA2BH,EAAqB4C,GACjF,OAAO9F,IAAMgG,IAAN,UAAanG,EAAb,wBAAmCK,EAAnC,8BAAoEmD,EAApE,wBAAqGH,GAAe4C,IA4B3Hd,OAzBF,SAAgB9E,EAAqB+F,GACnC,OAAOjG,IAAMqC,KAAN,UAAcxC,EAAd,+BAA2CK,GAAe+F,IAyBjEf,aAtBF,SAAsBhF,EAAqBiF,GACzC,IAAMC,EAAW,IAAIC,SAGrB,OAFAD,EAASE,OAAO,QAASH,EAAMA,EAAKzE,MAE7BV,IAAMqC,KAAN,UACFxC,EADE,qCACiCK,GACtCkF,EACA,CACEG,QAAS,CACP,eAAgB,2BAgBTzF,O,kUC/ETD,EAAS,+BA2Df,IASeC,EATC,CACdC,OApCF,SAAgBG,EAAqB2E,GACnC,OAAO7E,IAAMC,IAAN,UAAaJ,EAAb,wBAAmCK,EAAnC,oBAA0D2E,KAoCjEqB,UAjCF,SAAmBhG,EAAqB2E,GACtC,OAAO7E,IAAMC,IAAN,UAAaJ,EAAb,+BAA0CK,EAA1C,oBAAiE2E,KAiCxEgB,OA9BF,SAAgB3F,EAAqB4F,GACnC,OAAO9F,IAAMqC,KAAN,UAAcxC,EAAd,wBAAoCK,GAAe4F,IA8B1DC,KA3BF,SAAc7F,EAAqBgD,EAAqB4C,GACtD,OAAO9F,IAAMgG,IAAN,UAAanG,EAAb,wBAAmCK,EAAnC,wBAA8DgD,GAAe4C,IA2BpFd,OAxBF,SAAgB9E,EAAqBiG,GACnC,OAAOnG,IAAMqC,KAAN,UAAcxC,EAAd,+BAA2CK,GAAeiG,IAwBjEjB,aArBF,SAAsBhF,EAAqBiF,GACzC,IAAMC,EAAW,IAAIC,SAGrB,OAFAD,EAASE,OAAO,QAASH,EAAMA,EAAKzE,MAE7BV,IAAMqC,KAAN,UACFxC,EADE,qCACiCK,GACtCkF,EACA,CACEG,QAAS,CACP,eAAgB,2B,OCblBa,EAAYC,YAAW,CAC5BC,KAAM,CACLC,MAAO,OACPC,OAAQ,QAETC,UAAW,CACVC,UAAW,qBACXC,UAAW,UAEZC,KAAM,CACLC,SAAU,aAINC,EAA6B,CAClCrG,KAAM,GACN8B,YAAa,GACbO,KAAM,GACN5C,YAAa,GACb6C,SAAU,GACVgE,cAAe1H,IAAkBC,MAGnB,SAAS0H,IACvB,IAAMC,EAAUb,IACVc,EAAwBC,cAC9B,EAAgCtG,IAAMC,UAAS,GAA/C,mBAAOsG,EAAP,KAAiBC,EAAjB,KACA,EAA4BxG,IAAMC,UAAS,GAA3C,mBAAOwG,EAAP,KAAeC,EAAf,KAEA,EAA8C1G,IAAMC,SAA8B,MAAlF,mBAAO0G,EAAP,KAAwBC,EAAxB,KAEA,EAAgC5G,IAAMC,SAA6B,IAAnE,mBAAOgD,EAAP,KAAiB4D,EAAjB,KACA,EAAwB7G,IAAMC,SAAuBgG,GAArD,mBAAOa,EAAP,KAAa5F,EAAb,KAEA,EAA8ClB,IAAMC,SAA6B,IAAjF,mBAAO8G,EAAP,KAAwBC,EAAxB,KAEA,EAAwChH,IAAMC,SAAmB,IAAjE,mBAAOgH,GAAP,KAAqBC,GAArB,KAEA,GAAoDlH,IAAMC,UAAS,GAAnE,qBAAOkH,GAAP,MAA2BC,GAA3B,MACA,GAA4CpH,IAAMC,SAA4C,IAA9F,qBAAOoH,GAAP,MAAuBC,GAAvB,MAEA,GAA8BtH,IAAMC,SAAiB,IAArD,qBAAOsH,GAAP,MAAgBC,GAAhB,MAEA,GAAkDxH,IAAMC,UAAS,GAAjE,qBAAOwH,GAAP,MAA0BC,GAA1B,MAEMC,GAAkB,uCAAG,sBAAAvH,EAAA,yDAC1BsH,IAAqB,GACG,OAApBf,EAFsB,wBAGzBN,EAASuB,iBAAeC,QAHC,kBAKlBC,EAAe3D,OAAOwC,EAAgB/G,KAAMqH,IAL1B,OAMxBc,KACAb,GAAgB,IAChBb,EAAS2B,eAAaH,KAAKI,eAAaC,eAAgB,YARhC,kDAWxB7B,EAAS2B,eAAaH,KAAKI,eAAaE,eAAgB,UACxD9B,EAASuB,iBAAeQ,QAZA,0DAAH,qDAqBlBC,GAAsB,uCAAG,WAAOC,GAAP,SAAAlI,EAAA,2DAC1BkI,EAAMC,QAAU,GAAyB,OAApB5B,GADK,wBAE7BW,GAAkB,IAClBjB,EAASuB,iBAAeC,QAHK,cAK5BP,GAL4B,SAKJQ,EAAezD,aAAasC,EAAgB/G,KAAM0I,EAAM,IALpD,kCAM5BP,KACAX,IAAsB,GAPM,kDAU5Bf,EAASuB,iBAAeQ,QACxB/B,EAAS2B,eAAaH,KAAKI,eAAaE,eAAgB,UAX5B,0DAAH,sDAgBtBK,GAAe,SAACC,GACrBvH,EAAQ,2BAAK4F,GAAN,kBAAa2B,EAAMC,OAAO7I,KAAO4I,EAAMC,OAAOtL,UAmBhDuL,GAAY,uCAAG,sBAAAvI,EAAA,yDACpBoG,GAAY,GACY,OAApBG,EAFgB,oBAGnBN,EAASuB,iBAAeC,QAHL,UAKdpB,EALc,gCAMXqB,EAAe5C,KAAKyB,EAAgB/G,KAAMkH,EAAKlH,KAAMkH,GAN1C,iCASO,OAApBH,EATa,wBAUhBG,EAAKzH,YAAcsH,EAAgB/G,KAVnB,UAWVkI,EAAe9C,OAAO2B,EAAgB/G,KAAMkH,GAXlC,QAclBT,EAAS2B,eAAaH,KAAKI,eAAaC,eAAgB,YACxDH,KAfkB,kDAkBlB1B,EAAS2B,eAAaH,KAAKI,eAAaE,eAAgB,UACxD9B,EAASuB,iBAAeQ,QAnBN,0DAAH,qDA4BZQ,GAAY,uCAAG,WAAOvG,GAAP,SAAAjC,EAAA,sDAChB6G,GAAa4B,SAASxG,GACzB6E,GAAgBD,GAAa6B,QAAO,SAAApJ,GAAC,OAAIA,IAAM2C,MAG/C6E,GAAgB,GAAD,mBAAKD,IAAL,CAAmB5E,KALf,2CAAH,sDASZ0F,GAAa,uCAAG,sBAAA3H,EAAA,yDACrBiG,EAASuB,iBAAeC,QACA,OAApBlB,EAFiB,sCAInBE,EAJmB,SAIDiB,EAAe5I,OAAOyH,EAAgB/G,KAAMpB,IAAkBC,MAJ7D,oFAOnBoI,EAAY,IACZR,EAAS2B,eAAaH,KAAKI,eAAac,cAAe,UARpC,gCAYpBlC,EAAY,IAZQ,QAcrBR,EAASuB,iBAAeQ,QAdH,0DAAH,qDA6BnB,OAZApI,IAAMM,WAAU,WACfyH,KACAb,GAAgB,MAEd,CAACP,IAEJ3G,IAAMM,WAAU,WACf0G,EACC/D,EAAS6F,QAAO,SAAApJ,GAAC,OAAI6H,GAAQyB,MAAM,KAAKC,OAAM,SAAAC,GAAC,OAAIxJ,EAAEgC,YAAYmH,SAASK,YAEzE,CAACjG,EAAUsE,KAGb,qCACC,cAAC,IAAD,CACC4B,KAAM1B,GACN2B,QAAS,WAAQ1B,IAAqB,IACtC2B,SAAU,WAAQ1B,MAClB2B,MAAM,wDAJP,SAMC,eAACC,EAAA,EAAD,CAAM3D,WAAS,EAAC4D,QAAS,EAAzB,UACC,cAACD,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAf,SACC,cAACC,EAAA,EAAD,CAAYC,QAAQ,QAApB,gPAIA1C,GAAavJ,KAAI,SAAAkM,GAAC,OAClB,cAACL,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAf,SACC,cAACC,EAAA,EAAD,CAAYC,QAAQ,YAApB,SAAiCC,KADVA,WAM3B,cAAC,IAAD,CACCT,KAAMhC,GACNiC,QAjI4B,WAC9BhC,IAAsB,IAiIpBkC,MAAM,gDAHP,SAKC,cAACC,EAAA,EAAD,CAAM3D,WAAS,EAAC4D,QAAS,EAAzB,SACEnC,GAAe3J,KAAI,SAAC0C,EAAGyJ,GAAJ,OACnB,eAACN,EAAA,EAAD,CAAMzC,MAAI,EAAClB,WAAS,EAAC4D,QAAS,EAAGC,GAAI,GAArC,UACC,cAACF,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAIK,GAAI,EAAGC,MAAO,CAAEC,MAAO5J,EAAE6J,QAAU,QAAU,OAAhE,SACC,cAACP,EAAA,EAAD,CAAYC,QAAQ,YAApB,mBAAoCvJ,EAAE0G,KAAKlH,KAA3C,YAAmDQ,EAAE0G,KAAKpF,iBAE3D,cAAC6H,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAIK,GAAI,EAAGC,MAAO,CAAEC,MAAO5J,EAAE6J,QAAU,QAAU,OAAhE,SACC,cAACP,EAAA,EAAD,CAAYC,QAAQ,UAApB,SAA+BvJ,EAAE8J,cALWL,UAWjD,cAAC,IAAD,CACCP,MAAM,8BACNH,KAAM5C,EACN6C,QA5HqB,WACvB5C,GAAY,IA4HV6C,SAAUV,GAJX,SAMC,eAACY,EAAA,EAAD,CAAM3D,WAAS,EAAC4D,QAAS,EAAzB,UACC,cAACD,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAf,SACC,cAAC,IAAD,CACC5J,KAAK,OACLF,MAAM,QACNwK,KAAK,OACLxJ,UAAQ,EACRvD,MAAO0J,EAAKlH,KACZG,SAAUyI,OAGZ,cAACe,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAf,SACC,cAAC,IAAD,CACC5J,KAAK,cACLF,MAAM,sBACNwK,KAAK,OACLxJ,UAAQ,EACRvD,MAAO0J,EAAKpF,YACZ3B,SAAUyI,OAGZ,cAACe,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAf,SACC,cAAC,IAAD,CACC5J,KAAK,OACLF,MAAM,aACNwK,KAAK,OACLxJ,UAAQ,EACRvD,MAAO0J,EAAK7E,KACZlC,SAAUyI,OAGZ,cAACe,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAf,SACC,cAAC,IAAD,CACC5J,KAAK,WACLF,MAAM,0BACNwK,KAAK,OACLxJ,UAAQ,EACRvD,MAAO0J,EAAK5E,SACZnC,SAAUyI,YAKd,eAAC4B,EAAA,EAAD,CAAOC,UAAWjE,EAAQX,KAA1B,UACC,cAAC8D,EAAA,EAAD,CAAM3D,WAAS,EAAf,SACC,eAAC2D,EAAA,EAAD,CACC3D,WAAS,EACTkB,MAAI,EAAC2C,GAAI,GACTM,MAAO,CAAEO,QAAS,OAClBC,UAAU,MACVf,QAAS,EACTgB,WAAW,WANZ,UAQC,cAACjB,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAIK,GAAI,EAAvB,SACC,cAAC,IAAD,CACC1M,MAAOuJ,EACP5G,SA/IqB,SAAC3C,GAC5BwJ,EAAmBxJ,QAiJf,cAACmM,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAIK,GAAI,EAAvB,SACC,cAAC,IAAD,CACCjK,KAAK,UACLF,MAAM,mBACNwK,KAAK,OACL/M,MAAOmK,GACPxH,SAAU,SAAC0I,GAAYjB,GAAWiB,EAAMC,OAAOtL,YAG5B,OAApBuJ,GACA,eAAC4C,EAAA,EAAD,CAAM3D,WAAS,EAAC4D,QAAS,EAAG1C,MAAI,EAAC2C,GAAI,GAAIe,WAAW,WAApD,UACC,cAACjB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC2D,QAAQ,mBACRd,QAAQ,YACRe,KAAK,UACLC,KAAK,OACLX,MAAM,UACNY,QAxMoB,WAC5B1J,EAAQ+E,GACRS,GAAU,GACVF,GAAY,QAwMN,cAAC+C,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC+D,WAAY,EACZvB,MAAM,0BACNwB,cAAe,CAAC,OAAQ,SACxBzB,SAAUhB,GACVoC,QAAQ,8BACRd,QAAQ,YACRe,KAAK,eACLV,MAAM,cAGR,cAACT,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC6C,QAAQ,YACRhK,MAAM,mBACNoL,SAAQ,UAAKpE,EAAgB/G,KAArB,mBACRoL,IAAG,6DAAwDrE,EAAgB/G,KAAxE,oBAAwFpB,IAAkBC,UAG/G,cAAC8K,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC2D,QAAQ,kBACRd,QAAQ,YACRe,KAAK,kBACLV,MAAM,UACNW,KAAK,WACLC,QAAS7C,OAGX,cAACwB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC2D,QAAQ,4DACRd,QAAQ,YACRe,KAAK,SACLV,MAAM,SACNW,KAAK,YACLM,SAAUhE,GAAasB,QAAU,EACjCqC,QAAS,WAAQlD,IAAqB,gBAO5C,cAACwD,EAAA,EAAD,CAAgBb,UAAWjE,EAAQR,UAAnC,SACC,eAACuF,EAAA,EAAD,CAAOC,cAAY,EAACC,aAAW,eAAeC,KAAK,QAAnD,UACC,cAACC,EAAA,EAAD,UACC,eAACC,EAAA,EAAD,WACC,cAACC,EAAA,EAAD,CAAW1B,MAAO,CAAEO,QAAS,EAAG5E,MAAO,MACvC,cAAC+F,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,0CACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,iCACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,wBACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,gCACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,QAA1C,qCACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,QAA1C,iCAGF,cAACC,EAAA,EAAD,UACE5E,EAAgBrJ,KAAI,SAAAkO,GAAO,OAC3B,eAACJ,EAAA,EAAD,CACCzB,MAAO,CACN8B,gBAAiB5E,GAAa4B,SAAS+C,EAAQhM,MAAQkM,IAAOC,IAAI,KAAO,WAF3E,UAKC,cAACN,EAAA,EAAD,CACC1B,MAAO,CACNO,QAAS,EACT5E,MAAO,GACPmG,gBAAiB5E,GAAa4B,SAAS+C,EAAQhM,MAAQkM,IAAOC,IAAI,KAAOD,IAAOE,KAAK,MAEtFpB,QAAS,WAAQhC,GAAagD,EAAQhM,SAGvC,cAAC6L,EAAA,EAAD,CACCpB,UAAWjE,EAAQL,KACnB2F,MAAM,OACN3B,MAAO,CACNkC,OAAQ,WAETrB,QAAS,YArRS,SAAC9D,GAC3B5F,EAAQ4F,GACRJ,GAAU,GACVF,GAAY,GAmRH0F,CAAmBN,IAPrB,SAUEA,EAAQhM,OAEV,cAAC6L,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,SAAkDE,EAAQlK,cAC1D,cAAC+J,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,SAAkDE,EAAQ3J,OAC1D,cAACwJ,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,SACC,mBACCS,KAAMP,EAAQ1J,SACd6H,MAAO,CACNqC,eAAgB,QAEjB1D,OAAO,SACP2D,IAAI,aANL,kCAWD,cAACZ,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,QAA1C,SAAmDE,EAAQU,eAC3D,cAACb,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,QAA1C,SAAmDE,EAAQW,cAzC7CX,EAAQhM,sB,+BC5XzB4M,EAAc,SAAC1K,GACnB,OAAQA,GACN,KAAK,EAAG,OAAOgK,IAAOW,MAAM,KAC5B,KAAK,EAAG,OAAOX,IAAOY,MAAM,KAC5B,QAAS,OAAOZ,IAAOC,IAAI,OAQhB,SAASY,EAAT,GAES,IADtBtL,EACqB,EADrBA,KAEA,OACE,eAAC8J,EAAA,EAAD,CAAOC,cAAY,EAACC,aAAW,eAAeC,KAAK,QAAnD,UACE,cAACC,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,sCACA,cAACyF,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,iCACA,cAACyF,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,wBACA,cAACyF,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,gCACA,cAACyF,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,qCACA,cAACyF,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,iCAGJ,cAAC2F,EAAA,EAAD,UACGtK,EAAK3D,KAAI,SAACoJ,EAAM+C,GAAP,OACR,eAAC2B,EAAA,EAAD,CAAsBzB,MAAO,CAAE8B,gBAAiBW,EAAY1F,EAAKhF,SAAjE,UACE,cAAC2J,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,SACE,eAACuD,EAAA,EAAD,CAAM3D,WAAS,EAAC2E,UAAU,SAA1B,UACE,cAAChB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKtF,KAAgBsF,EAAKtF,KAAK5B,KAAO,MAEzC,cAAC2J,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKvF,KAAgBuF,EAAKvF,KAAK3B,KAAO,WAI7C,cAAC6L,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,SACE,eAACuD,EAAA,EAAD,CAAM3D,WAAS,EAAC2E,UAAU,SAA1B,UACE,cAAChB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKtF,KAAgBsF,EAAKtF,KAAKE,YAAc,MAEhD,cAAC6H,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKvF,KAAgBuF,EAAKvF,KAAKG,YAAc,WAIpD,cAAC+J,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,SACE,eAACuD,EAAA,EAAD,CAAM3D,WAAS,EAAC2E,UAAU,SAA1B,UACE,cAAChB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKtF,KAAgBsF,EAAKtF,KAAKS,KAAO,MAEzC,cAACsH,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKvF,KAAgBuF,EAAKvF,KAAKU,KAAO,WAI7C,cAACwJ,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,SACE,eAACuD,EAAA,EAAD,CAAM3D,WAAS,EAAC2E,UAAU,SAA1B,UACE,cAAChB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKtF,KAAgBsF,EAAKtF,KAAKU,SAAW,MAE7C,cAACqH,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKvF,KAAgBuF,EAAKvF,KAAKW,SAAW,WAIjD,cAACuJ,EAAA,EAAD,CAAWC,MAAM,QAAQ3B,MAAO,CAAE/D,SAAU,WAA5C,SACE,eAACuD,EAAA,EAAD,CAAM3D,WAAS,EAAC2E,UAAU,SAA1B,UACE,cAAChB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKtF,KAAgBsF,EAAKtF,KAAK8K,aAAe,MAEjD,cAAC/C,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKvF,KAAgBuF,EAAKvF,KAAK+K,aAAe,WAIrD,cAACb,EAAA,EAAD,CAAWC,MAAM,QAAQ3B,MAAO,CAAE/D,SAAU,WAA5C,SACE,eAACuD,EAAA,EAAD,CAAM3D,WAAS,EAAC2E,UAAU,SAA1B,UACE,cAAChB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKtF,KAAgBsF,EAAKtF,KAAK+K,UAAY,MAE9C,cAAChD,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKvF,KAAgBuF,EAAKvF,KAAKgL,UAAY,aAzDrC1C,WC7BzB,IAAM2C,EAAc,SAAC1K,GACnB,OAAQA,GACN,KAAK,EAAG,OAAOgK,IAAOW,MAAM,KAC5B,KAAK,EAAG,OAAOX,IAAOY,MAAM,KAC5B,QAAS,OAAOZ,IAAOC,IAAI,OAQhB,SAASa,EAAT,GAES,IADtBvL,EACqB,EADrBA,KAEA,OACE,eAAC8J,EAAA,EAAD,CAAOC,cAAY,EAACC,aAAW,eAAeC,KAAK,QAAnD,UACE,cAACC,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,uBACA,cAACyF,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,qCACA,cAACyF,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,sCACA,cAACyF,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,oDACA,cAACyF,EAAA,EAAD,CAAWC,MAAM,QAAQ3B,MAAO,CAAE/D,SAAU,WAA5C,0CAGJ,cAAC2F,EAAA,EAAD,UACGtK,EAAK3D,KAAI,SAACoJ,EAAM+C,GAAP,OACR,eAAC2B,EAAA,EAAD,CAAsBzB,MAAO,CAAE8B,gBAAiBW,EAAY1F,EAAKhF,SAAjE,UACE,cAAC2J,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,SACE,eAACuD,EAAA,EAAD,CAAM3D,WAAS,EAAC2E,UAAU,SAA1B,UACE,cAAChB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKtF,KAAgBsF,EAAKtF,KAAKY,YAAc,MAEhD,cAACmH,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKvF,KAAgBuF,EAAKvF,KAAKa,YAAc,WAIpD,cAACqJ,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,SACE,eAACuD,EAAA,EAAD,CAAM3D,WAAS,EAAC2E,UAAU,SAA1B,UACE,cAAChB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKtF,KAAgBsF,EAAKtF,KAAKqL,mBAAqB,MAEvD,cAACtD,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKvF,KAAgBuF,EAAKvF,KAAKsL,mBAAqB,WAI3D,cAACpB,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,SACE,eAACuD,EAAA,EAAD,CAAM3D,WAAS,EAAC2E,UAAU,SAA1B,UACE,cAAChB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKtF,KAAgBsF,EAAKtF,KAAKa,YAAc,MAEhD,cAACkH,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKvF,KAAgBuF,EAAKvF,KAAKc,YAAc,WAIpD,cAACoJ,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,SACE,eAACuD,EAAA,EAAD,CAAM3D,WAAS,EAAC2E,UAAU,SAA1B,UACE,cAAChB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKtF,KAAgBsF,EAAKtF,KAAKsL,mBAAqB,MAEvD,cAACvD,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKvF,KAAgBuF,EAAKvF,KAAKuL,mBAAqB,WAI3D,cAACrB,EAAA,EAAD,CAAWC,MAAM,QAAQ3B,MAAO,CAAE/D,SAAU,WAA5C,SACE,eAACuD,EAAA,EAAD,CAAM3D,WAAS,EAAC2E,UAAU,SAA1B,UACE,cAAChB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKtF,KAAgBsF,EAAKtF,KAAKc,SAAW,MAE7C,cAACiH,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKvF,KAAgBuF,EAAKvF,KAAKe,SAAW,aA/CpCuH,W,aC1BnB2C,EAAc,SAAC1K,GACnB,OAAQA,GACN,KAAK,EAAG,OAAOgK,IAAOW,MAAM,KAC5B,KAAK,EAAG,OAAOX,IAAOY,MAAM,KAC5B,QAAS,OAAOZ,IAAOC,IAAI,OAQhB,SAASgB,EAAT,GAES,IADtB1L,EACqB,EADrBA,KAEA,OACE,eAAC8J,EAAA,EAAD,CAAOC,cAAY,EAACC,aAAW,eAAeC,KAAK,QAAnD,UACE,cAACC,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,sCACA,cAACyF,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,oDACA,cAACyF,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,kCACA,cAACyF,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,gDACA,cAACyF,EAAA,EAAD,CAAWC,MAAM,SAAS3B,MAAO,CAAE/D,SAAU,WAA7C,mCACA,cAACyF,EAAA,EAAD,CAAWC,MAAM,QAAQ3B,MAAO,CAAE/D,SAAU,WAA5C,4CAGJ,cAAC2F,EAAA,EAAD,UACGtK,EAAK3D,KAAI,SAACoJ,EAAM+C,GAAP,OACR,eAAC2B,EAAA,EAAD,CAAsBzB,MAAO,CAAE8B,gBAAiBW,EAAY1F,EAAKhF,SAAjE,UACE,cAAC2J,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,SACE,eAACuD,EAAA,EAAD,CAAM3D,WAAS,EAAC2E,UAAU,SAA1B,UACE,cAAChB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKtF,KAAgBsF,EAAKtF,KAAKa,YAAc,MAEhD,cAACkH,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKvF,KAAgBuF,EAAKvF,KAAKc,YAAc,WAIpD,cAACoJ,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,SACE,eAACuD,EAAA,EAAD,CAAM3D,WAAS,EAAC2E,UAAU,SAA1B,UACE,cAAChB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKtF,KAAgBsF,EAAKtF,KAAKsL,mBAAqB,MAEvD,cAACvD,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKvF,KAAgBuF,EAAKvF,KAAKuL,mBAAqB,WAI3D,cAACrB,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,SACE,eAACuD,EAAA,EAAD,CAAM3D,WAAS,EAAC2E,UAAU,SAA1B,UACE,cAAChB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKtF,KAAgBsF,EAAKtF,KAAKgB,kBAAoB,MAEtD,cAAC+G,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKvF,KAAgBuF,EAAKvF,KAAKiB,kBAAoB,WAI1D,cAACiJ,EAAA,EAAD,CAAWC,MAAM,OAAO3B,MAAO,CAAE/D,SAAU,WAA3C,SACE,eAACuD,EAAA,EAAD,CAAM3D,WAAS,EAAC2E,UAAU,SAA1B,UACE,cAAChB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKtF,KAAgBsF,EAAKtF,KAAKwL,yBAA2B,MAE7D,cAACzD,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKvF,KAAgBuF,EAAKvF,KAAKyL,yBAA2B,WAIjE,cAACvB,EAAA,EAAD,CAAWC,MAAM,SAAS3B,MAAO,CAAE/D,SAAU,WAA7C,SACE,eAACuD,EAAA,EAAD,CAAM3D,WAAS,EAAC2E,UAAU,SAA1B,UACE,cAAChB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKtF,KAAgBsF,EAAKtF,KAAKyL,kBAAoB,MAEtD,cAAC1D,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKvF,KAAgBuF,EAAKvF,KAAK0L,kBAAoB,WAI1D,cAACxB,EAAA,EAAD,CAAWC,MAAM,QAAQ3B,MAAO,CAAE/D,SAAU,WAA5C,SACE,eAACuD,EAAA,EAAD,CAAM3D,WAAS,EAAC2E,UAAU,SAA1B,UACE,cAAChB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKtF,KAAgB1E,IAAOe,YAAYiJ,EAAKtF,KAAKc,SAAU,GAAK,MAEpE,cAACiH,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACiB,OAAdA,EAAKvF,KAAgBzE,IAAOe,YAAYiJ,EAAKvF,KAAKe,SAAU,GAAK,aAzD3DuH,WCLzB,IAAMtE,EAAYC,YAAW,CAC5BC,KAAM,CACLC,MAAO,OACPC,OAAQ,QAETC,UAAW,CACVC,UAAW,oBACXC,UAAW,YAIE,SAASoH,IACvB,IAAM9G,EAAUb,IACVc,EAAwBC,cAE9B,EAA8BtG,IAAMC,SAA8B,MAAlE,mBAAOgB,EAAP,KAAgBkM,EAAhB,KAEA,EAA0BnN,IAAMC,SAAsC,CACrEgD,SAAU,GACVC,gBAAiB,GACjBC,MAAO,KAHR,mBAAO8B,EAAP,KAAcmI,EAAd,KAKA,EAAgCpN,IAAMC,UAAS,GAA/C,mBAAOsG,EAAP,KAAiBC,EAAjB,KACA,EAAkDxG,IAAMC,SAAiB,IAAzE,mBAAOoN,EAAP,KAA0BC,EAA1B,KACA,EAAsBtN,IAAMC,SAAiB,GAA7C,mBAAOsN,EAAP,KAAYC,EAAZ,KAEA,EAAoCxN,IAAMC,UAAS,GAAnD,mBAAOwN,EAAP,KAAmBC,EAAnB,KAWM/E,EAAY,uCAAG,4BAAAvI,EAAA,yDACpBoG,GAAY,GACZH,EAASuB,iBAAeC,QAFJ,SAIbxG,EAAuC,CAC5CsM,OAAQ,CACPhJ,OAAQhG,IAAWE,SACnB+O,UAAW,GACXC,kBAAmB,GACnBC,YAAa,IAAI/L,KACjBL,YAAa2L,EACbU,OAAQ,EACR1O,YAAyB,OAAZ4B,EAAmBA,EAAQrB,KAAO,IAEhDoO,OAAQhL,YAAsBiC,IAGf,OAAZhE,EAjBe,gCAkBZgN,IAAcpK,eAAe5C,EAAQrB,KAAMyB,GAlB/B,OAqBnBgF,EAAS2B,eAAaH,KAAKI,eAAaC,eAAgB,YACxDH,IAtBmB,kDAyBnB1B,EAAS2B,eAAaH,KAAKI,eAAaE,eAAgB,UACxD9B,EAASuB,iBAAeQ,QA1BL,0DAAH,qDAkCZL,EAAa,uCAAG,sBAAA3H,EAAA,yDACL,OAAZa,EADiB,wBAEpBoF,EAASuB,iBAAeC,QAFJ,cAInBuF,EAJmB,SAIJa,IAAcxK,uBAAuBxC,EAAQrB,MAJzC,oFAOnBwN,EAAS,CACRnK,SAAU,GACVC,gBAAiB,GACjBC,MAAO,KAERkD,EAAS2B,eAAaH,KAAKI,eAAac,cAAe,UAZpC,QAcpB1C,EAASuB,iBAAeQ,QAdJ,wBAiBpBgF,EAAS,CACRnK,SAAU,GACVC,gBAAiB,GACjBC,MAAO,KApBY,0DAAH,qDAyBb+K,EAAe,uCAAG,sBAAA9N,EAAA,2EAEtBsN,EAFsB,SAEFS,IAAYC,oBAAoB,0BAF9B,kFAKtBV,GAAc,GALQ,yDAAH,qDAerB,OANA1N,IAAMM,WAAU,WACfyH,IACAmG,MAEE,CAACjN,IAGH,qCACC,cAAC,IAAD,CACCqI,MAAM,sDACNH,KAAM5C,EACN6C,QAxFqB,WACvB5C,GAAY,IAwFV6C,SAAUV,EAJX,SAMC,cAACY,EAAA,EAAD,CAAM3D,WAAS,EAAC4D,QAAS,EAAzB,SACC,cAACD,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAf,SACC,cAAC,IAAD,CACC5J,KAAK,oBACLF,MAAM,iDACNwK,KAAK,OACLxJ,UAAQ,EACRvD,MAAOiQ,EACPtN,SAAU,SAACuB,GAAQgM,EAAqBhM,EAAEoH,OAAOtL,gBAKrD,eAACgN,EAAA,EAAD,CAAOC,UAAWjE,EAAQX,KAA1B,UACC,cAAC8D,EAAA,EAAD,CAAM3D,WAAS,EAAf,SACC,eAAC2D,EAAA,EAAD,CACC3D,WAAS,EACTkB,MAAI,EAAC2C,GAAI,GACTM,MAAO,CAAEO,QAAS,OAClBC,UAAU,MACVf,QAAS,EACTgB,WAAW,WANZ,UAQC,cAACjB,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,EAAf,SACC,cAAC,IAAD,CACCrM,MAAO6D,EACPlB,SA9EqB,SAAC3C,GAC5B+P,EAAW/P,QAgFP,eAACmM,EAAA,EAAD,CAAM3D,WAAS,EAAC4D,QAAS,EAAG1C,MAAI,EAAC2C,GAAI,EAAGe,WAAW,WAAnD,UACc,OAAZvJ,GAAoBwM,IACnBxI,EAAMhC,SAASsF,OAAS,GAAKtD,EAAM/B,gBAAgBqF,OAAS,GAAKtD,EAAM9B,MAAMoF,OAAS,IACtF,cAACgB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC2D,QAAQ,wCACRd,QAAQ,YACRe,KAAK,SACLC,KAAK,oBACLX,MAAM,SACNY,QA9Ha,WACtB0C,EAAqB,IACrB9G,GAAY,QAgIP,cAAC+C,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC2D,QAAQ,4CACRd,QAAQ,YACRe,KAAK,qBACLC,KAAK,QACLX,MAAM,UACNY,QAAS,WAAQ4C,EAAO,QAG1B,cAACjE,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC2D,QAAQ,mCACRd,QAAQ,YACRe,KAAK,UACLC,KAAK,OACLX,MAAM,UACNY,QAAS,WAAQ4C,EAAO,QAG1B,cAACjE,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC2D,QAAQ,iBACRd,QAAQ,YACRe,KAAK,iBACLC,KAAK,QACLX,MAAM,OACNY,QAAS,WAAQ4C,EAAO,gBAM7B,eAACtC,EAAA,EAAD,CAAgBb,UAAWjE,EAAQR,UAAnC,UACU,IAAR2H,GAAa,cAACZ,EAAD,CAAqBtL,KAAM4D,EAAMhC,WACtC,IAARsK,GAAa,cAACX,EAAD,CAA4BvL,KAAM4D,EAAM/B,kBAC7C,IAARqK,GAAa,cAACR,EAAD,CAAkB1L,KAAM4D,EAAM9B,iB,aC3M3CoC,EAAYC,YAAW,CAC5BC,KAAM,CACLC,MAAO,OACPC,OAAQ,QAETC,UAAW,CACVC,UAAW,qBACXC,UAAW,UAEZC,KAAM,CACLC,SAAU,aAIG,SAASqI,IACvB,IAAMjI,EAAUb,IACVc,EAAwBC,cAC9B,EAAgCtG,IAAMC,UAAS,GAA/C,mBAAOsG,EAAP,KAAiBC,EAAjB,KAEA,EAA8BxG,IAAMC,SAA8B,MAAlE,mBAAOgB,EAAP,KAAgBkM,EAAhB,KAEA,EAAgCnN,IAAMC,SAAyB,IAA/D,mBAAOqO,EAAP,KAAiBC,EAAjB,KACA,EAAsCvO,IAAMC,SAAiB,IAA7D,mBAAOyB,EAAP,KAAoB8M,EAApB,KAeM7F,EAAY,uCAAG,4BAAAvI,EAAA,yDACpBoG,GAAY,GACI,OAAZvF,EAFgB,wBAGnBoF,EAASuB,iBAAeC,QAHL,SAKZxG,EAAqB,CAC1B0M,OAAQ,EACRpJ,OAAQhG,IAAWE,SACnB+O,UAAW,GACXC,kBAAmB,GACnBY,YAAa,IAAI1M,KACjBL,YAAaA,EACbrC,YAAa4B,EAAQrB,MAZJ,SAcZ8O,IAAe7J,sBAAsB5D,EAAQrB,KAAMyB,GAdvC,OAelBgF,EAAS2B,eAAaH,KAAKI,eAAaC,eAAgB,YACxDH,IAhBkB,kDAmBlB1B,EAAS2B,eAAaH,KAAKI,eAAaE,eAAgB,UACxD9B,EAASuB,iBAAeQ,QApBN,0DAAH,qDA6BZL,EAAa,uCAAG,sBAAA3H,EAAA,yDACrBiG,EAASuB,iBAAeC,QACR,OAAZ5G,EAFiB,sCAInBsN,EAJmB,SAIDG,IAAexP,OAAO+B,EAAQrB,KAAMjB,IAAWE,UAJ9C,oFAOnB0P,EAAY,IACZlI,EAAS2B,eAAaH,KAAKI,eAAac,cAAe,UARpC,gCAYpBwF,EAAY,IAZQ,QAcrBlI,EAASuB,iBAAeQ,QAdH,0DAAH,qDAsBnB,OALApI,IAAMM,WAAU,WACfyH,MAEE,CAAC9G,IAGH,qCACC,cAAC,IAAD,CACCqI,MAAM,6BACNH,KAAM5C,EACN6C,QAjEqB,WACvB5C,GAAY,IAiEV6C,SAAUV,EAJX,SAMC,cAACY,EAAA,EAAD,CAAM3D,WAAS,EAAC4D,QAAS,EAAzB,SACC,cAACD,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAf,SACC,cAAC,IAAD,CACC5J,KAAK,cACLF,MAAM,sBACNwK,KAAK,OACLxJ,UAAQ,EACRvD,MAAOsE,EACP3B,SAhFe,SAAC0I,GACrB+F,EAAe/F,EAAMC,OAAOtL,gBAoF3B,eAACgN,EAAA,EAAD,CAAOC,UAAWjE,EAAQX,KAA1B,UACC,cAAC8D,EAAA,EAAD,CAAM3D,WAAS,EAAf,SACC,eAAC2D,EAAA,EAAD,CACC3D,WAAS,EACTkB,MAAI,EAAC2C,GAAI,GACTM,MAAO,CAAEO,QAAS,OAClBC,UAAU,MACVf,QAAS,EACTgB,WAAW,WANZ,UAQC,cAACjB,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAIK,GAAI,EAAvB,SACC,cAAC,IAAD,CACC1M,MAAO6D,EACPlB,SA5DqB,SAAC3C,GAC5B+P,EAAW/P,QA8DM,OAAZ6D,GACA,eAACsI,EAAA,EAAD,CAAM3D,WAAS,EAAC4D,QAAS,EAAG1C,MAAI,EAAC2C,GAAI,GAAIe,WAAW,WAApD,UACC,cAACjB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC2D,QAAQ,mBACRd,QAAQ,YACRe,KAAK,UACLC,KAAK,OACLX,MAAM,UACNY,QAtGoB,WAC5B4D,EAAe,IACfhI,GAAY,QAuGN,cAAC+C,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC2D,QAAQ,kBACRd,QAAQ,YACRe,KAAK,kBACLV,MAAM,UACNW,KAAK,WACLC,QAAS7C,cAOf,cAACmD,EAAA,EAAD,CAAgBb,UAAWjE,EAAQR,UAAnC,SACC,eAACuF,EAAA,EAAD,CAAOC,cAAY,EAACC,aAAW,eAAeC,KAAK,QAAnD,UACC,cAACC,EAAA,EAAD,UACC,eAACC,EAAA,EAAD,WACC,cAACC,EAAA,EAAD,CAAW1B,MAAO,CAAEO,QAAS,EAAG5E,MAAO,MACvC,cAAC+F,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,uCACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,iCACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,sCACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,4BACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,cAG5C,cAACC,EAAA,EAAD,UACE2C,EAAS5Q,KAAI,SAAAsD,GAAC,OACd,eAACwK,EAAA,EAAD,WACC,cAACC,EAAA,EAAD,CACC1B,MAAO,CACNO,QAAS,EACT5E,MAAO,GACPmG,gBAAiBC,IAAOE,KAAK,QAI/B,cAACP,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,SAAkD1K,EAAE+M,SACpD,cAACtC,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,SAAkD1K,EAAEU,cACpD,cAAC+J,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,mBAAqD1K,EAAE4M,UAAvD,YAAoE5M,EAAE6M,qBACtE,cAACpC,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,SAAkD5O,IAAOC,WAAW,IAAIgF,KAAKf,EAAEyN,aAAc,gBAC7F,cAAChD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,SACc,OAAZzK,GACA,qCACC,mBACCkL,KAAI,yDAAoDlL,EAAQrB,KAA5D,YAAoEoB,EAAE+M,QAC1EhE,MAAO,CACNqC,eAAgB,QAEjB1D,OAAO,SACP2D,IAAI,aANL,SAQC,cAAC,IAAD,CACC3B,KAAK,qBACLV,MAAM,UACNW,KAAK,YAGP,mBACCwB,KAAI,iEAA4DlL,EAAQrB,KAApE,YAA4EoB,EAAE+M,QAClFhE,MAAO,CACNqC,eAAgB,QAEjB1D,OAAO,SACP2D,IAAI,aANL,SAQC,cAAC,IAAD,CACC3B,KAAK,UACLV,MAAM,UACNW,KAAK,WAGP,mBACCwB,KAAI,sDAAiDlL,EAAQrB,KAAzD,YAAiEoB,EAAE+M,QACvEhE,MAAO,CACNqC,eAAgB,QAEjB1D,OAAO,SACP2D,IAAI,aANL,SAQC,cAAC,IAAD,CACC3B,KAAK,iBACLV,MAAM,OACNW,KAAK,mBAvDI3J,EAAE+M,wBCnLzB,IAAMY,EAAmB,mBACnBC,EAA0B,0BAE1BpP,GAAwB,SAAC6B,GAC7B,OAAOA,EAAK3D,KAAI,SAAAgC,GAMd,OAL0B,2BACrBA,GADqB,IAExBC,MAAM,IAAD,OAAMD,EAAEE,KAAR,aAAiBF,EAAEgC,mBA2Bf,SAASmN,GAAT,GAIS,IAHtBxP,EAGqB,EAHrBA,YACAjC,EAEqB,EAFrBA,MACA2C,EACqB,EADrBA,SAGA,EAAwBC,IAAMC,SAAyB,IAAvD,mBAAOoB,EAAP,KAAayN,EAAb,KAEMC,EAAO,uCAAG,sBAAA3O,EAAA,2EAEZ0O,EAFY,SAEEhH,EAAe5I,OAAOG,EAAab,IAAkBC,MAFvD,kFAKZqQ,EAAQ,IALI,yDAAH,qDAwCb,OAjBA9O,IAAMM,WAAU,WACd,IAAM0O,EApDO,WACf,IAAMpP,EAAOY,aAAaC,QAAQkO,GAC5BjN,EAAclB,aAAaC,QAAQmO,GACzC,OAAa,OAAThP,GAAiC,OAAhB8B,EACZ,KAGA,CACL9B,KAAMA,EACN8B,YAAaA,EACb/B,MAAM,IAAD,OAAMC,EAAN,aAAe8B,IA0CRhB,GACA,OAAVsO,GACFjP,EAAS,CACPH,KAAMoP,EAAMpP,KACZ8B,YAAasN,EAAMtN,YACnBQ,SAAU,GACVD,KAAM,GACN5C,YAAa,GACb6G,cAAe1H,IAAkBC,OAGrCsQ,MAGC,IAGD,cAAC,IAAD,CACEpO,UAAQ,EACRhB,MAAM,4CACNiB,QAASpB,GAAsB6B,GAC/BR,YAAY,QACZzD,MAAiB,OAAVA,EAAiB,CACtBwC,KAAMxC,EAAMwC,KACZD,MAAM,IAAD,OAAMvC,EAAMwC,KAAZ,aAAqBxC,EAAMsE,aAChCA,YAAatE,EAAMsE,aACjB,KACJZ,kBAAmB,SAACC,EAAGC,GAAJ,OAAUD,EAAEnB,OAASoB,EAAEpB,MAC1CG,SA3CiB,SAAC3C,GAtBP,IAACwO,EAuBA,OAAVxO,IACF2C,EAAS,CACPH,KAAMxC,EAAMwC,KACZ8B,YAAatE,EAAMsE,YACnBQ,SAAU,GACVD,KAAM,GACN5C,YAAa,GACb6G,cAAe1H,IAAkBC,OA9BvBmN,EAgCHxO,EA/BboD,aAAaU,QAAQyN,EAAkB/C,EAAQhM,MAC/CY,aAAaU,QAAQ0N,EAAyBhD,EAAQlK,iB,cCnDlD1C,GAAS,sCA2Df,IAQeC,GARC,CACdC,OAhCF,SAAgBG,EAAqB2E,GACnC,OAAO7E,IAAMC,IAAN,UAAaJ,GAAb,wBAAmCK,EAAnC,oBAA0D2E,KAgCjEgB,OA7BF,SAAgB3F,EAAqB4F,GACnC,OAAO9F,IAAMqC,KAAN,UAAcxC,GAAd,wBAAoCK,GAAe4F,IA6B1DC,KA1BF,SAAc7F,EAAqB+C,EAAqBC,EAAqB4C,GAC3E,OAAO9F,IAAMgG,IAAN,UAAanG,GAAb,wBAAmCK,EAAnC,wBAA8D+C,EAA9D,wBAAyFC,GAAe4C,IA0B/Gd,OAvBF,SAAgB9E,EAAqB+F,GACnC,OAAOjG,IAAMqC,KAAN,UAAcxC,GAAd,+BAA2CK,GAAe+F,IAuBjEf,aApBF,SAAsBhF,EAAqBiF,GACzC,IAAMC,EAAW,IAAIC,SAGrB,OAFAD,EAASE,OAAO,QAASH,EAAMA,EAAKzE,MAE7BV,IAAMqC,KAAN,UACFxC,GADE,qCACiCK,GACtCkF,EACA,CACEG,QAAS,CACP,eAAgB,2BCLlBa,GAAYC,YAAW,CAC5BC,KAAM,CACLC,MAAO,OACPC,OAAQ,QAETC,UAAW,CACVC,UAAW,qBACXC,UAAW,UAEZC,KAAM,CACLC,SAAU,aAUNC,GAAoC,CACzC7D,YAAa,GACbC,YAAa,GACbC,SAAU,IAGL2M,GAAY,SAAC7M,EAAqBC,EAAqBhB,GAC5D,YAA0F6N,IAAnF7N,EAAK8N,MAAK,SAAAzP,GAAC,OAAIA,EAAE2C,cAAgBA,GAAe3C,EAAE0C,cAAgBA,MAG3D,SAASgN,KACvB,IAAMhJ,EAAUb,KAEVc,EAAwBC,cAC9B,EAAgCtG,IAAMC,UAAS,GAA/C,mBAAOsG,EAAP,KAAiBC,EAAjB,KACA,EAA4BxG,IAAMC,UAAS,GAA3C,mBAAOwG,EAAP,KAAeC,EAAf,KAEA,EAA8B1G,IAAMC,SAA8B,MAAlE,mBAAOgB,EAAP,KAAgBkM,EAAhB,KACA,EAA8BnN,IAAMC,SAA8B,MAAlE,mBAAO2L,EAAP,KAAgByD,EAAhB,KAEA,EAAgCrP,IAAMC,SAAyB,IAA/D,mBAAO8C,EAAP,KAAiBuM,EAAjB,KACA,EAA8CtP,IAAMC,SAAyB,IAA7E,mBAAOsP,EAAP,KAAwBC,EAAxB,KACA,EAA8CxP,IAAMC,SAAoC,IAAxF,mBAAOiD,EAAP,KAAwBuM,EAAxB,KACA,EAAwBzP,IAAMC,SAA8BgG,IAA5D,oBAAOa,GAAP,MAAa5F,GAAb,MAEA,GAAwClB,IAAMC,SAAsC,IAApF,qBAAOgH,GAAP,MAAqBC,GAArB,MAEA,GAAoDlH,IAAMC,UAAS,GAAnE,qBAAOkH,GAAP,MAA2BC,GAA3B,MACA,GAA4CpH,IAAMC,SAAmD,IAArG,qBAAOoH,GAAP,MAAuBC,GAAvB,MAEA,GAA8BtH,IAAMC,SAAiB,IAArD,qBAAOsH,GAAP,MAAgBC,GAAhB,MACA,GAAkDxH,IAAMC,UAAS,GAAjE,qBAAOwH,GAAP,MAA0BC,GAA1B,MAEMC,GAAkB,uCAAG,sBAAAvH,EAAA,yDAC1BsH,IAAqB,GACL,OAAZzG,EAFsB,wBAGzBoF,EAASuB,iBAAeC,QAHC,kBAKlB6H,GAAsBvL,OAAOlD,EAAQrB,KAAMqH,IALzB,OAMxB0I,KACAzI,GAAgB,IAChBb,EAAS2B,eAAaH,KAAKI,eAAaC,eAAgB,YARhC,kDAWxB7B,EAAS2B,eAAaH,KAAKI,eAAaE,eAAgB,UACxD9B,EAASuB,iBAAeQ,QAZA,0DAAH,qDAqBlBC,GAAsB,uCAAG,WAAOC,GAAP,SAAAlI,EAAA,2DAC1BkI,EAAMC,QAAU,GAAiB,OAAZtH,GADK,wBAE7BqG,GAAkB,IAClBjB,EAASuB,iBAAeC,QAHK,cAK5BP,GAL4B,SAKJoI,GAAsBrL,aAAapD,EAAQrB,KAAM0I,EAAM,IALnD,kCAM5BP,KACAX,IAAsB,GAPM,kDAU5Bf,EAASuB,iBAAeQ,QACxB/B,EAAS2B,eAAaH,KAAKI,eAAaE,eAAgB,UAX5B,0DAAH,sDAoBtBwH,GAAoB,uCAAG,sBAAAvP,EAAA,yDACZ,OAAZa,EADwB,wBAE3BoF,EAASuB,iBAAeC,QAFG,cAI1B4H,EAJ0B,SAIDC,GAAsBxQ,OAAO+B,EAAQrB,KAAMpB,IAAkBC,MAJ5D,oFAO1B4H,EAAS2B,eAAaH,KAAKI,eAAac,cAAe,UAP7B,yBAU1B1C,EAASuB,iBAAeQ,QAVE,6EAAH,qDAepBL,GAAa,uCAAG,4BAAA3H,EAAA,yDACL,OAAZa,EADiB,wBAEpBoF,EAASuB,iBAAeC,QAFJ,kBAIA+H,QAAQC,IAAI,CAC9BC,KAAe5L,QAAQjD,EAAQrB,KAAMpB,IAAkBE,MACvDgR,GAAsBxQ,OAAO+B,EAAQrB,KAAMpB,IAAkBC,QAN3C,OAIb4C,EAJa,OAQnBiO,EAAYjO,EAAK,IACjBoO,EAAmBpO,EAAK,IATL,kDAYnBgF,EAAS2B,eAAaH,KAAKI,eAAac,cAAe,UAZpC,yBAenB1C,EAASuB,iBAAeQ,QAfL,6EAAH,qDAoBbI,GAAe,SAACC,GACrBvH,GAAQ,2BAAK4F,IAAN,kBAAa2B,EAAMC,OAAO7I,KAAO4I,EAAMC,OAAOtL,UA2BhDuL,GAAY,uCAAG,8BAAAvI,EAAA,yDACpBoG,GAAY,GACI,OAAZvF,EAFgB,oBAGnBoF,EAASuB,iBAAeC,QAHL,UAKdpB,EALc,wBAMXxB,EAA6B,CAClC7C,YAAa0E,GAAK1E,YAClBC,YAAayE,GAAKzE,YAClBC,SAAUyN,WAAWjJ,GAAKxE,UAC1BjD,YAAa4B,EAAQrB,KACrBsG,cAAe1H,IAAkBC,MAXjB,SAaXiR,GAAsBxK,KAAKjE,EAAQrB,KAAMkH,GAAK1E,YAAa0E,GAAKzE,YAAa4C,GAblE,OAcjBoB,EAAS2B,eAAaH,KAAKI,eAAaC,eAAgB,YACxDyH,KAfiB,2BAkBD,OAAZ/D,EAlBa,wBAmBV3G,EAA6B,CAClC7C,YAAa0E,GAAK1E,YAClBC,YAAauJ,EAAQhM,KACrB0C,SAAUyN,WAAWjJ,GAAKxE,UAC1BjD,YAAa4B,EAAQrB,KACrBsG,cAAe1H,IAAkBC,MAxBlB,UA0BViR,GAAsB1K,OAAO/D,EAAQrB,KAAMqF,GA1BjC,QA2BhBoB,EAAS2B,eAAaH,KAAKI,eAAaC,eAAgB,YACxDyH,KA5BgB,0DAiClBtJ,EAAS2B,eAAaH,KAAKI,eAAaE,eAAgB,UACxD9B,EAASuB,iBAAeQ,QAlCN,0DAAH,qDAuCZQ,GAAY,uCAAG,WAAOxG,EAAqBC,GAA5B,SAAAjC,EAAA,sDAChB6O,GAAU7M,EAAaC,EAAa4E,IACvCC,GAAgBD,GAAa6B,QAAO,SAAApJ,GAAC,QAAMA,EAAE2C,cAAgBA,GAAe3C,EAAE0C,cAAgBA,OAG9F8E,GAAgB,GAAD,mBAAKD,IAAL,CAAmB,CAAE5E,cAAaD,kBAL9B,2CAAH,wDAwBlB,OAfApC,IAAMM,WAAU,WACfyH,OAEE,CAAC9G,IAEJjB,IAAMM,WAAU,WACf4G,GAAgB,MACd,CAAChE,IAEJlD,IAAMM,WAAU,WACfkP,EACCzM,EAAS+F,QAAO,SAAApJ,GAAC,OAAI6H,GAAQyB,MAAM,KAAKC,OAAM,SAAAC,GAAC,OAAIxJ,EAAEgC,YAAYmH,SAASK,YAEzE,CAACnG,EAAUwE,KAGb,qCACC,cAAC,IAAD,CACC4B,KAAM1B,GACN2B,QAAS,WAAQ1B,IAAqB,IACtC2B,SAAU,WAAQ1B,MAClB2B,MAAM,yCAJP,SAMC,eAACC,EAAA,EAAD,CAAM3D,WAAS,EAAC4D,QAAS,EAAzB,UACC,cAACD,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAf,SACC,cAACC,EAAA,EAAD,CAAYC,QAAQ,QAApB,6JAIA1C,GAAavJ,KAAI,SAAAkM,GAAC,OAClB,cAACL,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAf,SACC,cAACC,EAAA,EAAD,CAAYC,QAAQ,YAApB,mBAAoCC,EAAExH,YAAtC,cAAuDwH,EAAEvH,gBAD1D,UAA2BuH,EAAExH,YAA7B,YAA4CwH,EAAEvH,sBAMjD,cAAC,IAAD,CACC8G,KAAMhC,GACNiC,QA7K4B,WAC9BhC,IAAsB,IA6KpBkC,MAAM,gDAHP,SAKC,cAACC,EAAA,EAAD,CAAM3D,WAAS,EAAC4D,QAAS,EAAzB,SACEnC,GAAe3J,KAAI,SAAC0C,EAAGyJ,GAAJ,OACnB,eAACN,EAAA,EAAD,CAAMzC,MAAI,EAAClB,WAAS,EAAC4D,QAAS,EAAGC,GAAI,GAArC,UACC,cAACF,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAIK,GAAI,EAAGC,MAAO,CAAEC,MAAO5J,EAAE6J,QAAU,QAAU,OAAhE,SACC,cAACP,EAAA,EAAD,CAAYC,QAAQ,YAApB,mBAAoCvJ,EAAE0G,KAAK1E,YAA3C,YAA0DhC,EAAE0G,KAAKzE,iBAElE,cAACkH,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAIK,GAAI,EAAGC,MAAO,CAAEC,MAAO5J,EAAE6J,QAAU,QAAU,OAAhE,SACC,cAACP,EAAA,EAAD,CAAYC,QAAQ,UAApB,SAA+BvJ,EAAE8J,cALWL,UAWjD,cAAC,IAAD,CACCP,MAAM,8BACNH,KAAM5C,EACN6C,QAjIqB,WACvB5C,GAAY,IAiIV6C,SAAUV,GAJX,SAMC,eAACY,EAAA,EAAD,CAAM3D,WAAS,EAAC4D,QAAS,EAAzB,UACC,cAACD,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAf,SACC,cAAC,IAAD,CACC5J,KAAK,cACLF,MAAM,YACNwK,KAAK,OACLxJ,UAAQ,EACRsK,UAAQ,EACR7N,MAAO0J,GAAK1E,YACZrC,SAAUyI,OAGZ,cAACe,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAf,SACEhD,EACA,cAAC,IAAD,CACC5G,KAAK,cACLF,MAAM,+BACNwK,KAAK,OACLxJ,UAAQ,EACRsK,UAAQ,EACR7N,MAAO0J,GAAKzE,YACZtC,SAAUyI,KAGC,OAAZvH,GAAoB,cAAC,GAAD,CACnB5B,YAAa4B,EAAQrB,KACrBxC,MAAOwO,EACP7L,SAAU,SAAC3C,GAAYiS,EAAWjS,QAIrC,cAACmM,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAf,SACC,cAAC,IAAD,CACC5J,KAAK,WACLF,MAAM,aACNwK,KAAK,SACLxJ,UAAQ,EACRvD,MAAO0J,GAAKxE,SACZvC,SAAUyI,YAKd,eAAC4B,EAAA,EAAD,CAAOC,UAAWjE,EAAQX,KAA1B,UACC,cAAC8D,EAAA,EAAD,CAAM3D,WAAS,EAAf,SACC,eAAC2D,EAAA,EAAD,CACC3D,WAAS,EACTkB,MAAI,EAAC2C,GAAI,GACTM,MAAO,CAAEO,QAAS,OAClBC,UAAU,MACVf,QAAS,EACTgB,WAAW,WANZ,UAQC,cAACjB,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAIK,GAAI,EAAvB,SACC,cAAChK,EAAA,EAAD,CACC1C,MAAO6D,EACPlB,SAvOqB,SAAC3C,GAC5B+P,EAAW/P,QAyOP,cAACmM,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAIK,GAAI,EAAvB,SACC,cAAC,IAAD,CACCjK,KAAK,UACLF,MAAM,eACNwK,KAAK,OACL/M,MAAOmK,GACPxH,SAAU,SAAC0I,GAAYjB,GAAWiB,EAAMC,OAAOtL,YAGpC,OAAZ6D,GACA,eAACsI,EAAA,EAAD,CAAM3D,WAAS,EAAC4D,QAAS,EAAG1C,MAAI,EAAC2C,GAAI,GAAIe,WAAW,WAApD,UACC,cAACjB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC+D,WAAY,EACZvB,MAAM,0BACNwB,cAAe,CAAC,OAAQ,SACxBzB,SAAUhB,GACVoC,QAAQ,8BACRd,QAAQ,YACRe,KAAK,QACLV,MAAM,cAGR,cAACT,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC6C,QAAQ,YACRhK,MAAM,mBACNoL,SAAQ,UAAK9J,EAAQrB,KAAb,iBACRoL,IAAG,oEAA+D/J,EAAQrB,KAAvE,oBAAuFpB,IAAkBC,UAG9G,cAAC8K,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC2D,QAAQ,kBACRd,QAAQ,YACRe,KAAK,kBACLV,MAAM,UACNW,KAAK,WACLC,QAAS7C,OAGX,cAACwB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC2D,QAAQ,6CACRd,QAAQ,YACRe,KAAK,SACLV,MAAM,SACNW,KAAK,YACLM,SAAUhE,GAAasB,QAAU,EACjCqC,QAAS,WAAQlD,IAAqB,gBAO5C,cAACwD,EAAA,EAAD,CAAgBb,UAAWjE,EAAQR,UAAnC,SACC,eAACuF,EAAA,EAAD,CAAOC,cAAY,EAACC,aAAW,eAAeC,KAAK,QAAnD,UACC,cAACC,EAAA,EAAD,UACC,eAACC,EAAA,EAAD,WACC,cAACC,EAAA,EAAD,CAAW1B,MAAO,CAAEO,QAAS,EAAG5E,MAAO,MACvC,cAAC+F,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,sCACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,oDACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,QAA1C,0CAGF,cAACC,EAAA,EAAD,UACE4D,EAAgB7R,KAAI,SAAAsS,GAAO,OAC3B,eAAC,IAAMC,SAAP,WACC,eAACzE,EAAA,EAAD,WACC,cAACC,EAAA,EAAD,CAAW1B,MAAO,CAAEO,QAAS,EAAG5E,MAAO,MACvC,cAAC+F,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAAO3B,MAAO,CAAEmG,WAAY,QAAtE,SAAiFF,EAAQpQ,OACzF,cAAC6L,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAAOyE,QAAS,EAAGpG,MAAO,CAAEmG,WAAY,QAAlF,SAA6FF,EAAQtO,iBAErGwB,EAAgB4F,QAAO,SAAApJ,GAAC,OAAIA,EAAE0C,cAAgB4N,EAAQpQ,QAAMlC,KAAI,SAACoJ,EAAM+C,GAAP,OAChE,eAAC2B,EAAA,EAAD,CACCzB,MAAO,CACN8B,gBAAiBoD,GAAUnI,EAAK1E,YAAa0E,EAAKzE,YAAa4E,IAAgB6E,IAAOC,IAAI,KAAO,WAFnG,UAKC,cAACN,EAAA,EAAD,CACC1B,MAAO,CACNO,QAAS,EACT5E,MAAO,GACPmG,gBAAiBoD,GAAUnI,EAAK1E,YAAa0E,EAAKzE,YAAa4E,IAAgB6E,IAAOC,IAAI,KAAOD,IAAOE,KAAK,MAE9GpB,QAAS,WAAQhC,GAAa9B,EAAK1E,YAAa0E,EAAKzE,gBAGtD,cAACoJ,EAAA,EAAD,CACCpB,UAAWjE,EAAQL,KACnB2F,MAAM,OACN3B,MAAO,CAAEqG,YAAa,OAAQnE,OAAQ,WACtCrB,QAAS,YA9QO,SAAC9D,GAC3B5F,GAAQ,CACPkB,YAAa0E,EAAK1E,YAClBC,YAAayE,EAAKzE,YAClBC,SAAUwE,EAAKxE,SAAS+N,aAEzB3J,GAAU,GACVF,GAAY,GAwQD0F,CAAmBpF,IALrB,SAQEA,EAAKzE,cAEP,cAACoJ,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAAO3B,MAAO,CAAEqG,YAAa,QAAvE,SAAkFtJ,EAAKgG,qBACvF,cAACrB,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,QAA1C,SAAmD5E,EAAKxE,aAzB1CuH,MA4BhB,eAAC2B,EAAA,EAAD,WACC,cAACC,EAAA,EAAD,CAAW1B,MAAO,CAAEO,QAAS,EAAG5E,MAAO,GAAImG,gBAAiBC,IAAOW,MAAM,QACzE,cAAChB,EAAA,EAAD,CACCpB,UAAWjE,EAAQL,KACnBoK,QAAS,EACTzE,MAAM,OACN3B,MAAO,CAAEkC,OAAQ,UAAWqE,UAAW,UACvC1F,QAAS,kBAzSWxI,EAySgB4N,EAAQpQ,KAxSrDsB,GAAQ,CACPmB,YAAa,GACbD,YAAaA,EACbE,SAAU,MAEXoE,GAAU,QACVF,GAAY,GAPgB,IAACpE,GAoSrB,wDArCmB4N,EAAQpQ,sB,cC3a/B2Q,GAA0B,0BAC1BC,GAAiC,iCACjCC,GAA0B,0BAoCjB,SAAS5B,GAAT,GAGS,IArCO6B,EAmC7BtT,EAEqB,EAFrBA,MACA2C,EACqB,EADrBA,SAGA,EAAwBC,IAAMC,SAA+B,IAA7D,mBAAOoB,EAAP,KAAayN,EAAb,KAEMC,EAAO,uCAAG,sBAAA3O,EAAA,2EAEZ0O,EAFY,SAEE6B,KAAqBzR,SAFvB,kFAKZ4P,EAAQ,IALI,yDAAH,qDAkCb,OAdA9O,IAAMM,WAAU,WACd,IAAM0O,EAnDO,WACf,IAAMpP,EAAOY,aAAaC,QAAQ8P,IAC5B7O,EAAclB,aAAaC,QAAQ+P,IACnCI,EAAOpQ,aAAaC,QAAQgQ,IAClC,OAAa,OAAT7Q,GAAiC,OAAhB8B,GAAiC,OAATkP,EACpC,KAGA,CACLhR,KAAMA,EACND,MAAM,IAAD,OAAMC,EAAN,aAAe8B,GACpBA,YAAaA,EACbkP,KAAMA,GAuCMlQ,GACA,OAAVsO,GACFjP,EAAS,CACPH,KAAMoP,EAAMpP,KACZ8B,YAAasN,EAAMtN,YACnBkP,KAAM5B,EAAM4B,OAGhB7B,MAGC,IAGD,cAAC,IAAD,CACEpO,UAAQ,EACRhB,MAAM,iBACNiB,SA/EyB8P,EA+EMrP,EA9E5BqP,EAAehT,KAAI,SAAAgC,GAMxB,OAL0B,2BACrBA,GADqB,IAExBC,MAAM,IAAD,OAAMD,EAAEE,KAAR,aAAiBF,EAAEgC,mBA4ExBb,YAAY,QACZzD,MAAiB,OAAVA,EAAiB,CACtBwC,KAAMxC,EAAMwC,KACZD,MAAM,IAAD,OAAMvC,EAAMwC,KAAZ,aAAqBxC,EAAMsE,aAChCA,YAAatE,EAAMsE,YACnBkP,KAAMxT,EAAMwT,MACV,KACJ9P,kBAAmB,SAACC,EAAGC,GAAJ,OAAUD,EAAEnB,OAASoB,EAAEpB,MAC1CG,SAtCiB,SAAC3C,GAtBP,IAACyT,EAuBA,OAAVzT,IACF2C,EAAS,CACPH,KAAMxC,EAAMwC,KACZ8B,YAAatE,EAAMsE,YACnBkP,KAAMxT,EAAMwT,OA3BFC,EA6BHzT,EA5BboD,aAAaU,QAAQqP,GAAyBM,EAAcjR,MAC5DY,aAAaU,QAAQsP,GAAgCK,EAAcnP,aACnElB,aAAaU,QAAQuP,GAAyBI,EAAcD,U,cCIxDrL,GAAYC,YAAW,CAC5BC,KAAM,CACLC,MAAO,OACPC,OAAQ,QAETC,UAAW,CACVC,UAAW,qBACXC,UAAW,UAEZC,KAAM,CACLC,SAAU,aAWNC,GAA0B,CAC/BzD,kBAAmB,GACnBH,YAAa,GACbI,SAAU,GACVH,SAAU,IAGL2M,GAAY,SAAC5M,EAAqBG,EAA2BnB,GAClE,YAAsG6N,IAA/F7N,EAAK8N,MAAK,SAAAzP,GAAC,OAAIA,EAAE2C,cAAgBA,GAAe3C,EAAE8C,oBAAsBA,MAGjE,SAASsO,KACvB,IAAM1K,EAAUb,KAEVc,EAAwBC,cAC9B,EAAgCtG,IAAMC,UAAS,GAA/C,mBAAOsG,EAAP,KAAiBC,EAAjB,KACA,EAA4BxG,IAAMC,UAAS,GAA3C,mBAAOwG,EAAP,KAAeC,EAAf,KAEA,EAA8B1G,IAAMC,SAA8B,MAAlE,mBAAOgB,EAAP,KAAgBkM,EAAhB,KACA,EAA0CnN,IAAMC,SAAoC,MAApF,mBAAO4Q,EAAP,KAAsBE,EAAtB,KAEA,EAAgC/Q,IAAMC,SAAyB,IAA/D,mBAAOgD,EAAP,KAAiB4D,EAAjB,KACA,EAA8C7G,IAAMC,SAAyB,IAA7E,mBAAO8G,EAAP,KAAwBC,EAAxB,KACA,EAA0BhH,IAAMC,SAA0B,IAA1D,mBAAOkD,EAAP,KAAc6N,GAAd,KACA,GAA0BhR,IAAMC,SAAoBgG,IAApD,qBAAOhB,GAAP,MAAcmI,GAAd,MAEA,GAAwCpN,IAAMC,SAA4B,IAA1E,qBAAOgH,GAAP,MAAqBC,GAArB,MAEA,GAAoDlH,IAAMC,UAAS,GAAnE,qBAAOkH,GAAP,MAA2BC,GAA3B,MACA,GAA4CpH,IAAMC,SAAyC,IAA3F,qBAAOoH,GAAP,MAAuBC,GAAvB,MAEA,GAA8BtH,IAAMC,SAAiB,IAArD,qBAAOsH,GAAP,MAAgBC,GAAhB,MACA,GAAkDxH,IAAMC,UAAS,GAAjE,qBAAOwH,GAAP,MAA0BC,GAA1B,MAEMC,GAAkB,uCAAG,sBAAAvH,EAAA,yDAC1BsH,IAAqB,GACL,OAAZzG,EAFsB,wBAGzBoF,EAASuB,iBAAeC,QAHC,kBAKlBoJ,KAAY9M,OAAOlD,EAAQrB,KAAMqH,IALf,OAMxBiK,KACAhK,GAAgB,IAChBb,EAAS2B,eAAaH,KAAKI,eAAaC,eAAgB,YARhC,kDAWxB7B,EAAS2B,eAAaH,KAAKI,eAAaE,eAAgB,UACxD9B,EAASuB,iBAAeQ,QAZA,0DAAH,qDAqBlBC,GAAsB,uCAAG,WAAOC,GAAP,SAAAlI,EAAA,2DAC1BkI,EAAMC,QAAU,GAAiB,OAAZtH,GADK,wBAE7BqG,GAAkB,IAClBjB,EAASuB,iBAAeC,QAHK,cAK5BP,GAL4B,SAKJ2J,KAAY5M,aAAapD,EAAQrB,KAAM0I,EAAM,IALzC,kCAM5B4I,KACA9J,IAAsB,GAPM,kDAU5Bf,EAASuB,iBAAeQ,QACxB/B,EAAS2B,eAAaH,KAAKI,eAAaE,eAAgB,UAX5B,0DAAH,sDAgBtB+I,GAAU,uCAAG,sBAAA9Q,EAAA,yDACF,OAAZa,EADc,wBAEjBoF,EAASuB,iBAAeC,QAFP,cAIhBmJ,GAJgB,SAIDC,KAAY/R,OAAO+B,EAAQrB,KAAMpB,IAAkBC,MAJlD,oFAOhB4H,EAAS2B,eAAaH,KAAKI,eAAac,cAAe,UAPvC,yBAUhB1C,EAASuB,iBAAeQ,QAVR,6EAAH,qDAeVL,GAAa,uCAAG,4BAAA3H,EAAA,yDACL,OAAZa,EADiB,wBAEpBoF,EAASuB,iBAAeC,QAFJ,kBAIA+H,QAAQC,IAAI,CAC9B/H,EAAezC,UAAUpE,EAAQrB,KAAMpB,IAAkBC,MACzDwS,KAAY/R,OAAO+B,EAAQrB,KAAMpB,IAAkBC,QANjC,OAIb4C,EAJa,OAQnBwF,EAAYxF,EAAK,IACjB2P,GAAS3P,EAAK,IATK,kDAYnBgF,EAAS2B,eAAaH,KAAKI,eAAac,cAAe,UAZpC,yBAenB1C,EAASuB,iBAAeQ,QAfL,6EAAH,qDAoBbI,GAAe,SAACC,GACrB2E,GAAS,2BAAKnI,IAAN,kBAAcwD,EAAMC,OAAO7I,KAAO4I,EAAMC,OAAOtL,UA6BlDuL,GAAY,uCAAG,8BAAAvI,EAAA,yDACpBoG,GAAY,GACI,OAAZvF,EAFgB,oBAGnBoF,EAASuB,iBAAeC,QAHL,UAKdpB,EALc,wBAMXpF,EAAkB,CACvBmB,kBAAmByC,GAAMzC,kBACzBH,YAAa4C,GAAM5C,YACnBI,SAAUwC,GAAMxC,SAChBH,SAAUyN,WAAW9K,GAAM3C,UAC3BjD,YAAa4B,EAAQrB,KACrBsG,cAAe1H,IAAkBC,MAZjB,SAcXwS,KAAY/L,KAAKjE,EAAQrB,KAAMqF,GAAMzC,kBAAmByC,GAAM5C,YAAahB,GAdhE,OAejBgF,EAAS2B,eAAaH,KAAKI,eAAaC,eAAgB,YACxDgJ,KAhBiB,2BAmBK,OAAlBL,EAnBa,wBAoBVxP,EAAkB,CACvBmB,kBAAmBqO,EAAcjR,KACjCyC,YAAa4C,GAAM5C,YACnBI,SAAUwC,GAAMxC,SAChBH,SAAUyN,WAAW9K,GAAM3C,UAC3BjD,YAAa4B,EAAQrB,KACrBsG,cAAe1H,IAAkBC,MA1BlB,UA4BVwS,KAAYjM,OAAO/D,EAAQrB,KAAMyB,GA5BvB,QA6BhBgF,EAAS2B,eAAaH,KAAKI,eAAaC,eAAgB,YACxDgJ,KA9BgB,0DAmClB7K,EAAS2B,eAAaH,KAAKI,eAAaE,eAAgB,UACxD9B,EAASuB,iBAAeQ,QApCN,0DAAH,qDAyCZQ,GAAY,uCAAG,WAAOvG,EAAqBG,GAA5B,SAAApC,EAAA,sDAChB6O,GAAU5M,EAAaG,EAAmByE,IAC7CC,GAAgBD,GAAa6B,QAAO,SAAApJ,GAAC,QAAMA,EAAE2C,cAAgBA,GAAe3C,EAAE8C,oBAAsBA,OAGpG0E,GAAgB,GAAD,mBAAKD,IAAL,CAAmB,CAAE5E,cAAaG,wBAL9B,2CAAH,wDAwBlB,OAfAxC,IAAMM,WAAU,WACfyH,OAEE,CAAC9G,IAEJjB,IAAMM,WAAU,WACf4G,GAAgB,MACd,CAAC/D,IAEJnD,IAAMM,WAAU,WACf0G,EACC/D,EAAS6F,QAAO,SAAApJ,GAAC,OAAI6H,GAAQyB,MAAM,KAAKC,OAAM,SAAAC,GAAC,OAAIxJ,EAAEgC,YAAYmH,SAASK,YAEzE,CAACjG,EAAUsE,KAGb,qCACC,cAAC,IAAD,CACC4B,KAAM1B,GACN2B,QAAS,WAAQ1B,IAAqB,IACtC2B,SAAU,WAAQ1B,MAClB2B,MAAM,gDAJP,SAMC,eAACC,EAAA,EAAD,CAAM3D,WAAS,EAAC4D,QAAS,EAAzB,UACC,cAACD,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAf,SACC,cAACC,EAAA,EAAD,CAAYC,QAAQ,QAApB,oKAIA1C,GAAavJ,KAAI,SAAAkM,GAAC,OAClB,cAACL,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAf,SACC,cAACC,EAAA,EAAD,CAAYC,QAAQ,YAApB,mBAAoCC,EAAEvH,YAAtC,cAAuDuH,EAAEpH,sBAD1D,UAA2BoH,EAAEvH,YAA7B,YAA4CuH,EAAEpH,4BAMjD,cAAC,IAAD,CACC2G,KAAMhC,GACNiC,QA7K4B,WAC9BhC,IAAsB,IA6KpBkC,MAAM,gDAHP,SAKC,cAACC,EAAA,EAAD,CAAM3D,WAAS,EAAC4D,QAAS,EAAzB,SACEnC,GAAe3J,KAAI,SAAC0C,EAAGyJ,GAAJ,OACnB,eAACN,EAAA,EAAD,CAAMzC,MAAI,EAAClB,WAAS,EAAC4D,QAAS,EAAGC,GAAI,GAArC,UACC,cAACF,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAIK,GAAI,EAAGC,MAAO,CAAEC,MAAO5J,EAAE6J,QAAU,QAAU,OAAhE,SACC,cAACP,EAAA,EAAD,CAAYC,QAAQ,YAApB,mBAAoCvJ,EAAE0G,KAAKtE,kBAA3C,YAAgEpC,EAAE0G,KAAKzE,iBAExE,cAACkH,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAIK,GAAI,EAAGC,MAAO,CAAEC,MAAO5J,EAAE6J,QAAU,QAAU,OAAhE,SACC,cAACP,EAAA,EAAD,CAAYC,QAAQ,UAApB,SAA+BvJ,EAAE8J,cALWL,UAWjD,cAAC,IAAD,CACCP,MAAM,8BACNH,KAAM5C,EACN6C,QArIqB,WACvB5C,GAAY,IAqIV6C,SAAUV,GAJX,SAMC,eAACY,EAAA,EAAD,CAAM3D,WAAS,EAAC4D,QAAS,EAAzB,UACC,cAACD,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAf,SACEhD,EACA,cAAC,IAAD,CACC5G,KAAK,oBACLF,MAAM,YACNwK,KAAK,OACLxJ,UAAQ,EACRsK,UAAQ,EACR7N,MAAO6H,GAAMzC,kBACbzC,SAAUyI,KAGX,cAAC,GAAD,CACCpL,MAAOyT,EACP9Q,SAAU,SAAC3C,GAAY2T,EAAiB3T,QAI3C,cAACmM,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAf,SACC,cAAC,IAAD,CACC5J,KAAK,cACLF,MAAM,+BACNwK,KAAK,OACLxJ,UAAQ,EACRsK,UAAQ,EACR7N,MAAO6H,GAAM5C,YACbtC,SAAUyI,OAGZ,cAACe,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAf,SACC,cAAC,IAAD,CACC5J,KAAK,WACLF,MAAM,YACNwK,KAAK,OACLxJ,UAAQ,EACRvD,MAAO6H,GAAMxC,SACb1C,SAAUyI,OAGZ,cAACe,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAf,SACC,cAAC,IAAD,CACC5J,KAAK,WACLF,MAAM,aACNwK,KAAK,SACLxJ,UAAQ,EACRvD,MAAO6H,GAAM3C,SACbvC,SAAUyI,YAKd,eAAC4B,EAAA,EAAD,CAAOC,UAAWjE,EAAQX,KAA1B,UACC,cAAC8D,EAAA,EAAD,CAAM3D,WAAS,EAAf,SACC,eAAC2D,EAAA,EAAD,CACC3D,WAAS,EACTkB,MAAI,EAAC2C,GAAI,GACTM,MAAO,CAAEO,QAAS,OAClBC,UAAU,MACVf,QAAS,EACTgB,WAAW,WANZ,UAQC,cAACjB,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAIK,GAAI,EAAvB,SACC,cAAChK,EAAA,EAAD,CACC1C,MAAO6D,EACPlB,SAAU,SAAC3C,GAAY+P,EAAW/P,QAGpC,cAACmM,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,GAAIK,GAAI,EAAvB,SACC,cAAC,IAAD,CACCjK,KAAK,UACLF,MAAM,mCACNwK,KAAK,OACL/M,MAAOmK,GACPxH,SAAU,SAAC0I,GAAYjB,GAAWiB,EAAMC,OAAOtL,YAGpC,OAAZ6D,GACA,eAACsI,EAAA,EAAD,CAAM3D,WAAS,EAAC4D,QAAS,EAAG1C,MAAI,EAAC2C,GAAI,GAAIe,WAAW,WAApD,UACC,cAACjB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC+D,WAAY,EACZvB,MAAM,0BACNwB,cAAe,CAAC,OAAQ,SACxBzB,SAAUhB,GACVoC,QAAQ,8BACRd,QAAQ,YACRe,KAAK,QACLV,MAAM,cAGR,cAACT,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC6C,QAAQ,YACRhK,MAAM,mBACNoL,SAAQ,UAAK9J,EAAQrB,KAAb,kBACRoL,IAAG,0DAAqD/J,EAAQrB,KAA7D,oBAA6EpB,IAAkBC,UAGpG,cAAC8K,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC2D,QAAQ,kBACRd,QAAQ,YACRe,KAAK,kBACLV,MAAM,UACNW,KAAK,WACLC,QAAS7C,OAGX,cAACwB,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC2D,QAAQ,oDACRd,QAAQ,YACRe,KAAK,SACLV,MAAM,SACNW,KAAK,YACLM,SAAUhE,GAAasB,QAAU,EACjCqC,QAAS,WAAQlD,IAAqB,gBAO5C,cAACwD,EAAA,EAAD,CAAgBb,UAAWjE,EAAQR,UAAnC,SACC,eAACuF,EAAA,EAAD,CAAOC,cAAY,EAACC,aAAW,eAAeC,KAAK,QAAnD,UACC,cAACC,EAAA,EAAD,UACC,eAACC,EAAA,EAAD,WACC,cAACC,EAAA,EAAD,CAAW1B,MAAO,CAAEO,QAAS,EAAG5E,MAAO,MACvC,cAAC+F,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,kCACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,iCACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,uBACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,SAA1C,mCACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,QAA1C,4CAGF,cAACC,EAAA,EAAD,UACE5E,EAAgBrJ,KAAI,SAAAkO,GAAO,OAC3B,eAAC,IAAMqE,SAAP,WACC,eAACzE,EAAA,EAAD,WACC,cAACC,EAAA,EAAD,CAAW1B,MAAO,CAAEO,QAAS,EAAG5E,MAAO,MACvC,cAAC+F,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAAO3B,MAAO,CAAEmG,WAAY,QAAtE,SAAiFtE,EAAQhM,OACzF,cAAC6L,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAAOyE,QAAS,EAAGpG,MAAO,CAAEmG,WAAY,QAAlF,SAA6FtE,EAAQlK,iBAErGyB,EAAM2F,QAAO,SAAApJ,GAAC,OAAIA,EAAE2C,cAAgBuJ,EAAQhM,QAAMlC,KAAI,SAACoJ,EAAM+C,GAAP,OACtD,eAAC2B,EAAA,EAAD,CACCzB,MAAO,CACN8B,gBAAiBoD,GAAUnI,EAAKzE,YAAayE,EAAKtE,kBAAmByE,IAAgB6E,IAAOC,IAAI,KAAO,WAFzG,UAKC,cAACN,EAAA,EAAD,CACC1B,MAAO,CACNO,QAAS,EACT5E,MAAO,GACPmG,gBAAiBoD,GAAUnI,EAAKzE,YAAayE,EAAKtE,kBAAmByE,IAAgB6E,IAAOC,IAAI,KAAOD,IAAOE,KAAK,MAEpHpB,QAAS,WAAQhC,GAAa9B,EAAKzE,YAAayE,EAAKtE,sBAGtD,cAACiJ,EAAA,EAAD,CACCpB,UAAWjE,EAAQL,KACnB2F,MAAM,OACN3B,MAAO,CAAEqG,YAAa,OAAQnE,OAAQ,WACtCrB,QAAS,YA5RO,SAAC9D,GAC3BsG,GAAS,CACR5K,kBAAmBsE,EAAKtE,kBACxBH,YAAayE,EAAKzE,YAClBI,SAAUqE,EAAKrE,SACfH,SAAUwE,EAAKxE,SAAS+N,aAEzB3J,GAAU,GACVF,GAAY,GAqRD0F,CAAmBpF,IALrB,SAQEA,EAAKtE,oBAEP,cAACiJ,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAAO3B,MAAO,CAAEqG,YAAa,QAAvE,SAAkFtJ,EAAKkG,2BACvF,cAACvB,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,SAAkD5E,EAAKrE,WACvD,cAACgJ,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,SAA1C,SAAoD5E,EAAKmG,oBACzD,cAACxB,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,QAA1C,SAAmD5O,IAAOe,YAAYiJ,EAAKxE,SAAU,OA3BvEuH,MA8BhB,eAAC2B,EAAA,EAAD,WACC,cAACC,EAAA,EAAD,CAAW1B,MAAO,CAAEO,QAAS,EAAG5E,MAAO,GAAImG,gBAAiBC,IAAOW,MAAM,QACzE,cAAChB,EAAA,EAAD,CACCpB,UAAWjE,EAAQL,KACnBoK,QAAS,EACTzE,MAAM,OACN3B,MAAO,CAAEkC,OAAQ,UAAWqE,UAAW,UACvC1F,QAAS,kBA1TWvI,EA0TgBuJ,EAAQhM,KAzTrDwN,GAAS,CACR5K,kBAAmB,GACnBH,YAAaA,EACbI,SAAU,GACVH,SAAU,MAEXoE,GAAU,QACVF,GAAY,GARgB,IAACnE,GAqTrB,oDAvCmBuJ,EAAQhM,sBC/arC,IAAM2F,GAAYC,YAAW,CAC5BC,KAAM,CACLC,MAAO,OACPC,OAAQ,QAETC,UAAW,CACVC,UAAW,qBACXC,UAAW,UAEZC,KAAM,CACLC,SAAU,aAIG,SAASG,KACvB,IAAMC,EAAUb,KAChB,EAA8C4L,cAAtC9R,EAAR,EAAQA,YAAa6G,EAArB,EAAqBA,cACfG,EAAwBC,cAE9B,EAAgCtG,IAAMC,SAA6B,IAAnE,mBAAOgD,EAAP,KAAiB4D,EAAjB,KAEMkB,EAAa,uCAAG,sBAAA3H,EAAA,6DACrBiG,EAASuB,iBAAeC,QADH,cAGpBhB,EAHoB,SAGFiB,EAAe5I,OAAOG,EAAa6G,GAHjC,kFAMpBW,EAAY,IACZR,EAAS2B,eAAaH,KAAKI,eAAac,cAAe,UAPnC,yBAUpB1C,EAASuB,iBAAeQ,QAVJ,4EAAH,qDAmBnB,OALApI,IAAMM,WAAU,WACfyH,MAEE,CAAC1I,EAAa6G,IAGhB,eAACkE,EAAA,EAAD,CAAOC,UAAWjE,EAAQX,KAA1B,UACC,cAAC8D,EAAA,EAAD,CAAM3D,WAAS,EAAf,SACC,eAAC2D,EAAA,EAAD,CACC3D,WAAS,EACTkB,MAAI,EAAC2C,GAAI,GACTM,MAAO,CAAEO,QAAS,OAClBC,UAAU,MACVf,QAAS,EACTgB,WAAW,WANZ,UAQC,cAACjB,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,EAAf,SACC,cAACC,EAAA,EAAD,CAAYC,QAAQ,KAApB,kCAAoCtK,OAErC,cAACkK,EAAA,EAAD,CAAMzC,MAAI,EAAC2C,GAAI,EAAf,SACC,cAACC,EAAA,EAAD,CAAYC,QAAQ,KAApB,sCAAwCzD,OAEzC,cAACqD,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC6C,QAAQ,YACRhK,MAAM,mBACNoL,SAAQ,UAAK1L,EAAL,YAAoB6G,EAApB,mBACR8E,IAAG,6DAAwD3L,EAAxD,oBAA+E6G,OAGpF,cAACqD,EAAA,EAAD,CAAMzC,MAAI,EAAV,SACC,cAAC,IAAD,CACC2D,QAAQ,kBACRd,QAAQ,YACRe,KAAK,kBACLV,MAAM,UACNW,KAAK,WACLC,QAAS7C,WAKb,cAACmD,EAAA,EAAD,CAAgBb,UAAWjE,EAAQR,UAAnC,SACC,eAACuF,EAAA,EAAD,CAAOC,cAAY,EAACC,aAAW,eAAeC,KAAK,QAAnD,UACC,cAACC,EAAA,EAAD,UACC,eAACC,EAAA,EAAD,WACC,cAACC,EAAA,EAAD,CAAW1B,MAAO,CAAEO,QAAS,EAAG5E,MAAO,MACvC,cAAC+F,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,0CACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,iCACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,wBACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,gCACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,QAA1C,qCACA,cAACD,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,QAA1C,iCAGF,cAACC,EAAA,EAAD,UACE1I,EAASvF,KAAI,SAAAkO,GAAO,OACpB,eAACJ,EAAA,EAAD,WACC,cAACC,EAAA,EAAD,CACC1B,MAAO,CACNO,QAAS,EACT5E,MAAO,GACPmG,gBAAiBC,IAAOE,KAAK,QAI/B,cAACP,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,SAAkDE,EAAQhM,OAC1D,cAAC6L,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,SAAkDE,EAAQlK,cAC1D,cAAC+J,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,SAAkDE,EAAQ3J,OAC1D,cAACwJ,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,OAA1C,SACC,mBACCS,KAAMP,EAAQ1J,SACd6H,MAAO,CACNqC,eAAgB,QAEjB1D,OAAO,SACP2D,IAAI,aANL,kCAWD,cAACZ,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,QAA1C,SAAmDE,EAAQU,eAC3D,cAACb,EAAA,EAAD,CAAWpB,UAAWjE,EAAQL,KAAM2F,MAAM,QAA1C,SAAmDE,EAAQW,cAzB7CX,EAAQhM,mBC9Gf,SAASwR,KACtB,IAAQC,EAASC,cAATD,KAER,OACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOA,KAAI,UAAKA,EAAL,aAAsBE,UAAWpL,IAC5C,cAAC,IAAD,CAAOkL,KAAI,UAAKA,EAAL,qBAA8BE,UAAWnC,KACpD,cAAC,IAAD,CAAOiC,KAAI,UAAKA,EAAL,UAAmBE,UAAWT,KACzC,cAAC,IAAD,CAAOO,KAAI,UAAKA,EAAL,YAAqBE,UAAWrE,IAC3C,cAAC,IAAD,CAAOmE,KAAI,UAAKA,EAAL,aAAsBE,UAAWlD,IAC5C,cAAC,IAAD,CAAOgD,KAAI,UAAKA,EAAL,sDAA+DE,UAAWC","file":"static/js/9.60e7fa30.chunk.js","sourcesContent":["function formatDate(date: Date, formatString = 'dd/MM/yyyy'): string {\n  let result = formatString;\n\n  const format = [\n    {\n      symbol: 'dd',\n      value: date.getDate() < 10 ? `0${date.getDate()}` : date.getDate(),\n    },\n    {\n      symbol: 'MM',\n      value: date.getMonth() + 1 < 10 ? `0${date.getMonth() + 1}` : `${date.getMonth() + 1}`,\n    },\n    {\n      symbol: 'yyyy',\n      value: date.getFullYear(),\n    },\n    {\n      symbol: 'hh',\n      value: date.getHours() < 10 ? `0${date.getHours()}` : date.getHours(),\n    },\n    {\n      symbol: 'mm',\n      value: date.getMinutes() < 10 ? `0${date.getMinutes()}` : date.getMinutes(),\n    },\n  ];\n\n  format.map((f) => {\n    result = result.replace(f.symbol, f.value as string);\n    return f.symbol;\n  });\n\n  return result;\n}\n\nfunction formatMoney(value: number, frac = 0): string {\n  const numberFormat = new Intl.NumberFormat('vi-VN', { maximumFractionDigits: frac, minimumFractionDigits: frac });\n  return numberFormat.format(value);\n}\n\nconst format = {\n  formatDate,\n  formatMoney,\n};\n\nexport default format;\n","export const changeStatusEnum = {\n  CREATE: 1,\n  UPDATE: 2,\n  DELETE: 3,\n};\n\nexport const versionNumberEnum = {\n  PACK: -1,\n  POST: 0,\n}\n\nexport const branchEnum = {\n  PLANNER: 1,\n  DESIGNER: 2,\n  ESTIMATOR: 3,\n  SUPERVISOR: 4,\n}\n\nexport type TrackingChangeModel<T> = {\n  pack: T | null;\n  post: T | null;\n  status: number;\n};\n\nexport type AddFromExcelModel<T> = {\n  item: T;\n  isAdded: boolean;\n  message: string;\n};","import axios from 'axios';\n\nconst apiUrl = '/api/project-system/projects';\n\nexport type ProjectModel = {\n  code: string;\n  name: string;\n}\n\nfunction getAll(): Promise<ProjectModel[]> {\n  return axios.get(apiUrl);\n}\n\nfunction get(projectCode: string): Promise<ProjectModel> {\n  return axios.get(`${apiUrl}/${projectCode}`);\n}\n\nconst service = {\n  getAll,\n  get,\n};\n\nexport default service;\n","import React from 'react';\n\nimport {\n  ComboBox,\n} from '@nvdunginest/emis-mui';\n\nimport projectService, {\n  ProjectModel,\n} from '../services/project';\n\ntype ComboBoxType = ProjectModel & {\n  label: string;\n}\n\ntype Props = {\n  value: ProjectModel | null;\n  onChange: (value: ProjectModel) => void;\n}\n\nconst PROJECT_CODE_KEY = 'PROJECT_CODE_KEY';\nconst PROJECT_NAME_KEY = 'PROJECT_NAME_KEY';\n\nconst renderComboBoxOptions = (projects: ProjectModel[]): ComboBoxType[] => {\n  return projects.map(x => {\n    const result: ComboBoxType = {\n      ...x,\n      label: `[${x.code}]-${x.name}`,\n    }\n\n    return result;\n  })\n}\n\nconst getCache = (): ComboBoxType | null => {\n  const code = localStorage.getItem(PROJECT_CODE_KEY);\n  const name = localStorage.getItem(PROJECT_NAME_KEY);\n  if (code === null || name === null) {\n    return null;\n  }\n  else {\n    return {\n      code: code,\n      name: name,\n      label: `[${code}]-${name}`,\n    };\n  }\n}\n\nconst setCache = (project: ComboBoxType) => {\n  localStorage.setItem(PROJECT_CODE_KEY, project.code);\n  localStorage.setItem(PROJECT_NAME_KEY, project.name);\n}\n\nexport default function ProjectsComboBox({\n  value,\n  onChange,\n}: Props): JSX.Element {\n\n  const [projects, setProjects] = React.useState<ProjectModel[]>([]);\n\n  const getProjects = async () => {\n    try {\n      setProjects(await projectService.getAll());\n    }\n    catch {\n      setProjects([]);\n    }\n  }\n\n  const handleProjectChange = (value: ComboBoxType | null) => {\n    if (value !== null) {\n      onChange({\n        code: value.code,\n        name: value.name,\n      });\n      setCache(value);\n    }\n  }\n\n  React.useEffect(() => {\n    const cacheProject = getCache();\n    if (cacheProject !== null) {\n      onChange({\n        code: cacheProject.code,\n        name: cacheProject.name,\n      });\n    }\n    getProjects();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <ComboBox\n      required\n      label=\"Dự án\"\n      options={renderComboBoxOptions(projects)}\n      optionLabel=\"label\"\n      value={value !== null ? { code: value.code, name: value.name, label: `[${value.code}]-${value.name}`, } : null}\n      getOptionSelected={(o, v) => o.code === v.code}\n      onChange={handleProjectChange}\n    />\n  );\n}\n","import {\n  changeStatusEnum,\n  TrackingChangeModel,\n} from '../services/common';\n\nimport {\n  PlannerCommit,\n  PlannerTrackingChangeModel,\n  DesignerCommit,\n  DesignerTrackingChangeModel,\n  EstimatorCommit,\n  EstimatorTrackingChangeModel,\n  SupervisorCommit,\n  SupervisorTrackingChangeModel,\n} from '../services/commit';\n\nimport {\n  ElementModel,\n  CommittedElementModel,\n} from '../services/element';\n\nimport {\n  ClusterViewModel,\n  CommittedClusterModel,\n} from '../services/cluster';\n\nimport {\n  ElementClusterViewModel,\n  CommittedElementClusterModel,\n} from '../services/elementCluster';\n\nimport {\n  ItemViewModel,\n  CommittedItemModel,\n} from '../services/item';\n\nimport {\n  ResourceViewModel,\n  CommittedResourceModel,\n} from '../services/resource';\n\nimport {\n  ConfirmationModel,\n  CommittedConfirmationModel,\n} from '../services/confirmation';\n\nconst getCommitterElements = (data: TrackingChangeModel<ElementModel>[]): CommittedElementModel[] => {\n  return data.map(e => {\n    if (e.pack === null && e.post !== null)\n      return {\n        code: e.post.code,\n        commitNumber: 0,\n        description: e.post.description,\n        finish: e.post.finish,\n        level: e.post.level,\n        projectCode: e.post.projectCode,\n        start: e.post.start,\n        status: changeStatusEnum.DELETE,\n      };\n\n    if (e.pack !== null && e.post === null)\n      return {\n        code: e.pack.code,\n        commitNumber: 0,\n        description: e.pack.description,\n        finish: e.pack.finish,\n        level: e.pack.level,\n        projectCode: e.pack.projectCode,\n        start: e.pack.start,\n        status: changeStatusEnum.CREATE,\n      };\n\n    if (e.pack !== null && e.post !== null)\n      return {\n        code: e.pack.code,\n        commitNumber: 0,\n        description: e.pack.description,\n        finish: e.pack.finish,\n        level: e.pack.level,\n        projectCode: e.pack.projectCode,\n        start: e.pack.start,\n        status: changeStatusEnum.UPDATE,\n      };\n\n    return {\n      code: '',\n      commitNumber: 0,\n      description: '',\n      finish: new Date(),\n      level: 1,\n      projectCode: '',\n      start: new Date(),\n      status: changeStatusEnum.UPDATE,\n    };\n  })\n}\n\nconst getCommitterClusters = (data: TrackingChangeModel<ClusterViewModel>[]): CommittedClusterModel[] => {\n  return data.map(e => {\n    if (e.pack === null && e.post !== null)\n      return {\n        code: e.post.code,\n        commitNumber: 0,\n        description: e.post.description,\n        projectCode: e.post.projectCode,\n        note: e.post.note,\n        filePath: e.post.filePath,\n        status: changeStatusEnum.DELETE,\n      };\n\n    if (e.pack !== null && e.post === null)\n      return {\n        code: e.pack.code,\n        commitNumber: 0,\n        description: e.pack.description,\n        projectCode: e.pack.projectCode,\n        note: e.pack.note,\n        filePath: e.pack.filePath,\n        status: changeStatusEnum.CREATE,\n      };\n\n    if (e.pack !== null && e.post !== null)\n      return {\n        code: e.pack.code,\n        commitNumber: 0,\n        description: e.pack.description,\n        projectCode: e.pack.projectCode,\n        note: e.pack.note,\n        filePath: e.pack.filePath,\n        status: changeStatusEnum.UPDATE,\n      };\n\n    return {\n      code: '',\n      commitNumber: 0,\n      description: '',\n      projectCode: '',\n      note: '',\n      filePath: '',\n      status: changeStatusEnum.UPDATE,\n    };\n  })\n}\n\nconst getCommitterElementClusters = (data: TrackingChangeModel<ElementClusterViewModel>[]): CommittedElementClusterModel[] => {\n  return data.map(e => {\n    if (e.pack === null && e.post !== null)\n      return {\n        elementCode: e.post.elementCode,\n        clusterCode: e.post.clusterCode,\n        quantity: e.post.quantity,\n        commitNumber: 0,\n        projectCode: e.post.projectCode,\n        status: changeStatusEnum.DELETE,\n      };\n\n    if (e.pack !== null && e.post === null)\n      return {\n        elementCode: e.pack.elementCode,\n        clusterCode: e.pack.clusterCode,\n        quantity: e.pack.quantity,\n        commitNumber: 0,\n        projectCode: e.pack.projectCode,\n        status: changeStatusEnum.CREATE,\n      };\n\n    if (e.pack !== null && e.post !== null)\n      return {\n        elementCode: e.pack.elementCode,\n        clusterCode: e.pack.clusterCode,\n        quantity: e.pack.quantity,\n        commitNumber: 0,\n        projectCode: e.pack.projectCode,\n        status: changeStatusEnum.UPDATE,\n      };\n\n    return {\n      elementCode: '',\n      clusterCode: '',\n      quantity: 1,\n      commitNumber: 0,\n      projectCode: '',\n      status: changeStatusEnum.UPDATE,\n    };\n  })\n}\n\nconst getCommitterItems = (data: TrackingChangeModel<ItemViewModel>[]): CommittedItemModel[] => {\n  return data.map(e => {\n    if (e.pack === null && e.post !== null)\n      return {\n        serviceMasterCode: e.post.serviceMasterCode,\n        clusterCode: e.post.clusterCode,\n        billCode: e.post.billCode,\n        quantity: e.post.quantity,\n        commitNumber: 0,\n        projectCode: e.post.projectCode,\n        status: changeStatusEnum.DELETE,\n      };\n\n    if (e.pack !== null && e.post === null)\n      return {\n        serviceMasterCode: e.pack.serviceMasterCode,\n        clusterCode: e.pack.clusterCode,\n        billCode: e.pack.billCode,\n        quantity: e.pack.quantity,\n        commitNumber: 0,\n        projectCode: e.pack.projectCode,\n        status: changeStatusEnum.CREATE,\n      };\n\n    if (e.pack !== null && e.post !== null)\n      return {\n        serviceMasterCode: e.pack.serviceMasterCode,\n        clusterCode: e.pack.clusterCode,\n        billCode: e.pack.billCode,\n        quantity: e.pack.quantity,\n        commitNumber: 0,\n        projectCode: e.pack.projectCode,\n        status: changeStatusEnum.UPDATE,\n      };\n\n    return {\n      serviceMasterCode: '',\n      clusterCode: '',\n      billCode: '',\n      quantity: 1,\n      commitNumber: 0,\n      projectCode: '',\n      status: changeStatusEnum.UPDATE,\n    };\n  })\n}\n\nconst getCommitterResources = (data: TrackingChangeModel<ResourceViewModel>[]): CommittedResourceModel[] => {\n  return data.map(e => {\n    if (e.pack === null && e.post !== null)\n      return {\n        serviceMasterCode: e.post.serviceMasterCode,\n        materialCode: e.post.materialCode,\n        quantity: e.post.quantity,\n        commitNumber: 0,\n        projectCode: e.post.projectCode,\n        status: changeStatusEnum.DELETE,\n      };\n\n    if (e.pack !== null && e.post === null)\n      return {\n        serviceMasterCode: e.pack.serviceMasterCode,\n        materialCode: e.pack.materialCode,\n        quantity: e.pack.quantity,\n        commitNumber: 0,\n        projectCode: e.pack.projectCode,\n        status: changeStatusEnum.CREATE,\n      };\n\n    if (e.pack !== null && e.post !== null)\n      return {\n        serviceMasterCode: e.pack.serviceMasterCode,\n        materialCode: e.pack.materialCode,\n        quantity: e.pack.quantity,\n        commitNumber: 0,\n        projectCode: e.pack.projectCode,\n        status: changeStatusEnum.UPDATE,\n      };\n\n    return {\n      serviceMasterCode: '',\n      materialCode: '',\n      quantity: 1,\n      commitNumber: 0,\n      projectCode: '',\n      status: changeStatusEnum.UPDATE,\n    };\n  })\n}\n\nconst getCommitterConfirmations = (data: TrackingChangeModel<ConfirmationModel>[]): CommittedConfirmationModel[] => {\n  return data.map(e => {\n    if (e.pack === null && e.post !== null)\n      return {\n        elementCode: e.post.elementCode,\n        postingDate: e.post.postingDate,\n        commitNumber: 0,\n        projectCode: e.post.projectCode,\n        status: changeStatusEnum.DELETE,\n      };\n\n    if (e.pack !== null && e.post === null)\n      return {\n        elementCode: e.pack.elementCode,\n        postingDate: e.pack.postingDate,\n        commitNumber: 0,\n        projectCode: e.pack.projectCode,\n        status: changeStatusEnum.CREATE,\n      };\n\n    if (e.pack !== null && e.post !== null)\n      return {\n        elementCode: e.pack.elementCode,\n        postingDate: e.pack.postingDate,\n        commitNumber: 0,\n        projectCode: e.pack.projectCode,\n        status: changeStatusEnum.UPDATE,\n      };\n\n    return {\n      elementCode: '',\n      postingDate: new Date(),\n      commitNumber: 0,\n      projectCode: '',\n      status: changeStatusEnum.UPDATE,\n    };\n  })\n}\n\nexport const getPlannerCommitData = (data: PlannerTrackingChangeModel): PlannerCommit => {\n  return {\n    elements: getCommitterElements(data.elements),\n  }\n}\n\nexport const getDesignerCommitData = (data: DesignerTrackingChangeModel): DesignerCommit => {\n  return {\n    clusters: getCommitterClusters(data.clusters),\n    elementClusters: getCommitterElementClusters(data.elementClusters),\n    items: getCommitterItems(data.items),\n  }\n}\n\nexport const getEstimatorCommitData = (data: EstimatorTrackingChangeModel): EstimatorCommit => {\n  return {\n    resources: getCommitterResources(data.resources),\n  }\n}\n\nexport const getSupervisorCommitData = (data: SupervisorTrackingChangeModel): SupervisorCommit => {\n  return {\n    confirmations: getCommitterConfirmations(data.confirmations),\n  }\n}","import axios from 'axios';\nimport {\n  TrackingChangeModel,\n} from './common';\n\nimport {\n  ElementModel,\n  CommittedElementModel,\n} from './element';\n\nimport {\n  ClusterViewModel,\n  CommittedClusterModel,\n} from './cluster';\n\nimport {\n  ElementClusterViewModel,\n  CommittedElementClusterModel,\n} from './elementCluster';\n\nimport {\n  ItemViewModel,\n  CommittedItemModel,\n} from './item';\n\nimport {\n  ResourceViewModel,\n  CommittedResourceModel,\n} from './resource';\n\nimport {\n  ConfirmationModel,\n  CommittedConfirmationModel,\n} from '../services/confirmation';\n\nconst apiUrl = '/api/project-system/commits';\n\nexport type PlannerTrackingChangeModel = {\n  elements: TrackingChangeModel<ElementModel>[];\n}\n\nexport type DesignerTrackingChangeModel = {\n  clusters: TrackingChangeModel<ClusterViewModel>[];\n  elementClusters: TrackingChangeModel<ElementClusterViewModel>[];\n  items: TrackingChangeModel<ItemViewModel>[];\n}\n\nexport type EstimatorTrackingChangeModel = {\n  resources: TrackingChangeModel<ResourceViewModel>[];\n}\n\nexport type SupervisorTrackingChangeModel = {\n  confirmations: TrackingChangeModel<ConfirmationModel>[];\n}\n\nexport type Commit = {\n  number: number;\n  projectCode: string;\n  branch: number;\n  description: string;\n  createdBy: string;\n  createdByFullName: string;\n  createdTime: Date;\n}\n\nexport type PlannerCommit = {\n  elements: CommittedElementModel[];\n}\n\nexport type DesignerCommit = {\n  clusters: CommittedClusterModel[];\n  elementClusters: CommittedElementClusterModel[];\n  items: CommittedItemModel[];\n}\n\nexport type EstimatorCommit = {\n  resources: CommittedResourceModel[];\n}\n\nexport type SupervisorCommit = {\n  confirmations: CommittedConfirmationModel[];\n}\n\nexport type AddCommitModel<T> = {\n  header: Commit;\n  detail: T;\n}\n\nfunction plannerTrackingChange(projectCode: string): Promise<PlannerTrackingChangeModel> {\n  return axios.get(`${apiUrl}/planner-tracking-change?projectCode=${projectCode}`);\n}\n\nfunction designerTrackingChange(projectCode: string): Promise<DesignerTrackingChangeModel> {\n  return axios.get(`${apiUrl}/designer-tracking-change?projectCode=${projectCode}`);\n}\n\nfunction estimatorTrackingChange(projectCode: string): Promise<EstimatorTrackingChangeModel> {\n  return axios.get(`${apiUrl}/estimator-tracking-change?projectCode=${projectCode}`);\n}\n\nfunction supervisorTrackingChange(projectCode: string): Promise<SupervisorTrackingChangeModel> {\n  return axios.get(`${apiUrl}/supervisor-tracking-change?projectCode=${projectCode}`);\n}\n\nfunction plannerCommit(projectCode: string, data: AddCommitModel<PlannerCommit>): Promise<unknown> {\n  return axios.post(`${apiUrl}/planner-commit?projectCode=${projectCode}`, data);\n}\n\nfunction designerCommit(projectCode: string, data: AddCommitModel<DesignerCommit>): Promise<unknown> {\n  return axios.post(`${apiUrl}/designer-commit?projectCode=${projectCode}`, data);\n}\n\nfunction estimatorCommit(projectCode: string, data: AddCommitModel<EstimatorCommit>): Promise<unknown> {\n  return axios.post(`${apiUrl}/estimator-commit?projectCode=${projectCode}`, data);\n}\n\nfunction supervisorCommit(projectCode: string, data: AddCommitModel<SupervisorCommit>): Promise<unknown> {\n  return axios.post(`${apiUrl}/supervisor-commit?projectCode=${projectCode}`, data);\n}\n\nconst service = {\n  plannerTrackingChange,\n  designerTrackingChange,\n  estimatorTrackingChange,\n  supervisorTrackingChange,\n  plannerCommit,\n  designerCommit,\n  estimatorCommit,\n  supervisorCommit,\n};\n\nexport default service;\n","import axios from 'axios';\n\nimport {\n  AddFromExcelModel,\n} from './common';\n\nconst apiUrl = '/api/project-system/elements';\n\nexport type ElementBase = {\n  code: string;\n  level: number;\n  description: string;\n  start: Date;\n  finish: Date;\n  projectCode: string;\n}\n\nexport type ElementModel = ElementBase & {\n  versionNumber: number;\n}\n\nexport type CommittedElementModel = ElementBase & {\n  commitNumber: number;\n  status: number;\n}\n\nexport type Breadcrumb = {\n  text: string;\n  code: string;\n  level: number;\n}\n\nexport type ChildrenElement = ElementModel & {\n  isLeaf: boolean;\n}\n\nexport type ElementViewModel = ElementModel & {\n  breadcrumbs: Breadcrumb[];\n  children: ChildrenElement[];\n}\n\nfunction getAll(projectCode: string, version: number): Promise<ElementModel[]> {\n  return axios.get(`${apiUrl}?projectCode=${projectCode}&version=${version}`);\n}\n\nfunction getDetail(projectCode: string, version: number, elementCode = ''): Promise<ElementViewModel> {\n  return elementCode === '' ? axios.get(`${apiUrl}/get-detail?projectCode=${projectCode}&version=${version}`) :\n    axios.get(`${apiUrl}/get-detail?projectCode=${projectCode}&version=${version}&elementCode=${elementCode}`);\n}\n\nfunction getLeaf(projectCode: string, version: number): Promise<ElementModel[]> {\n  return axios.get(`${apiUrl}/get-leaf?projectCode=${projectCode}&version=${version}`);\n}\n\nfunction remove(projectCode: string, elementCodes: string[]): Promise<unknown> {\n  return axios.post(`${apiUrl}/delete?projectCode=${projectCode}`, elementCodes);\n}\n\nfunction addFromExcel(projectCode: string, file: File): Promise<AddFromExcelModel<ElementModel>[]> {\n  const formData = new FormData();\n  formData.append('files', file, file.name);\n\n  return axios.post(\n    `${apiUrl}/addFromExcel?projectCode=${projectCode}`,\n    formData,\n    {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    },\n  );\n}\n\nconst service = {\n  getAll,\n  getDetail,\n  getLeaf,\n  remove,\n  addFromExcel,\n};\n\nexport default service;\n","import axios from 'axios';\n\nconst apiUrl = '/api/project-system/versions';\n\nexport type VersionModel = {\n  number: number;\n  projectCode: string;\n  branch: number;\n  description: string;\n  createdBy: string;\n  createdByFullName: string;\n  createdDate: Date;\n}\n\nfunction getAll(projectCode: string, branch: number): Promise<VersionModel[]> {\n  return axios.get(`${apiUrl}?projectCode=${projectCode}&branch=${branch}`);\n}\n\nfunction createPlannerVersion(projectCode: string, data: VersionModel): Promise<unknown> {\n  return axios.post(`${apiUrl}/create-planner-version?projectCode=${projectCode}`, data);\n}\n\nfunction createDesignerVersion(projectCode: string, data: VersionModel): Promise<unknown> {\n  return axios.post(`${apiUrl}/create-designer-version?projectCode=${projectCode}`, data);\n}\n\nconst service = {\n  getAll,\n  createPlannerVersion,\n  createDesignerVersion,\n};\n\nexport default service;\n","import axios from 'axios';\n\nimport {\n  AddFromExcelModel,\n} from './common';\n\nconst apiUrl = '/api/project-system/items';\n\nexport type ItemBase = {\n  clusterCode: string;\n  serviceMasterCode: string;\n  billCode: string;\n  quantity: number;\n  projectCode: string;\n}\n\nexport type ItemModel = ItemBase & {\n  versionNumber: number;\n}\n\nexport type CommittedItemModel = ItemBase & {\n  commitNumber: number;\n  status: number;\n}\n\nexport type ItemViewModel = ItemModel & {\n  serviceMasterDescription: string;\n  serviceMasterUnit: string;\n  clusterDescription: string;\n}\n\nexport type ItemRemoveModel = {\n  clusterCode: string;\n  serviceMasterCode: string;\n}\n\nfunction getAll(projectCode: string, version: number): Promise<ItemViewModel[]> {\n  return axios.get(`${apiUrl}?projectCode=${projectCode}&version=${version}`);\n}\n\nfunction getDistinct(projectCode: string, version: number): Promise<ItemViewModel[]> {\n  return axios.get(`${apiUrl}/get-distinct?projectCode=${projectCode}&version=${version}`);\n}\n\nfunction getCollective(projectCode: string, version: number): Promise<ItemViewModel[]> {\n  return axios.get(`${apiUrl}/get-collective?projectCode=${projectCode}&version=${version}`);\n}\n\nfunction create(projectCode: string, model: ItemModel): Promise<unknown> {\n  return axios.post(`${apiUrl}?projectCode=${projectCode}`, model);\n}\n\nfunction edit(projectCode: string, serviceMasterCode: string, clusterCode: string, model: ItemModel): Promise<unknown> {\n  return axios.put(`${apiUrl}?projectCode=${projectCode}&serviceMasterCode=${serviceMasterCode}&clusterCode=${clusterCode}`, model);\n}\n\nfunction remove(projectCode: string, models: ItemRemoveModel[]): Promise<unknown> {\n  return axios.post(`${apiUrl}/delete?projectCode=${projectCode}`, models);\n}\n\nfunction addFromExcel(projectCode: string, file: File): Promise<AddFromExcelModel<ItemModel>[]> {\n  const formData = new FormData();\n  formData.append('files', file, file.name);\n\n  return axios.post(\n    `${apiUrl}/addFromExcel?projectCode=${projectCode}`,\n    formData,\n    {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    },\n  );\n}\n\nconst service = {\n  getAll,\n  getCollective,\n  getDistinct,\n  create,\n  edit,\n  remove,\n  addFromExcel,\n};\n\nexport default service;\n","import axios from 'axios';\n\nimport {\n  AddFromExcelModel,\n} from './common';\n\nconst apiUrl = '/api/project-system/clusters';\n\nexport type ClusterBase = {\n  code: string;\n  description: string;\n  note: string;\n  filePath: string;\n  projectCode: string;\n}\n\nexport type ClusterModel = ClusterBase & {\n  versionNumber: number;\n}\n\nexport type CommittedClusterModel = ClusterBase & {\n  commitNumber: number;\n  status: number;\n}\n\nexport type ClusterViewModel = ClusterModel & {\n  elementCount: number;\n  itemCount: number;\n}\n\nfunction getAll(projectCode: string, version: number): Promise<ClusterViewModel[]> {\n  return axios.get(`${apiUrl}?projectCode=${projectCode}&version=${version}`);\n}\n\nfunction getSimple(projectCode: string, version: number): Promise<ClusterModel[]> {\n  return axios.get(`${apiUrl}/simple?projectCode=${projectCode}&version=${version}`);\n}\n\nfunction create(projectCode: string, model: ClusterModel): Promise<unknown> {\n  return axios.post(`${apiUrl}?projectCode=${projectCode}`, model);\n}\n\nfunction edit(projectCode: string, clusterCode: string, model: ClusterModel): Promise<unknown> {\n  return axios.put(`${apiUrl}?projectCode=${projectCode}&clusterCode=${clusterCode}`, model);\n}\n\nfunction remove(projectCode: string, clusterCodes: string[]): Promise<unknown> {\n  return axios.post(`${apiUrl}/delete?projectCode=${projectCode}`, clusterCodes);\n}\n\nfunction addFromExcel(projectCode: string, file: File): Promise<AddFromExcelModel<ClusterModel>[]> {\n  const formData = new FormData();\n  formData.append('files', file, file.name);\n\n  return axios.post(\n    `${apiUrl}/addFromExcel?projectCode=${projectCode}`,\n    formData,\n    {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    },\n  );\n}\n\nconst service = {\n  getAll,\n  getSimple,\n  create,\n  edit,\n  remove,\n  addFromExcel,\n};\n\nexport default service;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n\tPaper,\n\tTable,\n\tTableBody,\n\tTableCell,\n\tTableContainer,\n\tTableHead,\n\tTableRow,\n\tGrid,\n\tTypography,\n\tcolors,\n} from '@material-ui/core';\nimport {\n\tFormDialog,\n\tTextField,\n\tIconButton,\n\tUploadButton,\n\tDownloadButton,\n} from '@nvdunginest/emis-mui';\n\nimport {\n\talertActions,\n\tloadingActions,\n\talertMessage,\n\tAppDispatch,\n} from '../../../core';\n\nimport ProjectComboBox from '../components/ProjectsComboBox';\n\nimport {\n\tProjectModel,\n} from '../services/project';\n\nimport {\n\tversionNumberEnum,\n\tAddFromExcelModel,\n} from '../services/common';\n\nimport clusterService, {\n\tClusterViewModel,\n\tClusterModel,\n} from '../services/cluster';\n\nconst useStyles = makeStyles({\n\troot: {\n\t\twidth: '100%',\n\t\theight: '100%',\n\t},\n\tcontainer: {\n\t\tmaxHeight: 'calc(100% - 120px)',\n\t\toverflowY: 'scroll',\n\t},\n\tcell: {\n\t\tfontSize: '0.75rem',\n\t},\n});\n\nconst initialState: ClusterModel = {\n\tcode: '',\n\tdescription: '',\n\tnote: '',\n\tprojectCode: '',\n\tfilePath: '',\n\tversionNumber: versionNumberEnum.PACK,\n}\n\nexport default function Clusters(): JSX.Element {\n\tconst classes = useStyles();\n\tconst dispatch: AppDispatch = useDispatch();\n\tconst [showForm, setShowForm] = React.useState(false);\n\tconst [isEdit, setIsEdit] = React.useState(false);\n\n\tconst [selectedProject, setSelectedProject] = React.useState<ProjectModel | null>(null);\n\n\tconst [clusters, setClusters] = React.useState<ClusterViewModel[]>([]);\n\tconst [item, setItem] = React.useState<ClusterModel>(initialState);\n\n\tconst [displayClusters, setDisplayClusters] = React.useState<ClusterViewModel[]>([]);\n\n\tconst [selectedList, setSelectedList] = React.useState<string[]>([]);\n\n\tconst [showAddExcelResult, setShowAddExcelResult] = React.useState(false);\n\tconst [addExcelResult, setAddExcelResult] = React.useState<AddFromExcelModel<ClusterModel>[]>([]);\n\n\tconst [keyWord, setKeyWord] = React.useState<string>('');\n\n\tconst [showConfirmDelete, setShowConfirmDelete] = React.useState(false);\n\n\tconst handleSubmitDelete = async () => {\n\t\tsetShowConfirmDelete(false);\n\t\tif (selectedProject !== null) {\n\t\t\tdispatch(loadingActions.show());\n\t\t\ttry {\n\t\t\t\tawait clusterService.remove(selectedProject.code, selectedList);\n\t\t\t\thandleRefresh();\n\t\t\t\tsetSelectedList([]);\n\t\t\t\tdispatch(alertActions.show(alertMessage.ACTION_SUCCESS, 'success'));\n\t\t\t}\n\t\t\tcatch {\n\t\t\t\tdispatch(alertActions.show(alertMessage.ACTION_FAILURE, 'error'));\n\t\t\t\tdispatch(loadingActions.hide());\n\t\t\t}\n\t\t}\n\t}\n\n\tconst handleCloseExcelResult = () => {\n\t\tsetShowAddExcelResult(false);\n\t};\n\n\tconst handleSubmitUploadForm = async (files: File[]) => {\n\t\tif (files.length >= 1 && selectedProject !== null) {\n\t\t\tsetAddExcelResult([]);\n\t\t\tdispatch(loadingActions.show());\n\t\t\ttry {\n\t\t\t\tsetAddExcelResult(await clusterService.addFromExcel(selectedProject.code, files[0]));\n\t\t\t\thandleRefresh();\n\t\t\t\tsetShowAddExcelResult(true);\n\t\t\t}\n\t\t\tcatch {\n\t\t\t\tdispatch(loadingActions.hide());\n\t\t\t\tdispatch(alertActions.show(alertMessage.ACTION_FAILURE, 'error'));\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tsetItem({ ...item, [event.target.name]: event.target.value });\n\t};\n\n\tconst handleCloseForm = () => {\n\t\tsetShowForm(false);\n\t};\n\n\tconst handleOpenCreateForm = () => {\n\t\tsetItem(initialState);\n\t\tsetIsEdit(false);\n\t\tsetShowForm(true);\n\t};\n\n\tconst handleOpenEditForm = (item: ClusterModel) => {\n\t\tsetItem(item);\n\t\tsetIsEdit(true);\n\t\tsetShowForm(true);\n\t};\n\n\tconst handleSubmit = async () => {\n\t\tsetShowForm(false);\n\t\tif (selectedProject !== null) {\n\t\t\tdispatch(loadingActions.show());\n\t\t\ttry {\n\t\t\t\tif (isEdit) {\n\t\t\t\t\tawait clusterService.edit(selectedProject.code, item.code, item);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (selectedProject !== null) {\n\t\t\t\t\t\titem.projectCode = selectedProject.code;\n\t\t\t\t\t\tawait clusterService.create(selectedProject.code, item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdispatch(alertActions.show(alertMessage.ACTION_SUCCESS, 'success'));\n\t\t\t\thandleRefresh();\n\t\t\t}\n\t\t\tcatch {\n\t\t\t\tdispatch(alertActions.show(alertMessage.ACTION_FAILURE, 'error'));\n\t\t\t\tdispatch(loadingActions.hide());\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handleProjectChange = (value: ProjectModel) => {\n\t\tsetSelectedProject(value);\n\t}\n\n\tconst handleSelect = async (clusterCode: string) => {\n\t\tif (selectedList.includes(clusterCode)) {\n\t\t\tsetSelectedList(selectedList.filter(x => x !== clusterCode));\n\t\t}\n\t\telse {\n\t\t\tsetSelectedList([...selectedList, clusterCode]);\n\t\t}\n\t}\n\n\tconst handleRefresh = async () => {\n\t\tdispatch(loadingActions.show());\n\t\tif (selectedProject !== null) {\n\t\t\ttry {\n\t\t\t\tsetClusters(await clusterService.getAll(selectedProject.code, versionNumberEnum.PACK));\n\t\t\t}\n\t\t\tcatch {\n\t\t\t\tsetClusters([]);\n\t\t\t\tdispatch(alertActions.show(alertMessage.FETCH_FAILURE, 'error'));\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tsetClusters([]);\n\t\t}\n\t\tdispatch(loadingActions.hide());\n\t}\n\n\tReact.useEffect(() => {\n\t\thandleRefresh();\n\t\tsetSelectedList([]);\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [selectedProject]);\n\n\tReact.useEffect(() => {\n\t\tsetDisplayClusters(\n\t\t\tclusters.filter(x => keyWord.split('|').every(k => x.description.includes(k)))\n\t\t);\n\t}, [clusters, keyWord]);\n\n\treturn (\n\t\t<>\n\t\t\t<FormDialog\n\t\t\t\topen={showConfirmDelete}\n\t\t\t\tonClose={() => { setShowConfirmDelete(false) }}\n\t\t\t\tonSubmit={() => { handleSubmitDelete(); }}\n\t\t\t\ttitle=\"Xác nhận xóa các điển hình\"\n\t\t\t>\n\t\t\t\t<Grid container spacing={1}>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<Typography variant=\"body2\">\n\t\t\t\t\t\t\tThao tác này sẽ xóa các công tác và mapping của điển hình được chọn. Vui lòng kiểm tra kỹ các điển hình trước khi xóa!\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t{selectedList.map(s => (\n\t\t\t\t\t\t<Grid item xs={12} key={s}>\n\t\t\t\t\t\t\t<Typography variant=\"subtitle2\">{s}</Typography>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t))}\n\t\t\t\t</Grid>\n\t\t\t</FormDialog>\n\t\t\t<FormDialog\n\t\t\t\topen={showAddExcelResult}\n\t\t\t\tonClose={handleCloseExcelResult}\n\t\t\t\ttitle=\"Kết quả tạo từ file excel\"\n\t\t\t>\n\t\t\t\t<Grid container spacing={1}>\n\t\t\t\t\t{addExcelResult.map((a, index) => (\n\t\t\t\t\t\t<Grid item container spacing={1} xs={12} key={index}>\n\t\t\t\t\t\t\t<Grid item xs={12} md={3} style={{ color: a.isAdded ? 'green' : 'red' }}>\n\t\t\t\t\t\t\t\t<Typography variant=\"subtitle2\">{`${a.item.code}-${a.item.description}`}</Typography>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={12} md={9} style={{ color: a.isAdded ? 'green' : 'red' }}>\n\t\t\t\t\t\t\t\t<Typography variant=\"caption\">{a.message}</Typography>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t))}\n\t\t\t\t</Grid>\n\t\t\t</FormDialog>\n\t\t\t<FormDialog\n\t\t\t\ttitle=\"Thêm/Chỉnh sửa\"\n\t\t\t\topen={showForm}\n\t\t\t\tonClose={handleCloseForm}\n\t\t\t\tonSubmit={handleSubmit}\n\t\t\t>\n\t\t\t\t<Grid container spacing={1}>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tname=\"code\"\n\t\t\t\t\t\t\tlabel=\"Mã\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tvalue={item.code}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\tlabel=\"Diễn giải\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tvalue={item.description}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tname=\"note\"\n\t\t\t\t\t\t\tlabel=\"Ghi chú\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tvalue={item.note}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tname=\"filePath\"\n\t\t\t\t\t\t\tlabel=\"File chiết tính\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tvalue={item.filePath}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</FormDialog>\n\t\t\t<Paper className={classes.root}>\n\t\t\t\t<Grid container>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\titem xs={12}\n\t\t\t\t\t\tstyle={{ padding: '8px' }}\n\t\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\t\tspacing={1}\n\t\t\t\t\t\talignItems=\"flex-end\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Grid item xs={12} md={6}>\n\t\t\t\t\t\t\t<ProjectComboBox\n\t\t\t\t\t\t\t\tvalue={selectedProject}\n\t\t\t\t\t\t\t\tonChange={handleProjectChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12} md={6}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tname=\"keyWord\"\n\t\t\t\t\t\t\t\tlabel=\"Tìm kiếm\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tvalue={keyWord}\n\t\t\t\t\t\t\t\tonChange={(event) => { setKeyWord(event.target.value); }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t{selectedProject !== null && (\n\t\t\t\t\t\t\t<Grid container spacing={1} item xs={12} alignItems=\"flex-end\">\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\ttooltip=\"Thêm mới\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\ttext=\"Thêm\"\n\t\t\t\t\t\t\t\t\t\ticon=\"plus\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tonClick={handleOpenCreateForm}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<UploadButton\n\t\t\t\t\t\t\t\t\t\tfilesLimit={1}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Tải tệp excel\"\n\t\t\t\t\t\t\t\t\t\tacceptedFiles={['.xls', '.xlsx',]}\n\t\t\t\t\t\t\t\t\t\tonSubmit={handleSubmitUploadForm}\n\t\t\t\t\t\t\t\t\t\ttooltip=\"Tạo từ file excel\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\ttext=\"Upload Excel\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<DownloadButton\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Tải về\"\n\t\t\t\t\t\t\t\t\t\tfilename={`${selectedProject.code}_Dien hinh.xlsx`}\n\t\t\t\t\t\t\t\t\t\turl={`/api/project-system/clusters/get-excel?projectCode=${selectedProject.code}&version=${versionNumberEnum.PACK}`}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\ttooltip=\"Làm mới\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\ttext=\"Làm mới\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"success\"\n\t\t\t\t\t\t\t\t\t\ticon=\"sync-alt\"\n\t\t\t\t\t\t\t\t\t\tonClick={handleRefresh}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\ttooltip=\"Xóa các điển hình đã chọn\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\ttext=\"Xóa\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"danger\"\n\t\t\t\t\t\t\t\t\t\ticon=\"trash-alt\"\n\t\t\t\t\t\t\t\t\t\tdisabled={selectedList.length <= 0}\n\t\t\t\t\t\t\t\t\t\tonClick={() => { setShowConfirmDelete(true); }}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t\t<TableContainer className={classes.container}>\n\t\t\t\t\t<Table stickyHeader aria-label=\"sticky table\" size=\"small\">\n\t\t\t\t\t\t<TableHead>\n\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t<TableCell style={{ padding: 0, width: 16 }}></TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">Mã điển hình</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">Diễn giải</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">Ghi chú</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">Chiết tính</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"right\">Số lượng</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"right\">Công tác</TableCell>\n\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t</TableHead>\n\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t{displayClusters.map(cluster => (\n\t\t\t\t\t\t\t\t<TableRow key={cluster.code}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: selectedList.includes(cluster.code) ? colors.red[100] : 'initial',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<TableCell\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tpadding: 0,\n\t\t\t\t\t\t\t\t\t\t\twidth: 16,\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: selectedList.includes(cluster.code) ? colors.red[500] : colors.teal[100],\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonClick={() => { handleSelect(cluster.code) }}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell\n\t\t\t\t\t\t\t\t\t\tclassName={classes.cell}\n\t\t\t\t\t\t\t\t\t\talign=\"left\"\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\thandleOpenEditForm(cluster);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{cluster.code}\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">{cluster.description}</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">{cluster.note}</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={cluster.filePath}\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\ttextDecoration: 'none',\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tChiết tính\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"right\">{cluster.elementCount}</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"right\">{cluster.itemCount}</TableCell>\n\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t</Table>\n\t\t\t\t</TableContainer>\n\t\t\t</Paper>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  Grid,\n  colors,\n} from '@material-ui/core';\n\nimport {\n  TrackingChangeModel,\n} from '../services/common';\n\nimport {\n  ClusterViewModel,\n} from '../services/cluster';\n\nconst getRowColor = (status: number): string => {\n  switch (status) {\n    case 1: return colors.green[500];\n    case 2: return colors.amber[500];\n    default: return colors.red[500];\n  }\n}\n\ntype Props = {\n  data: TrackingChangeModel<ClusterViewModel>[];\n}\n\nexport default function ClustersChangeTable({\n  data,\n}: Props): JSX.Element {\n  return (\n    <Table stickyHeader aria-label=\"sticky table\" size=\"small\">\n      <TableHead>\n        <TableRow>\n          <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>Mã cấu kiện</TableCell>\n          <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>Diễn giải</TableCell>\n          <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>Ghi chú</TableCell>\n          <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>Chiết tính</TableCell>\n          <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>Số lượng</TableCell>\n          <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>Công tác</TableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {data.map((item, index) => (\n          <TableRow key={index} style={{ backgroundColor: getRowColor(item.status) }}>\n            <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>\n              <Grid container direction=\"column\">\n                <Grid item>\n                  {item.post !== null ? item.post.code : '-'}\n                </Grid>\n                <Grid item>\n                  {item.pack !== null ? item.pack.code : '-'}\n                </Grid>\n              </Grid>\n            </TableCell>\n            <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>\n              <Grid container direction=\"column\">\n                <Grid item>\n                  {item.post !== null ? item.post.description : '-'}\n                </Grid>\n                <Grid item>\n                  {item.pack !== null ? item.pack.description : '-'}\n                </Grid>\n              </Grid>\n            </TableCell>\n            <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>\n              <Grid container direction=\"column\">\n                <Grid item>\n                  {item.post !== null ? item.post.note : '-'}\n                </Grid>\n                <Grid item>\n                  {item.pack !== null ? item.pack.note : '-'}\n                </Grid>\n              </Grid>\n            </TableCell>\n            <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>\n              <Grid container direction=\"column\">\n                <Grid item>\n                  {item.post !== null ? item.post.filePath : '-'}\n                </Grid>\n                <Grid item>\n                  {item.pack !== null ? item.pack.filePath : '-'}\n                </Grid>\n              </Grid>\n            </TableCell>\n            <TableCell align=\"right\" style={{ fontSize: '0.75rem' }}>\n              <Grid container direction=\"column\">\n                <Grid item>\n                  {item.post !== null ? item.post.elementCount : '-'}\n                </Grid>\n                <Grid item>\n                  {item.pack !== null ? item.pack.elementCount : '-'}\n                </Grid>\n              </Grid>\n            </TableCell>\n            <TableCell align=\"right\" style={{ fontSize: '0.75rem' }}>\n              <Grid container direction=\"column\">\n                <Grid item>\n                  {item.post !== null ? item.post.itemCount : '-'}\n                </Grid>\n                <Grid item>\n                  {item.pack !== null ? item.pack.itemCount : '-'}\n                </Grid>\n              </Grid>\n            </TableCell>\n          </TableRow>\n        ))}\n      </TableBody>\n    </Table>\n  );\n}\n","import React from 'react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  Grid,\n  colors,\n} from '@material-ui/core';\n\nimport {\n  TrackingChangeModel,\n} from '../services/common';\n\nimport {\n  ElementClusterViewModel,\n} from '../services/elementCluster';\n\nconst getRowColor = (status: number): string => {\n  switch (status) {\n    case 1: return colors.green[500];\n    case 2: return colors.amber[500];\n    default: return colors.red[500];\n  }\n}\n\ntype Props = {\n  data: TrackingChangeModel<ElementClusterViewModel>[];\n}\n\nexport default function ElementClustersChangeTable({\n  data,\n}: Props): JSX.Element {\n  return (\n    <Table stickyHeader aria-label=\"sticky table\" size=\"small\">\n      <TableHead>\n        <TableRow>\n          <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>Mã WBS</TableCell>\n          <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>Diễn giải WBS</TableCell>\n          <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>Mã cấu kiện</TableCell>\n          <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>Diễn giải cấu kiện</TableCell>\n          <TableCell align=\"right\" style={{ fontSize: '0.75rem' }}>Số lượng</TableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {data.map((item, index) => (\n          <TableRow key={index} style={{ backgroundColor: getRowColor(item.status) }}>\n            <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>\n              <Grid container direction=\"column\">\n                <Grid item>\n                  {item.post !== null ? item.post.elementCode : '-'}\n                </Grid>\n                <Grid item>\n                  {item.pack !== null ? item.pack.elementCode : '-'}\n                </Grid>\n              </Grid>\n            </TableCell>\n            <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>\n              <Grid container direction=\"column\">\n                <Grid item>\n                  {item.post !== null ? item.post.elementDescription : '-'}\n                </Grid>\n                <Grid item>\n                  {item.pack !== null ? item.pack.elementDescription : '-'}\n                </Grid>\n              </Grid>\n            </TableCell>\n            <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>\n              <Grid container direction=\"column\">\n                <Grid item>\n                  {item.post !== null ? item.post.clusterCode : '-'}\n                </Grid>\n                <Grid item>\n                  {item.pack !== null ? item.pack.clusterCode : '-'}\n                </Grid>\n              </Grid>\n            </TableCell>\n            <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>\n              <Grid container direction=\"column\">\n                <Grid item>\n                  {item.post !== null ? item.post.clusterDescription : '-'}\n                </Grid>\n                <Grid item>\n                  {item.pack !== null ? item.pack.clusterDescription : '-'}\n                </Grid>\n              </Grid>\n            </TableCell>\n            <TableCell align=\"right\" style={{ fontSize: '0.75rem' }}>\n              <Grid container direction=\"column\">\n                <Grid item>\n                  {item.post !== null ? item.post.quantity : '-'}\n                </Grid>\n                <Grid item>\n                  {item.pack !== null ? item.pack.quantity : '-'}\n                </Grid>\n              </Grid>\n            </TableCell>\n          </TableRow>\n        ))}\n      </TableBody>\n    </Table>\n  );\n}\n","import React from 'react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  Grid,\n  colors,\n} from '@material-ui/core';\n\nimport {\n  TrackingChangeModel,\n} from '../services/common';\n\nimport {\n  ItemViewModel,\n} from '../services/item';\n\nimport format from '../../../configs/format';\n\nconst getRowColor = (status: number): string => {\n  switch (status) {\n    case 1: return colors.green[500];\n    case 2: return colors.amber[500];\n    default: return colors.red[500];\n  }\n}\n\ntype Props = {\n  data: TrackingChangeModel<ItemViewModel>[];\n}\n\nexport default function ItemsChangeTable({\n  data,\n}: Props): JSX.Element {\n  return (\n    <Table stickyHeader aria-label=\"sticky table\" size=\"small\">\n      <TableHead>\n        <TableRow>\n          <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>Mã cấu kiện</TableCell>\n          <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>Diễn giải cấu kiện</TableCell>\n          <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>Mã công tác</TableCell>\n          <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>Diễn giải công tác</TableCell>\n          <TableCell align=\"center\" style={{ fontSize: '0.75rem' }}>Đơn vị</TableCell>\n          <TableCell align=\"right\" style={{ fontSize: '0.75rem' }}>Khối lượng</TableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {data.map((item, index) => (\n          <TableRow key={index} style={{ backgroundColor: getRowColor(item.status) }}>\n            <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>\n              <Grid container direction=\"column\">\n                <Grid item>\n                  {item.post !== null ? item.post.clusterCode : '-'}\n                </Grid>\n                <Grid item>\n                  {item.pack !== null ? item.pack.clusterCode : '-'}\n                </Grid>\n              </Grid>\n            </TableCell>\n            <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>\n              <Grid container direction=\"column\">\n                <Grid item>\n                  {item.post !== null ? item.post.clusterDescription : '-'}\n                </Grid>\n                <Grid item>\n                  {item.pack !== null ? item.pack.clusterDescription : '-'}\n                </Grid>\n              </Grid>\n            </TableCell>\n            <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>\n              <Grid container direction=\"column\">\n                <Grid item>\n                  {item.post !== null ? item.post.serviceMasterCode : '-'}\n                </Grid>\n                <Grid item>\n                  {item.pack !== null ? item.pack.serviceMasterCode : '-'}\n                </Grid>\n              </Grid>\n            </TableCell>\n            <TableCell align=\"left\" style={{ fontSize: '0.75rem' }}>\n              <Grid container direction=\"column\">\n                <Grid item>\n                  {item.post !== null ? item.post.serviceMasterDescription : '-'}\n                </Grid>\n                <Grid item>\n                  {item.pack !== null ? item.pack.serviceMasterDescription : '-'}\n                </Grid>\n              </Grid>\n            </TableCell>\n            <TableCell align=\"center\" style={{ fontSize: '0.75rem' }}>\n              <Grid container direction=\"column\">\n                <Grid item>\n                  {item.post !== null ? item.post.serviceMasterUnit : '-'}\n                </Grid>\n                <Grid item>\n                  {item.pack !== null ? item.pack.serviceMasterUnit : '-'}\n                </Grid>\n              </Grid>\n            </TableCell>\n            <TableCell align=\"right\" style={{ fontSize: '0.75rem' }}>\n              <Grid container direction=\"column\">\n                <Grid item>\n                  {item.post !== null ? format.formatMoney(item.post.quantity, 3) : '-'}\n                </Grid>\n                <Grid item>\n                  {item.pack !== null ? format.formatMoney(item.pack.quantity, 3) : '-'}\n                </Grid>\n              </Grid>\n            </TableCell>\n          </TableRow>\n        ))}\n      </TableBody>\n    </Table>\n  );\n}\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n\tPaper,\n\tTableContainer,\n\tGrid,\n} from '@material-ui/core';\nimport {\n\tFormDialog,\n\tTextField,\n\tIconButton,\n} from '@nvdunginest/emis-mui';\n\nimport {\n\tAppDispatch,\n\talertActions,\n\talertMessage,\n\tloadingActions,\n} from '../../../core';\n\nimport ProjectComboBox from '../components/ProjectsComboBox';\n\nimport { getDesignerCommitData } from '../common/commitHelper';\n\nimport {\n\tbranchEnum,\n} from '../services/common';\n\nimport userService from '../services/user';\n\nimport {\n\tProjectModel,\n} from '../services/project';\n\nimport commitService, {\n\tAddCommitModel,\n\tDesignerCommit,\n\tDesignerTrackingChangeModel,\n} from '../services/commit';\n\nimport ClustersChangeTable from '../components/ClustersChangeTable';\nimport ElementClustersChangeTable from '../components/ElementClustersChangeTable';\nimport ItemsChangeTable from '../components/ItemsChangeTable';\n\nconst useStyles = makeStyles({\n\troot: {\n\t\twidth: '100%',\n\t\theight: '100%',\n\t},\n\tcontainer: {\n\t\tmaxHeight: 'calc(100% - 85px)',\n\t\toverflowY: 'scroll',\n\t},\n});\n\nexport default function DesignerCommits(): JSX.Element {\n\tconst classes = useStyles();\n\tconst dispatch: AppDispatch = useDispatch();\n\n\tconst [project, setProject] = React.useState<ProjectModel | null>(null);\n\n\tconst [model, setModel] = React.useState<DesignerTrackingChangeModel>({\n\t\tclusters: [],\n\t\telementClusters: [],\n\t\titems: [],\n\t});\n\tconst [showForm, setShowForm] = React.useState(false);\n\tconst [commitDescription, setCommitDescription] = React.useState<string>('');\n\tconst [tab, setTab] = React.useState<number>(1);\n\n\tconst [isApprover, setIsApprover] = React.useState(false);\n\n\tconst handleCloseForm = () => {\n\t\tsetShowForm(false);\n\t};\n\n\tconst handleOpenForm = () => {\n\t\tsetCommitDescription('');\n\t\tsetShowForm(true);\n\t};\n\n\tconst handleSubmit = async () => {\n\t\tsetShowForm(false);\n\t\tdispatch(loadingActions.show());\n\t\ttry {\n\t\t\tconst data: AddCommitModel<DesignerCommit> = {\n\t\t\t\theader: {\n\t\t\t\t\tbranch: branchEnum.DESIGNER,\n\t\t\t\t\tcreatedBy: '',\n\t\t\t\t\tcreatedByFullName: '',\n\t\t\t\t\tcreatedTime: new Date(),\n\t\t\t\t\tdescription: commitDescription,\n\t\t\t\t\tnumber: 0,\n\t\t\t\t\tprojectCode: project !== null ? project.code : '',\n\t\t\t\t},\n\t\t\t\tdetail: getDesignerCommitData(model),\n\t\t\t}\n\n\t\t\tif (project !== null) {\n\t\t\t\tawait commitService.designerCommit(project.code, data);\n\t\t\t}\n\n\t\t\tdispatch(alertActions.show(alertMessage.ACTION_SUCCESS, 'success'));\n\t\t\thandleRefresh();\n\t\t}\n\t\tcatch {\n\t\t\tdispatch(alertActions.show(alertMessage.ACTION_FAILURE, 'error'));\n\t\t\tdispatch(loadingActions.hide());\n\t\t}\n\t};\n\n\tconst handleProjectChange = (value: ProjectModel) => {\n\t\tsetProject(value);\n\t};\n\n\tconst handleRefresh = async () => {\n\t\tif (project !== null) {\n\t\t\tdispatch(loadingActions.show());\n\t\t\ttry {\n\t\t\t\tsetModel(await commitService.designerTrackingChange(project.code));\n\t\t\t}\n\t\t\tcatch {\n\t\t\t\tsetModel({\n\t\t\t\t\tclusters: [],\n\t\t\t\t\telementClusters: [],\n\t\t\t\t\titems: [],\n\t\t\t\t});\n\t\t\t\tdispatch(alertActions.show(alertMessage.FETCH_FAILURE, 'error'));\n\t\t\t}\n\t\t\tdispatch(loadingActions.hide());\n\t\t}\n\t\telse {\n\t\t\tsetModel({\n\t\t\t\tclusters: [],\n\t\t\t\telementClusters: [],\n\t\t\t\titems: [],\n\t\t\t});\n\t\t}\n\t}\n\n\tconst checkIsApprover = async () => {\n\t\ttry {\n\t\t\tsetIsApprover(await userService.checkRolePermission('APPROVER_DESIGNER_ROLE'));\n\t\t}\n\t\tcatch {\n\t\t\tsetIsApprover(false);\n\t\t}\n\t}\n\n\tReact.useEffect(() => {\n\t\thandleRefresh();\n\t\tcheckIsApprover();\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [project]);\n\n\treturn (\n\t\t<>\n\t\t\t<FormDialog\n\t\t\t\ttitle=\"Cập nhật thay đổi lên server\"\n\t\t\t\topen={showForm}\n\t\t\t\tonClose={handleCloseForm}\n\t\t\t\tonSubmit={handleSubmit}\n\t\t\t>\n\t\t\t\t<Grid container spacing={1}>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tname=\"commitDescription\"\n\t\t\t\t\t\t\tlabel=\"Mô tả nội dung cập nhật\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tvalue={commitDescription}\n\t\t\t\t\t\t\tonChange={(e) => { setCommitDescription(e.target.value); }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</FormDialog>\n\t\t\t<Paper className={classes.root}>\n\t\t\t\t<Grid container>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\titem xs={12}\n\t\t\t\t\t\tstyle={{ padding: '8px' }}\n\t\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\t\tspacing={1}\n\t\t\t\t\t\talignItems=\"flex-end\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t<ProjectComboBox\n\t\t\t\t\t\t\t\tvalue={project}\n\t\t\t\t\t\t\t\tonChange={handleProjectChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid container spacing={1} item xs={6} alignItems=\"flex-end\">\n\t\t\t\t\t\t\t{project !== null && isApprover &&\n\t\t\t\t\t\t\t\t(model.clusters.length > 0 || model.elementClusters.length > 0 || model.items.length > 0) && (\n\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\ttooltip=\"Cập nhật thay đổi\"\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\t\ttext=\"Commit\"\n\t\t\t\t\t\t\t\t\t\t\ticon=\"long-arrow-alt-up\"\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"danger\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleOpenForm}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\ttooltip=\"Cấu kiện điển hình\"\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\ttext=\"Cấu kiện\"\n\t\t\t\t\t\t\t\t\ticon=\"cubes\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tonClick={() => { setTab(1); }}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\ttooltip=\"Mapping WBS - Cấu kiện\"\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\ttext=\"Mapping\"\n\t\t\t\t\t\t\t\t\ticon=\"link\"\n\t\t\t\t\t\t\t\t\tcolor=\"success\"\n\t\t\t\t\t\t\t\t\tonClick={() => { setTab(2); }}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\ttooltip=\"Công tác\"\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\ttext=\"Công tác\"\n\t\t\t\t\t\t\t\t\ticon=\"tasks\"\n\t\t\t\t\t\t\t\t\tcolor=\"info\"\n\t\t\t\t\t\t\t\t\tonClick={() => { setTab(3); }}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t\t<TableContainer className={classes.container}>\n\t\t\t\t\t{tab === 1 && <ClustersChangeTable data={model.clusters} />}\n\t\t\t\t\t{tab === 2 && <ElementClustersChangeTable data={model.elementClusters} />}\n\t\t\t\t\t{tab === 3 && <ItemsChangeTable data={model.items} />}\n\t\t\t\t</TableContainer>\n\t\t\t</Paper>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n\tPaper,\n\tTable,\n\tTableBody,\n\tTableCell,\n\tTableContainer,\n\tTableHead,\n\tTableRow,\n\tGrid,\n\tcolors,\n} from '@material-ui/core';\nimport {\n\tFormDialog,\n\tTextField,\n\tIconButton,\n} from '@nvdunginest/emis-mui';\n\nimport {\n\talertActions,\n\tloadingActions,\n\talertMessage,\n\tAppDispatch,\n} from '../../../core';\n\nimport format from '../../../configs/format';\n\nimport ProjectComboBox from '../components/ProjectsComboBox';\n\nimport {\n\tProjectModel,\n} from '../services/project';\n\nimport versionService, {\n\tVersionModel,\n} from '../services/version';\nimport { branchEnum } from '../services/common';\n\nconst useStyles = makeStyles({\n\troot: {\n\t\twidth: '100%',\n\t\theight: '100%',\n\t},\n\tcontainer: {\n\t\tmaxHeight: 'calc(100% - 120px)',\n\t\toverflowY: 'scroll',\n\t},\n\tcell: {\n\t\tfontSize: '0.75rem',\n\t},\n});\n\nexport default function DesignerVersions(): JSX.Element {\n\tconst classes = useStyles();\n\tconst dispatch: AppDispatch = useDispatch();\n\tconst [showForm, setShowForm] = React.useState(false);\n\n\tconst [project, setProject] = React.useState<ProjectModel | null>(null);\n\n\tconst [versions, setVersions] = React.useState<VersionModel[]>([]);\n\tconst [description, setDescription] = React.useState<string>('');\n\n\tconst handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tsetDescription(event.target.value);\n\t};\n\n\tconst handleCloseForm = () => {\n\t\tsetShowForm(false);\n\t};\n\n\tconst handleOpenCreateForm = () => {\n\t\tsetDescription('');\n\t\tsetShowForm(true);\n\t};\n\n\tconst handleSubmit = async () => {\n\t\tsetShowForm(false);\n\t\tif (project !== null) {\n\t\t\tdispatch(loadingActions.show());\n\t\t\ttry {\n\t\t\t\tconst data: VersionModel = {\n\t\t\t\t\tnumber: 0,\n\t\t\t\t\tbranch: branchEnum.DESIGNER,\n\t\t\t\t\tcreatedBy: '',\n\t\t\t\t\tcreatedByFullName: '',\n\t\t\t\t\tcreatedDate: new Date(),\n\t\t\t\t\tdescription: description,\n\t\t\t\t\tprojectCode: project.code,\n\t\t\t\t}\n\t\t\t\tawait versionService.createDesignerVersion(project.code, data);\n\t\t\t\tdispatch(alertActions.show(alertMessage.ACTION_SUCCESS, 'success'));\n\t\t\t\thandleRefresh();\n\t\t\t}\n\t\t\tcatch {\n\t\t\t\tdispatch(alertActions.show(alertMessage.ACTION_FAILURE, 'error'));\n\t\t\t\tdispatch(loadingActions.hide());\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handleProjectChange = (value: ProjectModel) => {\n\t\tsetProject(value);\n\t}\n\n\tconst handleRefresh = async () => {\n\t\tdispatch(loadingActions.show());\n\t\tif (project !== null) {\n\t\t\ttry {\n\t\t\t\tsetVersions(await versionService.getAll(project.code, branchEnum.DESIGNER));\n\t\t\t}\n\t\t\tcatch {\n\t\t\t\tsetVersions([]);\n\t\t\t\tdispatch(alertActions.show(alertMessage.FETCH_FAILURE, 'error'));\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tsetVersions([]);\n\t\t}\n\t\tdispatch(loadingActions.hide());\n\t}\n\n\tReact.useEffect(() => {\n\t\thandleRefresh();\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [project]);\n\n\treturn (\n\t\t<>\n\t\t\t<FormDialog\n\t\t\t\ttitle=\"Tạo phiên bản\"\n\t\t\t\topen={showForm}\n\t\t\t\tonClose={handleCloseForm}\n\t\t\t\tonSubmit={handleSubmit}\n\t\t\t>\n\t\t\t\t<Grid container spacing={1}>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\tlabel=\"Diễn giải\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</FormDialog>\n\t\t\t<Paper className={classes.root}>\n\t\t\t\t<Grid container>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\titem xs={12}\n\t\t\t\t\t\tstyle={{ padding: '8px' }}\n\t\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\t\tspacing={1}\n\t\t\t\t\t\talignItems=\"flex-end\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Grid item xs={12} md={6}>\n\t\t\t\t\t\t\t<ProjectComboBox\n\t\t\t\t\t\t\t\tvalue={project}\n\t\t\t\t\t\t\t\tonChange={handleProjectChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t{project !== null && (\n\t\t\t\t\t\t\t<Grid container spacing={1} item xs={12} alignItems=\"flex-end\">\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\ttooltip=\"Thêm mới\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\ttext=\"Thêm\"\n\t\t\t\t\t\t\t\t\t\ticon=\"plus\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tonClick={handleOpenCreateForm}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\ttooltip=\"Làm mới\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\ttext=\"Làm mới\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"success\"\n\t\t\t\t\t\t\t\t\t\ticon=\"sync-alt\"\n\t\t\t\t\t\t\t\t\t\tonClick={handleRefresh}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t\t<TableContainer className={classes.container}>\n\t\t\t\t\t<Table stickyHeader aria-label=\"sticky table\" size=\"small\">\n\t\t\t\t\t\t<TableHead>\n\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t<TableCell style={{ padding: 0, width: 16 }}></TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">Số phiên bản</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">Diễn giải</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">Người tạo</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">Thời gian</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\"></TableCell>\n\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t</TableHead>\n\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t{versions.map(v => (\n\t\t\t\t\t\t\t\t<TableRow key={v.number}>\n\t\t\t\t\t\t\t\t\t<TableCell\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tpadding: 0,\n\t\t\t\t\t\t\t\t\t\t\twidth: 16,\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: colors.teal[100],\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">{v.number}</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">{v.description}</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">{`${v.createdBy}-${v.createdByFullName}`}</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">{format.formatDate(new Date(v.createdDate), 'dd-MM-yyyy')}</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">\n\t\t\t\t\t\t\t\t\t\t{project !== null && (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={`/project-system/designer/version-data/clusters/${project.code}/${v.number}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttextDecoration: 'none',\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext=\"Cấu kiện\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon=\"cubes\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={`/project-system/designer/version-data/element-clusters/${project.code}/${v.number}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttextDecoration: 'none',\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext=\"Mapping\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"success\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon=\"link\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\thref={`/project-system/designer/version-data/items/${project.code}/${v.number}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttextDecoration: 'none',\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext=\"Công tác\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"info\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon=\"tasks\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t</Table>\n\t\t\t\t</TableContainer>\n\t\t\t</Paper>\n\t\t</>\n\t);\n}\n","import React from 'react';\n\nimport {\n  ComboBox,\n} from '@nvdunginest/emis-mui';\n\nimport {\n  versionNumberEnum,\n} from '../services/common';\n\nimport clusterService, {\n  ClusterModel,\n} from '../services/cluster';\n\ntype ComboBoxType = {\n  code: string;\n  description: string;\n  label: string;\n}\n\ntype Props = {\n  projectCode: string;\n  value: ClusterModel | null;\n  onChange: (value: ClusterModel) => void;\n}\n\nconst CLUSTER_CODE_KEY = 'CLUSTER_CODE_KEY';\nconst CLUSTER_DESCRIPTION_KEY = 'CLUSTER_DESCRIPTION_KEY';\n\nconst renderComboBoxOptions = (data: ClusterModel[]): ComboBoxType[] => {\n  return data.map(x => {\n    const result: ComboBoxType = {\n      ...x,\n      label: `[${x.code}]-${x.description}`,\n    }\n\n    return result;\n  })\n}\n\nconst getCache = (): ComboBoxType | null => {\n  const code = localStorage.getItem(CLUSTER_CODE_KEY);\n  const description = localStorage.getItem(CLUSTER_DESCRIPTION_KEY);\n  if (code === null || description === null) {\n    return null;\n  }\n  else {\n    return {\n      code: code,\n      description: description,\n      label: `[${code}]-${description}`,\n    };\n  }\n}\n\nconst setCache = (cluster: ComboBoxType) => {\n  localStorage.setItem(CLUSTER_CODE_KEY, cluster.code);\n  localStorage.setItem(CLUSTER_DESCRIPTION_KEY, cluster.description);\n}\n\nexport default function ServiceMastersComboBox({\n  projectCode,\n  value,\n  onChange,\n}: Props): JSX.Element {\n\n  const [data, setData] = React.useState<ClusterModel[]>([]);\n\n  const getData = async () => {\n    try {\n      setData(await clusterService.getAll(projectCode, versionNumberEnum.PACK));\n    }\n    catch {\n      setData([]);\n    }\n  }\n\n  const handleChange = (value: ComboBoxType | null) => {\n    if (value !== null) {\n      onChange({\n        code: value.code,\n        description: value.description,\n        filePath: '',\n        note: '',\n        projectCode: '',\n        versionNumber: versionNumberEnum.PACK,\n      });\n      setCache(value);\n    }\n  }\n\n  React.useEffect(() => {\n    const cache = getCache();\n    if (cache !== null) {\n      onChange({\n        code: cache.code,\n        description: cache.description,\n        filePath: '',\n        note: '',\n        projectCode: '',\n        versionNumber: versionNumberEnum.PACK,\n      });\n    }\n    getData();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <ComboBox\n      required\n      label=\"Cấu kiện điển hình\"\n      options={renderComboBoxOptions(data)}\n      optionLabel=\"label\"\n      value={value !== null ? {\n        code: value.code,\n        label: `[${value.code}]-${value.description}`,\n        description: value.description,\n      } : null}\n      getOptionSelected={(o, v) => o.code === v.code}\n      onChange={handleChange}\n    />\n  );\n}\n","import axios from 'axios';\n\nimport {\n  AddFromExcelModel,\n} from './common';\n\nconst apiUrl = '/api/project-system/elementClusters';\n\nexport type ElementClusterBase = {\n  elementCode: string;\n  clusterCode: string;\n  quantity: number;\n  projectCode: string;\n}\n\nexport type ElementClusterModel = ElementClusterBase & {\n  versionNumber: number;\n}\n\nexport type CommittedElementClusterModel = ElementClusterBase & {\n  commitNumber: number;\n  status: number;\n}\n\nexport type ElementClusterViewModel = ElementClusterModel & {\n  elementDescription: string;\n  clusterDescription: string;\n}\n\nexport type ElementClusterRemoveModel = {\n  elementCode: string;\n  clusterCode: string;\n}\n\nfunction getAll(projectCode: string, version: number): Promise<ElementClusterViewModel[]> {\n  return axios.get(`${apiUrl}?projectCode=${projectCode}&version=${version}`);\n}\n\nfunction create(projectCode: string, model: ElementClusterModel): Promise<unknown> {\n  return axios.post(`${apiUrl}?projectCode=${projectCode}`, model);\n}\n\nfunction edit(projectCode: string, elementCode: string, clusterCode: string, model: ElementClusterModel): Promise<unknown> {\n  return axios.put(`${apiUrl}?projectCode=${projectCode}&elementCode=${elementCode}&clusterCode=${clusterCode}`, model);\n}\n\nfunction remove(projectCode: string, models: ElementClusterRemoveModel[]): Promise<unknown> {\n  return axios.post(`${apiUrl}/delete?projectCode=${projectCode}`, models);\n}\n\nfunction addFromExcel(projectCode: string, file: File): Promise<AddFromExcelModel<ElementClusterModel>[]> {\n  const formData = new FormData();\n  formData.append('files', file, file.name);\n\n  return axios.post(\n    `${apiUrl}/addFromExcel?projectCode=${projectCode}`,\n    formData,\n    {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    },\n  );\n}\n\nconst service = {\n  getAll,\n  create,\n  edit,\n  remove,\n  addFromExcel,\n};\n\nexport default service;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n\tPaper,\n\tTable,\n\tTableBody,\n\tTableCell,\n\tTableContainer,\n\tTableHead,\n\tTableRow,\n\tGrid,\n\tTypography,\n\tcolors,\n} from '@material-ui/core';\nimport {\n\tFormDialog,\n\tTextField,\n\tIconButton,\n\tUploadButton,\n\tDownloadButton,\n} from '@nvdunginest/emis-mui';\n\nimport {\n\tAppDispatch,\n\talertActions,\n\talertMessage,\n\tloadingActions,\n} from '../../../core';\n\nimport ProjectsComboBox from '../components/ProjectsComboBox';\nimport ClustersComboBox from '../components/ClustersComboBox';\n\nimport {\n\tversionNumberEnum,\n\tAddFromExcelModel,\n} from '../services/common';\n\nimport {\n\tProjectModel,\n} from '../services/project';\n\nimport elementService, {\n\tElementModel,\n} from '../services/element';\n\nimport { ClusterModel } from '../services/cluster';\n\nimport elementClusterService, {\n\tElementClusterViewModel,\n\tElementClusterModel,\n\tElementClusterRemoveModel,\n} from '../services/elementCluster';\n\nconst useStyles = makeStyles({\n\troot: {\n\t\twidth: '100%',\n\t\theight: '100%',\n\t},\n\tcontainer: {\n\t\tmaxHeight: 'calc(100% - 120px)',\n\t\toverflowY: 'scroll',\n\t},\n\tcell: {\n\t\tfontSize: '0.75rem',\n\t},\n});\n\ntype ElementClusterState = {\n\telementCode: string,\n\tclusterCode: string,\n\tquantity: string,\n}\n\nconst initialState: ElementClusterState = {\n\telementCode: '',\n\tclusterCode: '',\n\tquantity: '',\n}\n\nconst isInclude = (elementCode: string, clusterCode: string, data: ElementClusterRemoveModel[]): boolean => {\n\treturn data.find(x => x.clusterCode === clusterCode && x.elementCode === elementCode) !== undefined;\n}\n\nexport default function ElementClusters(): JSX.Element {\n\tconst classes = useStyles();\n\n\tconst dispatch: AppDispatch = useDispatch();\n\tconst [showForm, setShowForm] = React.useState(false);\n\tconst [isEdit, setIsEdit] = React.useState(false);\n\n\tconst [project, setProject] = React.useState<ProjectModel | null>(null);\n\tconst [cluster, setCluster] = React.useState<ClusterModel | null>(null);\n\n\tconst [elements, setElements] = React.useState<ElementModel[]>([]);\n\tconst [displayElements, setDisplayElements] = React.useState<ElementModel[]>([]);\n\tconst [elementClusters, setElementClusters] = React.useState<ElementClusterViewModel[]>([]);\n\tconst [item, setItem] = React.useState<ElementClusterState>(initialState);\n\n\tconst [selectedList, setSelectedList] = React.useState<ElementClusterRemoveModel[]>([]);\n\n\tconst [showAddExcelResult, setShowAddExcelResult] = React.useState(false);\n\tconst [addExcelResult, setAddExcelResult] = React.useState<AddFromExcelModel<ElementClusterModel>[]>([]);\n\n\tconst [keyWord, setKeyWord] = React.useState<string>('');\n\tconst [showConfirmDelete, setShowConfirmDelete] = React.useState(false);\n\n\tconst handleSubmitDelete = async () => {\n\t\tsetShowConfirmDelete(false);\n\t\tif (project !== null) {\n\t\t\tdispatch(loadingActions.show());\n\t\t\ttry {\n\t\t\t\tawait elementClusterService.remove(project.code, selectedList);\n\t\t\t\tfetchElementClusters();\n\t\t\t\tsetSelectedList([]);\n\t\t\t\tdispatch(alertActions.show(alertMessage.ACTION_SUCCESS, 'success'));\n\t\t\t}\n\t\t\tcatch {\n\t\t\t\tdispatch(alertActions.show(alertMessage.ACTION_FAILURE, 'error'));\n\t\t\t\tdispatch(loadingActions.hide());\n\t\t\t}\n\t\t}\n\t}\n\n\tconst handleCloseExcelResult = () => {\n\t\tsetShowAddExcelResult(false);\n\t};\n\n\tconst handleSubmitUploadForm = async (files: File[]) => {\n\t\tif (files.length >= 1 && project !== null) {\n\t\t\tsetAddExcelResult([]);\n\t\t\tdispatch(loadingActions.show());\n\t\t\ttry {\n\t\t\t\tsetAddExcelResult(await elementClusterService.addFromExcel(project.code, files[0]));\n\t\t\t\thandleRefresh();\n\t\t\t\tsetShowAddExcelResult(true);\n\t\t\t}\n\t\t\tcatch {\n\t\t\t\tdispatch(loadingActions.hide());\n\t\t\t\tdispatch(alertActions.show(alertMessage.ACTION_FAILURE, 'error'));\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handleProjectChange = (value: ProjectModel) => {\n\t\tsetProject(value);\n\t}\n\n\tconst fetchElementClusters = async () => {\n\t\tif (project !== null) {\n\t\t\tdispatch(loadingActions.show());\n\t\t\ttry {\n\t\t\t\tsetElementClusters(await elementClusterService.getAll(project.code, versionNumberEnum.PACK));\n\t\t\t}\n\t\t\tcatch {\n\t\t\t\tdispatch(alertActions.show(alertMessage.FETCH_FAILURE, 'error'));\n\t\t\t}\n\t\t\tfinally {\n\t\t\t\tdispatch(loadingActions.hide());\n\t\t\t}\n\t\t}\n\t}\n\n\tconst handleRefresh = async () => {\n\t\tif (project !== null) {\n\t\t\tdispatch(loadingActions.show());\n\t\t\ttry {\n\t\t\t\tconst data = await Promise.all([\n\t\t\t\t\telementService.getLeaf(project.code, versionNumberEnum.POST),\n\t\t\t\t\telementClusterService.getAll(project.code, versionNumberEnum.PACK),\n\t\t\t\t]);\n\t\t\t\tsetElements(data[0]);\n\t\t\t\tsetElementClusters(data[1]);\n\t\t\t}\n\t\t\tcatch {\n\t\t\t\tdispatch(alertActions.show(alertMessage.FETCH_FAILURE, 'error'));\n\t\t\t}\n\t\t\tfinally {\n\t\t\t\tdispatch(loadingActions.hide());\n\t\t\t}\n\t\t}\n\t}\n\n\tconst handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tsetItem({ ...item, [event.target.name]: event.target.value });\n\t};\n\n\tconst handleCloseForm = () => {\n\t\tsetShowForm(false);\n\t};\n\n\tconst handleOpenCreateForm = (elementCode: string) => {\n\t\tsetItem({\n\t\t\tclusterCode: '',\n\t\t\telementCode: elementCode,\n\t\t\tquantity: '0',\n\t\t});\n\t\tsetIsEdit(false);\n\t\tsetShowForm(true);\n\t};\n\n\tconst handleOpenEditForm = (item: ElementClusterViewModel) => {\n\t\tsetItem({\n\t\t\telementCode: item.elementCode,\n\t\t\tclusterCode: item.clusterCode,\n\t\t\tquantity: item.quantity.toString(),\n\t\t});\n\t\tsetIsEdit(true);\n\t\tsetShowForm(true);\n\t};\n\n\tconst handleSubmit = async () => {\n\t\tsetShowForm(false);\n\t\tif (project !== null) {\n\t\t\tdispatch(loadingActions.show());\n\t\t\ttry {\n\t\t\t\tif (isEdit) {\n\t\t\t\t\tconst model: ElementClusterModel = {\n\t\t\t\t\t\telementCode: item.elementCode,\n\t\t\t\t\t\tclusterCode: item.clusterCode,\n\t\t\t\t\t\tquantity: parseFloat(item.quantity),\n\t\t\t\t\t\tprojectCode: project.code,\n\t\t\t\t\t\tversionNumber: versionNumberEnum.PACK,\n\t\t\t\t\t}\n\t\t\t\t\tawait elementClusterService.edit(project.code, item.elementCode, item.clusterCode, model);\n\t\t\t\t\tdispatch(alertActions.show(alertMessage.ACTION_SUCCESS, 'success'));\n\t\t\t\t\tfetchElementClusters();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (cluster !== null) {\n\t\t\t\t\t\tconst model: ElementClusterModel = {\n\t\t\t\t\t\t\telementCode: item.elementCode,\n\t\t\t\t\t\t\tclusterCode: cluster.code,\n\t\t\t\t\t\t\tquantity: parseFloat(item.quantity),\n\t\t\t\t\t\t\tprojectCode: project.code,\n\t\t\t\t\t\t\tversionNumber: versionNumberEnum.PACK,\n\t\t\t\t\t\t}\n\t\t\t\t\t\tawait elementClusterService.create(project.code, model);\n\t\t\t\t\t\tdispatch(alertActions.show(alertMessage.ACTION_SUCCESS, 'success'));\n\t\t\t\t\t\tfetchElementClusters();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch {\n\t\t\t\tdispatch(alertActions.show(alertMessage.ACTION_FAILURE, 'error'));\n\t\t\t\tdispatch(loadingActions.hide());\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handleSelect = async (elementCode: string, clusterCode: string) => {\n\t\tif (isInclude(elementCode, clusterCode, selectedList)) {\n\t\t\tsetSelectedList(selectedList.filter(x => !(x.clusterCode === clusterCode && x.elementCode === elementCode)));\n\t\t}\n\t\telse {\n\t\t\tsetSelectedList([...selectedList, { clusterCode, elementCode }]);\n\t\t}\n\t}\n\n\tReact.useEffect(() => {\n\t\thandleRefresh();\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [project]);\n\n\tReact.useEffect(() => {\n\t\tsetSelectedList([]);\n\t}, [elementClusters]);\n\n\tReact.useEffect(() => {\n\t\tsetDisplayElements(\n\t\t\telements.filter(x => keyWord.split('|').every(k => x.description.includes(k)))\n\t\t);\n\t}, [elements, keyWord]);\n\n\treturn (\n\t\t<>\n\t\t\t<FormDialog\n\t\t\t\topen={showConfirmDelete}\n\t\t\t\tonClose={() => { setShowConfirmDelete(false) }}\n\t\t\t\tonSubmit={() => { handleSubmitDelete(); }}\n\t\t\t\ttitle=\"Xác nhận xóa các mapping\"\n\t\t\t>\n\t\t\t\t<Grid container spacing={1}>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<Typography variant=\"body2\">\n\t\t\t\t\t\t\tThao tác này sẽ xóa các mapping được chọn. Vui lòng kiểm tra kỹ trước khi xóa!\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t{selectedList.map(s => (\n\t\t\t\t\t\t<Grid item xs={12} key={`${s.elementCode}-${s.clusterCode}`}>\n\t\t\t\t\t\t\t<Typography variant=\"subtitle2\">{`${s.elementCode} - ${s.clusterCode}`}</Typography>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t))}\n\t\t\t\t</Grid>\n\t\t\t</FormDialog>\n\t\t\t<FormDialog\n\t\t\t\topen={showAddExcelResult}\n\t\t\t\tonClose={handleCloseExcelResult}\n\t\t\t\ttitle=\"Kết quả tạo từ file excel\"\n\t\t\t>\n\t\t\t\t<Grid container spacing={1}>\n\t\t\t\t\t{addExcelResult.map((a, index) => (\n\t\t\t\t\t\t<Grid item container spacing={1} xs={12} key={index}>\n\t\t\t\t\t\t\t<Grid item xs={12} md={3} style={{ color: a.isAdded ? 'green' : 'red' }}>\n\t\t\t\t\t\t\t\t<Typography variant=\"subtitle2\">{`${a.item.elementCode}-${a.item.clusterCode}`}</Typography>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={12} md={9} style={{ color: a.isAdded ? 'green' : 'red' }}>\n\t\t\t\t\t\t\t\t<Typography variant=\"caption\">{a.message}</Typography>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t))}\n\t\t\t\t</Grid>\n\t\t\t</FormDialog>\n\t\t\t<FormDialog\n\t\t\t\ttitle=\"Thêm/Chỉnh sửa\"\n\t\t\t\topen={showForm}\n\t\t\t\tonClose={handleCloseForm}\n\t\t\t\tonSubmit={handleSubmit}\n\t\t\t>\n\t\t\t\t<Grid container spacing={1}>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tname=\"elementCode\"\n\t\t\t\t\t\t\tlabel=\"Mã WBS\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\tvalue={item.elementCode}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t{isEdit ?\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tname=\"clusterCode\"\n\t\t\t\t\t\t\t\tlabel=\"Mã điển hình\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t\tvalue={item.clusterCode}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\tproject !== null && <ClustersComboBox\n\t\t\t\t\t\t\t\tprojectCode={project.code}\n\t\t\t\t\t\t\t\tvalue={cluster}\n\t\t\t\t\t\t\t\tonChange={(value) => { setCluster(value) }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tname=\"quantity\"\n\t\t\t\t\t\t\tlabel=\"Ghi chú\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tvalue={item.quantity}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</FormDialog>\n\t\t\t<Paper className={classes.root}>\n\t\t\t\t<Grid container>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\titem xs={12}\n\t\t\t\t\t\tstyle={{ padding: '8px' }}\n\t\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\t\tspacing={1}\n\t\t\t\t\t\talignItems=\"flex-end\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Grid item xs={12} md={6}>\n\t\t\t\t\t\t\t<ProjectsComboBox\n\t\t\t\t\t\t\t\tvalue={project}\n\t\t\t\t\t\t\t\tonChange={handleProjectChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12} md={6}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tname=\"keyWord\"\n\t\t\t\t\t\t\t\tlabel=\"Lọc WBS\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tvalue={keyWord}\n\t\t\t\t\t\t\t\tonChange={(event) => { setKeyWord(event.target.value); }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t{project !== null && (\n\t\t\t\t\t\t\t<Grid container spacing={1} item xs={12} alignItems=\"flex-end\">\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<UploadButton\n\t\t\t\t\t\t\t\t\t\tfilesLimit={1}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Tải tệp excel\"\n\t\t\t\t\t\t\t\t\t\tacceptedFiles={['.xls', '.xlsx',]}\n\t\t\t\t\t\t\t\t\t\tonSubmit={handleSubmitUploadForm}\n\t\t\t\t\t\t\t\t\t\ttooltip=\"Tạo từ file excel\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\ttext=\"Excel\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<DownloadButton\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Tải về\"\n\t\t\t\t\t\t\t\t\t\tfilename={`${project.code}_Mapping.xlsx`}\n\t\t\t\t\t\t\t\t\t\turl={`/api/project-system/elementClusters/get-excel?projectCode=${project.code}&version=${versionNumberEnum.PACK}`}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\ttooltip=\"Làm mới\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\ttext=\"Làm mới\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"success\"\n\t\t\t\t\t\t\t\t\t\ticon=\"sync-alt\"\n\t\t\t\t\t\t\t\t\t\tonClick={handleRefresh}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\ttooltip=\"Xóa các mapping đã chọn\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\ttext=\"Xóa\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"danger\"\n\t\t\t\t\t\t\t\t\t\ticon=\"trash-alt\"\n\t\t\t\t\t\t\t\t\t\tdisabled={selectedList.length <= 0}\n\t\t\t\t\t\t\t\t\t\tonClick={() => { setShowConfirmDelete(true); }}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t\t<TableContainer className={classes.container}>\n\t\t\t\t\t<Table stickyHeader aria-label=\"sticky table\" size=\"small\">\n\t\t\t\t\t\t<TableHead>\n\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t<TableCell style={{ padding: 0, width: 16 }}></TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">Mã cấu kiện</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">Diễn giải cấu kiện</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"right\">Số lượng</TableCell>\n\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t</TableHead>\n\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t{displayElements.map(element => (\n\t\t\t\t\t\t\t\t<React.Fragment key={element.code}>\n\t\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t\t<TableCell style={{ padding: 0, width: 16 }}></TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\" style={{ fontWeight: 'bold' }}>{element.code}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\" colSpan={2} style={{ fontWeight: 'bold' }}>{element.description}</TableCell>\n\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t{elementClusters.filter(x => x.elementCode === element.code).map((item, index) => (\n\t\t\t\t\t\t\t\t\t\t<TableRow key={index}\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: isInclude(item.elementCode, item.clusterCode, selectedList) ? colors.red[100] : 'initial',\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tpadding: 0,\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: 16,\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: isInclude(item.elementCode, item.clusterCode, selectedList) ? colors.red[500] : colors.teal[100],\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => { handleSelect(item.elementCode, item.clusterCode) }}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.cell}\n\t\t\t\t\t\t\t\t\t\t\t\talign=\"left\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ paddingLeft: '32px', cursor: 'pointer', }}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleOpenEditForm(item);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{item.clusterCode}\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\" style={{ paddingLeft: '32px' }}>{item.clusterDescription}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"right\">{item.quantity}</TableCell>\n\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t\t<TableCell style={{ padding: 0, width: 16, backgroundColor: colors.green[300] }}></TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.cell}\n\t\t\t\t\t\t\t\t\t\t\tcolSpan={4}\n\t\t\t\t\t\t\t\t\t\t\talign=\"left\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ cursor: 'pointer', fontStyle: 'italic' }}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleOpenCreateForm(element.code)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t+ Thêm cấu kiện mới\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t</Table>\n\t\t\t\t</TableContainer>\n\t\t\t</Paper>\n\t\t</>\n\t);\n}\n","import React from 'react';\n\nimport {\n  ComboBox,\n} from '@nvdunginest/emis-mui';\n\nimport serviceMasterService, {\n  ServiceMasterModel,\n} from '../services/serviceMaster';\n\ntype ComboBoxType = ServiceMasterModel & {\n  label: string;\n}\n\ntype Props = {\n  value: ServiceMasterModel | null;\n  onChange: (value: ServiceMasterModel) => void;\n}\n\nconst SERVICE_MASTER_CODE_KEY = 'SERVICE_MASTER_CODE_KEY';\nconst SERVICE_MASTER_DESCRIPTION_KEY = 'SERVICE_MASTER_DESCRIPTION_KEY';\nconst SERVICE_MASTER_UNIT_KEY = 'SERVICE_MASTER_UNIT_KEY';\n\nconst renderComboBoxOptions = (serviceMasters: ServiceMasterModel[]): ComboBoxType[] => {\n  return serviceMasters.map(x => {\n    const result: ComboBoxType = {\n      ...x,\n      label: `[${x.code}]-${x.description}`,\n    }\n\n    return result;\n  })\n}\n\nconst getCache = (): ComboBoxType | null => {\n  const code = localStorage.getItem(SERVICE_MASTER_CODE_KEY);\n  const description = localStorage.getItem(SERVICE_MASTER_DESCRIPTION_KEY);\n  const unit = localStorage.getItem(SERVICE_MASTER_UNIT_KEY);\n  if (code === null || description === null || unit === null) {\n    return null;\n  }\n  else {\n    return {\n      code: code,\n      label: `[${code}]-${description}`,\n      description: description,\n      unit: unit,\n    };\n  }\n}\n\nconst setCache = (serviceMaster: ComboBoxType) => {\n  localStorage.setItem(SERVICE_MASTER_CODE_KEY, serviceMaster.code);\n  localStorage.setItem(SERVICE_MASTER_DESCRIPTION_KEY, serviceMaster.description);\n  localStorage.setItem(SERVICE_MASTER_UNIT_KEY, serviceMaster.unit);\n}\n\nexport default function ServiceMastersComboBox({\n  value,\n  onChange,\n}: Props): JSX.Element {\n\n  const [data, setData] = React.useState<ServiceMasterModel[]>([]);\n\n  const getData = async () => {\n    try {\n      setData(await serviceMasterService.getAll());\n    }\n    catch {\n      setData([]);\n    }\n  }\n\n  const handleChange = (value: ComboBoxType | null) => {\n    if (value !== null) {\n      onChange({\n        code: value.code,\n        description: value.description,\n        unit: value.unit,\n      });\n      setCache(value);\n    }\n  }\n\n  React.useEffect(() => {\n    const cache = getCache();\n    if (cache !== null) {\n      onChange({\n        code: cache.code,\n        description: cache.description,\n        unit: cache.unit,\n      });\n    }\n    getData();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <ComboBox\n      required\n      label=\"Công tác\"\n      options={renderComboBoxOptions(data)}\n      optionLabel=\"label\"\n      value={value !== null ? {\n        code: value.code,\n        label: `[${value.code}]-${value.description}`,\n        description: value.description,\n        unit: value.unit,\n      } : null}\n      getOptionSelected={(o, v) => o.code === v.code}\n      onChange={handleChange}\n    />\n  );\n}\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n\tPaper,\n\tTable,\n\tTableBody,\n\tTableCell,\n\tTableContainer,\n\tTableHead,\n\tTableRow,\n\tGrid,\n\tTypography,\n\tcolors,\n} from '@material-ui/core';\nimport {\n\tFormDialog,\n\tTextField,\n\tIconButton,\n\tUploadButton,\n\tDownloadButton,\n} from '@nvdunginest/emis-mui';\n\nimport {\n\tAppDispatch,\n\talertActions,\n\talertMessage,\n\tloadingActions,\n} from '../../../core';\n\nimport format from '../../../configs/format';\n\nimport ProjectsComboBox from '../components/ProjectsComboBox';\nimport ServiceMastersComboBox from '../components/ServiceMastersComboBox';\n\nimport {\n\tversionNumberEnum,\n\tAddFromExcelModel,\n} from '../services/common';\n\nimport {\n\tProjectModel,\n} from '../services/project';\n\nimport clusterService, {\n\tClusterModel,\n} from '../services/cluster';\n\nimport {\n\tServiceMasterModel,\n} from '../services/serviceMaster';\n\nimport itemService, {\n\tItemViewModel,\n\tItemModel,\n\tItemRemoveModel,\n} from '../services/item';\n\nconst useStyles = makeStyles({\n\troot: {\n\t\twidth: '100%',\n\t\theight: '100%',\n\t},\n\tcontainer: {\n\t\tmaxHeight: 'calc(100% - 120px)',\n\t\toverflowY: 'scroll',\n\t},\n\tcell: {\n\t\tfontSize: '0.75rem',\n\t},\n});\n\ntype ItemState = {\n\tserviceMasterCode: string,\n\tclusterCode: string,\n\tbillCode: string,\n\tquantity: string,\n}\n\nconst initialState: ItemState = {\n\tserviceMasterCode: '',\n\tclusterCode: '',\n\tbillCode: '',\n\tquantity: '',\n}\n\nconst isInclude = (clusterCode: string, serviceMasterCode: string, data: ItemRemoveModel[]): boolean => {\n\treturn data.find(x => x.clusterCode === clusterCode && x.serviceMasterCode === serviceMasterCode) !== undefined;\n}\n\nexport default function Items(): JSX.Element {\n\tconst classes = useStyles();\n\n\tconst dispatch: AppDispatch = useDispatch();\n\tconst [showForm, setShowForm] = React.useState(false);\n\tconst [isEdit, setIsEdit] = React.useState(false);\n\n\tconst [project, setProject] = React.useState<ProjectModel | null>(null);\n\tconst [serviceMaster, setServiceMaster] = React.useState<ServiceMasterModel | null>(null);\n\n\tconst [clusters, setClusters] = React.useState<ClusterModel[]>([]);\n\tconst [displayClusters, setDisplayClusters] = React.useState<ClusterModel[]>([]);\n\tconst [items, setItems] = React.useState<ItemViewModel[]>([]);\n\tconst [model, setModel] = React.useState<ItemState>(initialState);\n\n\tconst [selectedList, setSelectedList] = React.useState<ItemRemoveModel[]>([]);\n\n\tconst [showAddExcelResult, setShowAddExcelResult] = React.useState(false);\n\tconst [addExcelResult, setAddExcelResult] = React.useState<AddFromExcelModel<ItemModel>[]>([]);\n\n\tconst [keyWord, setKeyWord] = React.useState<string>('');\n\tconst [showConfirmDelete, setShowConfirmDelete] = React.useState(false);\n\n\tconst handleSubmitDelete = async () => {\n\t\tsetShowConfirmDelete(false);\n\t\tif (project !== null) {\n\t\t\tdispatch(loadingActions.show());\n\t\t\ttry {\n\t\t\t\tawait itemService.remove(project.code, selectedList);\n\t\t\t\tfetchItems();\n\t\t\t\tsetSelectedList([]);\n\t\t\t\tdispatch(alertActions.show(alertMessage.ACTION_SUCCESS, 'success'));\n\t\t\t}\n\t\t\tcatch {\n\t\t\t\tdispatch(alertActions.show(alertMessage.ACTION_FAILURE, 'error'));\n\t\t\t\tdispatch(loadingActions.hide());\n\t\t\t}\n\t\t}\n\t}\n\n\tconst handleCloseExcelResult = () => {\n\t\tsetShowAddExcelResult(false);\n\t};\n\n\tconst handleSubmitUploadForm = async (files: File[]) => {\n\t\tif (files.length >= 1 && project !== null) {\n\t\t\tsetAddExcelResult([]);\n\t\t\tdispatch(loadingActions.show());\n\t\t\ttry {\n\t\t\t\tsetAddExcelResult(await itemService.addFromExcel(project.code, files[0]));\n\t\t\t\tfetchItems();\n\t\t\t\tsetShowAddExcelResult(true);\n\t\t\t}\n\t\t\tcatch {\n\t\t\t\tdispatch(loadingActions.hide());\n\t\t\t\tdispatch(alertActions.show(alertMessage.ACTION_FAILURE, 'error'));\n\t\t\t}\n\t\t}\n\t};\n\n\tconst fetchItems = async () => {\n\t\tif (project !== null) {\n\t\t\tdispatch(loadingActions.show());\n\t\t\ttry {\n\t\t\t\tsetItems(await itemService.getAll(project.code, versionNumberEnum.PACK));\n\t\t\t}\n\t\t\tcatch {\n\t\t\t\tdispatch(alertActions.show(alertMessage.FETCH_FAILURE, 'error'));\n\t\t\t}\n\t\t\tfinally {\n\t\t\t\tdispatch(loadingActions.hide());\n\t\t\t}\n\t\t}\n\t}\n\n\tconst handleRefresh = async () => {\n\t\tif (project !== null) {\n\t\t\tdispatch(loadingActions.show());\n\t\t\ttry {\n\t\t\t\tconst data = await Promise.all([\n\t\t\t\t\tclusterService.getSimple(project.code, versionNumberEnum.PACK),\n\t\t\t\t\titemService.getAll(project.code, versionNumberEnum.PACK),\n\t\t\t\t]);\n\t\t\t\tsetClusters(data[0]);\n\t\t\t\tsetItems(data[1]);\n\t\t\t}\n\t\t\tcatch {\n\t\t\t\tdispatch(alertActions.show(alertMessage.FETCH_FAILURE, 'error'));\n\t\t\t}\n\t\t\tfinally {\n\t\t\t\tdispatch(loadingActions.hide());\n\t\t\t}\n\t\t}\n\t}\n\n\tconst handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tsetModel({ ...model, [event.target.name]: event.target.value });\n\t};\n\n\tconst handleCloseForm = () => {\n\t\tsetShowForm(false);\n\t};\n\n\tconst handleOpenCreateForm = (clusterCode: string) => {\n\t\tsetModel({\n\t\t\tserviceMasterCode: '',\n\t\t\tclusterCode: clusterCode,\n\t\t\tbillCode: '',\n\t\t\tquantity: '0',\n\t\t});\n\t\tsetIsEdit(false);\n\t\tsetShowForm(true);\n\t};\n\n\tconst handleOpenEditForm = (item: ItemViewModel) => {\n\t\tsetModel({\n\t\t\tserviceMasterCode: item.serviceMasterCode,\n\t\t\tclusterCode: item.clusterCode,\n\t\t\tbillCode: item.billCode,\n\t\t\tquantity: item.quantity.toString(),\n\t\t});\n\t\tsetIsEdit(true);\n\t\tsetShowForm(true);\n\t};\n\n\tconst handleSubmit = async () => {\n\t\tsetShowForm(false);\n\t\tif (project !== null) {\n\t\t\tdispatch(loadingActions.show());\n\t\t\ttry {\n\t\t\t\tif (isEdit) {\n\t\t\t\t\tconst data: ItemModel = {\n\t\t\t\t\t\tserviceMasterCode: model.serviceMasterCode,\n\t\t\t\t\t\tclusterCode: model.clusterCode,\n\t\t\t\t\t\tbillCode: model.billCode,\n\t\t\t\t\t\tquantity: parseFloat(model.quantity),\n\t\t\t\t\t\tprojectCode: project.code,\n\t\t\t\t\t\tversionNumber: versionNumberEnum.PACK,\n\t\t\t\t\t}\n\t\t\t\t\tawait itemService.edit(project.code, model.serviceMasterCode, model.clusterCode, data);\n\t\t\t\t\tdispatch(alertActions.show(alertMessage.ACTION_SUCCESS, 'success'));\n\t\t\t\t\tfetchItems();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (serviceMaster !== null) {\n\t\t\t\t\t\tconst data: ItemModel = {\n\t\t\t\t\t\t\tserviceMasterCode: serviceMaster.code,\n\t\t\t\t\t\t\tclusterCode: model.clusterCode,\n\t\t\t\t\t\t\tbillCode: model.billCode,\n\t\t\t\t\t\t\tquantity: parseFloat(model.quantity),\n\t\t\t\t\t\t\tprojectCode: project.code,\n\t\t\t\t\t\t\tversionNumber: versionNumberEnum.PACK,\n\t\t\t\t\t\t}\n\t\t\t\t\t\tawait itemService.create(project.code, data);\n\t\t\t\t\t\tdispatch(alertActions.show(alertMessage.ACTION_SUCCESS, 'success'));\n\t\t\t\t\t\tfetchItems();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch {\n\t\t\t\tdispatch(alertActions.show(alertMessage.ACTION_FAILURE, 'error'));\n\t\t\t\tdispatch(loadingActions.hide());\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handleSelect = async (clusterCode: string, serviceMasterCode: string) => {\n\t\tif (isInclude(clusterCode, serviceMasterCode, selectedList)) {\n\t\t\tsetSelectedList(selectedList.filter(x => !(x.clusterCode === clusterCode && x.serviceMasterCode === serviceMasterCode)));\n\t\t}\n\t\telse {\n\t\t\tsetSelectedList([...selectedList, { clusterCode, serviceMasterCode }]);\n\t\t}\n\t}\n\n\tReact.useEffect(() => {\n\t\thandleRefresh();\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [project]);\n\n\tReact.useEffect(() => {\n\t\tsetSelectedList([]);\n\t}, [items]);\n\n\tReact.useEffect(() => {\n\t\tsetDisplayClusters(\n\t\t\tclusters.filter(x => keyWord.split('|').every(k => x.description.includes(k)))\n\t\t);\n\t}, [clusters, keyWord]);\n\n\treturn (\n\t\t<>\n\t\t\t<FormDialog\n\t\t\t\topen={showConfirmDelete}\n\t\t\t\tonClose={() => { setShowConfirmDelete(false) }}\n\t\t\t\tonSubmit={() => { handleSubmitDelete(); }}\n\t\t\t\ttitle=\"Xác nhận xóa các công tác\"\n\t\t\t>\n\t\t\t\t<Grid container spacing={1}>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<Typography variant=\"body2\">\n\t\t\t\t\t\t\tThao tác này sẽ xóa các công tác được chọn. Vui lòng kiểm tra kỹ trước khi xóa!\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t{selectedList.map(s => (\n\t\t\t\t\t\t<Grid item xs={12} key={`${s.clusterCode}-${s.serviceMasterCode}`}>\n\t\t\t\t\t\t\t<Typography variant=\"subtitle2\">{`${s.clusterCode} - ${s.serviceMasterCode}`}</Typography>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t))}\n\t\t\t\t</Grid>\n\t\t\t</FormDialog>\n\t\t\t<FormDialog\n\t\t\t\topen={showAddExcelResult}\n\t\t\t\tonClose={handleCloseExcelResult}\n\t\t\t\ttitle=\"Kết quả tạo từ file excel\"\n\t\t\t>\n\t\t\t\t<Grid container spacing={1}>\n\t\t\t\t\t{addExcelResult.map((a, index) => (\n\t\t\t\t\t\t<Grid item container spacing={1} xs={12} key={index}>\n\t\t\t\t\t\t\t<Grid item xs={12} md={3} style={{ color: a.isAdded ? 'green' : 'red' }}>\n\t\t\t\t\t\t\t\t<Typography variant=\"subtitle2\">{`${a.item.serviceMasterCode}-${a.item.clusterCode}`}</Typography>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={12} md={9} style={{ color: a.isAdded ? 'green' : 'red' }}>\n\t\t\t\t\t\t\t\t<Typography variant=\"caption\">{a.message}</Typography>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t))}\n\t\t\t\t</Grid>\n\t\t\t</FormDialog>\n\t\t\t<FormDialog\n\t\t\t\ttitle=\"Thêm/Chỉnh sửa\"\n\t\t\t\topen={showForm}\n\t\t\t\tonClose={handleCloseForm}\n\t\t\t\tonSubmit={handleSubmit}\n\t\t\t>\n\t\t\t\t<Grid container spacing={1}>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t{isEdit ?\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tname=\"serviceMasterCode\"\n\t\t\t\t\t\t\t\tlabel=\"Mã WBS\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t\tvalue={model.serviceMasterCode}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<ServiceMastersComboBox\n\t\t\t\t\t\t\t\tvalue={serviceMaster}\n\t\t\t\t\t\t\t\tonChange={(value) => { setServiceMaster(value) }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tname=\"clusterCode\"\n\t\t\t\t\t\t\tlabel=\"Mã điển hình\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\tvalue={model.clusterCode}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tname=\"billCode\"\n\t\t\t\t\t\t\tlabel=\"Mã BOQ\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tvalue={model.billCode}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tname=\"quantity\"\n\t\t\t\t\t\t\tlabel=\"Ghi chú\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tvalue={model.quantity}\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</FormDialog>\n\t\t\t<Paper className={classes.root}>\n\t\t\t\t<Grid container>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\titem xs={12}\n\t\t\t\t\t\tstyle={{ padding: '8px' }}\n\t\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\t\tspacing={1}\n\t\t\t\t\t\talignItems=\"flex-end\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Grid item xs={12} md={6}>\n\t\t\t\t\t\t\t<ProjectsComboBox\n\t\t\t\t\t\t\t\tvalue={project}\n\t\t\t\t\t\t\t\tonChange={(value) => { setProject(value) }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12} md={6}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tname=\"keyWord\"\n\t\t\t\t\t\t\t\tlabel=\"Lọc theo cấu kiện\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tvalue={keyWord}\n\t\t\t\t\t\t\t\tonChange={(event) => { setKeyWord(event.target.value); }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t{project !== null && (\n\t\t\t\t\t\t\t<Grid container spacing={1} item xs={12} alignItems=\"flex-end\">\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<UploadButton\n\t\t\t\t\t\t\t\t\t\tfilesLimit={1}\n\t\t\t\t\t\t\t\t\t\ttitle=\"Tải tệp excel\"\n\t\t\t\t\t\t\t\t\t\tacceptedFiles={['.xls', '.xlsx',]}\n\t\t\t\t\t\t\t\t\t\tonSubmit={handleSubmitUploadForm}\n\t\t\t\t\t\t\t\t\t\ttooltip=\"Tạo từ file excel\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\ttext=\"Excel\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<DownloadButton\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Tải về\"\n\t\t\t\t\t\t\t\t\t\tfilename={`${project.code}_Cong tac.xlsx`}\n\t\t\t\t\t\t\t\t\t\turl={`/api/project-system/items/get-excel?projectCode=${project.code}&version=${versionNumberEnum.PACK}`}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\ttooltip=\"Làm mới\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\ttext=\"Làm mới\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"success\"\n\t\t\t\t\t\t\t\t\t\ticon=\"sync-alt\"\n\t\t\t\t\t\t\t\t\t\tonClick={handleRefresh}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\ttooltip=\"Xóa các công tác đã chọn\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\ttext=\"Xóa\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"danger\"\n\t\t\t\t\t\t\t\t\t\ticon=\"trash-alt\"\n\t\t\t\t\t\t\t\t\t\tdisabled={selectedList.length <= 0}\n\t\t\t\t\t\t\t\t\t\tonClick={() => { setShowConfirmDelete(true); }}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t\t<TableContainer className={classes.container}>\n\t\t\t\t\t<Table stickyHeader aria-label=\"sticky table\" size=\"small\">\n\t\t\t\t\t\t<TableHead>\n\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t<TableCell style={{ padding: 0, width: 16 }}></TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">Mã công tác</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">Diễn giải</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">Mã BOQ</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"center\">Đơn vị</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"right\">Khối lượng</TableCell>\n\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t</TableHead>\n\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t{displayClusters.map(cluster => (\n\t\t\t\t\t\t\t\t<React.Fragment key={cluster.code}>\n\t\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t\t<TableCell style={{ padding: 0, width: 16 }}></TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\" style={{ fontWeight: 'bold' }}>{cluster.code}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\" colSpan={4} style={{ fontWeight: 'bold' }}>{cluster.description}</TableCell>\n\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t{items.filter(x => x.clusterCode === cluster.code).map((item, index) => (\n\t\t\t\t\t\t\t\t\t\t<TableRow key={index}\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: isInclude(item.clusterCode, item.serviceMasterCode, selectedList) ? colors.red[100] : 'initial',\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tpadding: 0,\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: 16,\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: isInclude(item.clusterCode, item.serviceMasterCode, selectedList) ? colors.red[500] : colors.teal[100],\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => { handleSelect(item.clusterCode, item.serviceMasterCode) }}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.cell}\n\t\t\t\t\t\t\t\t\t\t\t\talign=\"left\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ paddingLeft: '32px', cursor: 'pointer', }}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleOpenEditForm(item);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{item.serviceMasterCode}\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\" style={{ paddingLeft: '32px' }}>{item.serviceMasterDescription}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">{item.billCode}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"center\">{item.serviceMasterUnit}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"right\">{format.formatMoney(item.quantity, 3)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t\t<TableCell style={{ padding: 0, width: 16, backgroundColor: colors.green[300] }}></TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.cell}\n\t\t\t\t\t\t\t\t\t\t\tcolSpan={5}\n\t\t\t\t\t\t\t\t\t\t\talign=\"left\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ cursor: 'pointer', fontStyle: 'italic' }}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleOpenCreateForm(cluster.code)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t+ Thêm công tác mới\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t</Table>\n\t\t\t\t</TableContainer>\n\t\t\t</Paper>\n\t\t</>\n\t);\n}\n","import React from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n\tPaper,\n\tTable,\n\tTableBody,\n\tTableCell,\n\tTableContainer,\n\tTableHead,\n\tTableRow,\n\tGrid,\n\tTypography,\n\tcolors,\n} from '@material-ui/core';\nimport {\n\tIconButton,\n\tDownloadButton,\n} from '@nvdunginest/emis-mui';\n\nimport {\n\talertActions,\n\tloadingActions,\n\talertMessage,\n\tAppDispatch,\n} from '../../../core';\n\nimport clusterService, {\n\tClusterViewModel,\n} from '../services/cluster';\n\nconst useStyles = makeStyles({\n\troot: {\n\t\twidth: '100%',\n\t\theight: '100%',\n\t},\n\tcontainer: {\n\t\tmaxHeight: 'calc(100% - 120px)',\n\t\toverflowY: 'scroll',\n\t},\n\tcell: {\n\t\tfontSize: '0.75rem',\n\t},\n});\n\nexport default function Clusters(): JSX.Element {\n\tconst classes = useStyles();\n\tconst { projectCode, versionNumber }: never = useParams();\n\tconst dispatch: AppDispatch = useDispatch();\n\n\tconst [clusters, setClusters] = React.useState<ClusterViewModel[]>([]);\n\n\tconst handleRefresh = async () => {\n\t\tdispatch(loadingActions.show());\n\t\ttry {\n\t\t\tsetClusters(await clusterService.getAll(projectCode, versionNumber));\n\t\t}\n\t\tcatch {\n\t\t\tsetClusters([]);\n\t\t\tdispatch(alertActions.show(alertMessage.FETCH_FAILURE, 'error'));\n\t\t}\n\t\tfinally {\n\t\t\tdispatch(loadingActions.hide());\n\t\t}\n\t}\n\n\tReact.useEffect(() => {\n\t\thandleRefresh();\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [projectCode, versionNumber]);\n\n\treturn (\n\t\t<Paper className={classes.root}>\n\t\t\t<Grid container>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\titem xs={12}\n\t\t\t\t\tstyle={{ padding: '8px' }}\n\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\tspacing={1}\n\t\t\t\t\talignItems=\"flex-end\"\n\t\t\t\t>\n\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t<Typography variant=\"h6\">{`Dự án: ${projectCode}`}</Typography>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t<Typography variant=\"h6\">{`Phiên bản: ${versionNumber}`}</Typography>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t<DownloadButton\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tlabel=\"Tải về\"\n\t\t\t\t\t\t\tfilename={`${projectCode}_${versionNumber}_Dien hinh.xlsx`}\n\t\t\t\t\t\t\turl={`/api/project-system/clusters/get-excel?projectCode=${projectCode}&version=${versionNumber}`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\ttooltip=\"Làm mới\"\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\ttext=\"Làm mới\"\n\t\t\t\t\t\t\tcolor=\"success\"\n\t\t\t\t\t\t\ticon=\"sync-alt\"\n\t\t\t\t\t\t\tonClick={handleRefresh}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t\t<TableContainer className={classes.container}>\n\t\t\t\t<Table stickyHeader aria-label=\"sticky table\" size=\"small\">\n\t\t\t\t\t<TableHead>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell style={{ padding: 0, width: 16 }}></TableCell>\n\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">Mã điển hình</TableCell>\n\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">Diễn giải</TableCell>\n\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">Ghi chú</TableCell>\n\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">Chiết tính</TableCell>\n\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"right\">Số lượng</TableCell>\n\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"right\">Công tác</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t</TableHead>\n\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t{clusters.map(cluster => (\n\t\t\t\t\t\t\t<TableRow key={cluster.code}>\n\t\t\t\t\t\t\t\t<TableCell\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tpadding: 0,\n\t\t\t\t\t\t\t\t\t\twidth: 16,\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: colors.teal[100],\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">{cluster.code}</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">{cluster.description}</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">{cluster.note}</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"left\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={cluster.filePath}\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\ttextDecoration: 'none',\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tChiết tính\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"right\">{cluster.elementCount}</TableCell>\n\t\t\t\t\t\t\t\t<TableCell className={classes.cell} align=\"right\">{cluster.itemCount}</TableCell>\n\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</TableBody>\n\t\t\t\t</Table>\n\t\t\t</TableContainer>\n\t\t</Paper>\n\t);\n}\n","import React from 'react';\nimport {\n  Switch,\n  Route,\n  useRouteMatch,\n} from 'react-router-dom';\n\nimport Clusters from '../pages/Clusters';\nimport DesignerCommits from '../pages/DesignerCommits';\nimport DesignerVersions from '../pages/DesignerVersions';\nimport ElementClusters from '../pages/ElementClusters';\nimport Items from '../pages/Items';\nimport VersionClusters from '../pages/VersionClusters';\n\nexport default function DesignerRoutes(): JSX.Element {\n  const { path } = useRouteMatch();\n\n  return (\n    <Switch>\n      <Route path={`${path}/clusters`} component={Clusters} />\n      <Route path={`${path}/element-clusters`} component={ElementClusters} />\n      <Route path={`${path}/items`} component={Items} />\n      <Route path={`${path}/commits`} component={DesignerCommits} />\n      <Route path={`${path}/versions`} component={DesignerVersions} />\n      <Route path={`${path}/version-data/clusters/:projectCode/:versionNumber`} component={VersionClusters} />\n    </Switch>\n  );\n}\n"],"sourceRoot":""}