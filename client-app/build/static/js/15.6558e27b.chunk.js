(this.webpackJsonpemis=this.webpackJsonpemis||[]).push([[15],{501:function(e,t,n){"use strict";var a=n(10),c=n.n(a);var r={getAll:function(){return c.a.get("/api/project-system/projects")}};t.a=r},539:function(e,t,n){"use strict";var a=n(10),c=n.n(a),r="/api/project-system/items";var i={getAll:function(e){return c.a.get("".concat(r,"?clusterCode=").concat(e))},report:function(e){return c.a.get("".concat(r,"/report?projectCode=").concat(e))},create:function(e){return c.a.post(r,e)},edit:function(e){return c.a.put(r,e)},remove:function(e,t){return c.a.delete("".concat(r,"?clusterCode=").concat(e,"&serviceMasterCode=").concat(t))}};t.a=i},721:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return _}));var a=n(0),c=n.n(a),r=n(29),i=n(28),s=n.n(i),o=n(42),l=n(16),d=n(20),j=n(41),u=n(52),h=n(149),b=n(450),p=n(460),x=n(461),O=n(457),m=n(458),f=n(459),g=n(462),v=n(22),y=n(115),C=n(501),W=n(539),k=n(1),w=Object(u.a)({root:{width:"100%",height:"100%"},container:{maxHeight:440}}),S=function(e){return e.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{label:"[".concat(e.code,"]-").concat(e.name)})}))};function M(){var e=w(),t=c.a.useContext(y.a),n=t.showAlert,a=t.showBackdrop,r=t.hideBackdrop,i=c.a.useState([]),d=Object(l.a)(i,2),u=d[0],M=d[1],q=c.a.useState(null),A=Object(l.a)(q,2),E=A[0],F=A[1],H=c.a.useState([]),I=Object(l.a)(H,2),T=I[0],B=I[1],D=function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(),e.prev=1,e.t0=M,e.next=5,C.a.getAll();case 5:e.t1=e.sent,(0,e.t0)(e.t1),r(),e.next=14;break;case 10:e.prev=10,e.t2=e.catch(1),r(),n(y.b.FETCH_FAILURE,"error");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(),e.prev=1,e.t0=B,e.next=5,W.a.report(t);case 5:e.t1=e.sent,(0,e.t0)(e.t1),r(),e.next=15;break;case 10:e.prev=10,e.t2=e.catch(1),B([]),r(),n(y.b.FETCH_FAILURE,"error");case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return c.a.useEffect((function(){D()}),[]),c.a.useEffect((function(){null!==E?L(E.code):B([])}),[E]),Object(k.jsxs)(h.a,{className:e.root,children:[Object(k.jsx)(b.a,{container:!0,children:Object(k.jsx)(b.a,{container:!0,item:!0,xs:12,style:{padding:"8px"},direction:"row",spacing:1,alignItems:"flex-end",children:Object(k.jsx)(b.a,{item:!0,xs:12,children:Object(k.jsx)(v.e,{required:!0,label:"D\u1ef1 \xe1n",options:S(u),optionLabel:"label",value:E,getOptionSelected:function(e,t){return e.code===t.code},onChange:function(e){F(e)}})})})}),Object(k.jsx)(p.a,{className:e.container,children:Object(k.jsxs)(x.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(k.jsx)(O.a,{children:Object(k.jsxs)(m.a,{children:[Object(k.jsx)(f.a,{align:"left",style:{minWidth:"20%"},children:"M\xe3 BOS"}),Object(k.jsx)(f.a,{align:"left",style:{minWidth:"40%"},children:"Di\u1ec5n gi\u1ea3i"}),Object(k.jsx)(f.a,{align:"left",style:{minWidth:"20%"},children:"\u0110\u01a1n v\u1ecb"}),Object(k.jsx)(f.a,{align:"right",style:{minWidth:"20%"},children:"Kh\u1ed1i l\u01b0\u1ee3ng"}),Object(k.jsx)(f.a,{align:"right",style:{minWidth:"20%"}})]})}),Object(k.jsx)(g.a,{children:T.map((function(e){return Object(k.jsxs)(m.a,{children:[Object(k.jsx)(f.a,{align:"left",style:{minWidth:"20%"},children:e.serviceMasterCode}),Object(k.jsx)(f.a,{align:"left",style:{minWidth:"40%"},children:e.description}),Object(k.jsx)(f.a,{align:"left",style:{minWidth:"20%"},children:e.unit}),Object(k.jsx)(f.a,{align:"right",style:{minWidth:"20%"},children:e.quantity}),Object(k.jsx)(f.a,{align:"right",style:{minWidth:"20%"},children:null!==E&&Object(k.jsx)(j.a,{to:"/project-system/estimator/resources/".concat(E.code,"/").concat(e.serviceMasterCode),style:{textDecoration:"none"},children:Object(k.jsx)(v.o,{tooltip:"\u0110\u1ecbnh m\u1ee9c",text:"\u0110\u1ecbnh m\u1ee9c",icon:"boxes",color:"info"})})})]},e.serviceMasterCode)}))})]})})]})}var q=n(17),A=n(10),E=n.n(A);var F={getAll:function(){return E.a.get("/api/project-system/materials")}},H="/api/project-system/resources";var I={getAll:function(e,t){return E.a.get("".concat(H,"?projectCode=").concat(e,"&serviceMasterCode=").concat(t))},report:function(e){return E.a.get("".concat(H,"/report?projectCode=").concat(e))},create:function(e){return E.a.post(H,e)},edit:function(e){return E.a.put(H,e)},remove:function(e,t){return E.a.delete("".concat(H,"?clusterCode=").concat(e,"&elementCode=").concat(t))}},T=Object(u.a)({root:{width:"100%",height:"100%"},container:{maxHeight:440}}),B={projectCode:"",serviceMasterCode:"",materialCode:"",description:"",unit:"",quantity:""};function D(){var e,t=T(),n=Object(r.i)(),a=n.projectCode,i=n.serviceMasterCode,j=c.a.useContext(y.a),u=j.showAlert,C=j.showBackdrop,W=j.hideBackdrop,w=c.a.useState(!1),S=Object(l.a)(w,2),M=S[0],A=S[1],E=c.a.useState(!1),H=Object(l.a)(E,2),D=H[0],L=H[1],N=c.a.useState([]),U=Object(l.a)(N,2),_=U[0],R=U[1],K=c.a.useState(null),z=Object(l.a)(K,2),J=z[0],G=z[1],P=c.a.useState([]),Q=Object(l.a)(P,2),V=Q[0],X=Q[1],Y=c.a.useState(B),Z=Object(l.a)(Y,2),$=Z[0],ee=Z[1],te=function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(),e.prev=1,e.t0=R,e.next=5,F.getAll();case 5:return e.t1=e.sent,(0,e.t0)(e.t1),e.next=9,ne(a,i);case 9:W(),e.next=16;break;case 12:e.prev=12,e.t2=e.catch(1),W(),u(y.b.FETCH_FAILURE,"error");case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(o.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=X,e.next=4,I.getAll(t,n);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=12;break;case 8:e.prev=8,e.t2=e.catch(0),X([]),u(y.b.FETCH_FAILURE,"error");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),ae=function(e){ee(Object(d.a)(Object(d.a)({},$),{},Object(q.a)({},e.target.name,e.target.value)))},ce=function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A(!1),C(),e.prev=2,!D){e.next=8;break}return e.next=6,I.edit({projectCode:$.projectCode,materialCode:$.materialCode,quantity:parseFloat($.quantity),serviceMasterCode:$.serviceMasterCode});case 6:e.next=10;break;case 8:return e.next=10,I.create({projectCode:$.projectCode,materialCode:$.materialCode,quantity:parseFloat($.quantity),serviceMasterCode:$.serviceMasterCode});case 10:return u(y.b.ACTION_SUCCESS,"success"),C(),e.next=14,ne(a,i);case 14:W(),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),u(y.b.ACTION_FAILURE,"error"),W();case 21:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}();return c.a.useEffect((function(){te()}),[]),console.log(V),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(v.l,{title:"Th\xeam/Ch\u1ec9nh s\u1eeda",open:M,onClose:function(){A(!1)},onSubmit:ce,children:Object(k.jsxs)(b.a,{container:!0,spacing:1,children:[Object(k.jsx)(b.a,{item:!0,xs:12,children:Object(k.jsx)(v.r,{name:"projectCode",label:"D\u1ef1 \xe1n",type:"text",required:!0,disabled:!0,value:$.projectCode,onChange:ae})}),Object(k.jsx)(b.a,{item:!0,xs:12,children:Object(k.jsx)(v.r,{name:"serviceMasterCode",label:"M\xe3 BOS",type:"text",required:!0,disabled:!0,value:$.serviceMasterCode,onChange:ae})}),Object(k.jsx)(b.a,{item:!0,xs:12,children:Object(k.jsx)(v.e,{required:!0,label:"M\xe3 v\u1eadt t\u01b0",options:(e=_,e.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{label:"[".concat(e.code,"]-").concat(e.description)})}))),optionLabel:"label",value:J,getOptionSelected:function(e,t){return e.code===t.code},onChange:function(e){G(e),null!==e&&ee(Object(d.a)(Object(d.a)({},$),{},{materialCode:e.code,description:e.description,unit:e.unit}))}})}),Object(k.jsx)(b.a,{item:!0,xs:12,children:Object(k.jsx)(v.r,{name:"description",label:"Di\u1ec5n gi\u1ea3i",type:"text",required:!0,disabled:!0,value:$.description,onChange:ae})}),Object(k.jsx)(b.a,{item:!0,xs:12,children:Object(k.jsx)(v.r,{name:"unit",label:"\u0110\u01a1n v\u1ecb",type:"text",required:!0,disabled:!0,value:$.unit,onChange:ae})}),Object(k.jsx)(b.a,{item:!0,xs:12,children:Object(k.jsx)(v.r,{name:"quantity",label:"Kh\u1ed1i l\u01b0\u1ee3ng",type:"number",required:!0,value:$.quantity,onChange:ae})})]})}),Object(k.jsxs)(h.a,{className:t.root,children:[Object(k.jsx)(b.a,{container:!0,children:Object(k.jsx)(b.a,{container:!0,item:!0,xs:12,style:{padding:"8px"},direction:"row",spacing:1,alignItems:"flex-end",children:Object(k.jsx)(v.o,{tooltip:"Th\xeam m\u1edbi",variant:"contained",text:"Th\xeam",icon:"plus",color:"primary",onClick:function(){ee({projectCode:a,serviceMasterCode:i,materialCode:"",description:"",quantity:"0",unit:""}),L(!1),A(!0)}})})}),Object(k.jsx)(p.a,{className:t.container,children:Object(k.jsxs)(x.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(k.jsx)(O.a,{children:Object(k.jsxs)(m.a,{children:[Object(k.jsx)(f.a,{align:"left",style:{minWidth:"20%"},children:"M\xe3 v\u1eadt t\u01b0"}),Object(k.jsx)(f.a,{align:"left",style:{minWidth:"40%"},children:"Di\u1ec5n gi\u1ea3i"}),Object(k.jsx)(f.a,{align:"left",style:{minWidth:"20%"},children:"\u0110\u01a1n v\u1ecb"}),Object(k.jsx)(f.a,{align:"right",style:{minWidth:"20%"},children:"Kh\u1ed1i l\u01b0\u1ee3ng"}),Object(k.jsx)(f.a,{align:"right",style:{minWidth:"20%"}})]})}),Object(k.jsx)(g.a,{children:V.map((function(e){return Object(k.jsxs)(m.a,{children:[Object(k.jsx)(f.a,{align:"left",style:{minWidth:"20%"},children:e.materialCode}),Object(k.jsx)(f.a,{align:"left",style:{minWidth:"40%"},children:e.description}),Object(k.jsx)(f.a,{align:"left",style:{minWidth:"20%"},children:e.unit}),Object(k.jsx)(f.a,{align:"right",style:{minWidth:"20%"},children:e.quantity}),Object(k.jsx)(f.a,{align:"right",style:{minWidth:"20%"},children:Object(k.jsx)(v.o,{tooltip:"Ch\u1ec9nh s\u1eeda",text:"S\u1eeda",icon:"edit",color:"success",onClick:function(){!function(e){ee({projectCode:e.projectCode,materialCode:e.materialCode,description:e.description,quantity:e.quantity.toString(),serviceMasterCode:e.serviceMasterCode,unit:e.unit}),L(!0),A(!0)}(e)}})})]},e.materialCode)}))})]})})]})]})}var L=Object(u.a)({root:{width:"100%",height:"100%"},container:{maxHeight:440}}),N=function(e){return e.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{label:"[".concat(e.code,"]-").concat(e.name)})}))};function U(){var e=L(),t=c.a.useContext(y.a),n=t.showAlert,a=t.showBackdrop,r=t.hideBackdrop,i=c.a.useState([]),d=Object(l.a)(i,2),j=d[0],u=d[1],W=c.a.useState(null),w=Object(l.a)(W,2),S=w[0],M=w[1],q=c.a.useState([]),A=Object(l.a)(q,2),E=A[0],F=A[1],H=function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(),e.prev=1,e.t0=u,e.next=5,C.a.getAll();case 5:e.t1=e.sent,(0,e.t0)(e.t1),r(),e.next=14;break;case 10:e.prev=10,e.t2=e.catch(1),r(),n(y.b.FETCH_FAILURE,"error");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(),e.prev=1,e.t0=F,e.next=5,I.report(t);case 5:e.t1=e.sent,(0,e.t0)(e.t1),r(),e.next=15;break;case 10:e.prev=10,e.t2=e.catch(1),F([]),r(),n(y.b.FETCH_FAILURE,"error");case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return c.a.useEffect((function(){H()}),[]),c.a.useEffect((function(){null!==S?T(S.code):F([])}),[S]),Object(k.jsxs)(h.a,{className:e.root,children:[Object(k.jsx)(b.a,{container:!0,children:Object(k.jsx)(b.a,{container:!0,item:!0,xs:12,style:{padding:"8px"},direction:"row",spacing:1,alignItems:"flex-end",children:Object(k.jsx)(b.a,{item:!0,xs:12,children:Object(k.jsx)(v.e,{required:!0,label:"D\u1ef1 \xe1n",options:N(j),optionLabel:"label",value:S,getOptionSelected:function(e,t){return e.code===t.code},onChange:function(e){M(e)}})})})}),Object(k.jsx)(p.a,{className:e.container,children:Object(k.jsxs)(x.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(k.jsx)(O.a,{children:Object(k.jsxs)(m.a,{children:[Object(k.jsx)(f.a,{align:"left",style:{minWidth:"20%"},children:"WBS level 3"}),Object(k.jsx)(f.a,{align:"left",style:{minWidth:"40%"},children:"Di\u1ec5n gi\u1ea3i WBS"}),Object(k.jsx)(f.a,{align:"left",style:{minWidth:"20%"},children:"M\xe3 v\u1eadt t\u01b0"}),Object(k.jsx)(f.a,{align:"left",style:{minWidth:"20%"},children:"Di\u1ec5n gi\u1ea3i"}),Object(k.jsx)(f.a,{align:"left",style:{minWidth:"20%"},children:"\u0110\u01a1n v\u1ecb"}),Object(k.jsx)(f.a,{align:"left",style:{minWidth:"20%"},children:"K\u1ef3"}),Object(k.jsx)(f.a,{align:"right",style:{minWidth:"20%"},children:"Kh\u1ed1i l\u01b0\u1ee3ng"})]})}),Object(k.jsx)(g.a,{children:E.map((function(e,t){return Object(k.jsxs)(m.a,{children:[Object(k.jsx)(f.a,{align:"left",style:{minWidth:"20%"},children:e.elementCode}),Object(k.jsx)(f.a,{align:"left",style:{minWidth:"20%"},children:e.elementDescription}),Object(k.jsx)(f.a,{align:"left",style:{minWidth:"20%"},children:e.materialCode}),Object(k.jsx)(f.a,{align:"left",style:{minWidth:"40%"},children:e.description}),Object(k.jsx)(f.a,{align:"left",style:{minWidth:"20%"},children:e.unit}),Object(k.jsx)(f.a,{align:"left",style:{minWidth:"20%"},children:e.period}),Object(k.jsx)(f.a,{align:"right",style:{minWidth:"20%"},children:e.quantity})]},t)}))})]})})]})}function _(){var e=Object(r.j)().path;return Object(k.jsxs)(r.d,{children:[Object(k.jsx)(r.b,{path:"".concat(e,"/item-report"),component:M}),Object(k.jsx)(r.b,{path:"".concat(e,"/resources/:projectCode/:serviceMasterCode"),component:D}),Object(k.jsx)(r.b,{path:"".concat(e,"/rbs"),component:U})]})}}}]);