(this.webpackJsonpemis=this.webpackJsonpemis||[]).push([[9],{538:function(e,t,n){"use strict";var c={formatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy",n=t,c=[{symbol:"dd",value:e.getDate()<10?"0".concat(e.getDate()):e.getDate()},{symbol:"MM",value:e.getMonth()+1<10?"0".concat(e.getMonth()+1):"".concat(e.getMonth()+1)},{symbol:"yyyy",value:e.getFullYear()},{symbol:"hh",value:e.getHours()<10?"0".concat(e.getHours()):e.getHours()},{symbol:"mm",value:e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes()}];return c.map((function(e){return n=n.replace(e.symbol,e.value),e.symbol})),n},formatMoney:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Intl.NumberFormat("vi-VN",{maximumFractionDigits:t,minimumFractionDigits:t});return n.format(e)}};t.a=c},544:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r}));var c={CREATE:1,UPDATE:2,DELETE:3},a={PACK:-1,POST:0},r={PLANNER:1,DESIGNER:2,ESTIMATOR:3,SUPERVISOR:4}},545:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var c=n(22),a=n.n(c),r=n(40),i=n(25),o=n(13),s=n(0),l=n.n(s),u=n(46),d=n(9),j=n.n(d),p="/api/project-system/projects";var b={getAll:function(){return j.a.get(p)},get:function(e){return j.a.get("".concat(p,"/").concat(e))}},m=n(2),h="PROJECT_CODE_KEY",x="PROJECT_NAME_KEY",f=function(e){return e.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{label:"[".concat(e.code,"]-").concat(e.name)})}))};function O(e){var t=e.value,n=e.onChange,c=l.a.useState([]),o=Object(i.a)(c,2),s=o[0],d=o[1],j=function(){var e=Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=d,e.next=4,b.getAll();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),d([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return l.a.useEffect((function(){var e=function(){var e=localStorage.getItem(h),t=localStorage.getItem(x);return null===e||null===t?null:{code:e,name:t,label:"[".concat(e,"]-").concat(t)}}();null!==e&&n({code:e.code,name:e.name}),j()}),[]),Object(m.jsx)(u.d,{required:!0,label:"D\u1ef1 \xe1n",options:f(s),optionLabel:"label",value:null!==t?{code:t.code,name:t.name,label:"[".concat(t.code,"]-").concat(t.name)}:null,getOptionSelected:function(e,t){return e.code===t.code},onChange:function(e){null!==e&&(n({code:e.code,name:e.name}),function(e){localStorage.setItem(h,e.code),localStorage.setItem(x,e.name)}(e))}})}},568:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return j})),n.d(t,"d",(function(){return p}));var c=n(544),a=function(e){return e.map((function(e){return null===e.pack&&null!==e.post?{code:e.post.code,commitNumber:0,description:e.post.description,finish:e.post.finish,level:e.post.level,projectCode:e.post.projectCode,start:e.post.start,status:c.b.DELETE}:null!==e.pack&&null===e.post?{code:e.pack.code,commitNumber:0,description:e.pack.description,finish:e.pack.finish,level:e.pack.level,projectCode:e.pack.projectCode,start:e.pack.start,status:c.b.CREATE}:null!==e.pack&&null!==e.post?{code:e.pack.code,commitNumber:0,description:e.pack.description,finish:e.pack.finish,level:e.pack.level,projectCode:e.pack.projectCode,start:e.pack.start,status:c.b.UPDATE}:{code:"",commitNumber:0,description:"",finish:new Date,level:1,projectCode:"",start:new Date,status:c.b.UPDATE}}))},r=function(e){return e.map((function(e){return null===e.pack&&null!==e.post?{code:e.post.code,commitNumber:0,description:e.post.description,projectCode:e.post.projectCode,note:e.post.note,filePath:e.post.filePath,status:c.b.DELETE}:null!==e.pack&&null===e.post?{code:e.pack.code,commitNumber:0,description:e.pack.description,projectCode:e.pack.projectCode,note:e.pack.note,filePath:e.pack.filePath,status:c.b.CREATE}:null!==e.pack&&null!==e.post?{code:e.pack.code,commitNumber:0,description:e.pack.description,projectCode:e.pack.projectCode,note:e.pack.note,filePath:e.pack.filePath,status:c.b.UPDATE}:{code:"",commitNumber:0,description:"",projectCode:"",note:"",filePath:"",status:c.b.UPDATE}}))},i=function(e){return e.map((function(e){return null===e.pack&&null!==e.post?{elementCode:e.post.elementCode,clusterCode:e.post.clusterCode,quantity:e.post.quantity,commitNumber:0,projectCode:e.post.projectCode,status:c.b.DELETE}:null!==e.pack&&null===e.post?{elementCode:e.pack.elementCode,clusterCode:e.pack.clusterCode,quantity:e.pack.quantity,commitNumber:0,projectCode:e.pack.projectCode,status:c.b.CREATE}:null!==e.pack&&null!==e.post?{elementCode:e.pack.elementCode,clusterCode:e.pack.clusterCode,quantity:e.pack.quantity,commitNumber:0,projectCode:e.pack.projectCode,status:c.b.UPDATE}:{elementCode:"",clusterCode:"",quantity:1,commitNumber:0,projectCode:"",status:c.b.UPDATE}}))},o=function(e){return e.map((function(e){return null===e.pack&&null!==e.post?{serviceMasterCode:e.post.serviceMasterCode,clusterCode:e.post.clusterCode,billCode:e.post.billCode,quantity:e.post.quantity,commitNumber:0,projectCode:e.post.projectCode,status:c.b.DELETE}:null!==e.pack&&null===e.post?{serviceMasterCode:e.pack.serviceMasterCode,clusterCode:e.pack.clusterCode,billCode:e.pack.billCode,quantity:e.pack.quantity,commitNumber:0,projectCode:e.pack.projectCode,status:c.b.CREATE}:null!==e.pack&&null!==e.post?{serviceMasterCode:e.pack.serviceMasterCode,clusterCode:e.pack.clusterCode,billCode:e.pack.billCode,quantity:e.pack.quantity,commitNumber:0,projectCode:e.pack.projectCode,status:c.b.UPDATE}:{serviceMasterCode:"",clusterCode:"",billCode:"",quantity:1,commitNumber:0,projectCode:"",status:c.b.UPDATE}}))},s=function(e){return e.map((function(e){return null===e.pack&&null!==e.post?{serviceMasterCode:e.post.serviceMasterCode,materialCode:e.post.materialCode,quantity:e.post.quantity,commitNumber:0,projectCode:e.post.projectCode,status:c.b.DELETE}:null!==e.pack&&null===e.post?{serviceMasterCode:e.pack.serviceMasterCode,materialCode:e.pack.materialCode,quantity:e.pack.quantity,commitNumber:0,projectCode:e.pack.projectCode,status:c.b.CREATE}:null!==e.pack&&null!==e.post?{serviceMasterCode:e.pack.serviceMasterCode,materialCode:e.pack.materialCode,quantity:e.pack.quantity,commitNumber:0,projectCode:e.pack.projectCode,status:c.b.UPDATE}:{serviceMasterCode:"",materialCode:"",quantity:1,commitNumber:0,projectCode:"",status:c.b.UPDATE}}))},l=function(e){return e.map((function(e){return null===e.pack&&null!==e.post?{elementCode:e.post.elementCode,postingDate:e.post.postingDate,commitNumber:0,projectCode:e.post.projectCode,status:c.b.DELETE}:null!==e.pack&&null===e.post?{elementCode:e.pack.elementCode,postingDate:e.pack.postingDate,commitNumber:0,projectCode:e.pack.projectCode,status:c.b.CREATE}:null!==e.pack&&null!==e.post?{elementCode:e.pack.elementCode,postingDate:e.pack.postingDate,commitNumber:0,projectCode:e.pack.projectCode,status:c.b.UPDATE}:{elementCode:"",postingDate:new Date,commitNumber:0,projectCode:"",status:c.b.UPDATE}}))},u=function(e){return{elements:a(e.elements)}},d=function(e){return{clusters:r(e.clusters),elementClusters:i(e.elementClusters),items:o(e.items)}},j=function(e){return{resources:s(e.resources)}},p=function(e){return{confirmations:l(e.confirmations)}}},569:function(e,t,n){"use strict";var c=n(9),a=n.n(c),r="/api/project-system/commits";var i={plannerTrackingChange:function(e){return a.a.get("".concat(r,"/planner-tracking-change?projectCode=").concat(e))},designerTrackingChange:function(e){return a.a.get("".concat(r,"/designer-tracking-change?projectCode=").concat(e))},estimatorTrackingChange:function(e){return a.a.get("".concat(r,"/estimator-tracking-change?projectCode=").concat(e))},supervisorTrackingChange:function(e){return a.a.get("".concat(r,"/supervisor-tracking-change?projectCode=").concat(e))},plannerCommit:function(e,t){return a.a.post("".concat(r,"/planner-commit?projectCode=").concat(e),t)},designerCommit:function(e,t){return a.a.post("".concat(r,"/designer-commit?projectCode=").concat(e),t)},estimatorCommit:function(e,t){return a.a.post("".concat(r,"/estimator-commit?projectCode=").concat(e),t)},supervisorCommit:function(e,t){return a.a.post("".concat(r,"/supervisor-commit?projectCode=").concat(e),t)}};t.a=i},575:function(e,t,n){"use strict";var c=n(9),a=n.n(c),r="/api/project-system/elements";var i={getAll:function(e,t){return a.a.get("".concat(r,"?projectCode=").concat(e,"&version=").concat(t))},getDetail:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return""===n?a.a.get("".concat(r,"/get-detail?projectCode=").concat(e,"&version=").concat(t)):a.a.get("".concat(r,"/get-detail?projectCode=").concat(e,"&version=").concat(t,"&elementCode=").concat(n))},getLeaf:function(e,t){return a.a.get("".concat(r,"/get-leaf?projectCode=").concat(e,"&version=").concat(t))},remove:function(e,t){return a.a.post("".concat(r,"/delete?projectCode=").concat(e),t)},addFromExcel:function(e,t){var n=new FormData;return n.append("files",t,t.name),a.a.post("".concat(r,"/addFromExcel?projectCode=").concat(e),n,{headers:{"Content-Type":"multipart/form-data"}})}};t.a=i},629:function(e,t,n){"use strict";var c=n(9),a=n.n(c),r="/api/project-system/versions";var i={getAll:function(e,t){return a.a.get("".concat(r,"?projectCode=").concat(e,"&branch=").concat(t))},createPlannerVersion:function(e,t){return a.a.post("".concat(r,"/create-planner-version?projectCode=").concat(e),t)},createDesignerVersion:function(e,t){return a.a.post("".concat(r,"/create-designer-version?projectCode=").concat(e),t)}};t.a=i},630:function(e,t,n){"use strict";var c=n(9),a=n.n(c),r="/api/project-system/items";var i={getAll:function(e,t){return a.a.get("".concat(r,"?projectCode=").concat(e,"&version=").concat(t))},getCollective:function(e,t){return a.a.get("".concat(r,"/get-collective?projectCode=").concat(e,"&version=").concat(t))},getDistinct:function(e,t){return a.a.get("".concat(r,"/get-distinct?projectCode=").concat(e,"&version=").concat(t))},create:function(e,t){return a.a.post("".concat(r,"?projectCode=").concat(e),t)},edit:function(e,t,n,c){return a.a.put("".concat(r,"?projectCode=").concat(e,"&serviceMasterCode=").concat(t,"&clusterCode=").concat(n),c)},remove:function(e,t){return a.a.post("".concat(r,"/delete?projectCode=").concat(e),t)},addFromExcel:function(e,t){var n=new FormData;return n.append("files",t,t.name),a.a.post("".concat(r,"/addFromExcel?projectCode=").concat(e),n,{headers:{"Content-Type":"multipart/form-data"}})}};t.a=i},878:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ce}));var c=n(0),a=n.n(c),r=n(27),i=n(209),o=n(15),s=n(13),l=n(22),u=n.n(l),d=n(40),j=n(25),p=n(47),b=n(533),m=n(398),h=n(70),x=n(112),f=n(435),O=n(436),g=n(432),C=n(433),v=n(434),k=n(437),y=n(39),S=n(46),A=n(18),E=n(545),w=n(544),N=n(9),M=n.n(N),T="/api/project-system/clusters";var D={getAll:function(e,t){return M.a.get("".concat(T,"?projectCode=").concat(e,"&version=").concat(t))},getSimple:function(e,t){return M.a.get("".concat(T,"/simple?projectCode=").concat(e,"&version=").concat(t))},create:function(e,t){return M.a.post("".concat(T,"?projectCode=").concat(e),t)},edit:function(e,t,n){return M.a.put("".concat(T,"?projectCode=").concat(e,"&clusterCode=").concat(t),n)},remove:function(e,t){return M.a.post("".concat(T,"/delete?projectCode=").concat(e),t)},addFromExcel:function(e,t){var n=new FormData;return n.append("files",t,t.name),M.a.post("".concat(T,"/addFromExcel?projectCode=").concat(e),n,{headers:{"Content-Type":"multipart/form-data"}})}},I=n(2),q=Object(b.a)({root:{width:"100%",height:"100%"},container:{maxHeight:"calc(100% - 120px)",overflowY:"scroll"},cell:{fontSize:"0.75rem"}}),F={code:"",description:"",note:"",projectCode:"",filePath:"",versionNumber:w.c.PACK};function P(){var e=q(),t=Object(p.b)(),n=a.a.useState(!1),c=Object(j.a)(n,2),r=c[0],l=c[1],b=a.a.useState(!1),N=Object(j.a)(b,2),M=N[0],T=N[1],P=a.a.useState(null),_=Object(j.a)(P,2),L=_[0],R=_[1],U=a.a.useState([]),z=Object(j.a)(U,2),K=z[0],H=z[1],B=a.a.useState(F),Y=Object(j.a)(B,2),W=Y[0],V=Y[1],G=a.a.useState([]),X=Object(j.a)(G,2),J=X[0],Q=X[1],Z=a.a.useState([]),$=Object(j.a)(Z,2),ee=$[0],te=$[1],ne=a.a.useState(!1),ce=Object(j.a)(ne,2),ae=ce[0],re=ce[1],ie=a.a.useState([]),oe=Object(j.a)(ie,2),se=oe[0],le=oe[1],ue=a.a.useState(""),de=Object(j.a)(ue,2),je=de[0],pe=de[1],be=a.a.useState(!1),me=Object(j.a)(be,2),he=me[0],xe=me[1],fe=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xe(!1),null===L){e.next=15;break}return t(A.loadingActions.show()),e.prev=3,e.next=6,D.remove(L.code,ee);case 6:ke(),te([]),t(A.alertActions.show(A.alertMessage.ACTION_SUCCESS,"success")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),t(A.alertActions.show(A.alertMessage.ACTION_FAILURE,"error")),t(A.loadingActions.hide());case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(d.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>=1&&null!==L)){e.next=17;break}return le([]),t(A.loadingActions.show()),e.prev=3,e.t0=le,e.next=7,D.addFromExcel(L.code,n[0]);case 7:e.t1=e.sent,(0,e.t0)(e.t1),ke(),re(!0),e.next=17;break;case 13:e.prev=13,e.t2=e.catch(3),t(A.loadingActions.hide()),t(A.alertActions.show(A.alertMessage.ACTION_FAILURE,"error"));case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),ge=function(e){V(Object(s.a)(Object(s.a)({},W),{},Object(o.a)({},e.target.name,e.target.value)))},Ce=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(!1),null===L){e.next=21;break}if(t(A.loadingActions.show()),e.prev=3,!M){e.next=9;break}return e.next=7,D.edit(L.code,W.code,W);case 7:e.next=13;break;case 9:if(null===L){e.next=13;break}return W.projectCode=L.code,e.next=13,D.create(L.code,W);case 13:t(A.alertActions.show(A.alertMessage.ACTION_SUCCESS,"success")),ke(),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),t(A.alertActions.show(A.alertMessage.ACTION_FAILURE,"error")),t(A.loadingActions.hide());case 21:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ee.includes(t)?te(ee.filter((function(e){return e!==t}))):te([].concat(Object(i.a)(ee),[t]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(A.loadingActions.show()),null===L){e.next=16;break}return e.prev=2,e.t0=H,e.next=6,D.getAll(L.code,w.c.PACK);case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 10:e.prev=10,e.t2=e.catch(2),H([]),t(A.alertActions.show(A.alertMessage.FETCH_FAILURE,"error"));case 14:e.next=17;break;case 16:H([]);case 17:t(A.loadingActions.hide());case 18:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return a.a.useEffect((function(){ke(),te([])}),[L]),a.a.useEffect((function(){Q(K.filter((function(e){return je.split("|").every((function(t){return e.description.includes(t)}))})))}),[K,je]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(S.k,{open:he,onClose:function(){xe(!1)},onSubmit:function(){fe()},title:"X\xe1c nh\u1eadn x\xf3a c\xe1c \u0111i\u1ec3n h\xecnh",children:Object(I.jsxs)(m.a,{container:!0,spacing:1,children:[Object(I.jsx)(m.a,{item:!0,xs:12,children:Object(I.jsx)(h.a,{variant:"body2",children:"Thao t\xe1c n\xe0y s\u1ebd x\xf3a c\xe1c c\xf4ng t\xe1c v\xe0 mapping c\u1ee7a \u0111i\u1ec3n h\xecnh \u0111\u01b0\u1ee3c ch\u1ecdn. Vui l\xf2ng ki\u1ec3m tra k\u1ef9 c\xe1c \u0111i\u1ec3n h\xecnh tr\u01b0\u1edbc khi x\xf3a!"})}),ee.map((function(e){return Object(I.jsx)(m.a,{item:!0,xs:12,children:Object(I.jsx)(h.a,{variant:"subtitle2",children:e})},e)}))]})}),Object(I.jsx)(S.k,{open:ae,onClose:function(){re(!1)},title:"K\u1ebft qu\u1ea3 t\u1ea1o t\u1eeb file excel",children:Object(I.jsx)(m.a,{container:!0,spacing:1,children:se.map((function(e,t){return Object(I.jsxs)(m.a,{item:!0,container:!0,spacing:1,xs:12,children:[Object(I.jsx)(m.a,{item:!0,xs:12,md:3,style:{color:e.isAdded?"green":"red"},children:Object(I.jsx)(h.a,{variant:"subtitle2",children:"".concat(e.item.code,"-").concat(e.item.description)})}),Object(I.jsx)(m.a,{item:!0,xs:12,md:9,style:{color:e.isAdded?"green":"red"},children:Object(I.jsx)(h.a,{variant:"caption",children:e.message})})]},t)}))})}),Object(I.jsx)(S.k,{title:"Th\xeam/Ch\u1ec9nh s\u1eeda",open:r,onClose:function(){l(!1)},onSubmit:Ce,children:Object(I.jsxs)(m.a,{container:!0,spacing:1,children:[Object(I.jsx)(m.a,{item:!0,xs:12,children:Object(I.jsx)(S.p,{name:"code",label:"M\xe3",type:"text",required:!0,value:W.code,onChange:ge})}),Object(I.jsx)(m.a,{item:!0,xs:12,children:Object(I.jsx)(S.p,{name:"description",label:"Di\u1ec5n gi\u1ea3i",type:"text",required:!0,value:W.description,onChange:ge})}),Object(I.jsx)(m.a,{item:!0,xs:12,children:Object(I.jsx)(S.p,{name:"note",label:"Ghi ch\xfa",type:"text",required:!0,value:W.note,onChange:ge})}),Object(I.jsx)(m.a,{item:!0,xs:12,children:Object(I.jsx)(S.p,{name:"filePath",label:"File chi\u1ebft t\xednh",type:"text",required:!0,value:W.filePath,onChange:ge})})]})}),Object(I.jsxs)(x.a,{className:e.root,children:[Object(I.jsx)(m.a,{container:!0,children:Object(I.jsxs)(m.a,{container:!0,item:!0,xs:12,style:{padding:"8px"},direction:"row",spacing:1,alignItems:"flex-end",children:[Object(I.jsx)(m.a,{item:!0,xs:12,md:6,children:Object(I.jsx)(E.a,{value:L,onChange:function(e){R(e)}})}),Object(I.jsx)(m.a,{item:!0,xs:12,md:6,children:Object(I.jsx)(S.p,{name:"keyWord",label:"T\xecm ki\u1ebfm",type:"text",value:je,onChange:function(e){pe(e.target.value)}})}),null!==L&&Object(I.jsxs)(m.a,{container:!0,spacing:1,item:!0,xs:12,alignItems:"flex-end",children:[Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.n,{tooltip:"Th\xeam m\u1edbi",variant:"contained",text:"Th\xeam",icon:"plus",color:"primary",onClick:function(){V(F),T(!1),l(!0)}})}),Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.q,{filesLimit:1,title:"T\u1ea3i t\u1ec7p excel",acceptedFiles:[".xls",".xlsx"],onSubmit:Oe,tooltip:"T\u1ea1o t\u1eeb file excel",variant:"contained",text:"Upload Excel",color:"primary"})}),Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.i,{variant:"contained",label:"T\u1ea3i v\u1ec1",filename:"".concat(L.code,"_Dien hinh.xlsx"),url:"/api/project-system/clusters/get-excel?projectCode=".concat(L.code,"&version=").concat(w.c.PACK)})}),Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.n,{tooltip:"L\xe0m m\u1edbi",variant:"contained",text:"L\xe0m m\u1edbi",color:"success",icon:"sync-alt",onClick:ke})}),Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.n,{tooltip:"X\xf3a c\xe1c \u0111i\u1ec3n h\xecnh \u0111\xe3 ch\u1ecdn",variant:"contained",text:"X\xf3a",color:"danger",icon:"trash-alt",disabled:ee.length<=0,onClick:function(){xe(!0)}})})]})]})}),Object(I.jsx)(f.a,{className:e.container,children:Object(I.jsxs)(O.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(I.jsx)(g.a,{children:Object(I.jsxs)(C.a,{children:[Object(I.jsx)(v.a,{style:{padding:0,width:16}}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:"M\xe3 \u0111i\u1ec3n h\xecnh"}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:"Di\u1ec5n gi\u1ea3i"}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:"Ghi ch\xfa"}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:"Chi\u1ebft t\xednh"}),Object(I.jsx)(v.a,{className:e.cell,align:"right",children:"S\u1ed1 l\u01b0\u1ee3ng"}),Object(I.jsx)(v.a,{className:e.cell,align:"right",children:"C\xf4ng t\xe1c"})]})}),Object(I.jsx)(k.a,{children:J.map((function(t){return Object(I.jsxs)(C.a,{style:{backgroundColor:ee.includes(t.code)?y.a.red[100]:"initial"},children:[Object(I.jsx)(v.a,{style:{padding:0,width:16,backgroundColor:ee.includes(t.code)?y.a.red[500]:y.a.teal[100]},onClick:function(){ve(t.code)}}),Object(I.jsx)(v.a,{className:e.cell,align:"left",style:{cursor:"pointer"},onClick:function(){!function(e){V(e),T(!0),l(!0)}(t)},children:t.code}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:t.description}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:t.note}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:Object(I.jsx)("a",{href:t.filePath,style:{textDecoration:"none"},target:"_blank",rel:"noreferrer",children:"Chi\u1ebft t\xednh"})}),Object(I.jsx)(v.a,{className:e.cell,align:"right",children:t.elementCount}),Object(I.jsx)(v.a,{className:e.cell,align:"right",children:t.itemCount})]},t.code)}))})]})})]})]})}var _=n(568),L=n(167),R=n(569),U=function(e){switch(e){case 1:return y.a.green[500];case 2:return y.a.amber[500];default:return y.a.red[500]}};function z(e){var t=e.data;return Object(I.jsxs)(O.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(I.jsx)(g.a,{children:Object(I.jsxs)(C.a,{children:[Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:"M\xe3 c\u1ea5u ki\u1ec7n"}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:"Di\u1ec5n gi\u1ea3i"}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:"Ghi ch\xfa"}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:"Chi\u1ebft t\xednh"}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:"S\u1ed1 l\u01b0\u1ee3ng"}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:"C\xf4ng t\xe1c"})]})}),Object(I.jsx)(k.a,{children:t.map((function(e,t){return Object(I.jsxs)(C.a,{style:{backgroundColor:U(e.status)},children:[Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:Object(I.jsxs)(m.a,{container:!0,direction:"column",children:[Object(I.jsx)(m.a,{item:!0,children:null!==e.post?e.post.code:"-"}),Object(I.jsx)(m.a,{item:!0,children:null!==e.pack?e.pack.code:"-"})]})}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:Object(I.jsxs)(m.a,{container:!0,direction:"column",children:[Object(I.jsx)(m.a,{item:!0,children:null!==e.post?e.post.description:"-"}),Object(I.jsx)(m.a,{item:!0,children:null!==e.pack?e.pack.description:"-"})]})}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:Object(I.jsxs)(m.a,{container:!0,direction:"column",children:[Object(I.jsx)(m.a,{item:!0,children:null!==e.post?e.post.note:"-"}),Object(I.jsx)(m.a,{item:!0,children:null!==e.pack?e.pack.note:"-"})]})}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:Object(I.jsxs)(m.a,{container:!0,direction:"column",children:[Object(I.jsx)(m.a,{item:!0,children:null!==e.post?e.post.filePath:"-"}),Object(I.jsx)(m.a,{item:!0,children:null!==e.pack?e.pack.filePath:"-"})]})}),Object(I.jsx)(v.a,{align:"right",style:{fontSize:"0.75rem"},children:Object(I.jsxs)(m.a,{container:!0,direction:"column",children:[Object(I.jsx)(m.a,{item:!0,children:null!==e.post?e.post.elementCount:"-"}),Object(I.jsx)(m.a,{item:!0,children:null!==e.pack?e.pack.elementCount:"-"})]})}),Object(I.jsx)(v.a,{align:"right",style:{fontSize:"0.75rem"},children:Object(I.jsxs)(m.a,{container:!0,direction:"column",children:[Object(I.jsx)(m.a,{item:!0,children:null!==e.post?e.post.itemCount:"-"}),Object(I.jsx)(m.a,{item:!0,children:null!==e.pack?e.pack.itemCount:"-"})]})})]},t)}))})]})}var K=function(e){switch(e){case 1:return y.a.green[500];case 2:return y.a.amber[500];default:return y.a.red[500]}};function H(e){var t=e.data;return Object(I.jsxs)(O.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(I.jsx)(g.a,{children:Object(I.jsxs)(C.a,{children:[Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:"M\xe3 WBS"}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:"Di\u1ec5n gi\u1ea3i WBS"}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:"M\xe3 c\u1ea5u ki\u1ec7n"}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:"Di\u1ec5n gi\u1ea3i c\u1ea5u ki\u1ec7n"}),Object(I.jsx)(v.a,{align:"right",style:{fontSize:"0.75rem"},children:"S\u1ed1 l\u01b0\u1ee3ng"})]})}),Object(I.jsx)(k.a,{children:t.map((function(e,t){return Object(I.jsxs)(C.a,{style:{backgroundColor:K(e.status)},children:[Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:Object(I.jsxs)(m.a,{container:!0,direction:"column",children:[Object(I.jsx)(m.a,{item:!0,children:null!==e.post?e.post.elementCode:"-"}),Object(I.jsx)(m.a,{item:!0,children:null!==e.pack?e.pack.elementCode:"-"})]})}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:Object(I.jsxs)(m.a,{container:!0,direction:"column",children:[Object(I.jsx)(m.a,{item:!0,children:null!==e.post?e.post.elementDescription:"-"}),Object(I.jsx)(m.a,{item:!0,children:null!==e.pack?e.pack.elementDescription:"-"})]})}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:Object(I.jsxs)(m.a,{container:!0,direction:"column",children:[Object(I.jsx)(m.a,{item:!0,children:null!==e.post?e.post.clusterCode:"-"}),Object(I.jsx)(m.a,{item:!0,children:null!==e.pack?e.pack.clusterCode:"-"})]})}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:Object(I.jsxs)(m.a,{container:!0,direction:"column",children:[Object(I.jsx)(m.a,{item:!0,children:null!==e.post?e.post.clusterDescription:"-"}),Object(I.jsx)(m.a,{item:!0,children:null!==e.pack?e.pack.clusterDescription:"-"})]})}),Object(I.jsx)(v.a,{align:"right",style:{fontSize:"0.75rem"},children:Object(I.jsxs)(m.a,{container:!0,direction:"column",children:[Object(I.jsx)(m.a,{item:!0,children:null!==e.post?e.post.quantity:"-"}),Object(I.jsx)(m.a,{item:!0,children:null!==e.pack?e.pack.quantity:"-"})]})})]},t)}))})]})}var B=n(538),Y=function(e){switch(e){case 1:return y.a.green[500];case 2:return y.a.amber[500];default:return y.a.red[500]}};function W(e){var t=e.data;return Object(I.jsxs)(O.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(I.jsx)(g.a,{children:Object(I.jsxs)(C.a,{children:[Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:"M\xe3 c\u1ea5u ki\u1ec7n"}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:"Di\u1ec5n gi\u1ea3i c\u1ea5u ki\u1ec7n"}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:"M\xe3 c\xf4ng t\xe1c"}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:"Di\u1ec5n gi\u1ea3i c\xf4ng t\xe1c"}),Object(I.jsx)(v.a,{align:"center",style:{fontSize:"0.75rem"},children:"\u0110\u01a1n v\u1ecb"}),Object(I.jsx)(v.a,{align:"right",style:{fontSize:"0.75rem"},children:"Kh\u1ed1i l\u01b0\u1ee3ng"})]})}),Object(I.jsx)(k.a,{children:t.map((function(e,t){return Object(I.jsxs)(C.a,{style:{backgroundColor:Y(e.status)},children:[Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:Object(I.jsxs)(m.a,{container:!0,direction:"column",children:[Object(I.jsx)(m.a,{item:!0,children:null!==e.post?e.post.clusterCode:"-"}),Object(I.jsx)(m.a,{item:!0,children:null!==e.pack?e.pack.clusterCode:"-"})]})}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:Object(I.jsxs)(m.a,{container:!0,direction:"column",children:[Object(I.jsx)(m.a,{item:!0,children:null!==e.post?e.post.clusterDescription:"-"}),Object(I.jsx)(m.a,{item:!0,children:null!==e.pack?e.pack.clusterDescription:"-"})]})}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:Object(I.jsxs)(m.a,{container:!0,direction:"column",children:[Object(I.jsx)(m.a,{item:!0,children:null!==e.post?e.post.serviceMasterCode:"-"}),Object(I.jsx)(m.a,{item:!0,children:null!==e.pack?e.pack.serviceMasterCode:"-"})]})}),Object(I.jsx)(v.a,{align:"left",style:{fontSize:"0.75rem"},children:Object(I.jsxs)(m.a,{container:!0,direction:"column",children:[Object(I.jsx)(m.a,{item:!0,children:null!==e.post?e.post.serviceMasterDescription:"-"}),Object(I.jsx)(m.a,{item:!0,children:null!==e.pack?e.pack.serviceMasterDescription:"-"})]})}),Object(I.jsx)(v.a,{align:"center",style:{fontSize:"0.75rem"},children:Object(I.jsxs)(m.a,{container:!0,direction:"column",children:[Object(I.jsx)(m.a,{item:!0,children:null!==e.post?e.post.serviceMasterUnit:"-"}),Object(I.jsx)(m.a,{item:!0,children:null!==e.pack?e.pack.serviceMasterUnit:"-"})]})}),Object(I.jsx)(v.a,{align:"right",style:{fontSize:"0.75rem"},children:Object(I.jsxs)(m.a,{container:!0,direction:"column",children:[Object(I.jsx)(m.a,{item:!0,children:null!==e.post?B.a.formatMoney(e.post.quantity,3):"-"}),Object(I.jsx)(m.a,{item:!0,children:null!==e.pack?B.a.formatMoney(e.pack.quantity,3):"-"})]})})]},t)}))})]})}var V=Object(b.a)({root:{width:"100%",height:"100%"},container:{maxHeight:"calc(100% - 85px)",overflowY:"scroll"}});function G(){var e=V(),t=Object(p.b)(),n=a.a.useState(null),c=Object(j.a)(n,2),r=c[0],i=c[1],o=a.a.useState({clusters:[],elementClusters:[],items:[]}),s=Object(j.a)(o,2),l=s[0],b=s[1],h=a.a.useState(!1),O=Object(j.a)(h,2),g=O[0],C=O[1],v=a.a.useState(""),k=Object(j.a)(v,2),y=k[0],N=k[1],M=a.a.useState(1),T=Object(j.a)(M,2),D=T[0],q=T[1],F=a.a.useState(!1),P=Object(j.a)(F,2),U=P[0],K=P[1],B=function(){var e=Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(!1),t(A.loadingActions.show()),e.prev=2,n={header:{branch:w.a.DESIGNER,createdBy:"",createdByFullName:"",createdTime:new Date,description:y,number:0,projectCode:null!==r?r.code:""},detail:Object(_.a)(l)},null===r){e.next=7;break}return e.next=7,R.a.designerCommit(r.code,n);case 7:t(A.alertActions.show(A.alertMessage.ACTION_SUCCESS,"success")),Y(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),t(A.alertActions.show(A.alertMessage.ACTION_FAILURE,"error")),t(A.loadingActions.hide());case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===r){e.next=17;break}return t(A.loadingActions.show()),e.prev=2,e.t0=b,e.next=6,R.a.designerTrackingChange(r.code);case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 10:e.prev=10,e.t2=e.catch(2),b({clusters:[],elementClusters:[],items:[]}),t(A.alertActions.show(A.alertMessage.FETCH_FAILURE,"error"));case 14:t(A.loadingActions.hide()),e.next=18;break;case 17:b({clusters:[],elementClusters:[],items:[]});case 18:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=K,e.next=4,L.a.checkRolePermission("APPROVER_DESIGNER_ROLE");case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),K(!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return a.a.useEffect((function(){Y(),G()}),[r]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(S.k,{title:"C\u1eadp nh\u1eadt thay \u0111\u1ed5i l\xean server",open:g,onClose:function(){C(!1)},onSubmit:B,children:Object(I.jsx)(m.a,{container:!0,spacing:1,children:Object(I.jsx)(m.a,{item:!0,xs:12,children:Object(I.jsx)(S.p,{name:"commitDescription",label:"M\xf4 t\u1ea3 n\u1ed9i dung c\u1eadp nh\u1eadt",type:"text",required:!0,value:y,onChange:function(e){N(e.target.value)}})})})}),Object(I.jsxs)(x.a,{className:e.root,children:[Object(I.jsx)(m.a,{container:!0,children:Object(I.jsxs)(m.a,{container:!0,item:!0,xs:12,style:{padding:"8px"},direction:"row",spacing:1,alignItems:"flex-end",children:[Object(I.jsx)(m.a,{item:!0,xs:6,children:Object(I.jsx)(E.a,{value:r,onChange:function(e){i(e)}})}),Object(I.jsxs)(m.a,{container:!0,spacing:1,item:!0,xs:6,alignItems:"flex-end",children:[null!==r&&U&&(l.clusters.length>0||l.elementClusters.length>0||l.items.length>0)&&Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.n,{tooltip:"C\u1eadp nh\u1eadt thay \u0111\u1ed5i",variant:"contained",text:"Commit",icon:"long-arrow-alt-up",color:"danger",onClick:function(){N(""),C(!0)}})}),Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.n,{tooltip:"C\u1ea5u ki\u1ec7n \u0111i\u1ec3n h\xecnh",variant:"contained",text:"C\u1ea5u ki\u1ec7n",icon:"cubes",color:"primary",onClick:function(){q(1)}})}),Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.n,{tooltip:"Mapping WBS - C\u1ea5u ki\u1ec7n",variant:"contained",text:"Mapping",icon:"link",color:"success",onClick:function(){q(2)}})}),Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.n,{tooltip:"C\xf4ng t\xe1c",variant:"contained",text:"C\xf4ng t\xe1c",icon:"tasks",color:"info",onClick:function(){q(3)}})})]})]})}),Object(I.jsxs)(f.a,{className:e.container,children:[1===D&&Object(I.jsx)(z,{data:l.clusters}),2===D&&Object(I.jsx)(H,{data:l.elementClusters}),3===D&&Object(I.jsx)(W,{data:l.items})]})]})]})}var X=n(629),J=Object(b.a)({root:{width:"100%",height:"100%"},container:{maxHeight:"calc(100% - 120px)",overflowY:"scroll"},cell:{fontSize:"0.75rem"}});function Q(){var e=J(),t=Object(p.b)(),n=a.a.useState(!1),c=Object(j.a)(n,2),r=c[0],i=c[1],o=a.a.useState(null),s=Object(j.a)(o,2),l=s[0],b=s[1],h=a.a.useState([]),N=Object(j.a)(h,2),M=N[0],T=N[1],D=a.a.useState(""),q=Object(j.a)(D,2),F=q[0],P=q[1],_=function(){var e=Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i(!1),null===l){e.next=15;break}return t(A.loadingActions.show()),e.prev=3,n={number:0,branch:w.a.DESIGNER,createdBy:"",createdByFullName:"",createdDate:new Date,description:F,projectCode:l.code},e.next=7,X.a.createDesignerVersion(l.code,n);case 7:t(A.alertActions.show(A.alertMessage.ACTION_SUCCESS,"success")),L(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),t(A.alertActions.show(A.alertMessage.ACTION_FAILURE,"error")),t(A.loadingActions.hide());case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(A.loadingActions.show()),null===l){e.next=16;break}return e.prev=2,e.t0=T,e.next=6,X.a.getAll(l.code,w.a.DESIGNER);case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 10:e.prev=10,e.t2=e.catch(2),T([]),t(A.alertActions.show(A.alertMessage.FETCH_FAILURE,"error"));case 14:e.next=17;break;case 16:T([]);case 17:t(A.loadingActions.hide());case 18:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return a.a.useEffect((function(){L()}),[l]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(S.k,{title:"T\u1ea1o phi\xean b\u1ea3n",open:r,onClose:function(){i(!1)},onSubmit:_,children:Object(I.jsx)(m.a,{container:!0,spacing:1,children:Object(I.jsx)(m.a,{item:!0,xs:12,children:Object(I.jsx)(S.p,{name:"description",label:"Di\u1ec5n gi\u1ea3i",type:"text",required:!0,value:F,onChange:function(e){P(e.target.value)}})})})}),Object(I.jsxs)(x.a,{className:e.root,children:[Object(I.jsx)(m.a,{container:!0,children:Object(I.jsxs)(m.a,{container:!0,item:!0,xs:12,style:{padding:"8px"},direction:"row",spacing:1,alignItems:"flex-end",children:[Object(I.jsx)(m.a,{item:!0,xs:12,md:6,children:Object(I.jsx)(E.a,{value:l,onChange:function(e){b(e)}})}),null!==l&&Object(I.jsxs)(m.a,{container:!0,spacing:1,item:!0,xs:12,alignItems:"flex-end",children:[Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.n,{tooltip:"Th\xeam m\u1edbi",variant:"contained",text:"Th\xeam",icon:"plus",color:"primary",onClick:function(){P(""),i(!0)}})}),Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.n,{tooltip:"L\xe0m m\u1edbi",variant:"contained",text:"L\xe0m m\u1edbi",color:"success",icon:"sync-alt",onClick:L})})]})]})}),Object(I.jsx)(f.a,{className:e.container,children:Object(I.jsxs)(O.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(I.jsx)(g.a,{children:Object(I.jsxs)(C.a,{children:[Object(I.jsx)(v.a,{style:{padding:0,width:16}}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:"S\u1ed1 phi\xean b\u1ea3n"}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:"Di\u1ec5n gi\u1ea3i"}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:"Ng\u01b0\u1eddi t\u1ea1o"}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:"Th\u1eddi gian"}),Object(I.jsx)(v.a,{className:e.cell,align:"left"})]})}),Object(I.jsx)(k.a,{children:M.map((function(t){return Object(I.jsxs)(C.a,{children:[Object(I.jsx)(v.a,{style:{padding:0,width:16,backgroundColor:y.a.teal[100]}}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:t.number}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:t.description}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:"".concat(t.createdBy,"-").concat(t.createdByFullName)}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:B.a.formatDate(new Date(t.createdDate),"dd-MM-yyyy")}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:null!==l&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("a",{href:"/project-system/designer/version-data/clusters/".concat(l.code,"/").concat(t.number),style:{textDecoration:"none"},target:"_blank",rel:"noreferrer",children:Object(I.jsx)(S.n,{text:"C\u1ea5u ki\u1ec7n",color:"primary",icon:"cubes"})}),Object(I.jsx)("a",{href:"/project-system/designer/version-data/element-clusters/".concat(l.code,"/").concat(t.number),style:{textDecoration:"none"},target:"_blank",rel:"noreferrer",children:Object(I.jsx)(S.n,{text:"Mapping",color:"success",icon:"link"})}),Object(I.jsx)("a",{href:"/project-system/designer/version-data/items/".concat(l.code,"/").concat(t.number),style:{textDecoration:"none"},target:"_blank",rel:"noreferrer",children:Object(I.jsx)(S.n,{text:"C\xf4ng t\xe1c",color:"info",icon:"tasks"})})]})})]},t.number)}))})]})})]})]})}var Z="CLUSTER_CODE_KEY",$="CLUSTER_DESCRIPTION_KEY",ee=function(e){return e.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{label:"[".concat(e.code,"]-").concat(e.description)})}))};function te(e){var t=e.projectCode,n=e.value,c=e.onChange,r=a.a.useState([]),i=Object(j.a)(r,2),o=i[0],s=i[1],l=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=s,e.next=4,D.getAll(t,w.c.PACK);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),s([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return a.a.useEffect((function(){var e=function(){var e=localStorage.getItem(Z),t=localStorage.getItem($);return null===e||null===t?null:{code:e,description:t,label:"[".concat(e,"]-").concat(t)}}();null!==e&&c({code:e.code,description:e.description,filePath:"",note:"",projectCode:"",versionNumber:w.c.PACK}),l()}),[]),Object(I.jsx)(S.d,{required:!0,label:"C\u1ea5u ki\u1ec7n \u0111i\u1ec3n h\xecnh",options:ee(o),optionLabel:"label",value:null!==n?{code:n.code,label:"[".concat(n.code,"]-").concat(n.description),description:n.description}:null,getOptionSelected:function(e,t){return e.code===t.code},onChange:function(e){var t;null!==e&&(c({code:e.code,description:e.description,filePath:"",note:"",projectCode:"",versionNumber:w.c.PACK}),t=e,localStorage.setItem(Z,t.code),localStorage.setItem($,t.description))}})}var ne=n(575),ce="/api/project-system/elementClusters";var ae={getAll:function(e,t){return M.a.get("".concat(ce,"?projectCode=").concat(e,"&version=").concat(t))},create:function(e,t){return M.a.post("".concat(ce,"?projectCode=").concat(e),t)},edit:function(e,t,n,c){return M.a.put("".concat(ce,"?projectCode=").concat(e,"&elementCode=").concat(t,"&clusterCode=").concat(n),c)},remove:function(e,t){return M.a.post("".concat(ce,"/delete?projectCode=").concat(e),t)},addFromExcel:function(e,t){var n=new FormData;return n.append("files",t,t.name),M.a.post("".concat(ce,"/addFromExcel?projectCode=").concat(e),n,{headers:{"Content-Type":"multipart/form-data"}})}},re=Object(b.a)({root:{width:"100%",height:"100%"},container:{maxHeight:"calc(100% - 120px)",overflowY:"scroll"},cell:{fontSize:"0.75rem"}}),ie={elementCode:"",clusterCode:"",quantity:""},oe=function(e,t,n){return void 0!==n.find((function(n){return n.clusterCode===t&&n.elementCode===e}))};function se(){var e=re(),t=Object(p.b)(),n=a.a.useState(!1),c=Object(j.a)(n,2),r=c[0],l=c[1],b=a.a.useState(!1),N=Object(j.a)(b,2),M=N[0],T=N[1],D=a.a.useState(null),q=Object(j.a)(D,2),F=q[0],P=q[1],_=a.a.useState(null),L=Object(j.a)(_,2),R=L[0],U=L[1],z=a.a.useState([]),K=Object(j.a)(z,2),H=K[0],B=K[1],Y=a.a.useState([]),W=Object(j.a)(Y,2),V=W[0],G=W[1],X=a.a.useState([]),J=Object(j.a)(X,2),Q=J[0],Z=J[1],$=a.a.useState(ie),ee=Object(j.a)($,2),ce=ee[0],se=ee[1],le=a.a.useState([]),ue=Object(j.a)(le,2),de=ue[0],je=ue[1],pe=a.a.useState(!1),be=Object(j.a)(pe,2),me=be[0],he=be[1],xe=a.a.useState([]),fe=Object(j.a)(xe,2),Oe=fe[0],ge=fe[1],Ce=a.a.useState(""),ve=Object(j.a)(Ce,2),ke=ve[0],ye=ve[1],Se=a.a.useState(!1),Ae=Object(j.a)(Se,2),Ee=Ae[0],we=Ae[1],Ne=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(we(!1),null===F){e.next=15;break}return t(A.loadingActions.show()),e.prev=3,e.next=6,ae.remove(F.code,de);case 6:Te(),je([]),t(A.alertActions.show(A.alertMessage.ACTION_SUCCESS,"success")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),t(A.alertActions.show(A.alertMessage.ACTION_FAILURE,"error")),t(A.loadingActions.hide());case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=Object(d.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>=1&&null!==F)){e.next=17;break}return ge([]),t(A.loadingActions.show()),e.prev=3,e.t0=ge,e.next=7,ae.addFromExcel(F.code,n[0]);case 7:e.t1=e.sent,(0,e.t0)(e.t1),De(),he(!0),e.next=17;break;case 13:e.prev=13,e.t2=e.catch(3),t(A.loadingActions.hide()),t(A.alertActions.show(A.alertMessage.ACTION_FAILURE,"error"));case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===F){e.next=16;break}return t(A.loadingActions.show()),e.prev=2,e.t0=Z,e.next=6,ae.getAll(F.code,w.c.PACK);case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=13;break;case 10:e.prev=10,e.t2=e.catch(2),t(A.alertActions.show(A.alertMessage.FETCH_FAILURE,"error"));case 13:return e.prev=13,t(A.loadingActions.hide()),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),De=function(){var e=Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===F){e.next=16;break}return t(A.loadingActions.show()),e.prev=2,e.next=5,Promise.all([ne.a.getLeaf(F.code,w.c.POST),ae.getAll(F.code,w.c.PACK)]);case 5:n=e.sent,B(n[0]),Z(n[1]),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t(A.alertActions.show(A.alertMessage.FETCH_FAILURE,"error"));case 13:return e.prev=13,t(A.loadingActions.hide()),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),Ie=function(e){se(Object(s.a)(Object(s.a)({},ce),{},Object(o.a)({},e.target.name,e.target.value)))},qe=function(){var e=Object(d.a)(u.a.mark((function e(){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(!1),null===F){e.next=24;break}if(t(A.loadingActions.show()),e.prev=3,!M){e.next=12;break}return n={elementCode:ce.elementCode,clusterCode:ce.clusterCode,quantity:parseFloat(ce.quantity),projectCode:F.code,versionNumber:w.c.PACK},e.next=8,ae.edit(F.code,ce.elementCode,ce.clusterCode,n);case 8:t(A.alertActions.show(A.alertMessage.ACTION_SUCCESS,"success")),Te(),e.next=18;break;case 12:if(null===R){e.next=18;break}return c={elementCode:ce.elementCode,clusterCode:R.code,quantity:parseFloat(ce.quantity),projectCode:F.code,versionNumber:w.c.PACK},e.next=16,ae.create(F.code,c);case 16:t(A.alertActions.show(A.alertMessage.ACTION_SUCCESS,"success")),Te();case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(3),t(A.alertActions.show(A.alertMessage.ACTION_FAILURE,"error")),t(A.loadingActions.hide());case 24:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:oe(t,n,de)?je(de.filter((function(e){return!(e.clusterCode===n&&e.elementCode===t)}))):je([].concat(Object(i.a)(de),[{clusterCode:n,elementCode:t}]));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return a.a.useEffect((function(){De()}),[F]),a.a.useEffect((function(){je([])}),[Q]),a.a.useEffect((function(){G(H.filter((function(e){return ke.split("|").every((function(t){return e.description.includes(t)}))})))}),[H,ke]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(S.k,{open:Ee,onClose:function(){we(!1)},onSubmit:function(){Ne()},title:"X\xe1c nh\u1eadn x\xf3a c\xe1c mapping",children:Object(I.jsxs)(m.a,{container:!0,spacing:1,children:[Object(I.jsx)(m.a,{item:!0,xs:12,children:Object(I.jsx)(h.a,{variant:"body2",children:"Thao t\xe1c n\xe0y s\u1ebd x\xf3a c\xe1c mapping \u0111\u01b0\u1ee3c ch\u1ecdn. Vui l\xf2ng ki\u1ec3m tra k\u1ef9 tr\u01b0\u1edbc khi x\xf3a!"})}),de.map((function(e){return Object(I.jsx)(m.a,{item:!0,xs:12,children:Object(I.jsx)(h.a,{variant:"subtitle2",children:"".concat(e.elementCode," - ").concat(e.clusterCode)})},"".concat(e.elementCode,"-").concat(e.clusterCode))}))]})}),Object(I.jsx)(S.k,{open:me,onClose:function(){he(!1)},title:"K\u1ebft qu\u1ea3 t\u1ea1o t\u1eeb file excel",children:Object(I.jsx)(m.a,{container:!0,spacing:1,children:Oe.map((function(e,t){return Object(I.jsxs)(m.a,{item:!0,container:!0,spacing:1,xs:12,children:[Object(I.jsx)(m.a,{item:!0,xs:12,md:3,style:{color:e.isAdded?"green":"red"},children:Object(I.jsx)(h.a,{variant:"subtitle2",children:"".concat(e.item.elementCode,"-").concat(e.item.clusterCode)})}),Object(I.jsx)(m.a,{item:!0,xs:12,md:9,style:{color:e.isAdded?"green":"red"},children:Object(I.jsx)(h.a,{variant:"caption",children:e.message})})]},t)}))})}),Object(I.jsx)(S.k,{title:"Th\xeam/Ch\u1ec9nh s\u1eeda",open:r,onClose:function(){l(!1)},onSubmit:qe,children:Object(I.jsxs)(m.a,{container:!0,spacing:1,children:[Object(I.jsx)(m.a,{item:!0,xs:12,children:Object(I.jsx)(S.p,{name:"elementCode",label:"M\xe3 WBS",type:"text",required:!0,disabled:!0,value:ce.elementCode,onChange:Ie})}),Object(I.jsx)(m.a,{item:!0,xs:12,children:M?Object(I.jsx)(S.p,{name:"clusterCode",label:"M\xe3 \u0111i\u1ec3n h\xecnh",type:"text",required:!0,disabled:!0,value:ce.clusterCode,onChange:Ie}):null!==F&&Object(I.jsx)(te,{projectCode:F.code,value:R,onChange:function(e){U(e)}})}),Object(I.jsx)(m.a,{item:!0,xs:12,children:Object(I.jsx)(S.p,{name:"quantity",label:"Ghi ch\xfa",type:"number",required:!0,value:ce.quantity,onChange:Ie})})]})}),Object(I.jsxs)(x.a,{className:e.root,children:[Object(I.jsx)(m.a,{container:!0,children:Object(I.jsxs)(m.a,{container:!0,item:!0,xs:12,style:{padding:"8px"},direction:"row",spacing:1,alignItems:"flex-end",children:[Object(I.jsx)(m.a,{item:!0,xs:12,md:6,children:Object(I.jsx)(E.a,{value:F,onChange:function(e){P(e)}})}),Object(I.jsx)(m.a,{item:!0,xs:12,md:6,children:Object(I.jsx)(S.p,{name:"keyWord",label:"L\u1ecdc WBS",type:"text",value:ke,onChange:function(e){ye(e.target.value)}})}),null!==F&&Object(I.jsxs)(m.a,{container:!0,spacing:1,item:!0,xs:12,alignItems:"flex-end",children:[Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.q,{filesLimit:1,title:"T\u1ea3i t\u1ec7p excel",acceptedFiles:[".xls",".xlsx"],onSubmit:Me,tooltip:"T\u1ea1o t\u1eeb file excel",variant:"contained",text:"Excel",color:"primary"})}),Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.i,{variant:"contained",label:"T\u1ea3i v\u1ec1",filename:"".concat(F.code,"_Mapping.xlsx"),url:"/api/project-system/elementClusters/get-excel?projectCode=".concat(F.code,"&version=").concat(w.c.PACK)})}),Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.n,{tooltip:"L\xe0m m\u1edbi",variant:"contained",text:"L\xe0m m\u1edbi",color:"success",icon:"sync-alt",onClick:De})}),Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.n,{tooltip:"X\xf3a c\xe1c mapping \u0111\xe3 ch\u1ecdn",variant:"contained",text:"X\xf3a",color:"danger",icon:"trash-alt",disabled:de.length<=0,onClick:function(){we(!0)}})})]})]})}),Object(I.jsx)(f.a,{className:e.container,children:Object(I.jsxs)(O.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(I.jsx)(g.a,{children:Object(I.jsxs)(C.a,{children:[Object(I.jsx)(v.a,{style:{padding:0,width:16}}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:"M\xe3 c\u1ea5u ki\u1ec7n"}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:"Di\u1ec5n gi\u1ea3i c\u1ea5u ki\u1ec7n"}),Object(I.jsx)(v.a,{className:e.cell,align:"right",children:"S\u1ed1 l\u01b0\u1ee3ng"})]})}),Object(I.jsx)(k.a,{children:V.map((function(t){return Object(I.jsxs)(a.a.Fragment,{children:[Object(I.jsxs)(C.a,{children:[Object(I.jsx)(v.a,{style:{padding:0,width:16}}),Object(I.jsx)(v.a,{className:e.cell,align:"left",style:{fontWeight:"bold"},children:t.code}),Object(I.jsx)(v.a,{className:e.cell,align:"left",colSpan:2,style:{fontWeight:"bold"},children:t.description})]}),Q.filter((function(e){return e.elementCode===t.code})).map((function(t,n){return Object(I.jsxs)(C.a,{style:{backgroundColor:oe(t.elementCode,t.clusterCode,de)?y.a.red[100]:"initial"},children:[Object(I.jsx)(v.a,{style:{padding:0,width:16,backgroundColor:oe(t.elementCode,t.clusterCode,de)?y.a.red[500]:y.a.teal[100]},onClick:function(){Fe(t.elementCode,t.clusterCode)}}),Object(I.jsx)(v.a,{className:e.cell,align:"left",style:{paddingLeft:"32px",cursor:"pointer"},onClick:function(){!function(e){se({elementCode:e.elementCode,clusterCode:e.clusterCode,quantity:e.quantity.toString()}),T(!0),l(!0)}(t)},children:t.clusterCode}),Object(I.jsx)(v.a,{className:e.cell,align:"left",style:{paddingLeft:"32px"},children:t.clusterDescription}),Object(I.jsx)(v.a,{className:e.cell,align:"right",children:t.quantity})]},n)})),Object(I.jsxs)(C.a,{children:[Object(I.jsx)(v.a,{style:{padding:0,width:16,backgroundColor:y.a.green[300]}}),Object(I.jsx)(v.a,{className:e.cell,colSpan:4,align:"left",style:{cursor:"pointer",fontStyle:"italic"},onClick:function(){return e=t.code,se({clusterCode:"",elementCode:e,quantity:"0"}),T(!1),void l(!0);var e},children:"+ Th\xeam c\u1ea5u ki\u1ec7n m\u1edbi"})]})]},t.code)}))})]})})]})]})}var le=n(687),ue="SERVICE_MASTER_CODE_KEY",de="SERVICE_MASTER_DESCRIPTION_KEY",je="SERVICE_MASTER_UNIT_KEY";function pe(e){var t,n=e.value,c=e.onChange,r=a.a.useState([]),i=Object(j.a)(r,2),o=i[0],l=i[1],p=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=l,e.next=4,le.a.getAll();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),l([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return a.a.useEffect((function(){var e=function(){var e=localStorage.getItem(ue),t=localStorage.getItem(de),n=localStorage.getItem(je);return null===e||null===t||null===n?null:{code:e,label:"[".concat(e,"]-").concat(t),description:t,unit:n}}();null!==e&&c({code:e.code,description:e.description,unit:e.unit}),p()}),[]),Object(I.jsx)(S.d,{required:!0,label:"C\xf4ng t\xe1c",options:(t=o,t.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{label:"[".concat(e.code,"]-").concat(e.description)})}))),optionLabel:"label",value:null!==n?{code:n.code,label:"[".concat(n.code,"]-").concat(n.description),description:n.description,unit:n.unit}:null,getOptionSelected:function(e,t){return e.code===t.code},onChange:function(e){var t;null!==e&&(c({code:e.code,description:e.description,unit:e.unit}),t=e,localStorage.setItem(ue,t.code),localStorage.setItem(de,t.description),localStorage.setItem(je,t.unit))}})}var be=n(630),me=Object(b.a)({root:{width:"100%",height:"100%"},container:{maxHeight:"calc(100% - 120px)",overflowY:"scroll"},cell:{fontSize:"0.75rem"}}),he={serviceMasterCode:"",clusterCode:"",billCode:"",quantity:""},xe=function(e,t,n){return void 0!==n.find((function(n){return n.clusterCode===e&&n.serviceMasterCode===t}))};function fe(){var e=me(),t=Object(p.b)(),n=a.a.useState(!1),c=Object(j.a)(n,2),r=c[0],l=c[1],b=a.a.useState(!1),N=Object(j.a)(b,2),M=N[0],T=N[1],q=a.a.useState(null),F=Object(j.a)(q,2),P=F[0],_=F[1],L=a.a.useState(null),R=Object(j.a)(L,2),U=R[0],z=R[1],K=a.a.useState([]),H=Object(j.a)(K,2),Y=H[0],W=H[1],V=a.a.useState([]),G=Object(j.a)(V,2),X=G[0],J=G[1],Q=a.a.useState([]),Z=Object(j.a)(Q,2),$=Z[0],ee=Z[1],te=a.a.useState(he),ne=Object(j.a)(te,2),ce=ne[0],ae=ne[1],re=a.a.useState([]),ie=Object(j.a)(re,2),oe=ie[0],se=ie[1],le=a.a.useState(!1),ue=Object(j.a)(le,2),de=ue[0],je=ue[1],fe=a.a.useState([]),Oe=Object(j.a)(fe,2),ge=Oe[0],Ce=Oe[1],ve=a.a.useState(""),ke=Object(j.a)(ve,2),ye=ke[0],Se=ke[1],Ae=a.a.useState(!1),Ee=Object(j.a)(Ae,2),we=Ee[0],Ne=Ee[1],Me=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ne(!1),null===P){e.next=15;break}return t(A.loadingActions.show()),e.prev=3,e.next=6,be.a.remove(P.code,oe);case 6:De(),se([]),t(A.alertActions.show(A.alertMessage.ACTION_SUCCESS,"success")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),t(A.alertActions.show(A.alertMessage.ACTION_FAILURE,"error")),t(A.loadingActions.hide());case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=Object(d.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>=1&&null!==P)){e.next=17;break}return Ce([]),t(A.loadingActions.show()),e.prev=3,e.t0=Ce,e.next=7,be.a.addFromExcel(P.code,n[0]);case 7:e.t1=e.sent,(0,e.t0)(e.t1),De(),je(!0),e.next=17;break;case 13:e.prev=13,e.t2=e.catch(3),t(A.loadingActions.hide()),t(A.alertActions.show(A.alertMessage.ACTION_FAILURE,"error"));case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===P){e.next=16;break}return t(A.loadingActions.show()),e.prev=2,e.t0=ee,e.next=6,be.a.getAll(P.code,w.c.PACK);case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=13;break;case 10:e.prev=10,e.t2=e.catch(2),t(A.alertActions.show(A.alertMessage.FETCH_FAILURE,"error"));case 13:return e.prev=13,t(A.loadingActions.hide()),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===P){e.next=16;break}return t(A.loadingActions.show()),e.prev=2,e.next=5,Promise.all([D.getSimple(P.code,w.c.PACK),be.a.getAll(P.code,w.c.PACK)]);case 5:n=e.sent,W(n[0]),ee(n[1]),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t(A.alertActions.show(A.alertMessage.FETCH_FAILURE,"error"));case 13:return e.prev=13,t(A.loadingActions.hide()),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),qe=function(e){ae(Object(s.a)(Object(s.a)({},ce),{},Object(o.a)({},e.target.name,e.target.value)))},Fe=function(){var e=Object(d.a)(u.a.mark((function e(){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(!1),null===P){e.next=24;break}if(t(A.loadingActions.show()),e.prev=3,!M){e.next=12;break}return n={serviceMasterCode:ce.serviceMasterCode,clusterCode:ce.clusterCode,billCode:ce.billCode,quantity:parseFloat(ce.quantity),projectCode:P.code,versionNumber:w.c.PACK},e.next=8,be.a.edit(P.code,ce.serviceMasterCode,ce.clusterCode,n);case 8:t(A.alertActions.show(A.alertMessage.ACTION_SUCCESS,"success")),De(),e.next=18;break;case 12:if(null===U){e.next=18;break}return c={serviceMasterCode:U.code,clusterCode:ce.clusterCode,billCode:ce.billCode,quantity:parseFloat(ce.quantity),projectCode:P.code,versionNumber:w.c.PACK},e.next=16,be.a.create(P.code,c);case 16:t(A.alertActions.show(A.alertMessage.ACTION_SUCCESS,"success")),De();case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(3),t(A.alertActions.show(A.alertMessage.ACTION_FAILURE,"error")),t(A.loadingActions.hide());case 24:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:xe(t,n,oe)?se(oe.filter((function(e){return!(e.clusterCode===t&&e.serviceMasterCode===n)}))):se([].concat(Object(i.a)(oe),[{clusterCode:t,serviceMasterCode:n}]));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return a.a.useEffect((function(){Ie()}),[P]),a.a.useEffect((function(){se([])}),[$]),a.a.useEffect((function(){J(Y.filter((function(e){return ye.split("|").every((function(t){return e.description.includes(t)}))})))}),[Y,ye]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(S.k,{open:we,onClose:function(){Ne(!1)},onSubmit:function(){Me()},title:"X\xe1c nh\u1eadn x\xf3a c\xe1c c\xf4ng t\xe1c",children:Object(I.jsxs)(m.a,{container:!0,spacing:1,children:[Object(I.jsx)(m.a,{item:!0,xs:12,children:Object(I.jsx)(h.a,{variant:"body2",children:"Thao t\xe1c n\xe0y s\u1ebd x\xf3a c\xe1c c\xf4ng t\xe1c \u0111\u01b0\u1ee3c ch\u1ecdn. Vui l\xf2ng ki\u1ec3m tra k\u1ef9 tr\u01b0\u1edbc khi x\xf3a!"})}),oe.map((function(e){return Object(I.jsx)(m.a,{item:!0,xs:12,children:Object(I.jsx)(h.a,{variant:"subtitle2",children:"".concat(e.clusterCode," - ").concat(e.serviceMasterCode)})},"".concat(e.clusterCode,"-").concat(e.serviceMasterCode))}))]})}),Object(I.jsx)(S.k,{open:de,onClose:function(){je(!1)},title:"K\u1ebft qu\u1ea3 t\u1ea1o t\u1eeb file excel",children:Object(I.jsx)(m.a,{container:!0,spacing:1,children:ge.map((function(e,t){return Object(I.jsxs)(m.a,{item:!0,container:!0,spacing:1,xs:12,children:[Object(I.jsx)(m.a,{item:!0,xs:12,md:3,style:{color:e.isAdded?"green":"red"},children:Object(I.jsx)(h.a,{variant:"subtitle2",children:"".concat(e.item.serviceMasterCode,"-").concat(e.item.clusterCode)})}),Object(I.jsx)(m.a,{item:!0,xs:12,md:9,style:{color:e.isAdded?"green":"red"},children:Object(I.jsx)(h.a,{variant:"caption",children:e.message})})]},t)}))})}),Object(I.jsx)(S.k,{title:"Th\xeam/Ch\u1ec9nh s\u1eeda",open:r,onClose:function(){l(!1)},onSubmit:Fe,children:Object(I.jsxs)(m.a,{container:!0,spacing:1,children:[Object(I.jsx)(m.a,{item:!0,xs:12,children:M?Object(I.jsx)(S.p,{name:"serviceMasterCode",label:"M\xe3 WBS",type:"text",required:!0,disabled:!0,value:ce.serviceMasterCode,onChange:qe}):Object(I.jsx)(pe,{value:U,onChange:function(e){z(e)}})}),Object(I.jsx)(m.a,{item:!0,xs:12,children:Object(I.jsx)(S.p,{name:"clusterCode",label:"M\xe3 \u0111i\u1ec3n h\xecnh",type:"text",required:!0,disabled:!0,value:ce.clusterCode,onChange:qe})}),Object(I.jsx)(m.a,{item:!0,xs:12,children:Object(I.jsx)(S.p,{name:"billCode",label:"M\xe3 BOQ",type:"text",required:!0,value:ce.billCode,onChange:qe})}),Object(I.jsx)(m.a,{item:!0,xs:12,children:Object(I.jsx)(S.p,{name:"quantity",label:"Ghi ch\xfa",type:"number",required:!0,value:ce.quantity,onChange:qe})})]})}),Object(I.jsxs)(x.a,{className:e.root,children:[Object(I.jsx)(m.a,{container:!0,children:Object(I.jsxs)(m.a,{container:!0,item:!0,xs:12,style:{padding:"8px"},direction:"row",spacing:1,alignItems:"flex-end",children:[Object(I.jsx)(m.a,{item:!0,xs:12,md:6,children:Object(I.jsx)(E.a,{value:P,onChange:function(e){_(e)}})}),Object(I.jsx)(m.a,{item:!0,xs:12,md:6,children:Object(I.jsx)(S.p,{name:"keyWord",label:"L\u1ecdc theo c\u1ea5u ki\u1ec7n",type:"text",value:ye,onChange:function(e){Se(e.target.value)}})}),null!==P&&Object(I.jsxs)(m.a,{container:!0,spacing:1,item:!0,xs:12,alignItems:"flex-end",children:[Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.q,{filesLimit:1,title:"T\u1ea3i t\u1ec7p excel",acceptedFiles:[".xls",".xlsx"],onSubmit:Te,tooltip:"T\u1ea1o t\u1eeb file excel",variant:"contained",text:"Excel",color:"primary"})}),Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.i,{variant:"contained",label:"T\u1ea3i v\u1ec1",filename:"".concat(P.code,"_Cong tac.xlsx"),url:"/api/project-system/items/get-excel?projectCode=".concat(P.code,"&version=").concat(w.c.PACK)})}),Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.n,{tooltip:"L\xe0m m\u1edbi",variant:"contained",text:"L\xe0m m\u1edbi",color:"success",icon:"sync-alt",onClick:Ie})}),Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.n,{tooltip:"X\xf3a c\xe1c c\xf4ng t\xe1c \u0111\xe3 ch\u1ecdn",variant:"contained",text:"X\xf3a",color:"danger",icon:"trash-alt",disabled:oe.length<=0,onClick:function(){Ne(!0)}})})]})]})}),Object(I.jsx)(f.a,{className:e.container,children:Object(I.jsxs)(O.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(I.jsx)(g.a,{children:Object(I.jsxs)(C.a,{children:[Object(I.jsx)(v.a,{style:{padding:0,width:16}}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:"M\xe3 c\xf4ng t\xe1c"}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:"Di\u1ec5n gi\u1ea3i"}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:"M\xe3 BOQ"}),Object(I.jsx)(v.a,{className:e.cell,align:"center",children:"\u0110\u01a1n v\u1ecb"}),Object(I.jsx)(v.a,{className:e.cell,align:"right",children:"Kh\u1ed1i l\u01b0\u1ee3ng"})]})}),Object(I.jsx)(k.a,{children:X.map((function(t){return Object(I.jsxs)(a.a.Fragment,{children:[Object(I.jsxs)(C.a,{children:[Object(I.jsx)(v.a,{style:{padding:0,width:16}}),Object(I.jsx)(v.a,{className:e.cell,align:"left",style:{fontWeight:"bold"},children:t.code}),Object(I.jsx)(v.a,{className:e.cell,align:"left",colSpan:4,style:{fontWeight:"bold"},children:t.description})]}),$.filter((function(e){return e.clusterCode===t.code})).map((function(t,n){return Object(I.jsxs)(C.a,{style:{backgroundColor:xe(t.clusterCode,t.serviceMasterCode,oe)?y.a.red[100]:"initial"},children:[Object(I.jsx)(v.a,{style:{padding:0,width:16,backgroundColor:xe(t.clusterCode,t.serviceMasterCode,oe)?y.a.red[500]:y.a.teal[100]},onClick:function(){Pe(t.clusterCode,t.serviceMasterCode)}}),Object(I.jsx)(v.a,{className:e.cell,align:"left",style:{paddingLeft:"32px",cursor:"pointer"},onClick:function(){!function(e){ae({serviceMasterCode:e.serviceMasterCode,clusterCode:e.clusterCode,billCode:e.billCode,quantity:e.quantity.toString()}),T(!0),l(!0)}(t)},children:t.serviceMasterCode}),Object(I.jsx)(v.a,{className:e.cell,align:"left",style:{paddingLeft:"32px"},children:t.serviceMasterDescription}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:t.billCode}),Object(I.jsx)(v.a,{className:e.cell,align:"center",children:t.serviceMasterUnit}),Object(I.jsx)(v.a,{className:e.cell,align:"right",children:B.a.formatMoney(t.quantity,3)})]},n)})),Object(I.jsxs)(C.a,{children:[Object(I.jsx)(v.a,{style:{padding:0,width:16,backgroundColor:y.a.green[300]}}),Object(I.jsx)(v.a,{className:e.cell,colSpan:5,align:"left",style:{cursor:"pointer",fontStyle:"italic"},onClick:function(){return e=t.code,ae({serviceMasterCode:"",clusterCode:e,billCode:"",quantity:"0"}),T(!1),void l(!0);var e},children:"+ Th\xeam c\xf4ng t\xe1c m\u1edbi"})]})]},t.code)}))})]})})]})]})}var Oe=Object(b.a)({root:{width:"100%",height:"100%"},container:{maxHeight:"calc(100% - 120px)",overflowY:"scroll"},cell:{fontSize:"0.75rem"}});function ge(){var e=Oe(),t=Object(r.h)(),n=t.projectCode,c=t.versionNumber,i=Object(p.b)(),o=a.a.useState([]),s=Object(j.a)(o,2),l=s[0],b=s[1],E=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(A.loadingActions.show()),e.prev=1,e.t0=b,e.next=5,D.getAll(n,c);case 5:e.t1=e.sent,(0,e.t0)(e.t1),e.next=13;break;case 9:e.prev=9,e.t2=e.catch(1),b([]),i(A.alertActions.show(A.alertMessage.FETCH_FAILURE,"error"));case 13:return e.prev=13,i(A.loadingActions.hide()),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(){return e.apply(this,arguments)}}();return a.a.useEffect((function(){E()}),[n,c]),Object(I.jsxs)(x.a,{className:e.root,children:[Object(I.jsx)(m.a,{container:!0,children:Object(I.jsxs)(m.a,{container:!0,item:!0,xs:12,style:{padding:"8px"},direction:"row",spacing:1,alignItems:"flex-end",children:[Object(I.jsx)(m.a,{item:!0,xs:6,children:Object(I.jsx)(h.a,{variant:"h6",children:"D\u1ef1 \xe1n: ".concat(n)})}),Object(I.jsx)(m.a,{item:!0,xs:6,children:Object(I.jsx)(h.a,{variant:"h6",children:"Phi\xean b\u1ea3n: ".concat(c)})}),Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.i,{variant:"contained",label:"T\u1ea3i v\u1ec1",filename:"".concat(n,"_").concat(c,"_Dien hinh.xlsx"),url:"/api/project-system/clusters/get-excel?projectCode=".concat(n,"&version=").concat(c)})}),Object(I.jsx)(m.a,{item:!0,children:Object(I.jsx)(S.n,{tooltip:"L\xe0m m\u1edbi",variant:"contained",text:"L\xe0m m\u1edbi",color:"success",icon:"sync-alt",onClick:E})})]})}),Object(I.jsx)(f.a,{className:e.container,children:Object(I.jsxs)(O.a,{stickyHeader:!0,"aria-label":"sticky table",size:"small",children:[Object(I.jsx)(g.a,{children:Object(I.jsxs)(C.a,{children:[Object(I.jsx)(v.a,{style:{padding:0,width:16}}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:"M\xe3 \u0111i\u1ec3n h\xecnh"}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:"Di\u1ec5n gi\u1ea3i"}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:"Ghi ch\xfa"}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:"Chi\u1ebft t\xednh"}),Object(I.jsx)(v.a,{className:e.cell,align:"right",children:"S\u1ed1 l\u01b0\u1ee3ng"}),Object(I.jsx)(v.a,{className:e.cell,align:"right",children:"C\xf4ng t\xe1c"})]})}),Object(I.jsx)(k.a,{children:l.map((function(t){return Object(I.jsxs)(C.a,{children:[Object(I.jsx)(v.a,{style:{padding:0,width:16,backgroundColor:y.a.teal[100]}}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:t.code}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:t.description}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:t.note}),Object(I.jsx)(v.a,{className:e.cell,align:"left",children:Object(I.jsx)("a",{href:t.filePath,style:{textDecoration:"none"},target:"_blank",rel:"noreferrer",children:"Chi\u1ebft t\xednh"})}),Object(I.jsx)(v.a,{className:e.cell,align:"right",children:t.elementCount}),Object(I.jsx)(v.a,{className:e.cell,align:"right",children:t.itemCount})]},t.code)}))})]})})]})}function Ce(){var e=Object(r.i)().path;return Object(I.jsxs)(r.c,{children:[Object(I.jsx)(r.a,{path:"".concat(e,"/clusters"),component:P}),Object(I.jsx)(r.a,{path:"".concat(e,"/element-clusters"),component:se}),Object(I.jsx)(r.a,{path:"".concat(e,"/items"),component:fe}),Object(I.jsx)(r.a,{path:"".concat(e,"/commits"),component:G}),Object(I.jsx)(r.a,{path:"".concat(e,"/versions"),component:Q}),Object(I.jsx)(r.a,{path:"".concat(e,"/version-data/clusters/:projectCode/:versionNumber"),component:ge})]})}}}]);
//# sourceMappingURL=9.1f0e4311.chunk.js.map