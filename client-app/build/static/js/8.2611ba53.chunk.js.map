{"version":3,"sources":["configs/format.ts","plugins/Bidding/services/package.ts","plugins/Bidding/services/vendor.ts","plugins/Bidding/services/material.ts","plugins/Bidding/pages/PackageDetail/Quotation.tsx","plugins/Bidding/pages/PackageDetail/Vendors.tsx","plugins/Bidding/pages/PackageDetail/PackageDetail.tsx","plugins/Bidding/stores/CreatePackageStore/constant.ts","plugins/Bidding/stores/CreatePackageStore/types.ts","plugins/Bidding/stores/CreatePackageStore/reducers.ts","plugins/Bidding/stores/CreatePackageStore/actions.ts","plugins/Bidding/stores/CreatePackageStore/CreatePackageProvider.tsx","plugins/Bidding/pages/CreatePackage/Header.tsx","configs/excelReader.ts","plugins/Bidding/pages/CreatePackage/Items.tsx","plugins/Bidding/pages/CreatePackage/CreatePackage.tsx","plugins/Bidding/pages/Packages.tsx","plugins/Bidding/routes/ExpertRoutes.tsx"],"names":["format","formatDate","date","formatString","result","symbol","value","getDate","getMonth","getFullYear","getHours","getMinutes","map","f","replace","formatMoney","frac","numberFormat","Intl","NumberFormat","maximumFractionDigits","minimumFractionDigits","apiUrl","service","getAll","statusName","axios","get","getAuditorPackages","packageCode","createPackage","model","formData","FormData","append","code","name","begin","toUTCString","end","description","isInternal","vendors","v","index","files","items","item","no","quantity","optionQuantity","spec","note","materialCode","post","headers","getQuotation","vendorCode","getVendors","getRegisterList","getDetail","approve","reject","create","edit","put","remove","delete","addFromExcel","file","columns","id","label","numeric","sortable","initialQuotationState","submitted","attachments","Quotation","data","packageItems","dispatch","useDispatch","React","useState","quotation","setQuotation","setItems","refresh","a","packageService","packageItem","quotationItem","find","x","itemId","undefined","price","alertActions","show","alertMessage","FETCH_FAILURE","useEffect","Grid","container","spacing","xs","title","infoCol","Typography","variant","quantityCol","unit","optionUnit","noteCol","style","display","flexDirection","deliveryCol","Date","priceCol","actions","initialOrderBy","icon","iconName","prefix","fileName","filename","url","Accordion","withStyles","root","border","boxShadow","borderBottom","margin","expanded","MuiAccordion","AccordionSummary","color","fontStyle","marginBottom","minHeight","content","fontSize","MuiAccordionSummary","AccordionDetails","padding","MuiAccordionDetails","Vendors","canViewData","isClosedPackage","expandedList","setExpandedList","noPadding","vendor","square","includes","onChange","_event","filter","r","handleChange","disabled","backgroundColor","green","red","longTextName","initialState","status","PackageDetail","useParams","packageDetail","setPackageDetail","isAuditor","setIsAuditor","loadingActions","userService","checkRolePermission","hide","getStatusProps","text","amber","blue","md","Paper","dangerouslySetInnerHTML","__html","GET_INPUT_DATA_SUCCESS","GET_INPUT_DATA_FAILURE","CHANGE_HEADER_DATA","CHANGE_VENDORS_DATA","ADD_ITEM","EDIT_ITEM","REMOVE_ITEM","CHANGE_FILES","materials","defaultStore","state","getInputData","changeHeader","changeVendors","checked","addItem","editItem","removeItem","changeFiles","reducer","action","type","payload","exist","success","fail","store","Promise","all","materialService","vendorService","CreatePackageContext","createContext","CreatePackageProvider","children","useReducer","Provider","Header","history","useHistory","useContext","selectedVendor","setSelectedVendor","event","target","handleChangeDate","handleCreatePackage","ACTION_SUCCESS","push","ACTION_FAILURE","required","disablePast","alignItems","optionLabel","options","renderComboBoxOptions","getOptionSelected","o","onClick","showPreviews","acceptedFiles","showFileNames","filesLimit","maxFileSize","useChipsForPreview","dropzoneText","Array","isArray","showAlerts","excelReader","excelDateToJSDate","serial","utc_days","Math","floor","date_info","fractional_day","total_seconds","seconds","hours","minutes","readToArray","headerRows","initial","resolve","reader","FileReader","readAsArrayBuffer","onload","Uint8Array","workbook","xlsx","read","sheet","Sheets","SheetNames","row","activeRow","column","cell","utils","encode_cell","c","col","t","console","log","excelColumns","materialDescription","Items","setItem","identity","setIdentity","showForm","setShowForm","isEdit","setIsEdit","showUploadForm","setShowUploadForm","setFile","handleSubmitUploadForm","material","newItem","toString","actionsButton","tooltip","open","onClose","onSubmit","noNumber","parseInt","parseFloat","handleOpenEditForm","CreatePackage","CreatePackageConsumer","Packages","packages","setPackages","setTitle","ExpertRoutes","path","useRouteMatch","component"],"mappings":"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","file":"static/js/8.2611ba53.chunk.js","sourcesContent":["function formatDate(date: Date, formatString = 'dd/MM/yyyy'): string {\n  let result = formatString;\n\n  const format = [\n    {\n      symbol: 'dd',\n      value: date.getDate() < 10 ? `0${date.getDate()}` : date.getDate(),\n    },\n    {\n      symbol: 'MM',\n      value: date.getMonth() + 1 < 10 ? `0${date.getMonth() + 1}` : `${date.getMonth() + 1}`,\n    },\n    {\n      symbol: 'yyyy',\n      value: date.getFullYear(),\n    },\n    {\n      symbol: 'hh',\n      value: date.getHours() < 10 ? `0${date.getHours()}` : date.getHours(),\n    },\n    {\n      symbol: 'mm',\n      value: date.getMinutes() < 10 ? `0${date.getMinutes()}` : date.getMinutes(),\n    },\n  ];\n\n  format.map((f) => {\n    result = result.replace(f.symbol, f.value as string);\n    return f.symbol;\n  });\n\n  return result;\n}\n\nfunction formatMoney(value: number, frac = 0): string {\n  const numberFormat = new Intl.NumberFormat('vi-VN', { maximumFractionDigits: frac, minimumFractionDigits: frac });\n  return numberFormat.format(value);\n}\n\nconst format = {\n  formatDate,\n  formatMoney,\n};\n\nexport default format;\n","import axios from 'axios';\n\nconst apiUrl = '/api/bidding/packages';\n\nexport type CreateItemModel = {\n  id: number;\n  no: string;\n  quantity: string;\n  optionQuantity: string;\n  spec: string;\n  note: string;\n  begin: Date;\n  end: Date;\n  materialCode: string;\n  materialDescription: string;\n  unit: string;\n  optionUnit: string;\n}\n\nexport type CreatePackageVendorModel = {\n  code: string;\n  longTextName: string;\n}\n\nexport type CreatePackageModel = {\n  code: string;\n  name: string;\n  begin: Date;\n  end: Date;\n  description: string;\n  isInternal: boolean;\n  vendors: CreatePackageVendorModel[];\n  files: File[];\n  items: CreateItemModel[];\n}\n\nexport type PackageModel = {\n  code: string;\n  name: string;\n  begin: Date;\n  end: Date;\n  status: number;\n  description: string;\n  isInternal: boolean;\n  items: ItemModel[];\n  vendors: VendorModel[];\n  attachments: AttachmentModel[];\n}\n\nexport type ItemModel = {\n  id: number;\n  no: number;\n  code: string;\n  description: string;\n  unit: string;\n  optionUnit: string;\n  quantity: number;\n  optionQuantity: number;\n  spec: string;\n  note: string;\n  begin: Date;\n  end: Date;\n}\n\nexport type VendorModel = {\n  code: string;\n  shortTextName: string;\n  longTextName: string;\n  submitted: boolean;\n}\n\nexport type AttachmentModel = {\n  id: number;\n  fileName: string;\n}\n\nexport type QuotationModel = {\n  submitted: boolean,\n  items: QuotationItemModel[],\n  attachments: QuotationAttachmentModel[],\n}\n\nexport type QuotationItemModel = {\n  itemId: number;\n  price: number;\n}\n\nexport type QuotationAttachmentModel = {\n  id: number;\n  fileName: string;\n}\n\nfunction getAll(statusName: string): Promise<PackageModel[]> {\n  return axios.get(`${apiUrl}/getPackages/${statusName}`);\n}\n\nfunction getAuditorPackages(statusName: string): Promise<PackageModel[]> {\n  return axios.get(`${apiUrl}/getAuditorPackages/${statusName}`);\n}\n\nfunction get(packageCode: string): Promise<PackageModel> {\n  return axios.get(`${apiUrl}/${packageCode}`);\n}\n\nfunction createPackage(model: CreatePackageModel): Promise<string> {\n  const formData = new FormData();\n  formData.append('Code', model.code);\n  formData.append('Name', model.name);\n  formData.append('Begin', model.begin.toUTCString());\n  formData.append('End', model.end.toUTCString());\n  formData.append('Description', model.description);\n  formData.append('IsInternal', model.isInternal ? 'true' : 'false');\n  model.vendors.map((v, index) => {\n    formData.append(`Vendors[${index}]`, v.code);\n    return true;\n  });\n  model.files.map((f) => {\n    formData.append('Files', f, f.name);\n    return true;\n  });\n  model.items.map((item, index) => {\n    formData.append(`Items[${index}][No]`, item.no);\n    formData.append(`Items[${index}][Quantity]`, item.quantity);\n    formData.append(`Items[${index}][OptionQuantity]`, item.optionQuantity);\n    formData.append(`Items[${index}][Spec]`, item.spec);\n    formData.append(`Items[${index}][Note]`, item.note);\n    formData.append(`Items[${index}][Begin]`, item.begin.toUTCString());\n    formData.append(`Items[${index}][End]`, item.end.toUTCString());\n    formData.append(`Items[${index}][MaterialCode]`, item.materialCode);\n    return true;\n  });\n\n  return axios.post(\n    apiUrl,\n    formData,\n    {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    },\n  );\n}\n\nfunction getQuotation(packageCode: string, vendorCode: string): Promise<QuotationModel> {\n  return axios.get(`${apiUrl}/getQuotation/${packageCode}/${vendorCode}`);\n}\n\nconst service = {\n  getAll,\n  getAuditorPackages,\n  get,\n  createPackage,\n  getQuotation,\n};\n\nexport default service;\n","import axios from 'axios';\n\nconst apiUrl = '/api/bidding/vendors';\n\nexport type VendorModel = {\n  code: string;\n  longTextName: string;\n}\n\nexport type VendorDetailModel = {\n  code: string;\n  longTextName: string;\n  shortTextName: string;\n  isActive: boolean;\n  addresses: AddressModel[];\n}\n\nexport type AddressModel = {\n  addressType: number;\n  data: string;\n}\n\nfunction getVendors(): Promise<VendorModel[]> {\n  return axios.get(`${apiUrl}/getVendors`);\n}\n\nfunction getRegisterList(): Promise<VendorModel[]> {\n  return axios.get(`${apiUrl}/getRegisterList`);\n}\n\nfunction getDetail(code: string): Promise<VendorDetailModel> {\n  return axios.get(`${apiUrl}/getDetail/${code}`);\n}\n\nfunction approve(code: string): Promise<unknown> {\n  return axios.post(`${apiUrl}/approve/${code}`)\n}\n\nfunction reject(code: string): Promise<unknown> {\n  return axios.post(`${apiUrl}/reject/${code}`)\n}\n\nconst service = {\n  getVendors,\n  getRegisterList,\n  getDetail,\n  approve,\n  reject,\n};\n\nexport default service;\n","import axios from 'axios';\n\nconst apiUrl = '/api/bidding/materials';\n\nexport type MaterialModel = {\n  code: string;\n  description: string;\n  unit: string;\n  optionUnit: string;\n}\n\nexport type AddFromExcelModel = {\n  code: string;\n  isAdded: string;\n  message: string;\n}\n\nfunction getAll(): Promise<MaterialModel[]> {\n  return axios.get(apiUrl);\n}\n\nfunction create(model: MaterialModel): Promise<number> {\n  return axios.post(apiUrl, model);\n}\n\nfunction edit(code: string, model: MaterialModel): Promise<unknown> {\n  return axios.put(`${apiUrl}/${code}`, model);\n}\n\nfunction remove(code: string): Promise<unknown> {\n  return axios.delete(`${apiUrl}/${code}`);\n}\n\nfunction addFromExcel(file: File): Promise<AddFromExcelModel[]> {\n  const formData = new FormData();\n  formData.append('files', file, file.name);\n\n  return axios.post(\n    `${apiUrl}/addFromExcel`,\n    formData,\n    {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    },\n  );\n}\n\nconst service = {\n  getAll,\n  create,\n  edit,\n  remove,\n  addFromExcel,\n};\n\nexport default service;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport {\n\tGrid,\n\tTypography,\n} from '@material-ui/core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n\tFrame,\n\tDataTable,\n\tDataColumnType,\n\tDownloadButton,\n} from '@nvdunginest/emis-mui';\n\nimport {\n\tAppDispatch,\n\talertActions,\n\talertMessage,\n} from '../../../../core';\n\nimport format from '../../../../configs/format';\nimport packageService, { QuotationModel, ItemModel } from '../../services/package';\n\ntype ItemState = ItemModel & {\n\tprice: number;\n}\n\ntype Data = ItemState & {\n\tinfoCol: JSX.Element,\n\tquantityCol: JSX.Element,\n\tnoteCol: JSX.Element,\n\tdeliveryCol: JSX.Element,\n\tpriceCol: JSX.Element,\n}\n\nconst columns: DataColumnType<Data>[] = [\n\t{ id: 'no', label: 'STT', numeric: false, sortable: false },\n\t{ id: 'infoCol', label: 'Hạng mục', numeric: false, sortable: false },\n\t{ id: 'quantityCol', label: 'Số lượng', numeric: false, sortable: false },\n\t{ id: 'noteCol', label: 'Ghi chú', numeric: false, sortable: false },\n\t{ id: 'deliveryCol', label: 'Thời gian giao hàng', numeric: false, sortable: false },\n\t{ id: 'priceCol', label: 'Đơn giá', numeric: false, sortable: false },\n];\n\nconst initialQuotationState: QuotationModel = {\n\tsubmitted: false,\n\titems: [],\n\tattachments: [],\n}\n\ntype Props = {\n\tpackageCode: string;\n\tvendorCode: string;\n\tpackageItems: ItemModel[];\n}\n\nexport default function Quotation({\n\tpackageCode,\n\tvendorCode,\n\tpackageItems,\n}: Props): JSX.Element {\n\tconst dispatch: AppDispatch = useDispatch();\n\n\tconst [quotation, setQuotation] = React.useState<QuotationModel>(initialQuotationState);\n\tconst [items, setItems] = React.useState<ItemState[]>([]);\n\n\tconst refresh = async () => {\n\t\ttry {\n\t\t\tconst data = await packageService.getQuotation(packageCode, vendorCode);\n\t\t\tsetQuotation(data);\n\t\t\tsetItems(packageItems.map(packageItem => {\n\t\t\t\tconst quotationItem = data.items.find(x => x.itemId === packageItem.id);\n\t\t\t\tif (quotationItem !== undefined) {\n\t\t\t\t\treturn ({ ...packageItem, price: quotationItem.price });\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn ({ ...packageItem, price: 0 });\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t\tcatch {\n\t\t\tdispatch(alertActions.show(alertMessage.FETCH_FAILURE, 'error'));\n\t\t}\n\t}\n\n\tconst actionsButton: JSX.Element[] = [\n\t];\n\n\tconst renderData = (data: ItemState[]): Data[] => {\n\t\treturn data.map(item => {\n\t\t\tconst row: Data = {\n\t\t\t\t...item,\n\t\t\t\tinfoCol: (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Typography variant=\"subtitle2\">{item.description}</Typography>\n\t\t\t\t\t\t<Typography variant=\"caption\">{item.code}</Typography>\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\tquantityCol: (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Typography variant=\"subtitle2\">\n\t\t\t\t\t\t\t{`${format.formatMoney(item.quantity, 3)} ${item.unit}`}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography variant=\"caption\">\n\t\t\t\t\t\t\t{`${format.formatMoney(item.optionQuantity, 3)} ${item.optionUnit}`}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\tnoteCol: (\n\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column' }}>\n\t\t\t\t\t\t{item.spec !== null && <Typography variant=\"caption\">{`Spec: ${item.spec}`}</Typography>}\n\t\t\t\t\t\t{item.spec !== null && <Typography variant=\"caption\">{`Ghi chú: ${item.note}`}</Typography>}\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\tdeliveryCol: (\n\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column' }}>\n\t\t\t\t\t\t<Typography variant=\"caption\">\n\t\t\t\t\t\t\t{`Từ: ${format.formatDate(new Date(item.begin), 'dd/MM/yyyy')}`}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography variant=\"caption\">\n\t\t\t\t\t\t\t{`Đến: ${format.formatDate(new Date(item.end), 'dd/MM/yyyy')}`}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\tpriceCol: (\n\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column' }}>\n\t\t\t\t\t\t<Typography variant=\"subtitle2\">\n\t\t\t\t\t\t\t{format.formatMoney(item.price, 3)}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography variant=\"caption\">\n\t\t\t\t\t\t\t{`VND/1 ${item.unit}`}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\n\t\t\treturn row;\n\t\t});\n\t}\n\n\tReact.useEffect(() => {\n\t\trefresh();\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [packageCode, vendorCode]);\n\n\treturn (\n\t\t<Grid container spacing={1}>\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<DataTable\n\t\t\t\t\ttitle=\"Bảng chào giá\"\n\t\t\t\t\tcolumns={columns}\n\t\t\t\t\tdata={renderData(items)}\n\t\t\t\t\tactions={actionsButton}\n\t\t\t\t\tinitialOrderBy=\"no\"\n\t\t\t\t/>\n\t\t\t</Grid>\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Frame title=\"Tài liệu đính kèm chào giá\">\n\t\t\t\t\t{quotation.attachments.map((a, index) => (\n\t\t\t\t\t\t<Grid key={index} container spacing={1}>\n\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={{ iconName: 'check-square', prefix: 'far' }} />\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t<Typography variant=\"subtitle2\">{a.fileName}</Typography>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t<DownloadButton\n\t\t\t\t\t\t\t\t\tfilename={a.fileName}\n\t\t\t\t\t\t\t\t\turl={`/api/bidding/packages/${packageCode}/attachments/getQuotationFile/${vendorCode}/${a.id}`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t))}\n\t\t\t\t</Frame>\n\t\t\t</Grid>\n\t\t</Grid>\n\t)\n}\n","import React from 'react';\nimport { green, red } from '@material-ui/core/colors';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n\tTypography,\n\tAccordion as MuiAccordion,\n\tAccordionSummary as MuiAccordionSummary,\n\tAccordionDetails as MuiAccordionDetails,\n} from '@material-ui/core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport {\n\tFrame,\n} from '@nvdunginest/emis-mui';\n\nimport { VendorModel, ItemModel } from '../../services/package';\nimport Quotation from './Quotation';\n\nconst Accordion = withStyles({\n\troot: {\n\t\tborder: '1px solid rgba(0, 0, 0, .125)',\n\t\tboxShadow: 'none',\n\t\t'&:not(:last-child)': {\n\t\t\tborderBottom: 0,\n\t\t},\n\t\t'&:before': {\n\t\t\tdisplay: 'none',\n\t\t},\n\t\t'&$expanded': {\n\t\t\tmargin: 'auto',\n\t\t},\n\t},\n\texpanded: {},\n})(MuiAccordion);\n\nconst AccordionSummary = withStyles({\n\troot: {\n\t\tcolor: '#fff',\n\t\tfontStyle: 'uppercase',\n\t\tborderBottom: '1px solid rgba(0, 0, 0, .125)',\n\t\tmarginBottom: -1,\n\t\tminHeight: 40,\n\t\t'&$expanded': {\n\t\t\tminHeight: 40,\n\t\t},\n\t},\n\tcontent: {\n\t\tmargin: 0,\n\t\t'& .MuiTypography-body1': {\n\t\t\tfontSize: '0.9rem',\n\t\t},\n\t\t'&$expanded': {\n\t\t\tmargin: '0',\n\t\t},\n\t},\n\texpanded: {},\n})(MuiAccordionSummary);\n\nconst AccordionDetails = withStyles(() => ({\n\troot: {\n\t\tpadding: 0,\n\t},\n}))(MuiAccordionDetails);\n\ntype Props = {\n\tpackageCode: string;\n\tcanViewData: boolean;\n\tisClosedPackage: boolean;\n\tvendors: VendorModel[];\n\tpackageItems: ItemModel[];\n}\n\nexport default function Vendors({\n\tpackageCode,\n\tcanViewData,\n\tisClosedPackage,\n\tvendors,\n\tpackageItems,\n}: Props): JSX.Element {\n\tconst [expandedList, setExpandedList] = React.useState<string[]>([]);\n\n\tconst handleChange = (vendorCode: string, expanded: boolean) => {\n\t\tif (expanded) {\n\t\t\tif (!expandedList.includes(vendorCode)) {\n\t\t\t\tsetExpandedList([...expandedList, vendorCode]);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tsetExpandedList(expandedList.filter(r => r !== vendorCode));\n\t\t}\n\t};\n\n\treturn (\n\t\t<Frame title=\"Danh sách nhà cung cấp\" noPadding>\n\t\t\t{vendors.map((vendor) => (\n\t\t\t\t<Accordion\n\t\t\t\t\tsquare\n\t\t\t\t\tkey={vendor.code}\n\t\t\t\t\texpanded={expandedList.includes(vendor.code)}\n\t\t\t\t\tonChange={(_event, expanded) => { handleChange(vendor.code, expanded) }}\n\t\t\t\t\tdisabled={!(isClosedPackage && vendor.submitted && canViewData)}\n\t\t\t\t>\n\t\t\t\t\t<AccordionSummary style={{ backgroundColor: vendor.submitted ? green[700] : red[700] }}>\n\t\t\t\t\t\t<Typography>\n\t\t\t\t\t\t\t{`${vendor.code} - ${vendor.longTextName} `}\n\t\t\t\t\t\t\t<FontAwesomeIcon icon={vendor.submitted ? 'check-circle' : 'times-circle'} />\n\t\t\t\t\t\t\t{` ${vendor.submitted ? 'Đã nộp chào giá' : 'Chưa nộp chào giá'}`}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</AccordionSummary>\n\t\t\t\t\t<AccordionDetails>\n\t\t\t\t\t\t{expandedList.includes(vendor.code) && (\n\t\t\t\t\t\t\t<Quotation\n\t\t\t\t\t\t\t\tpackageCode={packageCode}\n\t\t\t\t\t\t\t\tpackageItems={packageItems}\n\t\t\t\t\t\t\t\tvendorCode={vendor.code}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</AccordionDetails>\n\t\t\t\t</Accordion>\n\t\t\t))}\n\t\t</Frame>\n\t)\n}","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport {\n\tGrid,\n\tTypography,\n\tPaper,\n} from '@material-ui/core';\nimport { red, amber, blue } from '@material-ui/core/colors';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { IconName } from '@fortawesome/fontawesome-svg-core';\nimport {\n\tFrame,\n\tTagInfo,\n\tDataTable,\n\tDataColumnType,\n\tDownloadButton,\n} from '@nvdunginest/emis-mui';\n\nimport {\n\tAppDispatch,\n\talertActions,\n\talertMessage,\n\tloadingActions,\n} from '../../../../core';\n\nimport format from '../../../../configs/format';\nimport packageService, { PackageModel, ItemModel } from '../../services/package';\nimport userService from '../../services/user';\n\nimport Vendors from './Vendors';\n\ntype Data = ItemModel & {\n\tinfoCol: JSX.Element,\n\tquantityCol: JSX.Element,\n\tnoteCol: JSX.Element,\n\tdeliveryCol: JSX.Element,\n}\n\nconst columns: DataColumnType<Data>[] = [\n\t{ id: 'no', label: 'STT', numeric: false, sortable: false },\n\t{ id: 'infoCol', label: 'Hạng mục', numeric: false, sortable: false },\n\t{ id: 'quantityCol', label: 'Số lượng', numeric: false, sortable: false },\n\t{ id: 'noteCol', label: 'Ghi chú', numeric: false, sortable: false },\n\t{ id: 'deliveryCol', label: 'Thời gian giao hàng', numeric: false, sortable: false },\n];\n\nconst initialState: PackageModel = {\n\tattachments: [],\n\tbegin: new Date(),\n\tcode: '',\n\tstatus: 0,\n\tdescription: '',\n\tend: new Date(),\n\tisInternal: false,\n\titems: [],\n\tname: '',\n\tvendors: [],\n}\n\ntype PackageStatusType = {\n\ttext: string;\n\ticon: IconName;\n\tcolor: string;\n}\n\nexport default function PackageDetail(): JSX.Element {\n\tconst { packageCode }: never = useParams();\n\tconst dispatch: AppDispatch = useDispatch();\n\n\tconst [packageDetail, setPackageDetail] = React.useState<PackageModel>(initialState);\n\tconst [isAuditor, setIsAuditor] = React.useState<boolean>(false);\n\n\tconst refresh = async () => {\n\t\tdispatch(loadingActions.show());\n\t\ttry {\n\t\t\tsetPackageDetail(await packageService.get(packageCode));\n\t\t\tsetIsAuditor(await userService.checkRolePermission('AUDITOR_ROLE'));\n\t\t}\n\t\tcatch {\n\t\t\tsetPackageDetail(initialState);\n\t\t\tsetIsAuditor(false);\n\t\t\tdispatch(alertActions.show(alertMessage.FETCH_FAILURE, 'error'));\n\t\t}\n\t\tfinally {\n\t\t\tdispatch(loadingActions.hide());\n\t\t}\n\t}\n\n\tconst actionsButton: JSX.Element[] = [\n\t];\n\n\tconst renderData = (data: ItemModel[]): Data[] => {\n\t\treturn data.map(item => {\n\t\t\tconst row: Data = {\n\t\t\t\t...item,\n\t\t\t\tinfoCol: (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Typography variant=\"subtitle2\">{item.description}</Typography>\n\t\t\t\t\t\t<Typography variant=\"caption\">{item.code}</Typography>\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\tquantityCol: (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Typography variant=\"subtitle2\">\n\t\t\t\t\t\t\t{`${format.formatMoney(item.quantity, 3)} ${item.unit}`}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography variant=\"caption\">\n\t\t\t\t\t\t\t{`${format.formatMoney(item.optionQuantity, 3)} ${item.optionUnit}`}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\tnoteCol: (\n\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column' }}>\n\t\t\t\t\t\t{item.spec !== null && <Typography variant=\"caption\">{`Spec: ${item.spec}`}</Typography>}\n\t\t\t\t\t\t{item.spec !== null && <Typography variant=\"caption\">{`Ghi chú: ${item.note}`}</Typography>}\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\tdeliveryCol: (\n\t\t\t\t\t<div style={{ display: 'flex', flexDirection: 'column' }}>\n\t\t\t\t\t\t<Typography variant=\"caption\">\n\t\t\t\t\t\t\t{`Từ: ${format.formatDate(new Date(item.begin), 'dd/MM/yyyy')}`}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography variant=\"caption\">\n\t\t\t\t\t\t\t{`Đến: ${format.formatDate(new Date(item.end), 'dd/MM/yyyy')}`}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t}\n\n\t\t\treturn row;\n\t\t});\n\t}\n\n\tconst getStatusProps = (status: number): PackageStatusType => {\n\t\tswitch (status) {\n\t\t\tcase 0:\n\t\t\t\treturn { text: 'Mới', icon: 'star', color: red[700] };\n\t\t\tcase 1:\n\t\t\t\treturn { text: 'Đang mở', icon: 'spinner', color: amber[700] };\n\t\t\tcase 2:\n\t\t\t\treturn { text: 'Đã đóng', icon: 'check-circle', color: blue[700] };\n\t\t\tdefault:\n\t\t\t\treturn { text: 'Không xác định', icon: 'exclamation-circle', color: '' };\n\t\t}\n\t}\n\n\tReact.useEffect(() => {\n\t\trefresh();\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [packageCode]);\n\n\treturn (\n\t\t<Grid container spacing={1}>\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Frame\n\t\t\t\t\ttitle={packageDetail.isInternal ? \"Đấu thầu nội bộ\" : \"Đấu thầu bình thường\"}\n\t\t\t\t>\n\t\t\t\t\t<Grid container spacing={1}>\n\t\t\t\t\t\t<Grid item xs={12} md={6}>\n\t\t\t\t\t\t\t<Typography variant=\"caption\">Mã số gói thầu</Typography>\n\t\t\t\t\t\t\t<Typography variant=\"subtitle2\">\n\t\t\t\t\t\t\t\t{`${packageDetail.code} - Trạng thái: `}\n\t\t\t\t\t\t\t\t<FontAwesomeIcon\n\t\t\t\t\t\t\t\t\ticon={getStatusProps(packageDetail.status).icon}\n\t\t\t\t\t\t\t\t\tcolor={getStatusProps(packageDetail.status).color}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{` ${getStatusProps(packageDetail.status).text} `}\n\t\t\t\t\t\t\t\t{packageDetail.status === 2 && (isAuditor || !packageDetail.isInternal) && (\n\t\t\t\t\t\t\t\t\t<DownloadButton\n\t\t\t\t\t\t\t\t\t\tlabel=\"Tải tổng hợp chào giá\"\n\t\t\t\t\t\t\t\t\t\tfilename={`${packageDetail.code} - Quotations Report.xlsx`}\n\t\t\t\t\t\t\t\t\t\turl={`/api/bidding/packages/getExcelReport/${packageDetail.code}`}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<TagInfo title=\"Tên gói thầu\" content={packageDetail.name} />\n\t\t\t\t\t\t<TagInfo\n\t\t\t\t\t\t\ttitle=\"Thời gian mở thầu\"\n\t\t\t\t\t\t\tcontent={format.formatDate(new Date(packageDetail.begin), 'hh:mm dd/MM/yyyy')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<TagInfo\n\t\t\t\t\t\t\ttitle=\"Thời gian đóng thầu\"\n\t\t\t\t\t\t\tcontent={format.formatDate(new Date(packageDetail.end), 'hh:mm dd/MM/yyyy')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<Typography variant=\"caption\">Mô tả</Typography>\n\t\t\t\t\t\t\t<Paper style={{ padding: '8px' }} variant=\"outlined\">\n\t\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: packageDetail.description }}></div>\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid xs={12} item>\n\t\t\t\t\t\t\t<Typography variant=\"caption\">Tài liệu đính kèm</Typography>\n\t\t\t\t\t\t\t{packageDetail.attachments.map((a, index) => (\n\t\t\t\t\t\t\t\t<Grid key={index} container spacing={1}>\n\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={{ iconName: 'check-square', prefix: 'far' }} />\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t<Typography variant=\"subtitle2\">{a.fileName}</Typography>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t<DownloadButton\n\t\t\t\t\t\t\t\t\t\t\tfilename={a.fileName}\n\t\t\t\t\t\t\t\t\t\t\turl={`/api/bidding/packages/${packageDetail.code}/attachments/${a.id}`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Frame>\n\t\t\t</Grid>\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Vendors\n\t\t\t\t\tpackageCode={packageDetail.code}\n\t\t\t\t\tcanViewData={isAuditor || !packageDetail.isInternal}\n\t\t\t\t\tpackageItems={packageDetail.items}\n\t\t\t\t\tisClosedPackage={packageDetail.status === 2}\n\t\t\t\t\tvendors={packageDetail.vendors}\n\t\t\t\t/>\n\t\t\t</Grid>\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<DataTable\n\t\t\t\t\ttitle=\"Danh sách vật tư, dịch vụ\"\n\t\t\t\t\tcolumns={columns}\n\t\t\t\t\tdata={renderData(packageDetail.items)}\n\t\t\t\t\tactions={actionsButton}\n\t\t\t\t\tinitialOrderBy=\"no\"\n\t\t\t\t/>\n\t\t\t</Grid>\n\t\t</Grid>\n\t)\n}\n","import { MaterialModel } from '../../services/material';\nimport { VendorModel } from '../../services/vendor';\nimport { CreateItemModel } from '../../services/package';\n\nexport const GET_INPUT_DATA_SUCCESS = 'GET_INPUT_DATA_SUCCESS';\nexport const GET_INPUT_DATA_FAILURE = 'GET_INPUT_DATA_FAILURE';\n\nexport const CHANGE_HEADER_DATA = 'CHANGE_HEADER_DATA';\nexport const CHANGE_VENDORS_DATA = 'CHANGE_VENDORS_DATA';\n\nexport const ADD_ITEM = 'ADD_ITEM';\nexport const EDIT_ITEM = 'EDIT_ITEM';\nexport const REMOVE_ITEM = 'REMOVE_ITEM';\n\nexport const CHANGE_FILES = 'CHANGE_FILES';\n\ninterface GetInputDataSuccessAction {\n  type: typeof GET_INPUT_DATA_SUCCESS,\n  payload: {\n    materials: MaterialModel[],\n    vendors: VendorModel[],\n  }\n}\n\ninterface GetInputDataFailureAction {\n  type: typeof GET_INPUT_DATA_FAILURE,\n}\n\ninterface ChangeHeaderData {\n  type: typeof CHANGE_HEADER_DATA,\n  payload: {\n    name: string,\n    value: string | Date | boolean,\n  },\n}\n\ninterface ChangeVendorsData {\n  type: typeof CHANGE_VENDORS_DATA,\n  payload: {\n    vendorCode: string,\n    checked: boolean,\n  }\n}\n\ninterface AddItem {\n  type: typeof ADD_ITEM,\n  payload: {\n    item: CreateItemModel,\n  },\n}\n\ninterface EditItem {\n  type: typeof EDIT_ITEM,\n  payload: {\n    item: CreateItemModel,\n  },\n}\n\ninterface RemoveItem {\n  type: typeof REMOVE_ITEM,\n  payload: {\n    id: number,\n  },\n}\n\ninterface ChangeFiles {\n  type: typeof CHANGE_FILES,\n  payload: {\n    files: File[],\n  },\n}\n\nexport type Actions =\n  GetInputDataSuccessAction |\n  GetInputDataFailureAction |\n  ChangeHeaderData |\n  ChangeVendorsData |\n  AddItem |\n  EditItem |\n  RemoveItem |\n  ChangeFiles;\n","import { CreatePackageModel, CreateItemModel } from '../../services/package';\nimport { MaterialModel } from '../../services/material';\nimport { VendorModel } from '../../services/vendor';\n\nexport type CreatePackageState = {\n  model: CreatePackageModel,\n  materials: MaterialModel[],\n  vendors: VendorModel[],\n};\n\nexport const initialState: CreatePackageState = {\n  model: {\n    begin: new Date(),\n    code: '',\n    description: '',\n    isInternal: false,\n    end: new Date(),\n    files: [],\n    items: [],\n    name: '',\n    vendors: [],\n  },\n  materials: [],\n  vendors: [],\n};\n\nexport type CreatePackageStore = {\n  state: CreatePackageState;\n  getInputData: () => void;\n  changeHeader: (name: string, value: string | Date | boolean) => void;\n  changeVendors: (vendorCode: string, checked: boolean) => void;\n  addItem: (item: CreateItemModel) => void;\n  editItem: (item: CreateItemModel) => void;\n  removeItem: (id: number) => void;\n  changeFiles: (files: File[]) => void;\n}\n\nexport const defaultStore: CreatePackageStore = {\n  state: initialState,\n  getInputData: () => { return; },\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  changeHeader: (name: string, value: string | Date | boolean) => { return; },\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  changeVendors: (vendorCode: string, checked: boolean) => { return; },\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  addItem: (item: CreateItemModel) => { return; },\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  editItem: (item: CreateItemModel) => { return; },\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  removeItem: (id: number) => { return; },\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  changeFiles: (files: File[]) => { return; },\n};\n","import {\n  Actions,\n  CHANGE_HEADER_DATA,\n  GET_INPUT_DATA_FAILURE,\n  GET_INPUT_DATA_SUCCESS,\n  CHANGE_VENDORS_DATA,\n  ADD_ITEM,\n  EDIT_ITEM,\n  REMOVE_ITEM,\n  CHANGE_FILES,\n} from './constant';\nimport { CreatePackageState, initialState } from './types';\n\nexport default function reducer(state = initialState, action: Actions): CreatePackageState {\n  switch (action.type) {\n    case GET_INPUT_DATA_SUCCESS:\n      return {\n        ...state,\n        materials: action.payload.materials,\n        vendors: action.payload.vendors,\n      };\n\n    case GET_INPUT_DATA_FAILURE:\n      return {\n        ...state,\n        materials: [],\n        vendors: [],\n      };\n\n    case CHANGE_HEADER_DATA:\n      return {\n        ...state,\n        model: { ...state.model, [action.payload.name]: action.payload.value }\n      };\n\n    case CHANGE_VENDORS_DATA:\n      if (action.payload.checked) {\n        const exist = state.model.vendors.find(x => x.code === action.payload.vendorCode);\n        if (exist === undefined) {\n          const vendor = state.vendors.find(x => x.code === action.payload.vendorCode);\n          if (vendor !== undefined) {\n            return {\n              ...state,\n              model: {\n                ...state.model,\n                vendors: [...state.model.vendors, { code: vendor.code, longTextName: vendor.longTextName }]\n              }\n            };\n          }\n          return state;\n        }\n        else {\n          return state;\n        }\n      }\n      else {\n        return {\n          ...state,\n          model: {\n            ...state.model,\n            vendors: state.model.vendors.filter(x => x.code !== action.payload.vendorCode),\n          }\n        };\n      }\n\n    case ADD_ITEM:\n      return {\n        ...state,\n        model: {\n          ...state.model,\n          items: [...state.model.items, action.payload.item],\n        }\n      }\n\n    case EDIT_ITEM:\n      return {\n        ...state,\n        model: {\n          ...state.model,\n          items: [...state.model.items.filter(x => x.id !== action.payload.item.id), action.payload.item],\n        }\n      }\n\n    case REMOVE_ITEM:\n      return {\n        ...state,\n        model: {\n          ...state.model,\n          items: state.model.items.filter(x => x.id !== action.payload.id),\n        }\n      }\n\n    case CHANGE_FILES:\n      return {\n        ...state,\n        model: {\n          ...state.model,\n          files: action.payload.files,\n        }\n      }\n\n    default:\n      return state;\n  }\n}\n","import { Dispatch } from 'react';\n\nimport {\n  alertActions,\n  loadingActions,\n  alertMessage,\n  store,\n} from '../../../../core';\n\nimport materialService, { MaterialModel } from '../../services/material';\nimport vendorService, { VendorModel } from '../../services/vendor';\nimport { CreateItemModel } from '../../services/package';\n\nimport {\n  Actions,\n  GET_INPUT_DATA_FAILURE,\n  GET_INPUT_DATA_SUCCESS,\n  CHANGE_HEADER_DATA,\n  CHANGE_VENDORS_DATA,\n  ADD_ITEM,\n  EDIT_ITEM,\n  REMOVE_ITEM,\n  CHANGE_FILES,\n} from './constant';\n\nconst getInputData = async (\n  dispatch: Dispatch<Actions>\n): Promise<void> => {\n  function success(\n    materials: MaterialModel[],\n    vendors: VendorModel[],\n  ): Actions {\n    return {\n      type: GET_INPUT_DATA_SUCCESS,\n      payload: {\n        materials: materials,\n        vendors: vendors,\n      }\n    };\n  }\n  function fail(): Actions { return { type: GET_INPUT_DATA_FAILURE }; }\n\n  store.dispatch(loadingActions.show());\n  try {\n    const data = await Promise.all([materialService.getAll(), vendorService.getVendors()]);\n    dispatch(success(data[0], data[1]));\n  }\n  catch {\n    dispatch(fail());\n    store.dispatch(alertActions.show(alertMessage.FETCH_FAILURE, 'error'));\n  }\n  finally {\n    store.dispatch(loadingActions.hide());\n  }\n};\n\nconst changeHeader = (\n  name: string,\n  value: string | Date | boolean,\n  dispatch: Dispatch<Actions>,\n): void => {\n  function action(): Actions { return { type: CHANGE_HEADER_DATA, payload: { name: name, value: value } } }\n  dispatch(action());\n}\n\nconst changeVendors = (\n  vendorCode: string,\n  checked: boolean,\n  dispatch: Dispatch<Actions>,\n): void => {\n  function action(): Actions { return { type: CHANGE_VENDORS_DATA, payload: { vendorCode: vendorCode, checked: checked } } }\n  dispatch(action());\n}\n\nconst addItem = (\n  item: CreateItemModel,\n  dispatch: Dispatch<Actions>,\n): void => {\n  function action(): Actions { return { type: ADD_ITEM, payload: { item: item } } }\n  dispatch(action());\n}\n\nconst editItem = (\n  item: CreateItemModel,\n  dispatch: Dispatch<Actions>,\n): void => {\n  function action(): Actions { return { type: EDIT_ITEM, payload: { item: item } } }\n  dispatch(action());\n}\n\nconst removeItem = (\n  id: number,\n  dispatch: Dispatch<Actions>,\n): void => {\n  function action(): Actions { return { type: REMOVE_ITEM, payload: { id: id } } }\n  dispatch(action());\n}\n\nconst changeFiles = (\n  files: File[],\n  dispatch: Dispatch<Actions>,\n): void => {\n  function action(): Actions { return { type: CHANGE_FILES, payload: { files: files } } }\n  dispatch(action());\n}\n\nconst actions = {\n  getInputData,\n  changeHeader,\n  changeVendors,\n  addItem,\n  editItem,\n  removeItem,\n  changeFiles,\n};\n\nexport default actions;\n","import React, { createContext } from 'react';\nimport { CreateItemModel } from '../../services/package';\nimport reducer from './reducers';\nimport { CreatePackageStore, initialState, defaultStore } from './types';\nimport action from './actions';\n\ntype CreatePackageProviderProps = {\n  children: JSX.Element | JSX.Element[];\n}\n\nexport const CreatePackageContext = createContext(defaultStore);\n\nexport default function CreatePackageProvider({ children }: CreatePackageProviderProps): JSX.Element {\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n\n  const getInputData = () => {\n    action.getInputData(dispatch);\n  };\n\n  const changeHeader = (name: string, value: string | Date | boolean) => {\n    action.changeHeader(name, value, dispatch);\n  }\n\n  const changeVendors = (vendorCode: string, checked: boolean) => {\n    action.changeVendors(vendorCode, checked, dispatch);\n  }\n\n  const addItem = (item: CreateItemModel) => {\n    action.addItem(item, dispatch);\n  }\n\n  const editItem = (item: CreateItemModel) => {\n    action.editItem(item, dispatch);\n  }\n\n  const removeItem = (id: number) => {\n    action.removeItem(id, dispatch);\n  }\n\n  const changeFiles = (files: File[]) => {\n    action.changeFiles(files, dispatch);\n  }\n\n  const store: CreatePackageStore = {\n    state,\n    getInputData,\n    changeHeader,\n    changeVendors,\n    addItem,\n    editItem,\n    removeItem,\n    changeFiles,\n  };\n\n  return (\n    <CreatePackageContext.Provider value={store}>\n      {children}\n    </CreatePackageContext.Provider>\n  );\n}\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport {\n  Grid,\n  Typography,\n} from '@material-ui/core';\nimport { DropzoneArea } from 'material-ui-dropzone';\nimport {\n  Frame,\n  TextField,\n  DateTimePicker,\n  Editor,\n  Checkbox,\n  IconButton,\n  ComboBox,\n} from '@nvdunginest/emis-mui';\n\nimport {\n  AppDispatch,\n  alertActions,\n  alertMessage,\n  loadingActions,\n} from '../../../../core';\n\nimport { CreatePackageContext } from '../../stores/CreatePackageStore';\nimport packageService from '../../services/package';\nimport { VendorModel } from '../../services/vendor';\n\ntype VendorComboBoxType = VendorModel & {\n  label: string;\n}\n\nexport default function Header(): JSX.Element {\n  const history = useHistory();\n  const dispatch: AppDispatch = useDispatch();\n\n  const { state, changeHeader, changeVendors, changeFiles } = React.useContext(CreatePackageContext);\n  const { model, vendors } = state;\n  const [selectedVendor, setSelectedVendor] = React.useState<VendorComboBoxType | null>(null);\n\n  const handleChangeFile = (files: File[]) => {\n    if (Array.isArray(files)) {\n      changeFiles(files);\n    }\n  };\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    changeHeader(event.target.name, event.target.value);\n  }\n\n  const handleChangeDate = (name: string, value: Date) => {\n    changeHeader(name, value);\n  }\n\n  const handleCreatePackage = async () => {\n    dispatch(loadingActions.show());\n    try {\n      const packageCode = await packageService.createPackage(state.model);\n      dispatch(alertActions.show(`${alertMessage.ACTION_SUCCESS}`, 'success'));\n      history.push(`/bidding/expert/package/${packageCode}`)\n    }\n    catch {\n      dispatch(alertActions.show(`${alertMessage.ACTION_FAILURE}`, 'error'));\n    }\n    finally {\n      dispatch(loadingActions.hide());\n    }\n  }\n\n  const handleAddVendor = () => {\n    if (selectedVendor !== null) {\n      if (!model.vendors.map(x => x.code).includes(selectedVendor.code)) {\n        changeVendors(selectedVendor.code, true);\n      }\n    }\n  }\n\n  const handleRemoveVendor = (vendorCode: string) => {\n    changeVendors(vendorCode, false);\n  }\n\n  const renderComboBoxOptions = (vendors: VendorModel[]): VendorComboBoxType[] => {\n    return vendors.map(x => {\n      const result: VendorComboBoxType = {\n        ...x,\n        label: `[${x.code}]-${x.longTextName}`,\n      }\n\n      return result;\n    })\n  }\n\n  return (\n    <Frame title=\"Thông tin chung\">\n      <Grid container spacing={1}>\n        <Grid item xs={12} md={6}>\n          <TextField\n            required\n            label=\"Mã số\"\n            name=\"code\"\n            type=\"text\"\n            value={state.model.code}\n            onChange={handleChange}\n          />\n        </Grid>\n        <Grid item xs={12} md={6}>\n          <TextField\n            required\n            label=\"Tên gói thầu\"\n            name=\"name\"\n            type=\"text\"\n            value={state.model.name}\n            onChange={handleChange}\n          />\n        </Grid>\n        <Grid item xs={12}>\n          <Typography variant=\"caption\">Loại hình gói thầu</Typography>\n          <div>\n            <Checkbox\n              checked={model.isInternal}\n              name=\"isInternal\"\n              label=\"Đấu thầu nội bộ\"\n              onChange={(_event, checked) => {\n                changeHeader('isInternal', checked);\n              }}\n            />\n          </div>\n        </Grid>\n        <Grid item xs={12} md={6}>\n          <DateTimePicker\n            label=\"Thời gian mở thầu\"\n            name=\"begin\"\n            value={state.model.begin}\n            onChange={(date) => { handleChangeDate('begin', date as Date); }}\n            disablePast\n            required\n          />\n        </Grid>\n        <Grid item xs={12} md={6}>\n          <DateTimePicker\n            label=\"Thời gian đóng thầu\"\n            name=\"end\"\n            value={state.model.end}\n            onChange={(date) => { handleChangeDate('end', date as Date); }}\n            disablePast\n            required\n          />\n        </Grid>\n        <Grid item xs={12}>\n          <Typography variant=\"caption\">Nội dung</Typography>\n          <Editor\n            value={state.model.description}\n            onChange={(content: string) => { changeHeader('description', content) }}\n          />\n        </Grid>\n        <Grid container item xs={12} spacing={1}>\n          <Grid container item xs={12} spacing={1} alignItems=\"flex-end\">\n            <Grid item xs={10}>\n              <ComboBox\n                label=\"Chọn nhà cung cấp\"\n                optionLabel=\"label\"\n                value={selectedVendor}\n                options={renderComboBoxOptions(vendors)}\n                getOptionSelected={(o, v) => o.code === v.code}\n                onChange={(value) => { setSelectedVendor(value); }}\n              />\n            </Grid>\n            <Grid item>\n              <IconButton\n                icon=\"plus\"\n                color=\"primary\"\n                text=\"Thêm\"\n                variant=\"contained\"\n                onClick={() => { handleAddVendor(); }}\n              />\n            </Grid>\n          </Grid>\n          <Grid container item xs={12} spacing={1}>\n            {model.vendors.map((vendor, index) => (\n              <Grid key={vendor.code} item container spacing={1} xs={12}>\n                <Grid item>\n                  <Typography variant=\"subtitle2\">\n                    {`${index + 1}. [${vendor.code}] - ${vendor.longTextName}`}\n                  </Typography>\n                </Grid>\n                <Grid item>\n                  <IconButton\n                    icon=\"trash-alt\"\n                    color=\"danger\"\n                    text=\"Xóa\"\n                    onClick={() => { handleRemoveVendor(vendor.code); }}\n                  />\n                </Grid>\n              </Grid>\n            ))}\n          </Grid>\n        </Grid>\n        <Grid item xs={12}>\n          <Typography variant=\"caption\">Tài liệu đính kèm</Typography>\n          <div>\n            <Grid container spacing={1}>\n              <DropzoneArea\n                showPreviews={false}\n                acceptedFiles={[\n                  '.doc',\n                  '.docx',\n                  '.xls',\n                  '.xlsx',\n                  '.pdf',\n                  '.rar',\n                  '.zip',\n                ]}\n                showFileNames\n                filesLimit={10}\n                maxFileSize={25000000}\n                useChipsForPreview\n                dropzoneText=\"Kéo thả file vào đây để tải lên\"\n                onChange={handleChangeFile}\n                showAlerts={false}\n              />\n            </Grid>\n          </div>\n        </Grid>\n        <Grid item xs={12}>\n          <IconButton\n            icon=\"plus\"\n            color=\"success\"\n            text=\"Tạo gói thầu\"\n            variant=\"contained\"\n            onClick={() => { handleCreatePackage(); }}\n          />\n        </Grid>\n      </Grid>\n    </Frame>\n  )\n}","import xlsx from 'xlsx';\n\nexport function excelDateToJSDate(serial: number): Date {\n\tconst utc_days = Math.floor(serial - 25569);\n\tconst utc_value = utc_days * 86400;\n\tconst date_info = new Date(utc_value * 1000);\n\tconst fractional_day = serial - Math.floor(serial) + 0.0000001;\n\tconst total_seconds = Math.floor(86400 * fractional_day) - Math.floor(86400 * fractional_day) % 60;\n\tconst seconds = Math.floor(86400 * fractional_day) % 60;\n\tconst hours = Math.floor(total_seconds / (60 * 60));\n\tconst minutes = Math.floor(total_seconds / 60) % 60;\n\treturn new Date(date_info.getFullYear(), date_info.getMonth(), date_info.getDate(), hours, minutes, seconds);\n}\n\nexport type ExcelColumnType<T> = {\n\tname: keyof T;\n\tcol: number;\n}\n\nexport function readToArray<T>(file: File, columns: ExcelColumnType<T>[], headerRows: number, initial: T): Promise<T[]> {\n\treturn new Promise<T[]>((resolve, reject) => {\n\t\tconst reader = new FileReader();\n\t\treader.readAsArrayBuffer(file);\n\t\tconst result: T[] = [];\n\t\treader.onload = function () {\n\t\t\tconst data = new Uint8Array(reader.result as ArrayBuffer);\n\t\t\tconst workbook = xlsx.read(data, { type: 'array' });\n\t\t\tconst sheet = workbook.Sheets[workbook.SheetNames[0]];\n\n\t\t\tlet row = 0;\n\n\t\t\twhile (sheet[xlsx.utils.encode_cell({ c: columns[0].col, r: headerRows + row })]) {\n\t\t\t\tconst item: T = { ...initial };\n\t\t\t\tconst activeRow = headerRows + row;\n\t\t\t\tcolumns.map(column => {\n\t\t\t\t\tconst cell = sheet[xlsx.utils.encode_cell({ c: column.col, r: activeRow })];\n\t\t\t\t\tif (typeof (item[column.name]) === 'string' || cell !== undefined) {\n\t\t\t\t\t\tswitch (typeof (item[column.name])) {\n\t\t\t\t\t\t\tcase 'string':\n\t\t\t\t\t\t\t\tif (cell !== undefined) {\n\t\t\t\t\t\t\t\t\tif (cell.t === 's') {\n\t\t\t\t\t\t\t\t\t\titem[column.name] = cell.v;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'number':\n\t\t\t\t\t\t\t\tif (cell.t === 'n') {\n\t\t\t\t\t\t\t\t\titem[column.name] = cell.v;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tconsole.log(activeRow);\n\t\t\t\t\t\tconsole.log(column.col);\n\t\t\t\t\t\treject();\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t\tresult.push(item);\n\t\t\t\trow++;\n\t\t\t}\n\t\t\tresolve(result);\n\t\t}\n\t});\n}\n\nconst excelReader = {\n\texcelDateToJSDate,\n\treadToArray,\n}\n\nexport default excelReader;","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport {\n  Grid,\n  Typography,\n} from '@material-ui/core';\nimport { DropzoneArea } from 'material-ui-dropzone';\nimport {\n  FormDialog,\n  TextField,\n  IconButton,\n  DatePicker,\n  DataTable,\n  DataColumnType,\n  ComboBox,\n} from '@nvdunginest/emis-mui';\n\nimport {\n  AppDispatch,\n  alertActions,\n  alertMessage,\n  loadingActions,\n} from '../../../../core';\n\nimport format from '../../../../configs/format';\n\nimport { CreateItemModel } from '../../services/package';\nimport { MaterialModel } from '../../services/material';\nimport { CreatePackageContext } from '../../stores/CreatePackageStore';\nimport excelReader, { ExcelColumnType } from '../../../../configs/excelReader';\n\ntype MaterialComboBoxType = MaterialModel & {\n  label: string;\n}\n\ntype Data = CreateItemModel & {\n  noNumber: number,\n  infoCol: JSX.Element,\n  quantityCol: JSX.Element,\n  noteCol: JSX.Element,\n  deliveryCol: JSX.Element,\n  action: JSX.Element,\n}\n\ntype ExcelData = {\n  no: number;\n  code: string;\n  spec: string;\n  note: string;\n  quantity: number;\n  optionQuantity: number;\n  begin: number;\n  end: number;\n}\n\nconst excelColumns: ExcelColumnType<ExcelData>[] = [\n  { name: 'no', col: 0 },\n  { name: 'code', col: 1 },\n  { name: 'spec', col: 3 },\n  { name: 'note', col: 4 },\n  { name: 'quantity', col: 6 },\n  { name: 'optionQuantity', col: 8 },\n  { name: 'begin', col: 9 },\n  { name: 'end', col: 10 },\n]\n\nconst columns: DataColumnType<Data>[] = [\n  { id: 'noNumber', label: 'STT', numeric: false, sortable: false },\n  { id: 'infoCol', label: 'Hạng mục', numeric: false, sortable: false },\n  { id: 'quantityCol', label: 'Số lượng', numeric: false, sortable: false },\n  { id: 'noteCol', label: 'Ghi chú', numeric: false, sortable: false },\n  { id: 'deliveryCol', label: 'Thời gian giao hàng', numeric: false, sortable: false },\n  { id: 'action', label: '', numeric: false, sortable: false },\n];\n\nconst initialState: CreateItemModel = {\n  id: 0,\n  no: '0',\n  materialCode: '',\n  materialDescription: '',\n  begin: new Date(),\n  end: new Date(),\n  note: '',\n  optionQuantity: '0',\n  optionUnit: '',\n  quantity: '0',\n  spec: '',\n  unit: '',\n}\n\nexport default function Items(): JSX.Element {\n  const dispatch: AppDispatch = useDispatch();\n  const { state, addItem, editItem, removeItem } = React.useContext(CreatePackageContext);\n\n  const [item, setItem] = React.useState<CreateItemModel>(initialState);\n  const [identity, setIdentity] = React.useState<number>(0);\n\n  const [showForm, setShowForm] = React.useState(false);\n  const [isEdit, setIsEdit] = React.useState(false);\n\n  const [showUploadForm, setShowUploadForm] = React.useState(false);\n  const [file, setFile] = React.useState<File | undefined>();\n\n  const handleChangeFile = (files: File[]) => {\n    if (Array.isArray(files)) {\n      setFile(files[0]);\n    }\n  };\n\n  const handleCloseUploadForm = () => {\n    setShowUploadForm(false);\n  };\n\n  const handleOpenUploadForm = () => {\n    setShowUploadForm(true);\n  };\n\n  const handleSubmitUploadForm = async () => {\n    if (file !== undefined) {\n      setShowUploadForm(false);\n      dispatch(loadingActions.show());\n      try {\n        const excelData = await excelReader.readToArray<ExcelData>(\n          file,\n          excelColumns,\n          1,\n          { no: 0, code: '', spec: '', note: '', quantity: 0, optionQuantity: 0, begin: 0, end: 0 }\n        );\n\n        excelData.filter(x => x.no > 0).map(row => {\n          const material = state.materials.find(x => x.code === row.code);\n          if (material !== undefined) {\n            const newItem: CreateItemModel = {\n              no: row.no.toString(),\n              materialCode: row.code,\n              spec: row.spec,\n              begin: excelReader.excelDateToJSDate(row.begin),\n              end: excelReader.excelDateToJSDate(row.end),\n              materialDescription: material.description,\n              note: row.note,\n              unit: material.unit,\n              id: identity + 1,\n              optionUnit: material.optionUnit,\n              quantity: row.quantity.toString(),\n              optionQuantity: row.optionQuantity.toString(),\n            }\n\n            setIdentity(identity + 1);\n            addItem(newItem);\n          }\n          return true;\n        });\n        dispatch(alertActions.show(alertMessage.ACTION_SUCCESS, 'success'));\n      }\n      catch {\n        dispatch(alertActions.show('File sai mẫu! Vui lòng kiểm tra lại!', 'error'));\n      }\n      finally {\n        dispatch(loadingActions.hide());\n      }\n    }\n  };\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setItem({ ...item, [event.target.name]: event.target.value });\n  };\n\n  const handleCloseForm = () => {\n    setShowForm(false);\n  };\n\n  const handleOpenCreateForm = () => {\n    setItem({ ...initialState, id: identity, no: identity.toString() });\n    setIdentity(identity + 1);\n    setIsEdit(false);\n    setShowForm(true);\n  };\n\n  const handleOpenEditForm = (item: CreateItemModel) => {\n    setItem(item);\n    setIsEdit(true);\n    setShowForm(true);\n  };\n\n  const handleRemoveItem = (id: number) => {\n    removeItem(id);\n  }\n\n  const handleSubmit = () => {\n    setShowForm(false);\n    if (isEdit) {\n      editItem(item);\n    }\n    else {\n      addItem(item);\n    }\n  };\n\n  const handleMaterialChange = (value: MaterialComboBoxType | null) => {\n    if (value !== null) {\n      setItem({\n        ...item,\n        materialCode: value.code,\n        materialDescription: value.description,\n        unit: value.unit,\n        optionUnit: value.optionUnit\n      });\n    }\n  }\n\n  const actionsButton = [\n    <IconButton\n      key={1}\n      tooltip=\"Thêm mới\"\n      text=\"Thêm\"\n      icon=\"plus\"\n      color=\"primary\"\n      onClick={handleOpenCreateForm}\n    />,\n    <IconButton\n      key={2}\n      tooltip=\"Tạo từ file excel\"\n      text=\"Excel\"\n      icon=\"file-excel\"\n      color=\"primary\"\n      onClick={handleOpenUploadForm}\n    />,\n  ];\n\n  const renderData = (data: CreateItemModel[]): Data[] => {\n    return data.map(item => {\n      const row: Data = {\n        ...item,\n        noNumber: parseInt(item.no, 10),\n        infoCol: (\n          <div>\n            <Typography variant=\"subtitle2\">{item.materialDescription}</Typography>\n            <Typography variant=\"caption\">{item.materialCode}</Typography>\n          </div>\n        ),\n        quantityCol: (\n          <div>\n            <Typography variant=\"subtitle2\">\n              {`${format.formatMoney(parseFloat(item.quantity), 3)} ${item.unit}`}\n            </Typography>\n            <Typography variant=\"caption\">\n              {`${format.formatMoney(parseFloat(item.optionQuantity), 3)} ${item.optionUnit}`}\n            </Typography>\n          </div>\n        ),\n        noteCol: (\n          <div style={{ display: 'flex', flexDirection: 'column' }}>\n            <Typography variant=\"caption\">{`Spec: ${item.spec}`}</Typography>\n            <Typography variant=\"caption\">{`Ghi chú: ${item.note}`}</Typography>\n          </div>\n        ),\n        deliveryCol: (\n          <div style={{ display: 'flex', flexDirection: 'column' }}>\n            <Typography variant=\"caption\">{`Từ: ${format.formatDate(item.begin, 'dd/MM/yyyy')}`}</Typography>\n            <Typography variant=\"caption\">{`Đến: ${format.formatDate(item.end, 'dd/MM/yyyy')}`}</Typography>\n          </div>\n        ),\n        action: (\n          <>\n            <IconButton\n              tooltip=\"Chỉnh sửa\"\n              text=\"Sửa\"\n              icon=\"edit\"\n              color=\"success\"\n              onClick={() => { handleOpenEditForm(item); }}\n            />\n            <IconButton\n              tooltip=\"Xóa\"\n              text=\"Xóa\"\n              icon=\"trash-alt\"\n              color=\"danger\"\n              onClick={() => { handleRemoveItem(item.id); }}\n            />\n          </>\n        ),\n      }\n\n      return row;\n    });\n  }\n\n  const renderComboBoxOptions = (materials: MaterialModel[]): MaterialComboBoxType[] => {\n    return materials.map(x => {\n      const result: MaterialComboBoxType = {\n        ...x,\n        label: `[${x.code}]-${x.description}`,\n      }\n\n      return result;\n    })\n  }\n\n  return (\n    <>\n      <FormDialog\n        open={showUploadForm}\n        onClose={handleCloseUploadForm}\n        title=\"Tải tệp excel\"\n        onSubmit={handleSubmitUploadForm}\n      >\n        <DropzoneArea\n          acceptedFiles={[\n            '.xls',\n            '.xlsx',\n          ]}\n          showPreviews={false}\n          showFileNames\n          filesLimit={1}\n          maxFileSize={25000000}\n          useChipsForPreview\n          dropzoneText=\"Kéo thả file vào đây để tải lên\"\n          onChange={handleChangeFile}\n          showAlerts={false}\n        />\n      </FormDialog>\n      <FormDialog\n        title=\"Thêm/Chỉnh sửa\"\n        open={showForm}\n        onClose={handleCloseForm}\n        onSubmit={handleSubmit}\n      >\n        <Grid container spacing={1}>\n          <Grid item xs={12}>\n            <TextField\n              name=\"no\"\n              label=\"Thứ tự\"\n              type=\"text\"\n              required\n              value={item.no}\n              onChange={handleChange}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <ComboBox\n              required\n              label=\"Mã vật tư\"\n              options={renderComboBoxOptions(state.materials)}\n              optionLabel=\"label\"\n              getOptionSelected={(o, v) => o.code === v.code}\n              onChange={handleMaterialChange}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <TextField\n              name=\"materialDescription\"\n              label=\"Diễn giải\"\n              type=\"text\"\n              disabled\n              required\n              value={item.materialDescription}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <TextField\n              name=\"spec\"\n              label=\"Spec\"\n              type=\"text\"\n              value={item.spec}\n              onChange={handleChange}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <TextField\n              name=\"note\"\n              label=\"Ghi chú\"\n              type=\"text\"\n              value={item.note}\n              onChange={handleChange}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <TextField\n              name=\"quantity\"\n              label=\"Số lượng 1\"\n              type=\"number\"\n              value={item.quantity}\n              onChange={handleChange}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <TextField\n              name=\"unit\"\n              label=\"Đơn vị 1\"\n              type=\"text\"\n              disabled\n              required\n              value={item.unit}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <TextField\n              name=\"optionQuantity\"\n              label=\"Số lượng 2\"\n              type=\"number\"\n              value={item.optionQuantity}\n              onChange={handleChange}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <TextField\n              name=\"optionUnit\"\n              label=\"Đơn vị 2\"\n              type=\"text\"\n              disabled\n              required\n              value={item.optionUnit}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <DatePicker\n              label=\"Ngày bắt đầu giao hàng\"\n              name=\"begin\"\n              value={item.begin}\n              onChange={(date) => { setItem({ ...item, begin: date as Date }) }}\n              disablePast\n              required\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <DatePicker\n              label=\"Ngày kết thúc giao hàng\"\n              name=\"end\"\n              value={item.end}\n              onChange={(date) => { setItem({ ...item, end: date as Date }) }}\n              disablePast\n              required\n            />\n          </Grid>\n        </Grid>\n      </FormDialog>\n      <DataTable\n        title=\"Danh sách vật tư, dịch vụ\"\n        columns={columns}\n        data={renderData(state.model.items)}\n        actions={actionsButton}\n        initialOrderBy=\"noNumber\"\n      />\n    </>\n  )\n}","import React from 'react';\nimport {\n  Grid,\n} from '@material-ui/core';\n\nimport CreatePackageProvider, { CreatePackageContext } from '../../stores/CreatePackageStore';\n\nimport Header from './Header';\nimport Items from './Items';\n\nfunction CreatePackage(): JSX.Element {\n  const { getInputData } = React.useContext(CreatePackageContext);\n\n  React.useEffect(() => {\n    getInputData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <Grid container spacing={2}>\n      <Grid item xs={12}>\n        <Header />\n      </Grid>\n      <Grid item xs={12}>\n        <Items />\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default function CreatePackageConsumer(): JSX.Element {\n  return (\n    <CreatePackageProvider>\n      <CreatePackage />\n    </CreatePackageProvider>\n  )\n}","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { red } from '@material-ui/core/colors';\nimport {\n\tIconButton,\n\tDataTable,\n\tDataColumnType,\n} from '@nvdunginest/emis-mui';\n\nimport {\n\tAppDispatch,\n\talertActions,\n\talertMessage,\n\tloadingActions,\n} from '../../../core';\n\nimport packageService, { PackageModel } from '../services/package';\n\nimport format from '../../../configs/format';\n\ntype Data = PackageModel & {\n\taction: JSX.Element,\n}\n\nconst formatIsInternal = (value: Data) => {\n\tif (value.isInternal) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<FontAwesomeIcon\n\t\t\t\t\ticon=\"shield-alt\"\n\t\t\t\t\tcolor={red[700]}\n\t\t\t\t/>\n\t\t\t\tNội bộ\n\t\t\t</>\n\t\t)\n\t}\n\telse {\n\t\treturn '';\n\t}\n}\n\nconst formatBegin = (value: Data) => format.formatDate(new Date(value.begin), 'dd/MM/yyyy - hh:mm');\nconst formatEnd = (value: Data) => format.formatDate(new Date(value.end), 'dd/MM/yyyy - hh:mm');\n\nconst columns: DataColumnType<Data>[] = [\n\t{ id: 'code', label: 'Mã', numeric: false, sortable: true },\n\t{ id: 'name', label: 'Tên gói thầu', numeric: false, sortable: false },\n\t{ id: 'isInternal', label: 'Loại', numeric: false, sortable: true, format: formatIsInternal },\n\t{ id: 'begin', label: 'Mở thầu', numeric: false, sortable: true, format: formatBegin },\n\t{ id: 'end', label: 'Đóng thầu', numeric: false, sortable: true, format: formatEnd },\n\t{ id: 'action', label: '', numeric: false, sortable: false },\n];\n\nexport default function Packages(): JSX.Element {\n\tconst { status }: never = useParams();\n\tconst history = useHistory();\n\tconst dispatch: AppDispatch = useDispatch();\n\n\tconst [packages, setPackages] = React.useState<PackageModel[]>([]);\n\tconst [title, setTitle] = React.useState<string>('Danh sách gói thầu');\n\n\tconst actionsButton = [\n\t\t<IconButton\n\t\t\tkey={1}\n\t\t\ttooltip=\"Làm mới danh sách\"\n\t\t\ttext=\"Làm mới\"\n\t\t\ticon=\"sync-alt\"\n\t\t\tcolor=\"primary\"\n\t\t\tonClick={() => { refresh(); }}\n\t\t/>,\n\t];\n\n\tconst renderData = (data: PackageModel[]): Data[] => {\n\t\treturn data.map(item => {\n\t\t\tconst row: Data = {\n\t\t\t\t...item,\n\t\t\t\taction: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\ttooltip=\"Xem chi tiết gói thầu\"\n\t\t\t\t\t\t\ttext=\"Xem\"\n\t\t\t\t\t\t\ticon=\"info-circle\"\n\t\t\t\t\t\t\tcolor=\"success\"\n\t\t\t\t\t\t\tonClick={() => { history.push(`/bidding/expert/package/${item.code}`) }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</>\n\t\t\t\t)\n\t\t\t}\n\n\t\t\treturn row;\n\t\t});\n\t}\n\n\tconst refresh = async () => {\n\t\tdispatch(loadingActions.show());\n\t\ttry {\n\t\t\tsetPackages(await packageService.getAll(status));\n\t\t}\n\t\tcatch {\n\t\t\tdispatch(alertActions.show(alertMessage.FETCH_FAILURE, 'error'));\n\t\t}\n\t\tfinally {\n\t\t\tdispatch(loadingActions.hide());\n\t\t}\n\t}\n\n\tReact.useEffect(() => {\n\t\trefresh();\n\n\t\tswitch (status) {\n\t\t\tcase 'new':\n\t\t\t\tsetTitle('Danh sách gói thầu mới');\n\t\t\t\tbreak;\n\t\t\tcase 'opening':\n\t\t\t\tsetTitle('Danh sách gói thầu đang mở');\n\t\t\t\tbreak;\n\t\t\tcase 'closed':\n\t\t\t\tsetTitle('Danh sách gói thầu đã đóng');\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [status]);\n\n\treturn (\n\t\t<DataTable\n\t\t\ttitle={title}\n\t\t\tcolumns={columns}\n\t\t\tdata={renderData(packages)}\n\t\t\tactions={actionsButton}\n\t\t\tinitialOrderBy=\"begin\"\n\t\t/>\n\t)\n}\n","import React from 'react';\nimport {\n  Switch,\n  Route,\n  useRouteMatch,\n} from 'react-router-dom';\n\nimport CreatePackage from '../pages/CreatePackage';\nimport Packages from '../pages/Packages';\nimport PackageDetail from '../pages/PackageDetail';\n\nexport default function ExpertRoutes(): JSX.Element {\n  const { path } = useRouteMatch();\n\n  return (\n    <Switch>\n      <Route path={`${path}/create-package`} component={CreatePackage} />\n      <Route path={`${path}/package-list/:status`} component={Packages} />\n      <Route path={`${path}/package/:packageCode`} component={PackageDetail} />\n    </Switch>\n  );\n}\n"],"sourceRoot":""}