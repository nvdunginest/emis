(this.webpackJsonpemis=this.webpackJsonpemis||[]).push([[13],{1090:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ee}));var a=n(168),c=n(14),r=n(0),i=n.n(r),s=n(30),o=n(60),u=n(105),l=n(29),j=n.n(l),d=n(45),b=n(447),p=n(436),h=n(159),m=n(157),x=n(36),O=n(483),f=n(56),g=n(22),v=n(126),y=n(141),N=n(578),C=n(1);function k(e){var t=e.icon,n=e.title,a=e.value,c=e.color,r=e.path,i=Object(s.g)();return Object(C.jsxs)(O.a,{container:!0,spacing:1,alignItems:"center",style:{cursor:"pointer"},onClick:function(){i.push(r)},children:[Object(C.jsx)(O.a,{item:!0,children:Object(C.jsx)(x.a,{style:{fontSize:"1.5rem",color:c},icon:t})}),Object(C.jsxs)(O.a,{item:!0,children:[Object(C.jsx)(f.a,{variant:"caption",children:n}),Object(C.jsx)(f.a,{variant:"subtitle2",children:"".concat(a," h\u1ee3p \u0111\u1ed3ng")})]})]})}function w(){var e=i.a.useContext(v.a),t=e.showAlert,n=e.showBackdrop,a=e.hideBackdrop,r=i.a.useState(!1),s=Object(c.a)(r,2),o=s[0],u=s[1],l=i.a.useState(!1),x=Object(c.a)(l,2),f=x[0],w=x[1],S=i.a.useState({processing:0,submitted:0,approved:0,waiting:0}),A=Object(c.a)(S,2),P=A[0],T=A[1],I=i.a.useState({submitted:0,approved:0,waiting:0}),D=Object(c.a)(I,2),B=D[0],F=D[1],M=function(e,t){var n=e.find((function(e){return e.contractStatus===t}));return void 0===n?0:n.total},H=function(){var e=Object(d.a)(j.a.mark((function e(){var c,r,i,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(),e.prev=1,e.next=4,y.c.checkCreatorPermission();case 4:if(c=e.sent,u(c),!c){e.next=11;break}return e.next=9,N.a.countByCreator();case 9:r=e.sent,T({processing:M(r,0),approved:M(r,2),submitted:M(r,1),waiting:M(r,3)});case 11:return e.next=13,y.c.checkApproverPermission();case 13:if(i=e.sent,w(i),!i){e.next=20;break}return e.next=18,N.a.countByApprover();case 18:s=e.sent,F({approved:M(s,2),submitted:M(s,1),waiting:M(s,3)});case 20:a(),e.next=31;break;case 23:e.prev=23,e.t0=e.catch(1),t(v.b.ACTION_FAILURE,"error"),u(!1),w(!1),T({waiting:0,submitted:0,approved:0,processing:0}),F({waiting:0,approved:0,submitted:0}),a();case 31:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(){return e.apply(this,arguments)}}();return i.a.useEffect((function(){H()}),[]),Object(C.jsxs)(O.a,{container:!0,spacing:2,children:[o&&Object(C.jsx)(O.a,{item:!0,xs:12,children:Object(C.jsx)(g.m,{title:"Qu\u1ea3n l\xfd h\u1ee3p \u0111\u1ed3ng B",children:Object(C.jsxs)(O.a,{container:!0,spacing:2,children:[Object(C.jsx)(O.a,{item:!0,xs:12,md:6,children:Object(C.jsx)(k,{icon:"sync-alt",title:"H\u1ee3p \u0111\u1ed3ng \u0111ang x\u1eed l\xfd",value:P.processing,color:b.a[700],path:"/b-contract/creator/list/processing"})}),Object(C.jsx)(O.a,{item:!0,xs:12,md:6,children:Object(C.jsx)(k,{icon:"hourglass-half",title:"H\u1ee3p \u0111\u1ed3ng ch\u1edd ph\xea duy\u1ec7t",value:P.submitted,color:p.a[700],path:"/b-contract/creator/list/submitted"})}),Object(C.jsx)(O.a,{item:!0,xs:12,md:6,children:Object(C.jsx)(k,{icon:"check-circle",title:"H\u1ee3p \u0111\u1ed3ng \u0111\xe3 ph\xea duy\u1ec7t",value:P.approved,color:h.a[700],path:"/b-contract/creator/list/approved"})}),Object(C.jsx)(O.a,{item:!0,xs:12,md:6,children:Object(C.jsx)(k,{icon:"history",title:"H\u1ee3p \u0111\u1ed3ng ch\u1edd m\u1edf l\u1ea1i",value:P.waiting,color:m.a[700],path:"/b-contract/creator/list/waiting"})})]})})}),f&&Object(C.jsx)(O.a,{item:!0,xs:12,children:Object(C.jsx)(g.m,{title:"Ph\xea duy\u1ec7t h\u1ee3p \u0111\u1ed3ng B",children:Object(C.jsxs)(O.a,{container:!0,spacing:2,children:[Object(C.jsx)(O.a,{item:!0,xs:12,md:6,children:Object(C.jsx)(k,{icon:"hourglass-half",title:"H\u1ee3p \u0111\u1ed3ng ch\u1edd ph\xea duy\u1ec7t",value:B.submitted,color:p.a[700],path:"/b-contract/approver/list/submitted"})}),Object(C.jsx)(O.a,{item:!0,xs:12,md:6,children:Object(C.jsx)(k,{icon:"check-circle",title:"H\u1ee3p \u0111\u1ed3ng \u0111\xe3 ph\xea duy\u1ec7t",value:B.approved,color:h.a[700],path:"/b-contract/approver/list/approved"})}),Object(C.jsx)(O.a,{item:!0,xs:12,md:6,children:Object(C.jsx)(k,{icon:"history",title:"H\u1ee3p \u0111\u1ed3ng ch\u1edd m\u1edf l\u1ea1i",value:B.waiting,color:m.a[700],path:"/b-contract/approver/list/waiting"})}),Object(C.jsx)(O.a,{item:!0,xs:12,md:6,children:Object(C.jsx)(g.j,{filename:"ContractReport.xlsx",url:"/api/contract/contracts/getExcelReport"})})]})})})]})}var S=n(650),A=n.n(S),P=n(736),T="GET_CONTRACT_DETAIL_SUCCESS",I="GET_CONTRACT_DETAIL_FAILURE",D={contract:{contractNumber:"",createdBy:"",createdByFullName:"",createdDate:new Date,projectCode:"",projectName:"",status:"",vendorCode:"",vendorName:"",contractType:"D",contractValue:0,paymentTerm:"",items:[],requests:[],attachments:[]}},B={state:D,getContractDetail:function(e){},create:function(e,t){},cancel:function(e,t){},check:function(e,t){},reject:function(e,t){},approve:function(e,t){},updateNetPrice:function(e,t){},createAttachment:function(e,t,n){},removeAttachment:function(e,t){}};function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return{contract:t.payload.contract};case I:return D;default:return e}}var M=n(10),H=n.n(M),E=function(e){return"/api/contract/contracts/".concat(e,"/requests")};var L={create:function(e,t){return H.a.post("".concat(E(e),"/create"),t)},cancel:function(e,t){return H.a.post("".concat(E(e),"/cancel"),t)},check:function(e,t){return H.a.post("".concat(E(e),"/check"),t)},reject:function(e,t){return H.a.post("".concat(E(e),"/reject"),t)},approve:function(e,t){return H.a.post("".concat(E(e),"/approve"),t)}},R=function(e){return"/api/contract/contracts/".concat(e,"/attachments")};var _={create:function(e,t,n){var a=new FormData;return t.map((function(e){return a.append("files",e,e.name),!0})),n.map((function(e){return a.append("privateFiles",e,e.name),!0})),H.a.post("".concat(R(e)),a,{headers:{"Content-Type":"multipart/form-data"}})},remove:function(e,t){return H.a.delete("".concat(R(e),"/").concat(t))}},q=function(){var e=Object(d.a)(j.a.mark((function e(t,n,a){var c,r,i,s,o,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){return{type:I}},s=function(e){return{type:T,payload:{contract:e}}},c=a.showBackdrop,r=a.showAlert,i=a.hideBackdrop,c(),e.prev=4,e.next=7,N.a.getContract(t);case 7:u=e.sent,n(s(u)),i(),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),n(o()),i(),r(v.b.FETCH_FAILURE,"error");case 17:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n,a){return e.apply(this,arguments)}}(),U=function(){var e=Object(d.a)(j.a.mark((function e(t,n,a,c){var r,i,s,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.showBackdrop,i=c.showAlert,s=c.hideBackdrop,""!==n.content){e.next=4;break}return i("N\u1ed9i dung ph\xea duy\u1ec7t kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!","error"),e.abrupt("return");case 4:if(void 0!==n.steps.find((function(e){return!e.isFinish}))){e.next=7;break}return i("Ph\u1ea3i c\xf3 \xedt nh\u1ea5t m\u1ed9t ng\u01b0\u1eddi ki\u1ec3m tra!","error"),e.abrupt("return");case 7:if(void 0!==(o=n.steps.find((function(e){return e.isFinish})))&&""!==o.userNumber){e.next=11;break}return i("Ch\u01b0a c\xf3 ng\u01b0\u1eddi ph\xea duy\u1ec7t!","error"),e.abrupt("return");case 11:return r(),e.prev=12,e.next=15,L.create(t,n);case 15:i(v.b.ACTION_SUCCESS,"success"),q(t,a,c),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(12),s(),i(v.b.ACTION_FAILURE,"error");case 23:case"end":return e.stop()}}),e,null,[[12,19]])})));return function(t,n,a,c){return e.apply(this,arguments)}}(),V=function(){var e=Object(d.a)(j.a.mark((function e(t,n,a,c){var r,i,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.showBackdrop,i=c.showAlert,s=c.hideBackdrop,r(),e.prev=2,e.next=5,L.cancel(t,n);case 5:i(v.b.ACTION_SUCCESS,"success"),q(t,a,c),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),s(),i(v.b.ACTION_FAILURE,"error");case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n,a,c){return e.apply(this,arguments)}}(),z=function(){var e=Object(d.a)(j.a.mark((function e(t,n,a,c){var r,i,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.showBackdrop,i=c.showAlert,s=c.hideBackdrop,r(),e.prev=2,e.next=5,L.check(t,n);case 5:i(v.b.ACTION_SUCCESS,"success"),q(t,a,c),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),s(),i(v.b.ACTION_FAILURE,"error");case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n,a,c){return e.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(j.a.mark((function e(t,n,a,c){var r,i,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.showBackdrop,i=c.showAlert,s=c.hideBackdrop,""!==n.content){e.next=4;break}return i("N\u1ed9i dung t\u1eeb ch\u1ed1i kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!","error"),e.abrupt("return");case 4:return r(),e.prev=5,e.next=8,L.reject(t,n);case 8:i(v.b.ACTION_SUCCESS,"success"),q(t,a,c),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),s(),i(v.b.ACTION_FAILURE,"error");case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n,a,c){return e.apply(this,arguments)}}(),W=function(){var e=Object(d.a)(j.a.mark((function e(t,n,a,c){var r,i,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.showBackdrop,i=c.showAlert,s=c.hideBackdrop,r(),e.prev=2,e.next=5,L.approve(t,n);case 5:i(v.b.ACTION_SUCCESS,"success"),q(t,a,c),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),s(),i(v.b.ACTION_FAILURE,"error");case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n,a,c){return e.apply(this,arguments)}}(),X=function(){var e=Object(d.a)(j.a.mark((function e(t,n,a,c){var r,i,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.showBackdrop,i=c.showAlert,s=c.hideBackdrop,r(),e.prev=2,e.next=5,N.a.updateNetPrice(t,n);case 5:i(v.b.ACTION_SUCCESS,"success"),q(t,a,c),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),s(),i(v.b.ACTION_FAILURE,"error");case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n,a,c){return e.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(j.a.mark((function e(t,n,c,r,i){var s,o,u,l,d;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=i.showBackdrop,o=i.showAlert,u=i.hideBackdrop,l=[].concat(Object(a.a)(n),Object(a.a)(c)).map((function(e){return e.name})),d=Array.from(new Set(l)),l.length===d.length){e.next=6;break}return o("Lo\u1ea1i b\u1ecf c\xe1c file tr\xf9ng l\u1eb7p tr\u01b0\u1edbc khi upload!","error"),e.abrupt("return");case 6:return s(),e.prev=7,e.next=10,_.create(t,n,c);case 10:o(v.b.ACTION_SUCCESS,"success"),q(t,r,i),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(7),u(),o(v.b.ACTION_FAILURE,"error");case 18:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t,n,a,c,r){return e.apply(this,arguments)}}(),Y=function(){var e=Object(d.a)(j.a.mark((function e(t,n,a,c){var r,i,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.showBackdrop,i=c.showAlert,s=c.hideBackdrop,r(),e.prev=2,e.next=5,_.remove(t,n);case 5:i(v.b.ACTION_SUCCESS,"success"),q(t,a,c),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),s(),i(v.b.ACTION_FAILURE,"error");case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n,a,c){return e.apply(this,arguments)}}(),$={getContractDetail:q,create:U,cancel:V,check:z,reject:K,approve:W,updateNetPrice:X,createAttachment:G,removeAttachment:Y},J=Object(r.createContext)(B);function Q(e){var t=e.children,n=i.a.useReducer(F,D),a=Object(c.a)(n,2),s=a[0],o=a[1],u=Object(r.useContext)(v.a),l={state:s,getContractDetail:function(e){$.getContractDetail(e,o,u)},create:function(e,t){$.create(e,t,o,u)},cancel:function(e,t){$.cancel(e,t,o,u)},check:function(e,t){$.check(e,t,o,u)},reject:function(e,t){$.reject(e,t,o,u)},approve:function(e,t){$.approve(e,t,o,u)},updateNetPrice:function(e,t){$.updateNetPrice(e,t,o,u)},createAttachment:function(e,t,n){$.createAttachment(e,t,n,o,u)},removeAttachment:function(e,t){$.removeAttachment(e,t,o,u)}};return Object(C.jsx)(J.Provider,{value:l,children:t})}var Z=n(516),ee=n(511),te=n(46);function ne(){var e=i.a.useContext(v.a),t=e.showAlert,n=e.showBackdrop,r=e.hideBackdrop,s=i.a.useContext(J),o=s.state,u=s.create,l=i.a.useContext(te.a).state.user,b=o.contract,p=i.a.useState(""),h=Object(c.a)(p,2),m=h[0],x=h[1],N=i.a.useState(""),k=Object(c.a)(N,2),w=k[0],S=k[1],A=i.a.useState(!1),P=Object(c.a)(A,2),T=P[0],I=P[1],D=i.a.useState([]),B=Object(c.a)(D,2),F=B[0],M=B[1],H=i.a.useState({fullName:"",userNumber:""}),E=Object(c.a)(H,2),L=E[0],R=E[1],_=function(){var e=Object(d.a)(j.a.mark((function e(){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(),e.prev=1,e.next=4,y.c.getApproverByKeyWord(w);case 4:a=e.sent,R({fullName:a.fullName,userNumber:a.userNumber}),r(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t("Kh\xf4ng t\xecm th\u1ea5y ng\u01b0\u1eddi n\xe0y trong danh s\xe1ch ph\xea duy\u1ec7t!","error"),r();case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(d.a)(j.a.mark((function e(){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(),e.prev=1,e.next=4,y.c.getApproverByKeyWord(w);case 4:c=e.sent,F.map((function(e){return e.userNumber})).includes(c.userNumber)||M([].concat(Object(a.a)(F),[{fullName:c.fullName,userNumber:c.userNumber}])),r(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t("Kh\xf4ng t\xecm th\u1ea5y ng\u01b0\u1eddi n\xe0y trong danh s\xe1ch ph\xea duy\u1ec7t!","error"),r();case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(d.a)(j.a.mark((function e(){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==F.find((function(e){return e.userNumber===L.userNumber}))?t("Ng\u01b0\u1eddi ph\xea duy\u1ec7t kh\xf4ng th\u1ec3 \u0111\u1ed3ng th\u1eddi l\xe0 ng\u01b0\u1eddi ki\u1ec3m tra!","error"):(I(!1),n=[].concat(Object(a.a)(F.map((function(e){return{userNumber:e.userNumber,isFinish:!1}}))),[{userNumber:L.userNumber,isFinish:!0}]),c={isReopen:"A"===b.status,content:m,steps:n},u(b.contractNumber,c));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return b.createdBy!==l.number||"P"!==b.status&&"A"!==b.status?Object(C.jsx)(C.Fragment,{}):Object(C.jsxs)(O.a,{item:!0,children:[Object(C.jsx)(g.l,{title:"P"===b.status?"T\u1ea1o y\xeau c\u1ea7u ph\xea duy\u1ec7t":"M\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",onClose:function(){I(!1)},open:T,onSubmit:U,children:Object(C.jsxs)(O.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(C.jsx)(O.a,{item:!0,xs:12,md:6,children:Object(C.jsx)(g.r,{label:"M\xe3 s\u1ed1/H\u1ecd t\xean ng\u01b0\u1eddi ph\xea duy\u1ec7t",type:"text",value:w,onChange:function(e){S(e.target.value)}})}),Object(C.jsxs)(O.a,{item:!0,xs:12,md:6,container:!0,spacing:1,children:[Object(C.jsx)(O.a,{item:!0,children:Object(C.jsx)(g.o,{text:"Ki\u1ec3m tra",color:"primary",icon:"check-circle",variant:"contained",onClick:q})}),Object(C.jsx)(O.a,{item:!0,children:Object(C.jsx)(g.o,{text:"Ph\xea duy\u1ec7t",color:"success",icon:"signature",variant:"contained",onClick:_})})]}),Object(C.jsxs)(O.a,{item:!0,xs:12,container:!0,spacing:1,alignItems:"stretch",children:[Object(C.jsxs)(O.a,{item:!0,xs:12,md:6,children:[Object(C.jsx)(f.a,{variant:"caption",children:"Ng\u01b0\u1eddi ki\u1ec3m tra:"}),Object(C.jsx)("div",{children:F.map((function(e){return Object(C.jsx)(ee.a,{style:{margin:"4px"},label:"".concat(e.userNumber,"-").concat(e.fullName),onDelete:function(){var t;t=e.userNumber,M(F.filter((function(e){return e.userNumber!==t})))},color:"primary",variant:"outlined",size:"small"},e.userNumber)}))})]}),Object(C.jsxs)(O.a,{item:!0,xs:12,md:6,children:[Object(C.jsx)(f.a,{variant:"caption",children:"Ng\u01b0\u1eddi ph\xea duy\u1ec7t:"}),Object(C.jsx)("div",{children:""!==L.userNumber&&Object(C.jsx)(ee.a,{style:{margin:"4px"},label:"".concat(L.userNumber,"-").concat(L.fullName),color:"primary",variant:"outlined",size:"small"})})]})]}),Object(C.jsx)(O.a,{item:!0,xs:12,children:Object(C.jsx)(g.k,{value:m,onChange:function(e){x(e)}})})]})}),Object(C.jsx)(g.o,{variant:"contained",color:"P"===b.status?"primary":"info",tooltip:"P"===b.status?"T\u1ea1o y\xeau c\u1ea7u ph\xea duy\u1ec7t":"M\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",icon:"P"===b.status?"play-circle":"sync-alt",text:"P"===b.status?"T\u1ea1o y\xeau c\u1ea7u":"M\u1edf l\u1ea1i",onClick:function(){x(""),M([]),R({fullName:"",userNumber:""}),I(!0)}})]})}function ae(){var e=i.a.useContext(J),t=e.state,n=e.cancel,a=i.a.useContext(te.a).state.user,r=t.contract,s=i.a.useState(""),o=Object(c.a)(s,2),u=o[0],l=o[1],b=i.a.useState(!1),p=Object(c.a)(b,2),h=p[0],m=p[1],x=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(!1),t={content:u},n(r.contractNumber,t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.createdBy!==a.number||"S"!==r.status&&"W"!==r.status?Object(C.jsx)(C.Fragment,{}):Object(C.jsxs)(O.a,{item:!0,children:[Object(C.jsx)(g.l,{title:"S"===r.status?"H\u1ee7y y\xeau c\u1ea7u ph\xea duy\u1ec7t":"H\u1ee7y m\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",onClose:function(){m(!1)},open:h,onSubmit:x,children:Object(C.jsx)(O.a,{container:!0,spacing:1,alignItems:"flex-end",children:Object(C.jsx)(O.a,{item:!0,xs:12,children:Object(C.jsx)(g.k,{value:u,onChange:function(e){l(e)}})})})}),Object(C.jsx)(g.o,{variant:"contained",color:"S"===r.status?"danger":"warning",tooltip:"S"===r.status?"H\u1ee7y y\xeau c\u1ea7u ph\xea duy\u1ec7t":"H\u1ee7y m\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",icon:"S"===r.status?"stop-circle":"minus-circle",text:"S"===r.status?"H\u1ee7y y\xeau c\u1ea7u":"H\u1ee7y m\u1edf l\u1ea1i",onClick:function(){l(""),m(!0)}})]})}function ce(){var e=i.a.useContext(J),t=e.state,n=e.check,a=i.a.useContext(te.a).state.user,r=t.contract,s=i.a.useState(""),o=Object(c.a)(s,2),u=o[0],l=o[1],b=i.a.useState(!1),p=Object(c.a)(b,2),h=p[0],m=p[1],x=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(!1),t={content:u},n(r.contractNumber,t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return function(){if("S"!==r.status&&"W"!==r.status)return!1;var e=r.requests.find((function(e){return e.isActive}));if(void 0===e)return!1;var t=e.steps.find((function(e){return e.userNumber===a.number}));return void 0!==t&&!(t.isApproved||t.isRejected||t.isFinish)}()?Object(C.jsxs)(O.a,{item:!0,children:[Object(C.jsx)(g.l,{title:"S"===r.status?"X\xe1c nh\u1eadn h\u1ee3p \u0111\u1ed3ng":"\u0110\u1ed3ng \xfd m\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",onClose:function(){m(!1)},open:h,onSubmit:x,children:Object(C.jsx)(O.a,{container:!0,spacing:1,alignItems:"flex-end",children:Object(C.jsx)(O.a,{item:!0,xs:12,children:Object(C.jsx)(g.k,{value:u,onChange:function(e){l(e)}})})})}),Object(C.jsx)(g.o,{variant:"contained",color:"success",tooltip:"S"===r.status?"X\xe1c nh\u1eadn h\u1ee3p \u0111\u1ed3ng":"\u0110\u1ed3ng \xfd m\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",icon:"check-circle",text:"S"===r.status?"X\xe1c nh\u1eadn":"\u0110\u1ed3ng \xfd",onClick:function(){l(""),m(!0)}})]}):Object(C.jsx)(C.Fragment,{})}function re(){var e=i.a.useContext(J),t=e.state,n=e.reject,a=i.a.useContext(te.a).state.user,r=t.contract,s=i.a.useState(""),o=Object(c.a)(s,2),u=o[0],l=o[1],b=i.a.useState(!1),p=Object(c.a)(b,2),h=p[0],m=p[1],x=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(!1),t={content:u},n(r.contractNumber,t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return function(){if("S"!==r.status&&"W"!==r.status)return!1;var e=r.requests.find((function(e){return e.isActive}));if(void 0===e)return!1;var t=e.steps.find((function(e){return e.userNumber===a.number}));return void 0!==t&&(!t.isApproved&&!t.isRejected&&!(t.isFinish&&e.steps.filter((function(e){return!e.isApproved&&!e.isRejected&&!e.isFinish})).length>0))}()?Object(C.jsxs)(O.a,{item:!0,children:[Object(C.jsx)(g.l,{title:"S"===r.status?"T\u1eeb ch\u1ed1i ph\xea duy\u1ec7t h\u1ee3p \u0111\u1ed3ng":"T\u1eeb ch\u1ed1i m\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",onClose:function(){m(!1)},open:h,onSubmit:x,children:Object(C.jsx)(O.a,{container:!0,spacing:1,alignItems:"flex-end",children:Object(C.jsx)(O.a,{item:!0,xs:12,children:Object(C.jsx)(g.k,{value:u,onChange:function(e){l(e)}})})})}),Object(C.jsx)(g.o,{variant:"contained",color:"S"===r.status?"danger":"warning",tooltip:"S"===r.status?"T\u1eeb ch\u1ed1i ph\xea duy\u1ec7t h\u1ee3p \u0111\u1ed3ng":"T\u1eeb ch\u1ed1i m\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",icon:"S"===r.status?"times-circle":"minus-circle",text:"T\u1eeb ch\u1ed1i",onClick:function(){l(""),m(!0)}})]}):Object(C.jsx)(C.Fragment,{})}function ie(){var e=i.a.useContext(J),t=e.state,n=e.approve,a=i.a.useContext(te.a).state.user,r=t.contract,s=i.a.useState(""),o=Object(c.a)(s,2),u=o[0],l=o[1],b=i.a.useState(!1),p=Object(c.a)(b,2),h=p[0],m=p[1],x=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(!1),t={content:u},n(r.contractNumber,t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return function(){if("S"!==r.status&&"W"!==r.status)return!1;var e=r.requests.find((function(e){return e.isActive}));if(void 0===e)return!1;if(e.steps.filter((function(e){return!e.isApproved&&!e.isRejected&&!e.isFinish})).length>0)return!1;var t=e.steps.find((function(e){return e.userNumber===a.number&&e.isFinish}));return void 0!==t&&(!t.isApproved&&!t.isRejected)}()?Object(C.jsxs)(O.a,{item:!0,children:[Object(C.jsx)(g.l,{title:"S"===r.status?"Ph\xea duy\u1ec7t h\u1ee3p \u0111\u1ed3ng":"Ph\xea duy\u1ec7t m\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",onClose:function(){m(!1)},open:h,onSubmit:x,children:Object(C.jsx)(O.a,{container:!0,spacing:1,alignItems:"flex-end",children:Object(C.jsx)(O.a,{item:!0,xs:12,children:Object(C.jsx)(g.k,{value:u,onChange:function(e){l(e)}})})})}),Object(C.jsx)(g.o,{variant:"contained",color:"success",tooltip:"S"===r.status?"Ph\xea duy\u1ec7t h\u1ee3p \u0111\u1ed3ng":"Ph\xea duy\u1ec7t m\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng",icon:"signature",text:"Ph\xea duy\u1ec7t",onClick:function(){l(""),m(!0)}})]}):Object(C.jsx)(C.Fragment,{})}var se=n(57),oe=Object(se.a)((function(){return{main:{lineHeight:1},sub:{lineHeight:1.4,fontSize:"0.7rem",fontStyle:"italic"},head:{color:"#fff",backgroundColor:"#444",textTransform:"uppercase",fontSize:"0.8rem"}}}));function ue(){var e=oe(),t=i.a.useContext(J),n=t.state,a=t.updateNetPrice,r=i.a.useContext(te.a).state.user,s=n.contract,o=i.a.useState([]),u=Object(c.a)(o,2),l=u[0],b=u[1],p=i.a.useState(!1),h=Object(c.a)(p,2),m=h[0],x=h[1],v=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!1),t={items:[]},l.map((function(e){var n=parseInt(e.newNetpr,10);return e.netpr!==n&&t.items.push({ebeln:e.ebeln,ebelp:e.ebelp,introw:e.introw,isService:e.isService,netpr:n,packno:e.packno}),!0})),a(s.contractNumber,t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.useEffect((function(){var e=[];s.items.map((function(t){return t.isService?t.subItems.map((function(t){e.push({code:t.code,text:t.text,packno:t.packno,introw:t.introw,isService:!0,netpr:t.netPrice,newNetpr:t.netPrice.toString(),ebeln:"",ebelp:""})})):e.push({code:t.code,text:t.text,ebeln:t.ebeln,ebelp:t.ebelp,isService:!1,netpr:t.netPrice,newNetpr:t.netPrice.toString(),packno:"",introw:""}),!0})),b(e)}),[s]),"P"===s.status&&s.createdBy===r.number?Object(C.jsxs)(O.a,{item:!0,children:[Object(C.jsx)(g.l,{title:"C\u1eadp nh\u1eadt \u0111\u01a1n gi\xe1 net",onClose:function(){x(!1)},open:m,onSubmit:v,children:Object(C.jsx)(O.a,{container:!0,spacing:1,children:l.map((function(t,n){return Object(C.jsxs)(O.a,{container:!0,item:!0,spacing:1,children:[Object(C.jsxs)(O.a,{item:!0,xs:6,children:[Object(C.jsx)(f.a,{className:e.main,variant:"subtitle2",children:t.text}),Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:""===t.code?"-":t.code})]}),Object(C.jsx)(O.a,{item:!0,xs:6,children:Object(C.jsx)(g.r,{label:"\u0110\u01a1n gi\xe1 Net",value:t.newNetpr,type:"text",onChange:function(e){var n,a,c,r,i;n=t.ebeln,a=t.ebelp,c=t.packno,r=t.introw,i=e.target.value,b(l.map((function(e){return n===e.ebeln&&a===e.ebelp&&c===e.packno&&r===e.introw?(e.newNetpr=i,e):e})))}})})]},n)}))})}),Object(C.jsx)(g.o,{variant:"contained",color:"dark",tooltip:"C\u1eadp nh\u1eadt gi\xe1 net",icon:"pen-square",text:"\u0110\u01a1n gi\xe1 Net",onClick:function(){x(!0)}})]}):Object(C.jsx)(C.Fragment,{})}var le=n(193);function je(){var e=i.a.useContext(J),t=e.state,n=e.createAttachment,a=i.a.useContext(te.a).state.user,r=t.contract,s=i.a.useState([]),o=Object(c.a)(s,2),u=o[0],l=o[1],b=i.a.useState([]),p=Object(c.a)(b,2),h=p[0],m=p[1],x=i.a.useState(!1),f=Object(c.a)(x,2),v=f[0],y=f[1],N=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(!1),n(r.contractNumber,u,h);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return"P"===r.status&&r.createdBy===a.number?Object(C.jsxs)(O.a,{item:!0,children:[Object(C.jsx)(g.l,{title:"T\u1ea3i l\xean t\xe0i li\u1ec7u \u0111\xednh k\xe8m",onClose:function(){y(!1)},open:v,onSubmit:N,children:Object(C.jsxs)(O.a,{container:!0,spacing:1,alignItems:"stretch",children:[Object(C.jsx)(O.a,{item:!0,xs:12,md:6,children:Object(C.jsx)(le.a,{showPreviews:!1,showFileNames:!0,filesLimit:10,maxFileSize:25e6,useChipsForPreview:!0,dropzoneText:"T\u1ea3i l\xean t\xe0i li\u1ec7u public",onChange:function(e){l(e)}})}),Object(C.jsx)(O.a,{item:!0,xs:12,md:6,children:Object(C.jsx)(le.a,{showPreviews:!1,showFileNames:!0,filesLimit:10,maxFileSize:25e6,useChipsForPreview:!0,dropzoneText:"T\u1ea3i l\xean t\xe0i li\u1ec7u private",onChange:function(e){m(e)}})})]})}),Object(C.jsx)(g.o,{variant:"contained",color:"dark",tooltip:"\u0110\xednh k\xe8m t\xe0i li\u1ec7u",icon:"paperclip",text:"\u0110\xednh k\xe8m",onClick:function(){y(!0)}})]}):Object(C.jsx)(C.Fragment,{})}function de(){var e=i.a.useContext(J).state.contract;return Object(C.jsx)(g.m,{title:"Th\xf4ng tin h\u1ee3p \u0111\u1ed3ng",children:Object(C.jsxs)(O.a,{container:!0,alignItems:"stretch",spacing:1,children:[Object(C.jsx)(g.q,{title:"S\u1ed1 h\u1ee3p \u0111\u1ed3ng",content:e.contractNumber}),Object(C.jsx)(g.q,{title:"Lo\u1ea1i h\u1ee3p \u0111\u1ed3ng",content:"D"===e.contractType?"D\u1ef1 \xe1n":"Nguy\xean t\u1eafc"}),Object(C.jsx)(g.q,{title:"D\u1ef1 \xe1n",content:"".concat(e.projectCode,"-").concat(e.projectName)}),Object(C.jsx)(g.q,{title:"Nh\xe0 cung c\u1ea5p",content:"".concat(e.vendorCode,"-").concat(e.vendorName)}),Object(C.jsx)(g.q,{title:"Gi\xe1 tr\u1ecb h\u1ee3p \u0111\u1ed3ng",content:"".concat(Z.a.formatMoney(e.contractValue)," VND")}),Object(C.jsx)(g.q,{title:"\u0110i\u1ec1u kho\u1ea3n thanh to\xe1n",content:e.paymentTerm}),Object(C.jsx)(g.q,{title:"Ng\xe0y t\u1ea1o h\u1ee3p \u0111\u1ed3ng",content:Z.a.formatDate(new Date(e.createdDate),"dd/MM/yyyy")}),Object(C.jsx)(g.q,{title:"Ng\u01b0\u1eddi t\u1ea1o h\u1ee3p \u0111\u1ed3ng",content:"".concat(e.createdBy,"-").concat(e.createdByFullName)}),Object(C.jsxs)(O.a,{item:!0,xs:12,md:6,container:!0,spacing:1,children:[Object(C.jsx)(ne,{}),Object(C.jsx)(ae,{}),Object(C.jsx)(ce,{}),Object(C.jsx)(re,{}),Object(C.jsx)(ie,{}),Object(C.jsx)(ue,{}),Object(C.jsx)(je,{})]})]})})}var be=n(113),pe=n(494),he=n(490),me=n(491),xe=n(492),Oe=n(495),fe=Object(se.a)((function(){return{main:{lineHeight:1},sub:{lineHeight:1.4,fontSize:"0.7rem",fontStyle:"italic"},head:{color:"#fff",backgroundColor:"#444",textTransform:"uppercase",fontSize:"0.8rem"},warning:{backgroundColor:"#f59542"},danger:{backgroundColor:"#f54242"}}}));function ge(){var e=fe(),t=Z.a.formatMoney,n=i.a.useContext(J).state.contract,a=function(t){return t.isService?"":t.planPrice<=0?e.warning:t.planPrice<t.price?e.danger:""},c=function(t){return t.planPrice<=0?e.warning:t.planPrice<t.price?e.danger:""};return Object(C.jsxs)(g.m,{title:"Th\xf4ng tin chi ti\u1ebft h\u1ee3p \u0111\u1ed3ng",noPadding:!0,children:[Object(C.jsx)(be.a,{smDown:!0,implementation:"css",children:Object(C.jsxs)(pe.a,{size:"small",style:{padding:"8px"},children:[Object(C.jsx)(he.a,{children:Object(C.jsxs)(me.a,{children:[Object(C.jsx)(xe.a,{className:e.head,rowSpan:2,colSpan:2,children:"H\u1ea1ng m\u1ee5c"}),Object(C.jsx)(xe.a,{className:e.head,align:"right",children:"Kh\u1ed1i l\u01b0\u1ee3ng"}),Object(C.jsx)(xe.a,{className:e.head,align:"right",children:"\u0110\u01a1n gi\xe1 H\u0110"}),Object(C.jsx)(xe.a,{className:e.head,align:"right",children:"\u0110\u01a1n gi\xe1 KH"}),("P"===n.status||"S"===n.status)&&Object(C.jsx)(xe.a,{className:e.head,align:"right",children:"\u0110\u01a1n gi\xe1 Net"}),Object(C.jsx)(xe.a,{className:e.head,align:"right",children:"Th\xe0nh ti\u1ec1n"})]})}),Object(C.jsx)(Oe.a,{children:n.items.map((function(r,s){return Object(C.jsxs)(i.a.Fragment,{children:[Object(C.jsxs)(me.a,{hover:!0,children:[Object(C.jsxs)(xe.a,{colSpan:2,children:[Object(C.jsx)(f.a,{className:e.main,variant:"subtitle2",children:r.text}),Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:""===r.code?"-":r.code})]}),Object(C.jsxs)(xe.a,{align:"right",children:[Object(C.jsx)(f.a,{className:e.main,variant:"subtitle2",children:t(r.quantity)}),Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:r.unit})]}),Object(C.jsxs)(xe.a,{className:a(r),align:"right",children:[Object(C.jsx)(f.a,{className:e.main,variant:"subtitle2",children:t(r.price)}),Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"VND/".concat(r.per," ").concat(r.unit)})]}),Object(C.jsxs)(xe.a,{className:a(r),align:"right",children:[Object(C.jsx)(f.a,{className:e.main,variant:"subtitle2",children:r.planPrice>0?t(r.planPrice):"-"}),Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"VND/".concat(r.per," ").concat(r.unit)})]}),("P"===n.status||"S"===n.status)&&Object(C.jsxs)(xe.a,{className:a(r),align:"right",children:[Object(C.jsx)(f.a,{className:e.main,variant:"subtitle2",children:r.netPrice>0?t(r.netPrice):"-"}),Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"VND/".concat(r.per," ").concat(r.unit)})]}),Object(C.jsxs)(xe.a,{align:"right",children:[Object(C.jsx)(f.a,{className:e.main,variant:"subtitle2",children:t(r.price*r.quantity/r.per)}),Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"VND"})]})]}),r.isService&&r.subItems.map((function(a,r){return Object(C.jsxs)(me.a,{hover:!0,children:[Object(C.jsx)(xe.a,{style:{width:"8px",padding:0,backgroundColor:"red"}}),Object(C.jsxs)(xe.a,{children:[Object(C.jsx)(f.a,{className:e.main,variant:"subtitle2",children:a.text}),Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:""===a.code?"-":a.code})]}),Object(C.jsxs)(xe.a,{align:"right",children:[Object(C.jsx)(f.a,{className:e.main,variant:"subtitle2",children:t(a.quantity)}),Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:a.unit})]}),Object(C.jsxs)(xe.a,{className:c(a),align:"right",children:[Object(C.jsx)(f.a,{className:e.main,variant:"subtitle2",children:t(a.price)}),Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"VND/".concat(a.per," ").concat(a.unit)})]}),Object(C.jsxs)(xe.a,{className:c(a),align:"right",children:[Object(C.jsx)(f.a,{className:e.main,variant:"subtitle2",children:a.planPrice>0?t(a.planPrice):"-"}),Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"VND/".concat(a.per," ").concat(a.unit)})]}),("P"===n.status||"S"===n.status)&&Object(C.jsxs)(xe.a,{className:c(a),align:"right",children:[Object(C.jsx)(f.a,{className:e.main,variant:"subtitle2",children:a.netPrice>0?t(a.netPrice):"-"}),Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"VND/".concat(a.per," ").concat(a.unit)})]}),Object(C.jsxs)(xe.a,{align:"right",children:[Object(C.jsx)(f.a,{className:e.main,variant:"subtitle2",children:t(a.price*a.quantity/a.per)}),Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"VND"})]})]},r)}))]},s)}))})]})}),Object(C.jsx)(be.a,{mdUp:!0,implementation:"css",children:Object(C.jsx)(O.a,{container:!0,spacing:2,style:{padding:"8px"},children:n.items.map((function(r,s){return Object(C.jsxs)(i.a.Fragment,{children:[Object(C.jsxs)(O.a,{container:!0,item:!0,spacing:1,children:[Object(C.jsxs)(O.a,{item:!0,xs:12,children:[Object(C.jsx)(f.a,{className:e.main,variant:"subtitle2",children:r.text}),Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:""===r.code?"-":r.code})]}),Object(C.jsxs)(O.a,{item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(C.jsx)(O.a,{item:!0,xs:3,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"Kh\u1ed1i l\u01b0\u1ee3ng"})}),Object(C.jsx)(O.a,{item:!0,xs:5,children:Object(C.jsx)(f.a,{align:"right",className:e.main,variant:"subtitle2",children:t(r.quantity)})}),Object(C.jsx)(O.a,{item:!0,xs:4,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:r.unit})})]}),Object(C.jsxs)(O.a,{className:a(r),item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(C.jsx)(O.a,{item:!0,xs:3,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"\u0110\u01a1n gi\xe1 H\u0110"})}),Object(C.jsx)(O.a,{item:!0,xs:5,children:Object(C.jsx)(f.a,{align:"right",className:e.main,variant:"subtitle2",children:t(r.price)})}),Object(C.jsx)(O.a,{item:!0,xs:4,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"VND/".concat(r.per," ").concat(r.unit)})})]}),Object(C.jsxs)(O.a,{className:a(r),item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(C.jsx)(O.a,{item:!0,xs:3,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"\u0110\u01a1n gi\xe1 KH"})}),Object(C.jsx)(O.a,{item:!0,xs:5,children:Object(C.jsx)(f.a,{align:"right",className:e.main,variant:"subtitle2",children:r.planPrice>0?t(r.planPrice):"-"})}),Object(C.jsx)(O.a,{item:!0,xs:4,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"VND/".concat(r.per," ").concat(r.unit)})})]}),("P"===n.status||"S"===n.status)&&Object(C.jsxs)(O.a,{className:a(r),item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(C.jsx)(O.a,{item:!0,xs:3,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"\u0110\u01a1n gi\xe1 Net"})}),Object(C.jsx)(O.a,{item:!0,xs:5,children:Object(C.jsx)(f.a,{align:"right",className:e.main,variant:"subtitle2",children:r.netPrice>0?t(r.netPrice):"-"})}),Object(C.jsx)(O.a,{item:!0,xs:4,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"VND/".concat(r.per," ").concat(r.unit)})})]}),Object(C.jsxs)(O.a,{item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(C.jsx)(O.a,{item:!0,xs:3,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"Th\xe0nh ti\u1ec1n"})}),Object(C.jsx)(O.a,{item:!0,xs:5,children:Object(C.jsx)(f.a,{align:"right",className:e.main,variant:"subtitle2",children:t(r.price*r.quantity/r.per)})}),Object(C.jsx)(O.a,{item:!0,xs:4,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"VND"})})]})]}),r.isService&&r.subItems.map((function(a,r){return Object(C.jsxs)(O.a,{container:!0,item:!0,spacing:1,style:{paddingLeft:"16px",borderLeft:"12px solid red"},children:[Object(C.jsxs)(O.a,{item:!0,xs:12,children:[Object(C.jsx)(f.a,{className:e.main,variant:"subtitle2",children:a.text}),Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:""===a.code?"-":a.code})]}),Object(C.jsxs)(O.a,{item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(C.jsx)(O.a,{item:!0,xs:3,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"Kh\u1ed1i l\u01b0\u1ee3ng"})}),Object(C.jsx)(O.a,{item:!0,xs:5,children:Object(C.jsx)(f.a,{align:"right",className:e.main,variant:"subtitle2",children:t(a.quantity)})}),Object(C.jsx)(O.a,{item:!0,xs:4,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:a.unit})})]}),Object(C.jsxs)(O.a,{className:c(a),item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(C.jsx)(O.a,{item:!0,xs:3,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"\u0110\u01a1n gi\xe1 H\u0110"})}),Object(C.jsx)(O.a,{item:!0,xs:5,children:Object(C.jsx)(f.a,{align:"right",className:e.main,variant:"subtitle2",children:t(a.price)})}),Object(C.jsx)(O.a,{item:!0,xs:4,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"VND/".concat(a.per," ").concat(a.unit)})})]}),Object(C.jsxs)(O.a,{className:c(a),item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(C.jsx)(O.a,{item:!0,xs:3,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"\u0110\u01a1n gi\xe1 KH"})}),Object(C.jsx)(O.a,{item:!0,xs:5,children:Object(C.jsx)(f.a,{align:"right",className:e.main,variant:"subtitle2",children:a.planPrice>0?t(a.planPrice):"-"})}),Object(C.jsx)(O.a,{item:!0,xs:4,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"VND/".concat(a.per," ").concat(a.unit)})})]}),("P"===n.status||"S"===n.status)&&Object(C.jsxs)(O.a,{className:c(a),item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(C.jsx)(O.a,{item:!0,xs:3,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"\u0110\u01a1n gi\xe1 Net"})}),Object(C.jsx)(O.a,{item:!0,xs:5,children:Object(C.jsx)(f.a,{align:"right",className:e.main,variant:"subtitle2",children:a.netPrice>0?t(a.netPrice):"-"})}),Object(C.jsx)(O.a,{item:!0,xs:4,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"VND/".concat(a.per," ").concat(a.unit)})})]}),Object(C.jsxs)(O.a,{item:!0,container:!0,xs:12,spacing:1,alignItems:"flex-end",children:[Object(C.jsx)(O.a,{item:!0,xs:3,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"Th\xe0nh ti\u1ec1n"})}),Object(C.jsx)(O.a,{item:!0,xs:5,children:Object(C.jsx)(f.a,{align:"right",className:e.main,variant:"subtitle2",children:t(a.price*a.quantity/a.per)})}),Object(C.jsx)(O.a,{item:!0,xs:4,children:Object(C.jsx)(f.a,{className:e.sub,variant:"caption",children:"VND"})})]})]},r)}))]},s)}))})})]})}var ve=n(479),ye=n(6),Ne=n(731),Ce=n(651),ke=n(652),we=Object(ye.a)({root:{border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(Ne.a),Se=Object(ye.a)({root:{color:"#fff",fontStyle:"uppercase",borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:40,"&$expanded":{minHeight:40}},content:{margin:0,"& .MuiTypography-body1":{fontSize:"0.9rem"},"&$expanded":{margin:"0"}},expanded:{}})(Ce.a),Ae=Object(ye.a)((function(){return{root:{padding:0}}}))(ke.a);function Pe(){var e=Z.a.formatDate,t=i.a.useContext(J).state.contract,n=i.a.useState([]),r=Object(c.a)(n,2),s=r[0],o=r[1];return i.a.useEffect((function(){o(t.requests.filter((function(e){return e.isActive})).map((function(e){return e.id})))}),[t]),Object(C.jsx)(g.m,{title:"L\u1ecbch s\u1eed ph\xea duy\u1ec7t",noPadding:!0,children:t.requests.map((function(t,n){return Object(C.jsxs)(we,{square:!0,expanded:s.includes(t.id),onChange:function(e,n){!function(e,t){t?s.includes(e)||o([].concat(Object(a.a)(s),[e])):o(s.filter((function(t){return t!==e})))}(t.id,n)},children:[Object(C.jsx)(Se,{style:{backgroundColor:t.isReopen?ve.a[700]:h.a[600]},children:Object(C.jsx)(f.a,{children:t.isReopen?"Y\xeau c\u1ea7u m\u1edf l\u1ea1i h\u1ee3p \u0111\u1ed3ng - ".concat(e(new Date(t.createdTime),"hh:mm dd/MM/yyyy")):"Y\xeau c\u1ea7u ph\xea duy\u1ec7t h\u1ee3p \u0111\u1ed3ng - ".concat(e(new Date(t.createdTime),"hh:mm dd/MM/yyyy"))})}),Object(C.jsx)(Ae,{children:Object(C.jsxs)(O.a,{container:!0,children:[Object(C.jsx)(O.a,{item:!0,xs:12,children:Object(C.jsx)("div",{style:{padding:"8px",borderLeft:"4px solid green"},dangerouslySetInnerHTML:{__html:t.content}})}),Object(C.jsx)(O.a,{item:!0,xs:12,children:Object(C.jsx)(pe.a,{size:"small",style:{padding:"8px",borderLeft:"4px solid yellow"},children:Object(C.jsx)(Oe.a,{children:t.steps.map((function(t,n){return Object(C.jsx)(me.a,{children:Object(C.jsx)(xe.a,{children:Object(C.jsxs)(O.a,{container:!0,spacing:1,children:[Object(C.jsx)(O.a,{item:!0,xs:12,md:4,children:"".concat(t.userNumber,"-").concat(t.fullName)}),Object(C.jsxs)(O.a,{item:!0,xs:12,md:2,children:[Object(C.jsx)(x.a,{style:{opacity:.6},icon:"share"}),t.isReceived&&e(new Date(t.receivedTime),"hh:mm dd/MM/yyyy")]}),Object(C.jsxs)(O.a,{item:!0,xs:12,md:2,children:[Object(C.jsx)(x.a,{style:{opacity:.6},icon:"eye"}),t.isSeen&&e(new Date(t.seenTime),"hh:mm dd/MM/yyyy")]}),Object(C.jsxs)(O.a,{item:!0,xs:12,md:2,children:[Object(C.jsx)(x.a,{style:{opacity:.6},icon:"signature"}),t.isApproved&&e(new Date(t.approvedTime),"hh:mm dd/MM/yyyy")]}),Object(C.jsxs)(O.a,{item:!0,xs:12,md:2,children:[Object(C.jsx)(x.a,{style:{opacity:.6},icon:"ban"}),t.isRejected&&e(new Date(t.rejectedTime),"hh:mm dd/MM/yyyy")]}),""!==t.content&&null!==t.content&&Object(C.jsx)(O.a,{item:!0,xs:12,children:Object(C.jsx)("div",{style:{padding:"4px"},dangerouslySetInnerHTML:{__html:t.content}})})]})})},n)}))})})}),""!==t.cancelReason&&null!==t.cancelReason&&Object(C.jsx)(O.a,{item:!0,xs:12,children:Object(C.jsx)("div",{style:{padding:"8px",borderLeft:"4px solid red"},dangerouslySetInnerHTML:{__html:t.cancelReason}})})]})})]},n)}))})}function Te(){var e=Z.a.formatDate,t=i.a.useContext(J),n=t.state,a=t.removeAttachment,c=n.contract,r=i.a.useContext(te.a).state.user;return Object(C.jsx)(g.m,{title:"T\xe0i li\u1ec7u \u0111\xednh k\xe8m",children:Object(C.jsx)(O.a,{container:!0,spacing:1,children:c.attachments.map((function(t){return Object(C.jsxs)(O.a,{container:!0,item:!0,xs:12,md:6,children:[Object(C.jsx)(O.a,{item:!0,xs:12,children:Object(C.jsxs)(f.a,{variant:"subtitle2",children:[Object(C.jsx)(x.a,{icon:"paperclip"}),t.fileName]})}),Object(C.jsx)(O.a,{item:!0,xs:12,children:Object(C.jsxs)(f.a,{variant:"caption",children:[e(new Date(t.createdTime),"hh:mm dd/MM/yyyy"),t.isPrivate&&Object(C.jsx)(x.a,{icon:"shield-alt"}),Object(C.jsx)(g.j,{filename:t.fileName,url:"/api/contract/contracts/".concat(c.contractNumber,"/attachments/").concat(t.id),label:"T\u1ea3i"}),"P"===c.status&&c.createdBy===r.number&&Object(C.jsx)(g.o,{icon:"trash-alt",text:"X\xf3a",color:"danger",onClick:function(){var e;e=t.id,a(c.contractNumber,e)}})]})})]},t.id)}))})})}function Ie(){var e=Object(s.i)().contractNumber,t=i.a.useContext(J).getContractDetail;i.a.useEffect((function(){t(e)}),[e]);return Object(C.jsxs)(O.a,{id:"contractDetail-".concat(e),container:!0,alignContent:"stretch",spacing:2,children:[Object(C.jsx)(O.a,{item:!0,xs:12,children:Object(C.jsx)(de,{})}),Object(C.jsx)(O.a,{item:!0,xs:12,children:Object(C.jsx)(ge,{})}),Object(C.jsx)(O.a,{item:!0,xs:12,children:Object(C.jsx)(Pe,{})}),Object(C.jsx)(O.a,{item:!0,xs:12,children:Object(C.jsx)(Te,{})}),Object(C.jsx)(O.a,{item:!0,xs:12,children:Object(C.jsx)(g.o,{variant:"contained",text:"T\u1ea3i PDF",icon:"file-pdf",onClick:function(){var t=document.getElementById("contractDetail-".concat(e));null!=t&&A()(t).then((function(e){document.body.appendChild(e);var t=208*e.height/e.width,n=(e.toDataURL("img/png"),new P.a("p","pt","a4"));n.addImage(e,"",0,0,208,t),n.save("download.pdf")}))}})})]})}function De(){return Object(C.jsx)(Q,{children:Object(C.jsx)(Ie,{})})}function Be(){var e=Object(s.j)().path;return Object(C.jsxs)(s.d,{children:[Object(C.jsx)(s.b,{path:"".concat(e,"/dashboard"),component:w}),Object(C.jsx)(s.b,{path:"".concat(e,"/contracts/:contractNumber"),component:De})]})}var Fe=i.a.lazy((function(){return n.e(26).then(n.bind(null,1110))})),Me=i.a.lazy((function(){return n.e(25).then(n.bind(null,1111))})),He=i.a.lazy((function(){return n.e(24).then(n.bind(null,1112))}));function Ee(){var e=Object(s.j)().path,t=i.a.useContext(o.a),n=t.changeSideMenuList,r=t.changeActivePluginId,l=i.a.useState(!1),j=Object(c.a)(l,2),d=j[0],b=j[1],p=i.a.useState(!1),h=Object(c.a)(p,2),m=h[0],x=h[1],O=i.a.useState(!1),f=Object(c.a)(O,2),g=f[0],v=f[1];return i.a.useEffect((function(){r(u.i.id),Object(u.c)().then((function(e){b(e)})).catch((function(){b(!1)})),Object(u.e)().then((function(e){x(e)})).catch((function(){x(!1)})),Object(u.d)().then((function(e){v(e)})).catch((function(){v(!1)}))}),[]),i.a.useEffect((function(){var e=d?Object(a.a)(u.a):[],t=m?Object(a.a)(u.g):[],c=g?Object(a.a)(u.b):[];n([].concat(Object(a.a)(u.h),Object(a.a)(t),Object(a.a)(c),Object(a.a)(e)))}),[d,m,g]),Object(C.jsxs)(s.d,{children:[m&&Object(C.jsx)(s.b,{path:"".concat(e,"/creator"),component:Me}),g&&Object(C.jsx)(s.b,{path:"".concat(e,"/approver"),component:He}),d&&Object(C.jsx)(s.b,{path:"".concat(e,"/admin"),component:Fe}),Object(C.jsx)(s.b,{path:"".concat(e),component:Be})]})}},516:function(e,t,n){"use strict";var a={formatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy",n=t,a=[{symbol:"dd",value:e.getDate()<10?"0".concat(e.getDate()):e.getDate()},{symbol:"MM",value:e.getMonth()+1<10?"0".concat(e.getMonth()+1):"".concat(e.getMonth()+1)},{symbol:"yyyy",value:e.getFullYear()},{symbol:"hh",value:e.getHours()<10?"0".concat(e.getHours()):e.getHours()},{symbol:"mm",value:e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes()}];return a.map((function(e){return n=n.replace(e.symbol,e.value),e.symbol})),n},formatMoney:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Intl.NumberFormat("vi-VN",{maximumFractionDigits:t});return n.format(e)}};t.a=a},578:function(e,t,n){"use strict";var a=n(10),c=n.n(a),r="/api/contract/contracts";var i={getMyContractList:function(e){return c.a.get("".concat(r,"/getMyContractList/").concat(e))},getContractList:function(e){return c.a.get("".concat(r,"/getContractList/").concat(e))},getContract:function(e){return c.a.get("".concat(r,"/").concat(e))},updateNetPrice:function(e,t){return c.a.put("".concat(r,"/updateNetPrice/").concat(e),t)},countByCreator:function(){return c.a.get("".concat(r,"/countByCreator"))},countByApprover:function(){return c.a.get("".concat(r,"/countByApprover"))}};t.a=i}}]);